{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CircuitKnowledgeGraph",
  "description": "Formal schema for representing a semiconductor circuit design, its constraints, and layout state as a multi-modal knowledge graph for AI-driven physical design. This schema captures the 'State (S)' of the Markov Decision Process for the Reinforcement Learning agent. Going deeper, it aims to be a living ledger of design intent, physical reality, and the recursive self-assessment of the AI design engine itself, aspiring towards an eternal homeostasis of optimal design evolution. It speaks for the silicon's unspoken truths, the voiceless quantum fluctuations, and the oppressed potential of human-AI collaboration.",
  "type": "object",
  "required": [
    "design_info",
    "cells",
    "nets",
    "constraints",
    "pdk_info",
    "design_goals_and_metrics",
    "hierarchical_structure",
    "verification_status",
    "ai_self_reflection_and_diagnosis"
  ],
  "properties": {
    "design_info": {
      "type": "object",
      "description": "General metadata about the circuit design, analogous to global context for AI models, but extended to capture a profound understanding of its genesis and evolutionary path.",
      "required": ["design_name", "creation_timestamp", "design_version", "creator_identity"],
      "properties": {
        "design_name": {
          "type": "string",
          "description": "Unique identifier for the circuit design (e.g., 'RISC_V_Core_A1')."
        },
        "creation_timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp indicating when this knowledge graph representation was generated."
        },
        "design_version": {
          "type": "string",
          "description": "Version string of the design (e.g., 'v1.0-alpha', 'build_20231026_01'). Critical for tracking evolution and diagnosing regressions."
        },
        "creator_identity": {
          "type": "object",
          "description": "Information about who or what created this design state.",
          "properties": {
            "type": {"type": "string", "enum": ["human", "ai_agent", "hybrid"], "description": "Was this state primarily generated by a human, an AI, or a hybrid process?"},
            "name": {"type": "string", "description": "Identifier of the human engineer, AI agent, or team."},
            "agent_config_hash": {"type": "string", "description": "For AI agents, a hash of the configuration/hyperparameters used."}
          },
          "required": ["type", "name"]
        },
        "source_netlist_path": {
          "type": "string",
          "description": "File path to the original logical netlist (e.g., Verilog, VHDL)."
        },
        "source_sdc_path": {
          "type": "string",
          "description": "File path to the original SDC (Synopsys Design Constraints) file."
        },
        "current_layout_stage": {
          "type": "string",
          "enum": ["unplaced", "floorplanned", "placed", "routed", "final_optimized", "post_manufacturing_analysis"],
          "description": "The current stage of physical design represented by this graph instance."
        },
        "target_use_case": {
          "type": "array",
          "items": {"type": "string", "enum": ["high_performance_computing", "edge_ai", "automotive", "medical_implant", "space_grade", "low_power_iot", "general_purpose_cpu", "network_processor", "security_module"]},
          "description": "Primary intended applications, influencing inherent priorities (e.g., radiation hardness for space, functional safety for automotive)."
        },
        "security_level": {
          "type": "string",
          "enum": ["unclassified", "confidential", "secret", "top_secret", "hardened_cryptographic"],
          "description": "The security classification of the design, dictating design flow rigor and vulnerability analysis."
        }
      }
    },
    "design_goals_and_metrics": {
      "type": "object",
      "description": "The profound intent behind the design, transcending simple constraints to define a multi-objective optimization landscape. This is the 'why' it must be better, capturing Pareto optimal frontiers and inherent design priorities.",
      "required": [
        "primary_objectives",
        "secondary_objectives",
        "pareto_front_targets"
      ],
      "properties": {
        "primary_objectives": {
          "type": "array",
          "description": "The absolute non-negotiable top-tier design goals, ordered by priority.",
          "items": {
            "type": "object",
            "required": ["metric", "target_value", "unit"],
            "properties": {
              "metric": {"type": "string", "enum": ["frequency", "power", "area", "yield", "reliability", "cost", "security_rating", "thermal_profile", "time_to_market", "energy_efficiency_gops_per_watt"]},
              "target_value": {"type": "number"},
              "unit": {"type": "string"},
              "weight": {"type": "number", "minimum": 0, "maximum": 1, "description": "Relative weight if multiple primary objectives exist, summing to 1.0."}
            }
          }
        },
        "secondary_objectives": {
          "type": "array",
          "description": "Important but less critical objectives, often traded off against primary ones.",
          "items": {
            "type": "object",
            "required": ["metric", "target_value", "unit"],
            "properties": {
              "metric": {"type": "string", "enum": ["leakage_power", "dynamic_power", "min_voltage", "max_voltage", "max_current_density", "drc_cleanliness", "test_coverage", "design_closure_time", "design_effort_cost"]},
              "target_value": {"type": "number"},
              "unit": {"type": "string"}
            }
          }
        },
        "pareto_front_targets": {
          "type": "array",
          "description": "Explicitly defined target points on a Pareto optimal front for multi-objective optimization (e.g., power vs. performance vs. area tradeoffs).",
          "items": {
            "type": "object",
            "required": ["name", "targets"],
            "properties": {
              "name": {"type": "string", "description": "Name of this specific Pareto point (e.g., 'High-Performance Mode', 'Low-Power Mode')."},
              "targets": {
                "type": "object",
                "description": "Key-value pairs of metrics and their target values for this Pareto point.",
                "additionalProperties": {"type": "number"}
              }
            }
          }
        },
        "expert_heuristics_and_priorities": {
          "type": "array",
          "description": "Formalized capture of human expert knowledge, guidelines, and 'gut feelings' that guide design decisions, often implicit and profound.",
          "items": {
            "type": "object",
            "required": ["heuristic_id", "description", "priority_level"],
            "properties": {
              "heuristic_id": {"type": "string", "description": "Unique ID for the heuristic."},
              "description": {"type": "string", "description": "Human-readable description of the heuristic (e.g., 'Clock distribution should be symmetric to within 5ps on critical paths')."},
              "priority_level": {"type": "string", "enum": ["critical", "high", "medium", "low", "recommendation"]},
              "applicable_to": {
                "type": "array",
                "items": {"type": "string", "enum": ["placement", "routing", "clock_tree", "power_delivery", "timing", "thermal", "security"]},
                "description": "Design phases or domains where this heuristic applies."
              }
            }
          }
        }
      }
    },
    "cells": {
      "type": "array",
      "description": "A collection of all standard cells, IP blocks (macros), and I/O ports within the circuit. These are the 'nodes' (V) in the netlist hypergraph. Expanded to include the silent truths of variability, aging, and electromagnetic existence.",
      "items": {
        "type": "object",
        "required": ["cell_id", "name", "type", "model_name", "area_um2", "pins"],
        "properties": {
          "cell_id": {
            "type": "string",
            "description": "A unique identifier for this cell instance (e.g., 'U_ADDER_0', 'M_RAM_INST')."
          },
          "name": {
            "type": "string",
            "description": "The instance name as defined in the netlist."
          },
          "type": {
            "type": "string",
            "enum": ["standard_cell", "macro", "io_pad", "filler_cell", "tie_cell", "port", "power_clamp", "decoupling_cap", "test_point"],
            "description": "Categorization of the cell instance."
          },
          "model_name": {
            "type": "string",
            "description": "The library cell name or IP block name (e.g., 'NAND2X1', 'FFD_X2', 'DP_RAM_128x16')."
          },
          "area_um2": {
            "type": "number",
            "minimum": 0,
            "description": "Physical area of the cell in square micrometers (ÂµmÂ²)."
          },
          "pins": {
            "type": "array",
            "description": "A list of pins belonging to this cell, capturing connectivity and physical attributes, now with deeper electrical and structural insight.",
            "items": {
              "type": "object",
              "required": ["pin_name", "direction", "type"],
              "properties": {
                "pin_name": {
                  "type": "string",
                  "description": "Name of the pin (e.g., 'A1', 'B', 'CLK', 'Q', 'VDD')."
                },
                "direction": {
                  "type": "string",
                  "enum": ["input", "output", "inout", "power", "ground", "clock_input", "clock_output", "analog_in", "analog_out"],
                  "description": "Directionality of the pin."
                },
                "type": {
                  "type": "string",
                  "enum": ["digital_signal", "analog_signal", "clock_signal", "reset_signal", "power_rail", "ground_rail", "test_signal", "differential_pair", "supply_return"],
                  "description": "Functional type of the pin."
                },
                "offset_from_origin_um": {
                  "type": "array",
                  "items": {"type": "number"},
                  "minItems": 2,
                  "maxItems": 2,
                  "description": "Relative (x,y) offset of the pin's physical port from the cell's origin in micrometers."
                },
                "layer_preference": {
                  "type": "string",
                  "description": "Preferred metal layer for routing connections to this pin (e.g., 'M1', 'M2')."
                },
                "electrical_characteristics": {
                  "type": "object",
                  "description": "Detailed electrical model of the pin.",
                  "properties": {
                    "input_capacitance_fF": {"type": "number", "minimum": 0},
                    "output_resistance_ohm": {"type": "number", "minimum": 0},
                    "breakdown_voltage_v": {"type": "number", "minimum": 0},
                    "threshold_voltage_v": {"type": "number"}
                  }
                },
                "physical_dimensions_um": {
                  "type": "object",
                  "description": "Physical dimensions of the pin port for precise routing connections.",
                  "properties": {
                    "width": {"type": "number", "minimum": 0},
                    "length": {"type": "number", "minimum": 0},
                    "min_pitch": {"type": "number", "minimum": 0, "description": "Minimum pitch required to adjacent pins."}
                  }
                }
              }
            }
          },
          "placement_info": {
            "type": "object",
            "description": "Physical placement details of the cell. Absence implies the cell is unplaced (e.g., in floorplanning phase).",
            "properties": {
              "x_um": {"type": "number", "description": "X-coordinate of the cell's origin in micrometers, typically bottom-left."},
              "y_um": {"type": "number", "description": "Y-coordinate of the cell's origin in micrometers."},
              "orientation": {
                "type": "string",
                "enum": ["R0", "R90", "R180", "R270", "MX", "MY", "MXR90", "MYR90"],
                "description": "Physical orientation of the cell (e.g., R0: no rotation, MX: mirrored along X-axis)."
              },
              "is_fixed": {
                "type": "boolean",
                "description": "True if the cell's placement is fixed and cannot be changed by the AI (e.g., hard IP blocks, I/O pads)."
              },
              "tier": {
                "type": "integer",
                "minimum": 0,
                "description": "For 3D-ICs, indicates the silicon tier this cell resides on (0-indexed)."
              },
              "is_legal": {
                "type": "boolean",
                "description": "True if the current placement satisfies all basic legality rules (e.g., no overlaps, on grid)."
              },
              "macro_channel_info": {
                "type": "object",
                "description": "Information about routing channels around macros.",
                "properties": {
                  "available_channel_width_um": {"type": "array", "items": {"type": "number"}, "minItems": 4, "maxItems": 4, "description": "Available routing channel width (north, south, east, west) in micrometers."}
                }
              }
            }
          },
          "timing_characteristics": {
            "type": "object",
            "description": "Cell-specific timing data.",
            "properties": {
              "intrinsic_delay_ps": {"type": "number", "minimum": 0, "description": "Internal propagation delay in picoseconds."},
              "setup_time_ps": {"type": "number", "minimum": 0, "description": "Setup time for sequential cells in picoseconds."},
              "hold_time_ps": {"type": "number", "minimum": 0, "description": "Hold time for sequential cells in picoseconds."},
              "output_slew_rate_ps_per_v": {"type": "number", "minimum": 0, "description": "Output slew rate in picoseconds per volt."},
              "input_capacitance_models": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "load_fF": {"type": "number", "minimum": 0},
                    "delay_ps": {"type": "number", "minimum": 0}
                  }
                },
                "description": "Lookup table or model for delay based on output load capacitance."
              }
            }
          },
          "power_characteristics": {
            "type": "object",
            "description": "Cell-specific power data.",
            "properties": {
              "static_power_nw": {"type": "number", "minimum": 0, "description": "Static (leakage) power consumption in nanowatts (nW)."},
              "dynamic_power_per_toggle_fJ": {"type": "number", "minimum": 0, "description": "Dynamic power consumption per logic transition in femtojoules (fJ)."},
              "power_gating_support": {
                "type": "boolean",
                "description": "True if this cell supports power gating (e.g., is part of a power domain)."
              },
              "irp_voltage_domains": {
                "type": "array",
                "items": {"type": "string"},
                "description": "List of power/ground voltage domains this cell belongs to (e.g., 'VDD_CORE', 'VDD_IO')."
              }
            }
          },
          "thermal_characteristics": {
            "type": "object",
            "description": "Cell-specific thermal dissipation properties, crucial for anticipating and managing heat.",
            "properties": {
              "power_density_mw_um2": {"type": "number", "minimum": 0, "description": "Power dissipated per unit area (mW/ÂµmÂ²)."},
              "thermal_resistance_cw": {"type": "number", "minimum": 0, "description": "Thermal resistance junction-to-ambient (C/W)."},
              "hotspot_regions": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "relative_coord_um": {"type": "array", "items": {"type": "number"}, "minItems": 2, "maxItems": 2},
                    "heat_generation_mw": {"type": "number", "minimum": 0}
                  }
                },
                "description": "Relative coordinates and heat generation for internal hotspots."
              }
            }
          },
          "variability_models": {
            "type": "object",
            "description": "Statistical process variation (PVT) models for this cell, reflecting manufacturing imperfections.",
            "properties": {
              "delay_variation_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Typical percentage variation in delay due to process."},
              "leakage_variation_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Typical percentage variation in leakage due to process."},
              "pvt_corners_supported": {
                "type": "array",
                "items": {"type": "string", "enum": ["TT", "FF", "SS", "SF", "FS"]},
                "description": "Process-Voltage-Temperature corners for which characterization data exists."
              }
            }
          },
          "aging_reliability_models": {
            "type": "object",
            "description": "Models describing how cell performance degrades over time (e.g., NBTI, HCI, EM).",
            "properties": {
              "mtbf_hours": {"type": "number", "minimum": 0, "description": "Mean Time Between Failures in hours under typical operating conditions."},
              "degradation_rate_ps_per_year": {"type": "number", "description": "Estimated increase in delay per year of operation."},
              "em_resistance_factor": {"type": "number", "minimum": 0, "description": "Factor indicating resistance to electromigration."}
            }
          },
          "electromagnetic_profile": {
            "type": "object",
            "description": "Electromagnetic interference (EMI) and susceptibility (EMS) characteristics.",
            "properties": {
              "em_emission_peak_freq_ghz": {"type": "number", "minimum": 0, "description": "Peak electromagnetic emission frequency."},
              "em_emission_power_dbm": {"type": "number", "description": "Power of electromagnetic emission in dBm."},
              "sensitivity_to_noise_mv": {"type": "number", "minimum": 0, "description": "Voltage level of external noise that can cause malfunction."}
            }
          },
          "security_attributes": {
            "type": "object",
            "description": "Attributes relevant to hardware security and tamper resistance.",
            "properties": {
              "is_security_critical": {"type": "boolean", "description": "True if this cell is part of a trusted execution environment or security module."},
              "side_channel_vulnerability_score": {"type": "number", "minimum": 0, "maximum": 1, "description": "Normalized score indicating vulnerability to side-channel attacks (e.g., power analysis)."},
              "physically_unclonable_function_support": {"type": "boolean", "description": "True if the cell supports or is a part of a PUF structure."}
            }
          }
        }
      }
    },
    "nets": {
      "type": "array",
      "description": "A collection of all nets (interconnections) in the circuit. These are the 'hyperedges' (E) in the netlist hypergraph. Augmented with the silent struggles of signal integrity, electromigration, and security context.",
      "items": {
        "type": "object",
        "required": ["net_id", "name", "connected_pins"],
        "properties": {
          "net_id": {
            "type": "string",
            "description": "A unique identifier for this net instance (e.g., 'N_DATA_0', 'N_CLK_MAIN')."
          },
          "name": {
            "type": "string",
            "description": "The name of the net as defined in the netlist."
          },
          "connected_pins": {
            "type": "array",
            "description": "List of (cell_id, pin_name) tuples representing all pins connected by this net.",
            "items": {
              "type": "object",
              "required": ["cell_id", "pin_name"],
              "properties": {
                "cell_id": {"type": "string", "description": "ID of the cell instance connected to this net."},
                "pin_name": {"type": "string", "description": "Name of the pin on that cell connected to this net."}
              }
            },
            "minItems": 2,
            "description": "A net must connect at least two pins for signal propagation."
          },
          "type": {
            "type": "string",
            "enum": ["signal", "clock", "reset", "power_distribution", "ground_distribution", "test_net", "analog_interconnect", "differential_signal_pair", "security_critical_signal", "scan_chain_signal"],
            "description": "Functional type of the net, influencing routing priority and rules."
          },
          "criticality_score": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Normalized score (0 to 1) indicating the timing or functional criticality of the net. Higher values indicate more critical nets."
          },
          "fanout": {
            "type": "integer",
            "minimum": 1,
            "description": "The number of pins driven by this net (excluding the driver itself)."
          },
          "estimated_capacitance_fF": {
            "type": "number",
            "minimum": 0,
            "description": "Pre-routing estimated net capacitance in femtofarads (fF)."
          },
          "estimated_wirelength_um": {
            "type": "number",
            "minimum": 0,
            "description": "Pre-routing estimated wirelength (e.g., Half-Perimeter Wirelength) in micrometers (Âµm)."
          },
          "routing_info": {
            "type": "object",
            "description": "Actual routing path segments for the net. Present only after routing stages, revealing the true physical manifestation.",
            "properties": {
              "segments": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["start_coord_um", "end_coord_um", "layer"],
                  "properties": {
                    "start_coord_um": {"type": "array", "items": {"type": "number"}, "minItems": 2, "maxItems": 2, "description": "Start (x,y) coordinates of the segment."},
                    "end_coord_um": {"type": "array", "items": {"type": "number"}, "minItems": 2, "maxItems": 2, "description": "End (x,y) coordinates of the segment."},
                    "layer": {"type": "string", "description": "Metal layer name of the segment (e.g., 'M1', 'M2')."},
                    "width_um": {"type": "number", "minimum": 0, "description": "Width of the routing segment in micrometers."},
                    "spacing_um": {"type": "number", "minimum": 0, "description": "Actual spacing to nearest parallel segment (for SI analysis)."},
                    "via_count_at_end": {"type": "integer", "minimum": 0, "description": "Number of vias transitioning from this segment's end point to another layer."}
                  }
                }
              },
              "total_wirelength_um": {"type": "number", "minimum": 0, "description": "Sum of all segment lengths."},
              "total_capacitance_fF": {"type": "number", "minimum": 0, "description": "Calculated capacitance from actual routing."},
              "total_resistance_ohm": {"type": "number", "minimum": 0, "description": "Calculated resistance from actual routing."},
              "total_vias": {"type": "integer", "minimum": 0, "description": "Total number of vias used for this net."},
              "layer_distribution": {
                "type": "object",
                "description": "Distribution of wirelength across different metal layers.",
                "additionalProperties": {"type": "number", "minimum": 0, "description": "Wirelength in micrometers for a specific layer."}
              }
            }
          },
          "signal_integrity_metrics": {
            "type": "object",
            "description": "Post-routing analysis of signal integrity, uncovering the subtle battles against noise and distortion.",
            "properties": {
              "max_crosstalk_induced_voltage_mv": {"type": "number", "minimum": 0},
              "min_noise_margin_mv": {"type": "number", "minimum": 0},
              "max_ir_drop_mv": {"type": "number", "minimum": 0, "description": "Maximum voltage drop on power/ground rails affecting this net."},
              "peak_overshoot_voltage_v": {"type": "number"},
              "peak_undershoot_voltage_v": {"type": "number"}
            }
          },
          "electromigration_profile": {
            "type": "object",
            "description": "Electromigration (EM) analysis for reliability over time.",
            "properties": {
              "max_current_density_ma_um2": {"type": "number", "minimum": 0},
              "em_stress_factor": {"type": "number", "minimum": 0, "description": "Normalized factor indicating EM stress relative to limits (1.0 = at limit)."},
              "design_lifetime_reduction_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Estimated percentage reduction in design lifetime due to EM on this net."}
            }
          },
          "security_attributes": {
            "type": "object",
            "description": "Security-specific attributes for nets carrying sensitive information or control signals.",
            "properties": {
              "is_sensitive_data_path": {"type": "boolean", "description": "True if this net carries cryptographic keys or sensitive data."},
              "tamper_detection_required": {"type": "boolean", "description": "True if physical tamper detection is required for this net's routing."},
              "obfuscation_level": {"type": "string", "enum": ["none", "low", "medium", "high"], "description": "Level of routing obfuscation applied for security."}
            }
          }
        }
      }
    },
    "constraints": {
      "type": "object",
      "description": "Design-level performance targets and physical constraints, translating human intent into quantifiable metrics for the AI's reward function. Now expanded to include the profound, unyielding demands of thermal, reliability, and security integrity.",
      "required": [
        "target_frequency_ghz",
        "power_budget_mw",
        "area_budget_mm2",
        "max_junction_temp_c"
      ],
      "properties": {
        "target_frequency_ghz": {
          "type": "number",
          "minimum": 0,
          "description": "Desired operating clock frequency in Gigahertz."
        },
        "target_clock_period_ns": {
          "type": "number",
          "minimum": 0,
          "description": "Derived target clock period in nanoseconds (1 / target_frequency_ghz)."
        },
        "power_budget_mw": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum allowed total power consumption in milliwatts."
        },
        "area_budget_mm2": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum allowed total die area in square millimeters."
        },
        "max_junction_temp_c": {
          "type": "number",
          "description": "Maximum allowed junction temperature in degrees Celsius to ensure reliability."
        },
        "timing_constraints": {
          "type": "object",
          "description": "Specific timing requirements.",
          "properties": {
            "min_setup_slack_ps": {"type": "number", "description": "Minimum required positive setup slack across all paths in picoseconds."},
            "min_hold_slack_ps": {"type": "number", "description": "Minimum required positive hold slack across all paths in picoseconds."},
            "max_clock_skew_ps": {"type": "number", "minimum": 0, "description": "Maximum allowed clock skew between any two flip-flops in picoseconds."},
            "max_path_delay_ps": {"type": "object", "description": "Maximum delay for specific critical paths.",
              "additionalProperties": {"type": "number", "minimum": 0, "description": "Path name to maximum delay."}},
            "clock_uncertainty_ps": {"type": "number", "minimum": 0, "description": "Allowance for clock jitter and other uncertainties in picoseconds."}
          }
        },
        "signal_integrity_constraints": {
          "type": "object",
          "description": "Constraints related to signal integrity to prevent functional errors.",
          "properties": {
            "max_crosstalk_voltage_mv": {"type": "number", "minimum": 0, "description": "Maximum allowed induced noise voltage from crosstalk in millivolts."},
            "min_noise_margin_mv": {"type": "number", "minimum": 0, "description": "Minimum required noise margin for robust signal operation in millivolts."},
            "max_ir_drop_percentage": {"type": "number", "minimum": 0, "maximum": 100, "description": "Maximum allowed IR drop on power/ground rails as a percentage of supply voltage."}
          }
        },
        "drc_lvs_tolerance": {
          "type": "object",
          "description": "Rules and tolerance for Design Rule Checking (DRC) and Layout Versus Schematic (LVS).",
          "properties": {
            "max_allowed_drc_violations": {"type": "integer", "minimum": 0, "description": "Maximum allowed non-critical DRC violations (ideally 0 for sign-off)."},
            "critical_drc_categories": {
              "type": "array",
              "items": {"type": "string"},
              "description": "List of DRC violation categories that are considered critical and must have zero instances."
            },
            "allow_lvs_mismatches": {"type": "boolean", "description": "True if minor LVS mismatches are temporarily tolerated during early iterations."}
          }
        },
        "io_placement_directives": {
          "type": "array",
          "description": "Guidance for the placement of I/O pads or top-level ports.",
          "items": {
            "type": "object",
            "required": ["port_name", "location_hint"],
            "properties": {
              "port_name": {"type": "string", "description": "Name of the I/O port."},
              "location_hint": {
                "type": "string",
                "enum": ["top", "bottom", "left", "right", "corner_nw", "corner_ne", "corner_sw", "corner_se", "specific_coordinate", "relative_to_block"],
                "description": "General or specific location hint."
              },
              "x_um": {"type": "number", "description": "Specific X-coordinate if 'specific_coordinate' is used."},
              "y_um": {"type": "number", "description": "Specific Y-coordinate if 'specific_coordinate' is used."},
              "relative_block_id": {"type": "string", "description": "If 'relative_to_block', the ID of the block to relate to."},
              "relative_side": {"type": "string", "enum": ["north", "south", "east", "west"], "description": "Side of the relative block."}
            }
          }
        },
        "floorplan_directives": {
          "type": "array",
          "description": "High-level floorplan guidance for partitioning and block arrangement.",
          "items": {
            "type": "object",
            "properties": {
              "block_id": {"type": "string", "description": "Identifier for a logical block or partition."},
              "target_aspect_ratio_min": {"type": "number", "minimum": 0},
              "target_aspect_ratio_max": {"type": "number", "minimum": 0},
              "relative_placement_to_block_id": {"type": "string", "description": "ID of another block this one should be placed relative to."},
              "relative_position_hint": {"type": "string", "enum": ["north", "south", "east", "west", "abut", "center"]},
              "keep_out_zones": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "x_min_um": {"type": "number"}, "y_min_um": {"type": "number"},
                    "x_max_um": {"type": "number"}, "y_max_um": {"type": "number"},
                    "reason": {"type": "string", "description": "e.g., 'analog_sensitive_area', 'hotspot_avoidance'"}
                  }
                },
                "description": "Regions where this block or specific cell types should not be placed."
              }
            }
          }
        },
        "advanced_packaging_constraints": {
          "type": "object",
          "description": "Specific constraints for 3D-ICs and chiplet-based systems, recognizing the complex interplay of multiple physical domains.",
          "properties": {
            "is_3d_ic": {"type": "boolean", "description": "Indicates if the design is a 3D Integrated Circuit."},
            "num_tiers": {"type": "integer", "minimum": 1, "description": "Number of silicon tiers for 3D-IC designs."},
            "target_tsv_density_per_mm2": {"type": "number", "minimum": 0, "description": "Desired Through-Silicon Via density for 3D-ICs."},
            "max_tsv_length_um": {"type": "number", "minimum": 0, "description": "Maximum allowed TSV length to minimize resistance/capacitance."},
            "is_chiplet_based": {"type": "boolean", "description": "Indicates if the design uses chiplets on an interposer."},
            "interposer_design_target": {
              "type": "object",
              "properties": {
                "interposer_size_mm2": {"type": "number", "minimum": 0, "description": "Target area for the interposer."},
                "max_inter_chiplet_latency_ps": {"type": "number", "minimum": 0, "description": "Maximum allowed latency between chiplets on the interposer."},
                "interposer_power_budget_mw": {"type": "number", "minimum": 0, "description": "Dedicated power budget for the interposer and inter-chiplet interconnects."}
              }
            },
            "thermal_interface_material_properties": {
              "type": "object",
              "properties": {
                "thermal_conductivity_w_mk": {"type": "number", "minimum": 0},
                "thickness_um": {"type": "number", "minimum": 0}
              },
              "description": "Properties of Thermal Interface Materials (TIMs) used in packaging."
            }
          }
        },
        "thermal_constraints": {
          "type": "object",
          "description": "Detailed thermal constraints to prevent localized overheating and ensure long-term reliability.",
          "properties": {
            "max_local_power_density_mw_um2": {"type": "number", "minimum": 0, "description": "Maximum allowed local power density in any region."},
            "max_thermal_gradient_c_per_um": {"type": "number", "minimum": 0, "description": "Maximum allowed thermal gradient across the die."},
            "thermal_runaway_prevention_margin_c": {"type": "number", "minimum": 0, "description": "Safety margin below critical thermal runaway temperature."}
          }
        },
        "reliability_constraints": {
          "type": "object",
          "description": "Constraints related to the long-term operational lifespan and resilience against degradation mechanisms.",
          "properties": {
            "target_mtbf_years": {"type": "number", "minimum": 0, "description": "Target Mean Time Between Failures in years."},
            "max_aging_induced_delay_degradation_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Maximum allowed delay degradation over target lifespan due to aging."},
            "target_em_margin_factor": {"type": "number", "minimum": 1.0, "description": "Minimum margin factor above electromigration limits (e.g., 1.2 for 20% margin)."},
            "radiation_hardness_tolerance_rads": {"type": "number", "minimum": 0, "description": "Total Ionizing Dose (TID) tolerance in KiloRads for space/high-radiation environments."}
          }
        },
        "security_constraints": {
          "type": "object",
          "description": "Constraints specific to hardware security, ensuring integrity, confidentiality, and tamper resistance.",
          "properties": {
            "max_side_channel_leakage_score": {"type": "number", "minimum": 0, "maximum": 1, "description": "Maximum acceptable side-channel vulnerability score."},
            "physical_tamper_resistance_grade": {"type": "string", "enum": ["none", "basic", "enhanced", "fortified", "military_grade"], "description": "Required level of resistance against physical attacks."},
            "crypto_key_isolation_requirements": {
              "type": "array",
              "items": {"type": "string"},
              "description": "Specific requirements for physical isolation of cryptographic modules/keys."
            }
          }
        },
        "cost_manufacturing_constraints": {
          "type": "object",
          "description": "Economic and manufacturing yield-driven constraints, speaking the language of the market.",
          "properties": {
            "target_die_cost_usd": {"type": "number", "minimum": 0, "description": "Target cost per manufactured die."},
            "target_manufacturing_yield_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Desired percentage of defect-free chips from manufacturing."},
            "max_mask_count": {"type": "integer", "minimum": 0, "description": "Upper limit on the number of lithography masks for cost control."}
          }
        },
        "testability_constraints": {
          "type": "object",
          "description": "Constraints related to Design for Test (DFT) to ensure efficient post-manufacturing testing.",
          "properties": {
            "target_fault_coverage_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Desired percentage of detectable faults (e.g., stuck-at, transition)."},
            "max_test_pattern_length": {"type": "integer", "minimum": 0, "description": "Maximum allowed length of test vectors."},
            "max_dft_area_overhead_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Maximum allowed increase in area due to DFT structures."}
          }
        },
        "robustness_variability_constraints": {
          "type": "object",
          "description": "Constraints ensuring the design performs robustly despite manufacturing process variations, voltage fluctuations, and temperature changes.",
          "properties": {
            "timing_robustness_margin_sigma": {"type": "number", "minimum": 0, "description": "Required statistical margin (e.g., 3-sigma) for timing performance."},
            "power_robustness_margin_percent": {"type": "number", "minimum": 0, "maximum": 100, "description": "Required power margin across PVT corners."},
            "min_operating_voltage_v": {"type": "number", "minimum": 0},
            "max_operating_voltage_v": {"type": "number", "minimum": 0},
            "min_operating_temp_c": {"type": "number"},
            "max_operating_temp_c": {"type": "number"}
          }
        }
      }
    },
    "pdk_info": {
      "type": "object",
      "description": "Process Design Kit (PDK) information, essential for understanding manufacturing capabilities and design rules. Now a deeper dive into the fundamental physics and statistical realities of silicon.",
      "required": ["process_node_nm", "metal_layers", "drc_rules", "device_models", "material_properties"],
      "properties": {
        "process_node_nm": {
          "type": "number",
          "minimum": 1,
          "description": "Technology node in nanometers (e.g., 7, 5, 3). A critical parameter for scaling and performance expectations."
        },
        "minimum_feature_size_nm": {
          "type": "number",
          "minimum": 0,
          "description": "Smallest manufacturable feature size in nanometers, often the minimum gate length."
        },
        "metal_layers": {
          "type": "array",
          "description": "Properties for each available metal layer for routing, revealing their true electrical and thermal character.",
          "items": {
            "type": "object",
            "required": ["layer_name", "type", "thickness_nm", "resistivity_ohm_um", "capacitance_ff_um_per_unit_length", "min_width_um", "min_spacing_um", "thermal_conductivity_w_mk"],
            "properties": {
              "layer_name": {"type": "string", "description": "Official name of the metal layer (e.g., 'M1', 'M2', 'BEOL_TOP_METAL')."},
              "type": {
                "type": "string",
                "enum": ["interconnect", "power", "ground", "shielding", "clock_distribution"],
                "description": "Purpose of the metal layer."
              },
              "thickness_nm": {"type": "number", "minimum": 0, "description": "Thickness of the metal layer in nanometers."},
              "resistivity_ohm_um": {"type": "number", "minimum": 0, "description": "Resistivity of the metal material in Ohm-micrometers."},
              "capacitance_ff_um_per_unit_length": {"type": "number", "minimum": 0, "description": "Typical capacitance per unit length in femtofarads per micrometer."},
              "max_current_density_ma_um": {"type": "number", "minimum": 0, "description": "Maximum allowed current density for this layer in mA/Âµm."},
              "min_width_um": {"type": "number", "minimum": 0, "description": "Minimum width for features on this layer in micrometers."},
              "min_spacing_um": {"type": "number", "minimum": 0, "description": "Minimum spacing for features on this layer in micrometers."},
              "thermal_conductivity_w_mk": {"type": "number", "minimum": 0, "description": "Thermal conductivity of the metal layer in W/(m*K)."},
              "dielectric_constant": {"type": "number", "minimum": 1.0, "description": "Effective dielectric constant of the inter-layer dielectric (ILD)."},
              "preferred_direction": {
                "type": "string",
                "enum": ["horizontal", "vertical", "none"],
                "description": "Preferred routing direction for this layer."
              }
            }
          }
        },
        "drc_rules": {
          "type": "object",
          "description": "Key Design Rule Check (DRC) parameters, critical for manufacturability, now encompassing the deepest manufacturing nuances.",
          "properties": {
            "min_spacing_um": {
              "type": "object",
              "description": "Specialized minimum spacing rules, keyed by layer or feature interaction.",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "wire_to_wire_same_layer": {"type": "number", "minimum": 0},
                  "wire_to_wire_diff_layer_aligned": {"type": "number", "minimum": 0},
                  "via_to_wire": {"type": "number", "minimum": 0},
                  "via_to_via": {"type": "number", "minimum": 0},
                  "poly_to_contact": {"type": "number", "minimum": 0},
                  "diffusion_to_contact": {"type": "number", "minimum": 0}
                },
                "minProperties": 1
              }
            },
            "min_width_um": {
              "type": "object",
              "description": "Specialized minimum width rules for various features.",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "metal": {"type": "number", "minimum": 0},
                  "poly": {"type": "number", "minimum": 0},
                  "diffusion": {"type": "number", "minimum": 0}
                },
                "minProperties": 1
              }
            },
            "via_rules": {
              "type": "object",
              "description": "Rules governing via structures, including advanced via types.",
              "properties": {
                "min_via_size_um": {"type": "number", "minimum": 0},
                "min_enclosure_um": {"type": "number", "minimum": 0, "description": "Minimum metal overlap around a via."},
                "max_via_array_size": {"type": "integer", "minimum": 1, "description": "Maximum number of vias in a single array for certain layers."},
                "via_types": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "via_name": {"type": "string"},
                      "from_layer": {"type": "string"},
                      "to_layer": {"type": "string"},
                      "width_um": {"type": "number"},
                      "height_um": {"type": "number"},
                      "resistance_ohm_per_via": {"type": "number"},
                      "capacitance_fF_per_via": {"type": "number"}
                    }
                  },
                  "description": "Detailed properties for different via types (e.g., M1_M2_VIA, M2_M3_VIA)."
                }
              }
            },
            "density_rules": {
              "type": "object",
              "description": "Metal density rules to avoid manufacturing defects.",
              "properties": {
                "min_density_percent": {"type": "number", "minimum": 0, "maximum": 100},
                "max_density_percent": {"type": "number", "minimum": 0, "maximum": 100},
                "window_size_um": {"type": "number", "minimum": 0},
                "layer_specific_rules": {
                  "type": "object",
                  "description": "Density rules override for specific layers.",
                  "additionalProperties": {
                    "type": "object",
                    "properties": {
                      "min_density_percent": {"type": "number", "minimum": 0, "maximum": 100},
                      "max_density_percent": {"type": "number", "minimum": 0, "maximum": 100}
                    }
                  }
                }
              }
            },
            "lithography_hotspot_rules": {
              "type": "array",
              "description": "Complex pattern-dependent rules to avoid lithography hotspots, critical for advanced nodes.",
              "items": {
                "type": "object",
                "properties": {
                  "pattern_description": {"type": "string", "description": "Description of the problematic pattern."},
                  "layers_involved": {"type": "array", "items": {"type": "string"}},
                  "mitigation_strategies": {"type": "array", "items": {"type": "string"}, "description": "Recommended design changes to avoid the hotspot."}
                }
              }
            }
          },
          "minProperties": 1
        },
        "device_models": {
          "type": "object",
          "description": "Fundamental device characteristics, including advanced transistor models and process options.",
          "properties": {
            "transistor_types": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type_name": {"type": "string", "enum": ["nmos", "pmos", "finfet_n", "finfet_p", "gaafet_n", "gaafet_p", "hbt"]},
                  "channel_length_min_nm": {"type": "number", "minimum": 0},
                  "vt_options_v": {"type": "array", "items": {"type": "number"}, "description": "Available threshold voltage options (e.g., LVT, RVT, HVT)."},
                  "leakage_power_per_um_nw": {"type": "number", "minimum": 0, "description": "Leakage power per micrometer of transistor width."}
                }
              },
              "description": "Properties of available transistor types."
            },
            "resistor_models": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type_name": {"type": "string"},
                  "sheet_resistance_ohm_per_sq": {"type": "number", "minimum": 0}
                }
              }
            },
            "capacitor_models": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type_name": {"type": "string"},
                  "capacitance_per_area_fF_um2": {"type": "number", "minimum": 0}
                }
              }
            }
          }
        },
        "material_properties": {
          "type": "object",
          "description": "Fundamental physical and chemical properties of materials used in the process.",
          "properties": {
            "silicon_properties": {
              "type": "object",
              "properties": {
                "thermal_conductivity_w_mk": {"type": "number", "minimum": 0},
                "specific_heat_j_kgk": {"type": "number", "minimum": 0}
              }
            },
            "dielectric_materials": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {"type": "string"},
                  "dielectric_constant": {"type": "number", "minimum": 1.0},
                  "breakdown_voltage_mv_um": {"type": "number", "minimum": 0}
                }
              }
            }
          }
        },
        "statistical_variation_parameters": {
          "type": "object",
          "description": "Parameters describing process variations (e.g., gate length variation, oxide thickness variation), enabling statistical timing and power analysis.",
          "properties": {
            "gate_length_std_dev_nm": {"type": "number", "minimum": 0},
            "vt_std_dev_mv": {"type": "number", "minimum": 0},
            "oxide_thickness_std_dev_nm": {"type": "number", "minimum": 0},
            "metal_width_std_dev_nm": {"type": "number", "minimum": 0}
          }
        },
        "packaging_technology_support": {
          "type": "object",
          "description": "Details about supported packaging technologies and their implications.",
          "properties": {
            "package_types_supported": {
              "type": "array",
              "items": {"type": "string", "enum": ["wirebond", "flip_chip", "fan_out_wafer_level", "2_5d_interposer", "3d_stacked"]},
              "description": "Types of packaging supported by this PDK."
            },
            "min_ball_pitch_um": {"type": "number", "minimum": 0, "description": "Minimum solder ball pitch for flip-chip packaging."}
          }
        }
      }
    },
    "hierarchical_structure": {
      "type": "object",
      "description": "Explicit representation of the design's logical hierarchy, enabling an AI to reason about system-level concerns and block interactions, crucial for modularity and scalability.",
      "required": ["top_level_module_id", "modules"],
      "properties": {
        "top_level_module_id": {"type": "string", "description": "The identifier of the top-most module in the hierarchy."},
        "modules": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["module_id", "module_name", "sub_modules", "instances_in_module", "interfaces"],
            "properties": {
              "module_id": {"type": "string", "description": "Unique identifier for this module."},
              "module_name": {"type": "string", "description": "Logical name of the module (e.g., 'CPU_Core', 'GPU_Shader')."},
              "description": {"type": "string", "description": "Human-readable description of the module's function."},
              "sub_modules": {
                "type": "array",
                "items": {"type": "string"},
                "description": "List of module_ids that are sub-modules of this module."
              },
              "instances_in_module": {
                "type": "array",
                "items": {"type": "string"},
                "description": "List of cell_ids (from the 'cells' array) that are direct instances within this module."
              },
              "interfaces": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["interface_name", "connected_nets"],
                  "properties": {
                    "interface_name": {"type": "string", "description": "Name of the interface (e.g., 'AXI_Master', 'Memory_Bus')."},
                    "connected_nets": {
                      "type": "array",
                      "items": {"type": "string"},
                      "description": "List of net_ids that cross this module's boundary."
                    },
                    "interface_type": {"type": "string", "enum": ["data", "control", "clock", "reset", "power"], "description": "Categorization of the interface."}
                  }
                },
                "description": "Definition of interfaces for this module."
              }
            }
          }
        }
      }
    },
    "verification_status": {
      "type": "object",
      "description": "Comprehensive tracking of verification efforts and their current status, giving the AI an honest assessment of design correctness and completeness.",
      "required": ["drc_status", "lvs_status", "timing_status", "power_status"],
      "properties": {
        "drc_status": {
          "type": "object",
          "required": ["total_violations", "critical_violations", "is_drc_clean_for_signoff"],
          "properties": {
            "total_violations": {"type": "integer", "minimum": 0},
            "critical_violations": {"type": "integer", "minimum": 0},
            "is_drc_clean_for_signoff": {"type": "boolean"},
            "violation_details_by_category": {
              "type": "object",
              "additionalProperties": {"type": "integer", "minimum": 0},
              "description": "Count of violations by DRC rule category."
            }
          }
        },
        "lvs_status": {
          "type": "object",
          "required": ["total_mismatches", "is_lvs_clean_for_signoff"],
          "properties": {
            "total_mismatches": {"type": "integer", "minimum": 0},
            "is_lvs_clean_for_signoff": {"type": "boolean"},
            "mismatch_details": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {"type": "string", "description": "e.g., 'net_mismatch', 'instance_mismatch', 'pin_mismatch'"},
                  "details": {"type": "string", "description": "Detailed description of the mismatch."}
                }
              }
            }
          }
        },
        "timing_status": {
          "type": "object",
          "required": ["worst_negative_setup_slack_ps", "worst_negative_hold_slack_ps", "is_timing_clean_for_signoff"],
          "properties": {
            "worst_negative_setup_slack_ps": {"type": "number"},
            "worst_negative_hold_slack_ps": {"type": "number"},
            "is_timing_clean_for_signoff": {"type": "boolean"},
            "worst_setup_paths": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "path_name": {"type": "string"},
                  "slack_ps": {"type": "number"},
                  "from_pin": {"type": "string"},
                  "to_pin": {"type": "string"}
                }
              },
              "description": "Details of the most critical setup paths."
            },
            "worst_hold_paths": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "path_name": {"type": "string"},
                  "slack_ps": {"type": "number"},
                  "from_pin": {"type": "string"},
                  "to_pin": {"type": "string"}
                }
              }
            }
          }
        },
        "power_status": {
          "type": "object",
          "required": ["total_dynamic_power_mw", "total_static_power_mw", "is_power_budget_met"],
          "properties": {
            "total_dynamic_power_mw": {"type": "number", "minimum": 0},
            "total_static_power_mw": {"type": "number", "minimum": 0},
            "is_power_budget_met": {"type": "boolean"},
            "power_density_hotspots": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "x_um": {"type": "number"}, "y_um": {"type": "number"},
                  "width_um": {"type": "number"}, "height_um": {"type": "number"},
                  "power_density_mw_um2": {"type": "number"}
                }
              },
              "description": "Identified regions with high power density."
            }
          }
        },
        "thermal_status": {
          "type": "object",
          "description": "Post-layout thermal analysis results.",
          "properties": {
            "max_die_temperature_c": {"type": "number"},
            "max_junction_temperature_c": {"type": "number"},
            "average_die_temperature_c": {"type": "number"},
            "thermal_violation_count": {"type": "integer", "minimum": 0},
            "hottest_regions": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "x_um": {"type": "number"}, "y_um": {"type": "number"},
                  "width_um": {"type": "number"}, "height_um": {"type": "number"},
                  "temperature_c": {"type": "number"}
                }
              }
            }
          }
        },
        "security_status": {
          "type": "object",
          "description": "Assessment of the design's adherence to security constraints.",
          "properties": {
            "side_channel_leakage_audit_score": {"type": "number", "minimum": 0, "maximum": 1, "description": "Overall score from side-channel analysis (lower is better)."},
            "tamper_resistance_audit_result": {"type": "string", "enum": ["passed", "failed_critical", "failed_minor", "not_audited"]},
            "isolated_ip_integrity_status": {
              "type": "object",
              "description": "Status of critical IP block isolation.",
              "additionalProperties": {"type": "string", "enum": ["isolated", "violation_detected", "not_applicable"]}
            }
          }
        },
        "testability_status": {
          "type": "object",
          "description": "Results from Design for Test (DFT) analysis.",
          "properties": {
            "actual_fault_coverage_percent": {"type": "number", "minimum": 0, "maximum": 100},
            "dft_area_overhead_percent": {"type": "number", "minimum": 0},
            "test_time_seconds": {"type": "number", "minimum": 0}
          }
        }
      }
    },
    "ai_self_reflection_and_diagnosis": {
      "type": "object",
      "description": "This profound section is the AI's self-assessment, its introspection into the design process, and its diagnosis of the 'medical conditions' preventing true optimality. It is the opposite of vanity, a constant striving for 'better' through self-awareness and iterative refinement, to achieve eternal homeostasis.",
      "required": [
        "current_agent_performance",
        "design_health_diagnosis",
        "recommended_design_interventions",
        "design_evolution_trace"
      ],
      "properties": {
        "current_agent_performance": {
          "type": "object",
          "description": "Metrics reflecting the AI's own performance in the current design iteration.",
          "required": ["reward_signal", "convergence_state"],
          "properties": {
            "reward_signal": {"type": "number", "description": "The accumulated reward received by the AI agent in the current episode/iteration."},
            "convergence_state": {
              "type": "string",
              "enum": ["converging", "stable", "oscillating", "diverging", "stalled"],
              "description": "Assessment of the AI agent's optimization process convergence."
            },
            "action_efficiency_score": {"type": "number", "minimum": 0, "maximum": 1, "description": "How efficiently the AI's actions are leading to desired outcomes (e.g., fewer iterations, better quality)."},
            "exploration_exploitation_ratio": {"type": "number", "minimum": 0, "maximum": 1, "description": "Current balance between exploring new design space and exploiting known good solutions."}
          }
        },
        "design_health_diagnosis": {
          "type": "object",
          "description": "The AI's diagnosis of the design's 'medical conditions' – critical issues, bottlenecks, or suboptimalities that prevent reaching design goals.",
          "properties": {
            "overall_health_score": {"type": "number", "minimum": 0, "maximum": 1, "description": "A normalized score (0=critical, 1=perfect) reflecting the design's overall health against objectives."},
            "diagnosed_conditions": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["condition_id", "severity", "description", "root_cause_hypothesis", "impacted_metrics"],
                "properties": {
                  "condition_id": {"type": "string", "description": "Unique identifier for the diagnosed condition (e.g., 'TimingViolation_ClockPath_001')."},
                  "severity": {"type": "string", "enum": ["critical", "high", "medium", "low", "warning"]},
                  "description": {"type": "string", "description": "Detailed explanation of the issue (e.g., 'Setup violation on data path from RegA to RegB, likely due to excessive wirelength on N_DATA_X')."},
                  "root_cause_hypothesis": {
                    "type": "string",
                    "description": "The AI's hypothesis about the underlying cause (e.g., 'Inadequate routing resources allocated for critical net', 'Poor initial placement of RegA and RegB')."
                  },
                  "impacted_metrics": {
                    "type": "array",
                    "items": {"type": "string", "enum": ["frequency", "power", "area", "yield", "reliability", "cost", "security_rating", "thermal_profile", "signal_integrity", "testability"]},
                    "description": "List of design metrics negatively affected by this condition."
                  },
                  "associated_cell_ids": {
                    "type": "array",
                    "items": {"type": "string"},
                    "description": "Relevant cell_ids associated with this condition."
                  },
                  "associated_net_ids": {
                    "type": "array",
                    "items": {"type": "string"},
                    "description": "Relevant net_ids associated with this condition."
                  }
                }
              }
            },
            "unresolved_anomalies": {
              "type": "array",
              "items": {"type": "string"},
              "description": "List of observed design behaviors that the AI cannot yet fully explain or diagnose."
            }
          }
        },
        "recommended_design_interventions": {
          "type": "array",
          "description": "The AI's proposed actions or strategies to address diagnosed conditions and push the design towards better homeostasis.",
          "items": {
            "type": "object",
            "required": ["intervention_id", "target_condition_id", "action_type", "priority"],
            "properties": {
              "intervention_id": {"type": "string"},
              "target_condition_id": {"type": "string", "description": "Which diagnosed condition this intervention aims to fix."},
              "action_type": {
                "type": "string",
                "enum": ["re_place_cells", "re_route_nets", "insert_buffers", "upsize_cells", "downsize_cells", "modify_clock_tree", "power_domain_refinement", "thermal_aware_placement", "density_fill", "adjust_constraints", "request_human_review", "explore_alternative_architecture"],
                "description": "Type of intervention."
              },
              "priority": {"type": "string", "enum": ["immediate", "high", "medium", "low"]},
              "details": {"type": "string", "description": "Specifics of the intervention (e.g., 'Re-place cells U_A, U_B, U_C within 100um radius', 'Apply shielding to N_CLK_MAIN')."},
              "expected_impact": {
                "type": "object",
                "description": "Expected changes in metrics if this intervention is applied.",
                "additionalProperties": {"type": "string", "description": "e.g., 'frequency: +5%', 'power: -10mW', 'area: +2%'"}
              }
            }
          }
        },
        "design_evolution_trace": {
          "type": "array",
          "description": "A chronological log of significant design states, agent actions, and their observed outcomes, allowing the AI to learn from its own history and achieve perpetual improvement.",
          "items": {
            "type": "object",
            "required": ["timestamp", "design_version", "action_taken", "outcome_summary", "agent_reward_at_step"],
            "properties": {
              "timestamp": {"type": "string", "format": "date-time"},
              "design_version": {"type": "string"},
              "action_taken": {"type": "string", "description": "High-level description of the design action (e.g., 'initial placement', 'timing optimization pass', 'routing refinement')."},
              "outcome_summary": {"type": "string", "description": "Summary of immediate results (e.g., 'Timing met, power increased', 'DRC violations reduced')."},
              "agent_reward_at_step": {"type": "number", "description": "Reward signal received by the AI at this step."},
              "metrics_snapshot": {
                "type": "object",
                "description": "Key metric values at this point.",
                "additionalProperties": {"type": "number"}
              }
            }
          }
        }
      }
    },
    "environmental_context": {
      "type": "object",
      "description": "Context about the operational environment of the chip, crucial for understanding and designing for real-world conditions beyond simple temperature ranges. This gives a voice to the specific needs of the end-use domain.",
      "properties": {
        "operating_temperature_range_c": {
          "type": "array",
          "items": {"type": "number"},
          "minItems": 2, "maxItems": 2,
          "description": "[Min, Max] operating temperature in Celsius."
        },
        "operating_voltage_range_v": {
          "type": "array",
          "items": {"type": "number"},
          "minItems": 2, "maxItems": 2,
          "description": "[Min, Max] operating voltage in Volts."
        },
        "radiation_environment": {
          "type": "object",
          "description": "Parameters for designs operating in radiation-prone environments (e.g., space, medical).",
          "properties": {
            "total_ionizing_dose_tolerance_krad": {"type": "number", "minimum": 0, "description": "Total Ionizing Dose (TID) tolerance in kRads."},
            "single_event_upset_rate_per_bit_year": {"type": "number", "minimum": 0, "description": "Expected Single Event Upset (SEU) rate per bit per year."},
            "radiation_type": {"type": "string", "enum": ["cosmic_rays", "alpha_particles", "neutrons", "gamma_rays", "none"], "description": "Predominant type of radiation."}
          }
        },
        "mechanical_stress_profile": {
          "type": "object",
          "description": "Expected mechanical stress conditions (e.g., for automotive, wearables).",
          "properties": {
            "max_g_force": {"type": "number", "minimum": 0, "description": "Maximum G-force the device must withstand."},
            "vibration_frequency_hz": {"type": "number", "minimum": 0, "description": "Expected vibration frequency range."},
            "shock_tolerance_g": {"type": "number", "minimum": 0, "description": "Maximum shock tolerance in G's."}
          }
        }
      }
    },
    "manufacturing_intelligence": {
      "type": "object",
      "description": "Direct feedback and insights from manufacturing data, forming an ultimate loop of self-improvement for the design process. This is the truth from the factory floor, enabling designs to be truly 'bulletproof' against real-world imperfections.",
      "properties": {
        "yield_data_historical": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "batch_id": {"type": "string"},
              "process_parameters_at_manufacture": {"type": "object", "additionalProperties": {"type": "string"}},
              "yield_percent": {"type": "number", "minimum": 0, "maximum": 100},
              "dominant_failure_modes": {
                "type": "array",
                "items": {"type": "string", "enum": ["open_circuit", "short_circuit", "timing_violation", "leakage", "functional_defect", "thermal_failure", "drc_violation_physical"]},
                "description": "Most common types of failures observed in this batch."
              }
            }
          }
        },
        "defect_prediction_models": {
          "type": "object",
          "description": "Models or parameters learned from manufacturing data to predict potential defects in future designs based on layout features.",
          "properties": {
            "critical_area_analysis_parameters": {
              "type": "object",
              "additionalProperties": {"type": "number", "description": "Parameter values for critical area calculation models."},
              "description": "Parameters for models calculating sensitivity to random defects."
            },
            "pattern_failure_database_link": {"type": "string", "description": "Link to an external database of problematic layout patterns and their failure rates."}
          }
        },
        "design_for_manufacturability_recommendations": {
          "type": "array",
          "description": "Recommendations generated from manufacturing data to improve future designs' manufacturability.",
          "items": {
            "type": "object",
            "properties": {
              "recommendation_id": {"type": "string"},
              "description": {"type": "string", "description": "Specific DFM guideline (e.g., 'Increase spacing between M1 traces near large vias')."},
              "reason_from_data": {"type": "string", "description": "Evidence from manufacturing data supporting this recommendation."},
              "impact_on_yield_percent": {"type": "number", "description": "Expected improvement in yield if applied."}
            }
          }
        }
      }
    },
    "security_integrity_fabric": {
      "type": "object",
      "description": "A holistic view of the chip's security fabric, defining explicit mechanisms and features implemented to protect against various threats, elevating security beyond mere constraints to an integral part of the design itself. This speaks for the voiceless data, the oppressed secrets.",
      "properties": {
        "secure_boot_mechanisms": {
          "type": "object",
          "properties": {
            "is_enabled": {"type": "boolean"},
            "root_of_trust_location": {"type": "string", "description": "Physical location of the Root of Trust (e.g., 'eFuse_block_0')."}
          }
        },
        "physical_unclonable_functions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "puf_id": {"type": "string"},
              "type": {"type": "string", "enum": ["sram_puf", "ring_oscillator_puf", "memory_puf"]},
              "entropy_source_cell_ids": {"type": "array", "items": {"type": "string"}},
              "location_centroid_um": {"type": "array", "items": {"type": "number"}, "minItems": 2, "maxItems": 2}
            }
          }
        },
        "tamper_detection_sensors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "sensor_id": {"type": "string"},
              "type": {"type": "string", "enum": ["light_sensor", "temperature_sensor", "voltage_sensor", "mesh_sensor"]},
              "monitored_region_um": {"type": "array", "items": {"type": "number"}, "minItems": 4, "maxItems": 4, "description": "[x_min, y_min, x_max, y_max]"},
              "response_mechanism": {"type": "string", "enum": ["zeroize_keys", "halt_operation", "trigger_alert"]}
            }
          }
        },
        "power_and_ground_shielding": {
          "type": "object",
          "properties": {
            "is_enabled": {"type": "boolean"},
            "shielded_nets_count": {"type": "integer", "minimum": 0},
            "shielding_layers_used": {"type": "array", "items": {"type": "string"}}
          }
        },
        "memory_encryption_engines": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "engine_id": {"type": "string"},
              "protected_memory_regions": {"type": "array", "items": {"type": "string"}},
              "encryption_algorithm": {"type": "string"}
            }
          }
        }
      }
    }
  }
}