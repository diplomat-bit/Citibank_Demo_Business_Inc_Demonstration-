openapi: 3.1.0
info:
  version: '1.1'
  title: "James Burvel O'Callaghan III API: The Quantum Core - Publisher Edition"
  description: |
    Welcome to the **Quantum Core 3.1**, the pinnacle of financial technology, meticulously engineered to power the experience. This specification has been rigorously refined to meet the highest standards of RESTful design, security, and scalability.
    
    This comprehensive specification unveils the secure and high-performance protocols to connect with and command the core functionalities of the platform. Empower yourself to architect and deploy the future of finance, with an infrastructure designed for exponential scalability, impenetrable security, real-time intelligence, and seamless global integration.
    
    **Key Improvements in v1.1:**
    *   **Cursor-Based Pagination:** All list endpoints now use cursor-based pagination (`after` parameter) for superior performance and data integrity over offset-based methods.
    *   **Semantic Correctness:** Partial updates now correctly use the `PATCH` HTTP method instead of `PUT`, ensuring semantic accuracy.
    *   **RESTful Design:** RPC-style verbs in paths have been replaced with resource-oriented state changes for a cleaner, more intuitive API structure.
    *   **Enhanced Security:** OAuth2 scopes are now hierarchically organized (e.g., `banking.accounts.read`) for more granular permission control.
    *   **OpenAPI 3.1 Compliance:** The specification is fully compliant with OpenAPI 3.1.0, including strict typing and modern nullability handling (`type: ["string", "null"]`).
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/JOCALL3_1/jamesburvelocallaghaniiiapi/1.0

tags:
  - name: "Users & Identity Management"
  - name: "Accounts & Balances"
  - name: "Transactions & Insights"
  - name: "Budgets & Financial Planning"
  - name: "Investments & Portfolio Intelligence"
  - name: "AI Advisor (Quantum)"
  - name: "Quantum Weaver (Business Incubation)"
  - name: "Quantum Oracle (Predictive Simulation)"
  - name: "AI Ad Studio (Veo 2.0)"
  - name: "Personalization & Experience Design"
  - name: "Financial Goals & Strategic Planning"
  - name: "Marketplace (Plato AI)"
  - name: "Decentralized Finance (DeFi) & Web3 Assets"
  - name: "Corporate Finance - Enterprise Cards"
  - name: "Corporate Finance - Global Payments & Treasury"
  - name: "Corporate Finance - Compliance & Risk"
  - name: "Rewards & Gamification Engine"
  - name: "Credit Health & AI Underwriting"
  - name: "Notifications & Proactive Alerts"
  - name: "Security & Open Banking Ecosystem"
  - name: "Real-time Analytics & Predictive Intelligence"
  - name: "Global Payments & Foreign Exchange"
  - name: "Sustainability & ESG Impact"
  - name: "AI-Powered Lending & Credit Solutions"
  - name: "Developer Tools & API Management"
  - name: "Digital Identity & Verifiable Credentials"
  - name: "Treasury & Liquidity Management"
  - name: "Enterprise Risk & Fraud Prevention"
security: # Global security applied to all operations unless overridden
  - oAuth2Auth:
      - user.profile.read
      - user.profile.write
      - banking.accounts.read
      - banking.accounts.write
      - banking.transactions.read
      - banking.transactions.write
      - banking.payments.write
      - ai.advisor.interact
      - ai.oracle.interact
      - business.weaver.read
      - business.weaver.write
      - ai.ad_studio.read
      - ai.ad_studio.write
      - corporate.cards.read
      - corporate.cards.write
      - corporate.payments.read
      - corporate.payments.write
      - corporate.compliance.read
      - corporate.compliance.write
      - user.rewards.read
      - user.rewards.write
      - analytics.read
      - analytics.write
      - web3.read
      - web3.write
      - sustainability.read
      - sustainability.write
      - lending.read
      - lending.write
      - developer.tools.read
      - developer.tools.write
      - identity.read
      - identity.write
      - corporate.treasury.read
      - corporate.treasury.write
      - fx.rates.read
      - investments.read
      - investments.write
      - user.personalization.read
      - user.personalization.write
  - apiKeyAuth: []

paths:
  /users/register:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Register a New User Account"
      description: "Registers a new user account, initiating the onboarding process. Requires basic user details."
      operationId: "registerUser"
      security:
        - {} # No specific security for public registration
      requestBody:
        required: true
        description: "User registration details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegistrationRequest"
      responses:
        "201":
          description: "User registered successfully. Awaits email/MFA verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/login:
    post:
      tags:
        - "Users & Identity Management"
      summary: "User Login and Session Creation"
      description: "Authenticates a user and creates a secure session, returning access tokens. May require MFA depending on user settings."
      operationId: "userLogin"
      security:
        - {} # No specific security for public login
      requestBody:
        required: true
        description: "User login credentials."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLoginRequest"
      responses:
        "200":
          description: "Login successful, returns authentication tokens."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          description: "MFA required or account locked."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /password-resets:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Initiate Password Reset"
      description: "Starts the password reset flow by sending a verification code or link to the user's registered email or phone."
      operationId: "initiatePasswordReset"
      security:
        - {} # No specific security for public password reset initiation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
              properties:
                identifier:
                  type: string
                  format: email
                  description: "User's email or phone number for verification."
      responses:
        "200":
          description: "Password reset initiated. Check your email/phone for verification."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        "404":
          $ref: "#/components/responses/NotFoundError"

  /password-resets/confirm:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Confirm Password Reset"
      description: "Confirms the password reset using the received verification code and sets a new password."
      operationId: "confirmPasswordReset"
      security:
        - {} # No specific security for public password reset confirmation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
                - verificationCode
                - newPassword
              properties:
                identifier:
                  type: string
                  format: email
                  description: "User's email or phone number used for verification."
                verificationCode:
                  type: string
                  description: "The verification code received via email or SMS."
                newPassword:
                  type: string
                  format: password
                  description: "The new password for the user account."
      responses:
        "200":
          description: "Password reset successfully."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          description: "Invalid or expired verification code."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/me:
    get:
      tags:
        - "Users & Identity Management"
      summary: "Retrieve Comprehensive Current User Profile"
      description: "Fetches the complete and dynamically updated profile information for the currently authenticated user."
      operationId: "getCurrentUserEnhancedProfile"
      security:
        - oAuth2Auth: [user.profile.read, user.rewards.read, identity.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "The user's complete, enriched profile information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    patch:
      tags:
        - "Users & Identity Management"
      summary: "Update Current User Profile"
      description: "Partially updates selected fields of the currently authenticated user's profile information."
      operationId: "updateCurrentUserProfile"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Updated user profile details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserUpdateProfileRequest"
      responses:
        "200":
          description: "User profile updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /users/me/preferences:
    get:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Get User Personalization Preferences"
      description: "Retrieves the user's deep personalization preferences, including AI customization settings, notification channel priorities, and thematic choices."
      operationId: "getUserPreferences"
      security:
        - oAuth2Auth: [user.profile.read, user.personalization.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "The user's personalized preferences."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    patch:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Update User Personalization Preferences"
      description: "Partially updates the user's deep personalization preferences, allowing dynamic control over AI behavior, notification delivery, and thematic choices."
      operationId: "updateUserPreferences"
      security:
        - oAuth2Auth: [user.profile.write, user.personalization.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The updated user preference payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserPreferences"
      responses:
        "200":
          description: "User preferences updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /users/me/devices:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Connected Devices"
      description: "Retrieves a list of all devices linked to the user's account, including their last active status and security posture."
      operationId: "listConnectedDevices"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of connected devices."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Device"
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Register a New Device"
      description: "Registers a new device for secure access and multi-factor authentication, associating it with the user's profile."
      operationId: "registerDevice"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the device to be registered."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterDeviceRequest"
      responses:
        "201":
          description: "Device registered successfully, awaiting final verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Device"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/devices/{deviceId}:
    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister a Device"
      description: "Removes a specific device from the user's linked devices, revoking its access."
      operationId: "deregisterDevice"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/DeviceId"
      responses:
        "204":
          description: "Device deregistered successfully."
        "404":
          $ref: "#/components/responses/NotFoundError"

  /users/me/biometrics/enroll:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Enroll Biometric Data for Authentication"
      description: "Initiates the enrollment process for biometric authentication (e.g., fingerprint, facial scan)."
      operationId: "enrollBiometrics"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Biometric enrollment request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricEnrollmentRequest"
      responses:
        "201":
          description: "Biometric enrollment initiated/successful."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/biometrics/verify:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Verify Biometric Data for Sensitive Operations"
      description: "Performs real-time biometric verification to authorize sensitive actions or access protected resources."
      operationId: "verifyBiometrics"
      security:
        - oAuth2Auth: [user.profile.read] # Verification is an auth action, read scope is sufficient
      requestBody:
        required: true
        description: "Biometric verification request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricVerificationRequest"
      responses:
        "200":
          description: "Biometric verification successful."
          content:
            application/json:
              schema:
                type: object
                properties:
                  verificationStatus:
                    type: string
                    enum: [success, failed]
                  message:
                    type: string
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /users/me/biometrics:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Get Biometric Enrollment Status"
      description: "Retrieves the current status of biometric enrollments for the authenticated user."
      operationId: "getBiometricStatus"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current biometric enrollment status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister All Biometric Data"
      description: "Removes all enrolled biometric data associated with the user's account for security reasons."
      operationId: "deregisterAllBiometrics"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      responses:
        "204":
          description: "All biometric data deregistered successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /accounts/me:
    get:
      tags:
        - "Accounts & Balances"
      summary: "List Linked Financial Accounts"
      description: "Fetches a comprehensive, real-time list of all external financial accounts linked to the user's profile."
      operationId: "listLinkedAccounts"
      security:
        - oAuth2Auth: [banking.accounts.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated, detailed list of linked financial accounts."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/LinkedAccount"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /accounts/{accountId}:
    get:
      tags:
        - "Accounts & Balances"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Detailed Account Analytics & Forecasts"
      description: "Retrieves comprehensive analytics for a specific financial account, including historical balance trends and projected cash flow."
      operationId: "getAccountDetailsAndAnalytics"
      security:
        - oAuth2Auth: [banking.accounts.read, analytics.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Detailed account information with analytics and forecasts."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountDetail"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/transactions/pending:
    get:
      tags:
        - "Accounts & Balances"
        - "Transactions & Insights"
      summary: "Get Pending Transactions for an Account"
      description: "Retrieves a list of pending transactions that have not yet cleared for a specific financial account."
      operationId: "getPendingAccountTransactions"
      security:
        - oAuth2Auth: [banking.accounts.read, banking.transactions.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of pending transactions."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Transaction"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/statements:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Retrieve Account Statements"
      description: "Fetches digital statements for a specific account, allowing filtering by date range and format."
      operationId: "getAccountStatements"
      security:
        - oAuth2Auth: [banking.accounts.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
        - name: "year"
          in: "query"
          required: true
          description: "Year for the statement."
          schema:
            type: integer
        - name: "month"
          in: "query"
          required: true
          description: "Month for the statement (1-12)."
          schema:
            type: integer
            minimum: 1
            maximum: 12
        - name: "format"
          in: "query"
          description: "Desired format for the statement."
          schema:
            type: string
            enum: [pdf, csv]
            default: pdf
      responses:
        "200":
          description: "Account statement metadata with download links, or direct download in requested format."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StatementDownloadInfo"
            application/pdf:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
                format: binary
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/overdraft-settings:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Get Overdraft Protection Settings"
      description: "Retrieves the current overdraft protection settings for a specific account."
      operationId: "getOverdraftSettings"
      security:
        - oAuth2Auth: [banking.accounts.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Overdraft settings for the account."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Accounts & Balances"
      summary: "Update Overdraft Protection Settings"
      description: "Updates the overdraft protection settings for a specific account, enabling or disabling protection and configuring preferences."
      operationId: "updateOverdraftSettings"
      security:
        - oAuth2Auth: [banking.accounts.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      requestBody:
        required: true
        description: "Request to update overdraft protection settings."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OverdraftSettingsUpdateRequest"
      responses:
        "200":
          description: "Overdraft settings updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/link:
    post:
      tags:
        - "Accounts & Balances"
        - "Security & Open Banking Ecosystem"
      summary: "Initiate Linking a New External Institution"
      description: "Begins the secure process of linking a new external financial institution to the user's profile."
      operationId: "initiateAccountLinking"
      security:
        - oAuth2Auth: [banking.accounts.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Parameters for initiating the linking process."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LinkAccountRequest"
      responses:
        "200":
          description: "Account linking initiated. Provides a URI for the user to complete the connection securely."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LinkAccountResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List & Filter Transactions with Advanced Options"
      description: "Retrieves a paginated list of the user's transactions, with extensive options for filtering and searching."
      operationId: "listTransactionsEnhanced"
      security:
        - oAuth2Auth: [banking.transactions.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
        - name: "type"
          in: "query"
          description: "Filter transactions by type."
          schema:
            type: string
            enum: [income, expense, transfer, investment, refund, bill_payment]
        - name: "category"
          in: "query"
          description: "Filter transactions by category."
          schema:
            type: string
        - name: "startDate"
          in: "query"
          description: "Retrieve transactions from this date (inclusive)."
          schema:
            type: string
            format: date
        - name: "endDate"
          in: "query"
          description: "Retrieve transactions up to this date (inclusive)."
          schema:
            type: string
            format: date
        - name: "minAmount"
          in: "query"
          description: "Filter for transactions with an amount greater than or equal to this value."
          schema:
            type: number
            format: float
        - name: "maxAmount"
          in: "query"
          description: "Filter for transactions with an amount less than or equal to this value."
          schema:
            type: number
            format: float
        - name: "searchQuery"
          in: "query"
          description: "Free-text search across transaction descriptions, merchants, and notes."
          schema:
            type: string
      responses:
        "200":
          description: "A paginated, intelligently filtered list of transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}:
    get:
      tags:
        - "Transactions & Insights"
      summary: "Get Detailed Transaction by ID"
      description: "Retrieves granular information for a single transaction by its unique ID."
      operationId: "getTransactionByIdDetailed"
      security:
        - oAuth2Auth: [banking.transactions.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      responses:
        "200":
          description: "The requested transaction details with enhanced data."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    patch:
      tags:
        - "Transactions & Insights"
      summary: "Update Transaction (Categorize/Notes)"
      description: "Partially updates a transaction, allowing the user to override the category, add notes, or apply learning for future AI accuracy."
      operationId: "updateTransaction"
      security:
        - oAuth2Auth: [banking.transactions.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "The fields to update for the transaction."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionUpdateRequest"
      responses:
        "200":
          description: "Transaction updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /transactions/{transactionId}/dispute:
    post:
      tags:
        - "Transactions & Insights"
      summary: "Initiate a Transaction Dispute"
      description: "Begins the process of disputing a specific transaction, providing details and supporting documentation."
      operationId: "initiateTransactionDispute"
      security:
        - oAuth2Auth: [banking.transactions.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "Details regarding the transaction dispute."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DisputeRequest"
      responses:
        "202":
          description: "Transaction dispute initiated."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DisputeStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /transactions/recurring:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List Recurring Transactions"
      description: "Retrieves a list of all detected or user-defined recurring transactions."
      operationId: "listRecurringTransactions"
      security:
        - oAuth2Auth: [banking.transactions.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of recurring transactions."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/RecurringTransaction"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Transactions & Insights"
      summary: "Create a New Recurring Transaction"
      description: "Defines a new recurring transaction pattern for future tracking and budgeting."
      operationId: "createRecurringTransaction"
      security:
        - oAuth2Auth: [banking.transactions.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new recurring transaction pattern."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RecurringTransactionCreationRequest"
      responses:
        "201":
          description: "Recurring transaction created."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecurringTransaction"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/insights/spending-trends:
    get:
      tags:
        - "Transactions & Insights"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get AI-Driven Spending Trends"
      description: "Retrieves AI-generated insights into user spending trends over time, identifying patterns and anomalies."
      operationId: "getSpendingTrends"
      security:
        - oAuth2Auth: [banking.transactions.read, analytics.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Spending trends analysis."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SpendingTrends"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "List All User Budgets"
      description: "Retrieves a list of all active and historical budgets for the authenticated user."
      operationId: "listBudgets"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of user budgets."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Budget"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Budgets & Financial Planning"
      summary: "Create a New Budget"
      description: "Creates a new financial budget for the user, with optional AI auto-population of categories and amounts."
      operationId: "createBudget"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new budget."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetCreationRequest"
      responses:
        "201":
          description: "Budget created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets/{budgetId}:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "Get Detailed Budget Information"
      description: "Retrieves detailed information for a specific budget, including current spending, remaining amounts, and AI recommendations."
      operationId: "getBudgetDetails"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "200":
          description: "Detailed budget information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    patch:
      tags:
        - "Budgets & Financial Planning"
      summary: "Update an Existing Budget"
      description: "Partially updates the parameters of an existing budget, such as total amount, dates, or categories."
      operationId: "updateBudget"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      requestBody:
        required: true
        description: "Request to update an existing budget."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetUpdateRequest"
      responses:
        "200":
          description: "Budget updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Budgets & Financial Planning"
      summary: "Delete a Budget"
      description: "Deletes a specific budget from the user's profile."
      operationId: "deleteBudget"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "204":
          description: "Budget deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "List All Investment Portfolios"
      description: "Retrieves a summary of all investment portfolios linked to the user's account."
      operationId: "listInvestmentPortfolios"
      security:
        - oAuth2Auth: [investments.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of investment portfolios."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/InvestmentPortfolio"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Create a New Investment Portfolio"
      description: "Creates a new investment portfolio, with options for initial asset allocation."
      operationId: "createInvestmentPortfolio"
      security:
        - oAuth2Auth: [investments.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new investment portfolio."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioCreationRequest"
      responses:
        "201":
          description: "Investment portfolio created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /investments/portfolios/{portfolioId}:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Get Detailed Investment Portfolio"
      description: "Retrieves detailed information for a specific investment portfolio, including holdings, performance, and AI insights."
      operationId: "getInvestmentPortfolioDetails"
      security:
        - oAuth2Auth: [investments.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      responses:
        "200":
          description: "Detailed investment portfolio information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    patch:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Update Investment Portfolio Details"
      description: "Partially updates high-level details of an investment portfolio, such as name or risk tolerance."
      operationId: "updateInvestmentPortfolio"
      security:
        - oAuth2Auth: [investments.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        description: "Request to update high-level details of an investment portfolio."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioUpdateRequest"
      responses:
        "200":
          description: "Investment portfolio updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios/{portfolioId}/rebalance:
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Initiate AI-Driven Portfolio Rebalancing"
      description: "Triggers an AI-driven rebalancing process for a specific investment portfolio based on a target risk tolerance or strategy."
      operationId: "rebalanceInvestmentPortfolio"
      security:
        - oAuth2Auth: [investments.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        description: "Request to initiate an AI-driven portfolio rebalancing."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RebalanceRequest"
      responses:
        "202":
          description: "Portfolio rebalancing initiated. Details will be provided asynchronously."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RebalanceStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/assets/search:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
        - "Sustainability & ESG Impact"
      summary: "Search for Investment Assets with ESG Scores"
      description: "Searches for available investment assets (stocks, ETFs, mutual funds) and returns their ESG impact scores."
      operationId: "searchESGAssets"
      security:
        - oAuth2Auth: [investments.read, sustainability.read]
        - apiKeyAuth: []
      parameters:
        - name: "query"
          in: "query"
          required: true
          description: "Search query for asset name or symbol."
          schema:
            type: string
        - name: "minESGScore"
          in: "query"
          description: "Minimum desired ESG score (0-10)."
          schema:
            type: number
            format: float
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of investment assets with ESG data."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/ESGAssetSearchResult"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat:
    post:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Send a Message to the Quantum AI Advisor"
      description: "Initiates or continues a sophisticated conversation with Quantum, the AI Advisor."
      operationId: "chatWithQuantumAdvanced"
      security:
        - oAuth2Auth: [ai.advisor.interact]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The rich message payload for the AI, including textual input and potential tool function outputs."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AIChatRequest"
      responses:
        "200":
          description: "The AI Advisor's comprehensive response, which may include text, proactive recommendations, and declarative tool calls for execution."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIChatResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "The Quantum AI Advisor service is temporarily overloaded or unavailable."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /ai/advisor/tools:
    get:
      tags:
        - "AI Advisor (Quantum)"
        - "Developer Tools & API Management"
      summary: "List Available AI Tools for Quantum"
      description: "Retrieves a dynamic manifest of all integrated AI tools that Quantum can invoke and execute."
      operationId: "listQuantumAITools"
      security:
        - oAuth2Auth: [ai.advisor.interact]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of available AI tools."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/AITool"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat/history:
    get:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Retrieve AI Advisor Conversation History"
      description: "Fetches the full conversation history with the Quantum AI Advisor for a given session or user."
      operationId: "getQuantumChatHistory"
      security:
        - oAuth2Auth: [ai.advisor.interact]
        - apiKeyAuth: []
      parameters:
        - name: "sessionId"
          in: "query"
          description: "Optional: Filter history by a specific session ID."
          schema:
            type: ["string", "null"]
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "Paginated list of chat messages."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedChatMessages"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulate:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run a 'What-If' Financial Simulation (Standard)"
      description: "Submits a hypothetical scenario to the Quantum Oracle AI for standard financial impact analysis."
      operationId: "simulateWithQuantumOracle"
      security:
        - oAuth2Auth: [ai.oracle.interact]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to run a standard 'what-if' financial simulation."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SimulationRequest"
      responses:
        "200":
          description: "The simulation was successful. The response contains a detailed impact analysis."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulationResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "AI simulation service is temporarily unavailable."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /ai/oracle/simulate/advanced:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run an Advanced Multi-Variable Financial Simulation"
      description: "Engages the Quantum Oracle for highly complex, multi-variable simulations."
      operationId: "simulateWithQuantumOracleAdvanced"
      security:
        - oAuth2Auth: [ai.oracle.interact]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "An advanced request payload detailing the complex scenario and parameters for the AI simulation."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedSimulationRequest"
      responses:
        "200":
          description: "Advanced simulation completed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdvancedSimulationResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "AI simulation service is experiencing extended processing times or is unavailable."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /ai/oracle/simulations:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "List All User Simulations"
      description: "Retrieves a list of all financial simulations previously run by the user."
      operationId: "listUserSimulations"
      security:
        - oAuth2Auth: [ai.oracle.interact]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of financial simulations."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/SimulationSummary"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulations/{simulationId}:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Get Detailed Simulation Results"
      description: "Retrieves the full, detailed results of a specific financial simulation by its ID."
      operationId: "getSimulationResults"
      security:
        - oAuth2Auth: [ai.oracle.interact]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "200":
          description: "Detailed simulation results."
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/SimulationResponse"
                  - $ref: "#/components/schemas/AdvancedSimulationResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Delete a Financial Simulation"
      description: "Deletes a previously run financial simulation and its results."
      operationId: "deleteSimulation"
      security:
        - oAuth2Auth: [ai.oracle.interact]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "204":
          description: "Simulation deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitch:
    post:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit a High-Potential Business Plan to Quantum Weaver"
      description: "Submits a detailed business plan to the Quantum Weaver AI for rigorous analysis, market validation, and seed funding consideration."
      operationId: "pitchToQuantumWeaver"
      security:
        - oAuth2Auth: [business.weaver.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The comprehensive business plan document."
        content:
          application/json:
            schema:
              type: object
              required:
                - businessPlan
                - foundingTeam
                - marketOpportunity
                - financialProjections
              properties:
                businessPlan:
                  type: string
                foundingTeam:
                  type: array
                  items:
                    type: object
                    properties:
                      name: {type: string}
                      role: {type: string}
                      experience: {type: string}
                marketOpportunity:
                  type: string
                financialProjections:
                  type: object
                  properties:
                    seedRoundAmount: {type: number, format: float}
                    valuationPreMoney: {type: number, format: float}
                    projectionYears: {type: integer}
                    revenueForecast:
                      type: array
                      items: {type: number, format: float}
                    profitabilityEstimate: {type: string}
      responses:
        "202":
          description: "The business plan was successfully ingested and is undergoing initial AI analysis."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /ai/incubator/pitch/{pitchId}/details:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Get Detailed AI Analysis & Feedback for a Business Pitch"
      description: "Retrieves the granular AI-driven analysis, strategic feedback, and market validation results for a specific business pitch."
      operationId: "getQuantumWeaverPitchDetails"
      security:
        - oAuth2Auth: [business.weaver.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PitchId"
      responses:
        "200":
          description: "Comprehensive details of the pitch's current state, AI feedback, and next steps."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverDetailedState"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitches:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "List All User Business Pitches"
      description: "Retrieves a summary list of all business pitches submitted by the authenticated user to Quantum Weaver."
      operationId: "listUserBusinessPitches"
      security:
        - oAuth2Auth: [business.weaver.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
        - name: "status"
          in: "query"
          description: "Filter pitches by their current stage."
          schema:
            type: string
            enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
      responses:
        "200":
          description: "A paginated list of business pitches."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/QuantumWeaverState"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/incubator/pitch/{pitchId}/feedback:
    put:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit Feedback or Answers to AI Questions for a Business Pitch"
      description: "Allows the entrepreneur to respond to specific questions or provide additional details requested by Quantum Weaver."
      operationId: "submitQuantumWeaverFeedback"
      security:
        - oAuth2Auth: [business.weaver.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PitchId"
      requestBody:
        required: true
        description: "Payload containing answers to AI questions or general feedback."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuantumWeaverFeedbackRequest"
      responses:
        "200":
          description: "Feedback submitted successfully. Pitch status updated."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/ads/generate:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate a Standard Video Ad with Veo 2.0"
      description: "Submits a request to generate a high-quality video ad using the advanced Veo 2.0 generative AI model."
      operationId: "generateVideoAd"
      security:
        - oAuth2Auth: [ai.ad_studio.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to generate a standard video ad using Veo 2.0."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GenerateVideoRequest"
      responses:
        "202":
          description: "Video generation initiated. The response contains an operation ID to poll for status updates."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                  estimatedCompletionTimeSeconds:
                    type: integer
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/ads/generate/advanced:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate an Advanced Video Ad with Granular Controls"
      description: "Submits a highly customized request to generate a video ad with fine-grained control."
      operationId: "generateAdvancedVideoAd"
      security:
        - oAuth2Auth: [ai.ad_studio.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Payload for advanced video ad generation with comprehensive customization options."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedGenerateVideoRequest"
      responses:
        "202":
          description: "Advanced video generation initiated. An operation ID is provided for polling status."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                  estimatedCompletionTimeSeconds:
                    type: integer
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "429":
          $ref: "#/components/responses/TooManyRequestsError"

  /ai/ads/operations/{operationId}:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Get Video Generation Status & Retrieve Asset"
      description: "Polls the real-time status of an asynchronous video generation operation. Once complete, the response includes a URL to the asset."
      operationId: "getVideoGenerationStatusAndAsset"
      security:
        - oAuth2Auth: [ai.ad_studio.read]
        - apiKeyAuth: []
      parameters:
        - name: "operationId"
          in: "path"
          required: true
          description: "The unique identifier for the video generation operation."
          schema:
            type: string
      responses:
        "200":
          description: "The current status of the video generation job. If 'done', the response includes the video URI."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VideoOperationStatus"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/ads:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "List All Generated Video Ads"
      description: "Retrieves a list of all video advertisements previously generated by the user in the AI Ad Studio."
      operationId: "listGeneratedVideoAds"
      security:
        - oAuth2Auth: [ai.ad_studio.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
        - name: "status"
          in: "query"
          description: "Filter ads by their generation status."
          schema:
            type: string
            enum: [queued, generating, done, error]
      responses:
        "200":
          description: "A paginated list of generated video ads."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/VideoOperationStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/cards:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "List All Corporate Enterprise Cards"
      description: "Retrieves a comprehensive list of all physical and virtual corporate cards associated with the user's organization."
      operationId: "listCorporateCardsDetailed"
      security:
        - oAuth2Auth: [corporate.cards.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated, detailed list of all corporate enterprise cards."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/CorporateCard"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/cards/{cardId}:
    patch:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Update Corporate Card Controls or Status"
      description: "Partially updates the sophisticated spending controls, limits, or frozen status for a specific corporate card."
      operationId: "updateCorporateCard"
      security:
        - oAuth2Auth: [corporate.cards.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
      requestBody:
        required: true
        description: "The fields to update for the corporate card."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CorporateCardUpdateRequest"
      responses:
        "200":
          description: "The corporate card with its advanced controls updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/cards/virtual:
    post:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Issue a New Virtual Corporate Card"
      description: "Creates and issues a new virtual corporate card with specified spending limits, merchant restrictions, and expiration dates."
      operationId: "issueVirtualCorporateCard"
      security:
        - oAuth2Auth: [corporate.cards.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the new virtual card, including holder, limits, and purpose."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VirtualCardCreationRequest"
      responses:
        "201":
          description: "Virtual corporate card issued successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/cards/{cardId}/transactions:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
        - "Transactions & Insights"
      summary: "List Transactions for a Corporate Card"
      description: "Retrieves a paginated list of transactions made with a specific corporate card."
      operationId: "getCorporateCardTransactions"
      security:
        - oAuth2Auth: [corporate.cards.read, banking.transactions.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
      responses:
        "200":
          description: "A paginated list of corporate card transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/anomalies:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "List AI-Detected Financial Anomalies"
      description: "Retrieves a comprehensive list of AI-detected financial anomalies across transactions, payments, and corporate cards."
      operationId: "listFinancialAnomalies"
      security:
        - oAuth2Auth: [corporate.compliance.read]
        - apiKeyAuth: []
      parameters:
        - name: status
          in: query
          description: "Filter anomalies by their current review status."
          schema:
            type: string
            enum: [new, under_review, escalated, dismissed, resolved]
        - name: severity
          in: query
          description: "Filter anomalies by their AI-assessed severity level."
          schema:
            type: string
            enum: [low, medium, high, critical]
        - name: entityType
          in: query
          description: "Filter anomalies by the type of financial entity they are related to."
          schema:
            type: string
            enum: [payment_order, transaction, counterparty, corporate_card, invoice]
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of AI-detected financial anomalies."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/FinancialAnomaly"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/anomalies/{anomalyId}/status:
    put:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Update Anomaly Review Status"
      description: "Updates the review status of a specific financial anomaly."
      operationId: "updateAnomalyStatus"
      security:
        - oAuth2Auth: [corporate.compliance.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AnomalyId"
      requestBody:
        required: true
        description: "Payload to update the review status of a financial anomaly."
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [dismissed, resolved, under_review, escalated]
                resolutionNotes:
                  type: ["string", "null"]
      responses:
        "200":
          description: "The updated anomaly object with the new status and resolution notes."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialAnomaly"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/compliance/audits:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Request an AI-Driven Compliance Audit Report"
      description: "Initiates an AI-powered compliance audit for a specific period or scope."
      operationId: "requestComplianceAudit"
      security:
        - oAuth2Auth: [corporate.compliance.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Parameters for the compliance audit."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ComplianceAuditRequest"
      responses:
        "202":
          description: "Compliance audit initiated. An audit ID is returned to check the status."
          content:
            application/json:
              schema:
                type: object
                properties:
                  auditId:
                    type: string
                  status:
                    type: string
                    enum: [initiated, processing, completed, failed]
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/compliance/audits/{auditId}/report:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Retrieve AI-Generated Compliance Audit Report"
      description: "Retrieves the full report generated by an AI-driven compliance audit."
      operationId: "getComplianceAuditReport"
      security:
        - oAuth2Auth: [corporate.compliance.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AuditId"
      responses:
        "200":
          description: "The comprehensive compliance audit report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ComplianceAuditReport"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/sanction-screening:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Perform Real-time Sanction Screening"
      description: "Executes a real-time screening of an individual or entity against global sanction lists and watchlists."
      operationId: "performSanctionScreening"
      security:
        - oAuth2Auth: [corporate.compliance.read]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to perform a sanction screening."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SanctionScreeningRequest"
      responses:
        "200":
          description: "Sanction screening results."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SanctionScreeningResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /web3/wallets:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "List Connected Crypto Wallets"
      description: "Retrieves a list of all securely linked cryptocurrency wallets."
      operationId: "listCryptoWallets"
      security:
        - oAuth2Auth: [web3.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of connected cryptocurrency wallets."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/CryptoWalletConnection"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "Connect a New Crypto Wallet"
      description: "Initiates the process to securely connect a new cryptocurrency wallet to the user's profile."
      operationId: "connectCryptoWallet"
      security:
        - oAuth2Auth: [web3.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for connecting a new crypto wallet."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConnectWalletRequest"
      responses:
        "201":
          description: "Wallet connection initiated or confirmed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoWalletConnection"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /web3/wallets/{walletId}/balances:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Get Crypto Asset Balances for a Wallet"
      description: "Retrieves the current balances of all recognized crypto assets within a specific connected wallet."
      operationId: "getCryptoWalletBalances"
      security:
        - oAuth2Auth: [web3.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/WalletId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of crypto asset balances."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/CryptoAssetBalance"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/nfts:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Retrieve User's NFT Collection"
      description: "Fetches a comprehensive list of Non-Fungible Tokens (NFTs) owned by the user across all connected wallets."
      operationId: "getUserNFTCollection"
      security:
        - oAuth2Auth: [web3.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of the user's NFT assets."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/NFTAsset"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/transactions/initiate:
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Initiate a Cryptocurrency Transfer"
      description: "Prepares and initiates a cryptocurrency transfer from a connected wallet to a specified recipient address."
      operationId: "initiateCryptoTransfer"
      security:
        - oAuth2Auth: [web3.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to initiate a cryptocurrency transfer."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CryptoTransferRequest"
      responses:
        "202":
          description: "Crypto transfer initiated. Awaiting user signature/confirmation."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoTransferStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /payments/international/initiate:
    post:
      tags:
        - "Global Payments & Foreign Exchange"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Initiate an International Wire Transfer"
      description: "Facilitates the secure initiation of an international wire transfer to a beneficiary in another country and currency."
      operationId: "initiateInternationalPayment"
      security:
        - oAuth2Auth: [banking.payments.write, corporate.payments.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the international payment."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InternationalPaymentRequest"
      responses:
        "202":
          description: "International payment initiated and is being processed."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /payments/fx/rates:
    get:
      tags:
        - "Global Payments & Foreign Exchange"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time & Predictive Foreign Exchange Rates"
      description: "Retrieves current and AI-predicted future foreign exchange rates for a specified currency pair."
      operationId: "getFxRates"
      security:
        - oAuth2Auth: [fx.rates.read, analytics.read]
        - apiKeyAuth: []
      parameters:
        - name: "baseCurrency"
          in: "query"
          required: true
          description: "The base currency code (e.g., USD)."
          schema:
            type: string
            pattern: '^[A-Z]{3}$'
        - name: "targetCurrency"
          in: "query"
          required: true
          description: "The target currency code (e.g., EUR)."
          schema:
            type: string
            pattern: '^[A-Z]{3}$'
        - name: "forecastDays"
          in: "query"
          description: "Number of days into the future to provide an AI-driven prediction."
          schema:
            type: integer
            minimum: 1
            maximum: 30
            default: 7
      responses:
        "200":
          description: "Real-time and predictive foreign exchange rates."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FxRateResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /payments/international/{paymentId}/status:
    get:
      tags:
        - "Global Payments & Foreign Exchange"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get Status of an International Payment"
      description: "Retrieves the current processing status and details of an initiated international payment."
      operationId: "getInternationalPaymentStatus"
      security:
        - oAuth2Auth: [banking.payments.write, corporate.payments.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PaymentId"
      responses:
        "200":
          description: "Current status of the international payment."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /payments/fx/convert:
    post:
      tags:
        - "Global Payments & Foreign Exchange"
      summary: "Initiate a Currency Conversion"
      description: "Executes an instant currency conversion between two currencies."
      operationId: "initiateCurrencyConversion"
      security:
        - oAuth2Auth: [banking.payments.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to initiate a currency conversion."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CurrencyConversionRequest"
      responses:
        "200":
          description: "Currency conversion completed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CurrencyConversionResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /sustainability/carbon-footprint:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Retrieve Personal Carbon Footprint Report"
      description: "Generates a detailed report of the user's estimated carbon footprint based on transaction data."
      operationId: "getPersonalCarbonFootprint"
      security:
        - oAuth2Auth: [user.profile.read, banking.transactions.read, sustainability.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A comprehensive personal carbon footprint report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonFootprintReport"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /sustainability/investments/impact:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Investments & Portfolio Intelligence"
      summary: "Analyze ESG Impact of Investment Portfolio"
      description: "Provides an AI-driven analysis of the Environmental, Social, and Governance (ESG) impact of the user's entire investment portfolio."
      operationId: "getInvestmentESGImpact"
      security:
        - oAuth2Auth: [banking.accounts.read, investments.read, sustainability.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "An analysis of the ESG impact of the investment portfolio."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentESGImpact"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /sustainability/carbon-offsets:
    post:
      tags:
        - "Sustainability & ESG Impact"
      summary: "Purchase Carbon Offsets"
      description: "Allows users to purchase carbon offsets to neutralize their estimated carbon footprint."
      operationId: "purchaseCarbonOffsets"
      security:
        - oAuth2Auth: [sustainability.write, banking.payments.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to purchase carbon offsets."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CarbonOffsetPurchaseRequest"
      responses:
        "200":
          description: "Carbon offsets purchased successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonOffsetPurchaseResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /lending/applications:
    post:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Submit a Loan Application with AI Underwriting"
      description: "Submits a new loan application, which is instantly processed and underwritten by our Quantum AI."
      operationId: "submitLoanApplication"
      security:
        - oAuth2Auth: [lending.write, user.profile.read, banking.accounts.read, banking.transactions.read]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The loan application details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoanApplicationRequest"
      responses:
        "202":
          description: "Loan application submitted. The AI is evaluating and will provide a decision shortly."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /lending/applications/{applicationId}:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Loan Application Status & Details"
      description: "Retrieves the current status and detailed information for a submitted loan application."
      operationId: "getLoanApplicationDetails"
      security:
        - oAuth2Auth: [lending.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ApplicationId"
      responses:
        "200":
          description: "Detailed status and terms of the loan application."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /lending/offers/pre-approved:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Pre-Approved Loan Offers"
      description: "Retrieves a list of personalized, pre-approved loan offers generated by the AI."
      operationId: "getPreApprovedLoanOffers"
      security:
        - oAuth2Auth: [lending.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of pre-approved loan offers."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/LoanOffer"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /developers/webhooks:
    get:
      tags:
        - "Developer Tools & API Management"
      summary: "List Webhook Subscriptions"
      description: "Retrieves a list of all active webhook subscriptions for the authenticated developer application."
      operationId: "listWebhookSubscriptions"
      security:
        - oAuth2Auth: [developer.tools.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of active webhook subscriptions."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/WebhookSubscription"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Developer Tools & API Management"
      summary: "Create a New Webhook Subscription"
      description: "Establishes a new webhook subscription to receive real-time notifications for specified events."
      operationId: "createWebhookSubscription"
      security:
        - oAuth2Auth: [developer.tools.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the new webhook subscription."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionCreationRequest"
      responses:
        "201":
          description: "Webhook subscription created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /developers/webhooks/{subscriptionId}:
    put:
      tags:
        - "Developer Tools & API Management"
      summary: "Update Webhook Subscription"
      description: "Modifies an existing webhook subscription, allowing changes to the callback URL, subscribed events, or activation status."
      operationId: "updateWebhookSubscription"
      security:
        - oAuth2Auth: [developer.tools.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      requestBody:
        required: true
        description: "The updated webhook subscription details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionUpdateRequest"
      responses:
        "200":
          description: "Webhook subscription updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Developer Tools & API Management"
      summary: "Delete Webhook Subscription"
      description: "Deletes an existing webhook subscription."
      operationId: "deleteWebhookSubscription"
      security:
        - oAuth2Auth: [developer.tools.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      responses:
        "204":
          description: "Webhook subscription deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /developers/api-keys:
    get:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Developer API Keys"
      description: "Retrieves a list of API keys issued to the authenticated developer application."
      operationId: "listApiKeys"
      security:
        - oAuth2Auth: [developer.tools.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of API keys."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/ApiKey"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Create a New Developer API Key"
      description: "Generates a new API key for the developer application with specified scopes and an optional expiration."
      operationId: "createApiKey"
      security:
        - oAuth2Auth: [developer.tools.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new developer API key."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ApiKeyCreationRequest"
      responses:
        "201":
          description: "API key created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKey"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /developers/api-keys/{keyId}:
    delete:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Revoke a Developer API Key"
      description: "Revokes an existing API key, disabling its access immediately."
      operationId: "revokeApiKey"
      security:
        - oAuth2Auth: [developer.tools.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ApiKeyId"
      responses:
        "204":
          description: "API key revoked successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /identity/kyc/submit:
    post:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Submit KYC Documentation for Verification"
      description: "Submits Know Your Customer (KYC) documentation for AI-accelerated compliance and identity verification."
      operationId: "submitKYCDocuments"
      security:
        - oAuth2Auth: [identity.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The KYC document submission payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/KYCDocumentSubmission"
      responses:
        "202":
          description: "KYC documentation submitted and undergoing AI-powered verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /identity/kyc/status:
    get:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Get Current KYC Verification Status"
      description: "Retrieves the current status of the user's Know Your Customer (KYC) verification process."
      operationId: "getKYCStatus"
      security:
        - oAuth2Auth: [identity.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current KYC verification status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/treasury/forecasts/cash-flow:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get AI-Driven Corporate Cash Flow Forecast"
      description: "Retrieves an advanced AI-driven cash flow forecast for the organization."
      operationId: "getCorporateCashFlowForecast"
      security:
        - oAuth2Auth: [corporate.treasury.read, corporate.payments.read, corporate.compliance.read, analytics.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ForecastHorizonDays"
        - $ref: "#/components/parameters/IncludeScenarioAnalysis"
      responses:
        "200":
          description: "A comprehensive AI-driven cash flow forecast report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CashFlowForecast"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/treasury/liquidity-positions:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time Corporate Liquidity Positions"
      description: "Provides a real-time overview of the organization's liquidity across all accounts, currencies, and short-term investments."
      operationId: "getCorporateLiquidityPositions"
      security:
        - oAuth2Auth: [corporate.treasury.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Real-time liquidity positions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LiquidityPositions"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/risk/fraud/rules:
    get:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "List AI-Powered Fraud Detection Rules"
      description: "Retrieves a list of AI-powered fraud detection rules currently active for the organization."
      operationId: "listFraudDetectionRules"
      security:
        - oAuth2Auth: [corporate.compliance.read, corporate.treasury.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of fraud detection rules."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/FraudRule"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Create a New AI-Powered Fraud Detection Rule"
      description: "Creates a new custom AI-powered fraud detection rule."
      operationId: "createFraudDetectionRule"
      security:
        - oAuth2Auth: [corporate.compliance.write, corporate.treasury.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The definition of the new fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleCreationRequest"
      responses:
        "201":
          description: "Fraud detection rule created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /corporate/risk/fraud/rules/{ruleId}:
    put:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Update an AI-Powered Fraud Detection Rule"
      description: "Updates an existing custom AI-powered fraud detection rule, modifying its criteria, actions, or status."
      operationId: "updateFraudDetectionRule"
      security:
        - oAuth2Auth: [corporate.compliance.write, corporate.treasury.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/RuleId"
      requestBody:
        required: true
        description: "The updated definition of the fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleUpdateRequest"
      responses:
        "200":
          description: "Fraud detection rule updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Delete an AI-Powered Fraud Detection Rule"
      description: "Deletes a specific custom AI-powered fraud detection rule."
      operationId: "deleteFraudDetectionRule"
      security:
        - oAuth2Auth: [corporate.compliance.write, corporate.treasury.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/RuleId"
      responses:
        "204":
          description: "Fraud detection rule deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /goals:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "List All User Financial Goals"
      description: "Retrieves a list of all financial goals defined by the user."
      operationId: "listFinancialGoals"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
      responses:
        "200":
          description: "A paginated list of financial goals."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/FinancialGoal"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Create a New Financial Goal"
      description: "Creates a new long-term financial goal, with optional AI plan generation."
      operationId: "createFinancialGoal"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new financial goal."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalCreationRequest"
      responses:
        "201":
          description: "Financial goal created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /goals/{goalId}:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Get Detailed Financial Goal"
      description: "Retrieves detailed information for a specific financial goal."
      operationId: "getFinancialGoalDetails"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "200":
          description: "Detailed financial goal information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    patch:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Update an Existing Financial Goal"
      description: "Partially updates the parameters of an existing financial goal."
      operationId: "updateFinancialGoal"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      requestBody:
        required: true
        description: "Request to update an existing financial goal."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalUpdateRequest"
      responses:
        "200":
          description: "Financial goal updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Delete a Financial Goal"
      description: "Deletes a specific financial goal from the user's profile."
      operationId: "deleteFinancialGoal"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "204":
          description: "Financial goal deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /notifications/me:
    get:
      tags:
        - "Notifications & Proactive Alerts"
        - "Personalization & Experience Design"
      summary: "List User Notifications"
      description: "Retrieves a paginated list of personalized notifications and proactive AI alerts for the authenticated user."
      operationId: "listUserNotifications"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
        - name: "status"
          in: "query"
          description: "Filter notifications by their read status."
          schema:
            type: string
            enum: [read, unread]
        - name: "severity"
          in: "query"
          description: "Filter notifications by AI-assigned severity level."
          schema:
            type: string
            enum: [low, medium, high, critical]
      responses:
        "200":
          description: "A paginated list of user notifications."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Notification"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /notifications/{notificationId}:
    patch:
      tags:
        - "Notifications & Proactive Alerts"
      summary: "Update Notification (Mark as Read)"
      description: "Marks a specific user notification as read."
      operationId: "updateNotification"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/NotificationId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - read
              properties:
                read:
                  type: boolean
                  description: "Set to true to mark the notification as read."
      responses:
        "200":
          description: "Notification marked as read successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notification"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /notifications/settings:
    get:
      tags:
        - "Notifications & Proactive Alerts"
        - "Personalization & Experience Design"
      summary: "Get User Notification Settings"
      description: "Retrieves the user's granular notification preferences across different channels and event types."
      operationId: "getNotificationSettings"
      security:
        - oAuth2Auth: [user.profile.read]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current user notification settings."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationSettings"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags:
        - "Notifications & Proactive Alerts"
        - "Personalization & Experience Design"
      summary: "Update User Notification Settings"
      description: "Updates the user's notification preferences, allowing control over channels, event types, and quiet hours."
      operationId: "updateNotificationSettings"
      security:
        - oAuth2Auth: [user.profile.write]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The updated notification settings payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationSettingsUpdateRequest"
      responses:
        "200":
          description: "Notification settings updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationSettings"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /marketplace/products:
    get:
      tags:
        - "Marketplace (Plato AI)"
        - "Personalization & Experience Design"
      summary: "List AI-Curated Marketplace Products"
      description: "Retrieves a personalized, AI-curated list of products and services from the Plato AI marketplace."
      operationId: "listMarketplaceProducts"
      security:
        - oAuth2Auth: [user.profile.read, analytics.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Cursor"
        - name: "category"
          in: "query"
          description: "Filter products by category."
          schema:
            type: string
            enum: [loans, insurance, credit_cards, investments, budgeting_tools, smart_home, travel, education]
        - name: "minRating"
          in: "query"
          description: "Minimum user rating for products (0-5)."
          schema:
            type: number
            format: float
        - name: "aiPersonalizationLevel"
          in: "query"
          description: "Filter by AI personalization level."
          schema:
            type: string
            enum: [low, medium, high]
      responses:
        "200":
          description: "A paginated list of AI-curated marketplace products."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedCursorList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/MarketplaceProduct"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /marketplace/products/{productId}/impact-simulate:
    post:
      tags:
        - "Marketplace (Plato AI)"
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Simulate Financial Impact of a Marketplace Product"
      description: "Uses the Quantum Oracle to simulate the long-term financial impact of purchasing or subscribing to a specific marketplace product."
      operationId: "simulateMarketplaceProductImpact"
      security:
        - oAuth2Auth: [ai.oracle.interact, user.profile.read]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        required: true
        description: "Parameters for simulating the product's impact."
        content:
          application/json:
            schema:
              type: object
              properties:
                simulationParameters:
                  type: object
                  description: "Dynamic parameters specific to the product type (e.g., loan amount, investment term)."
      responses:
        "200":
          description: "Detailed simulation of the product's financial impact."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductImpactSimulation"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /marketplace/offers/{offerId}/redeem:
    post:
      tags:
        - "Marketplace (Plato AI)"
      summary: "Redeem an Exclusive Marketplace Offer"
      description: "Redeems a personalized, exclusive offer from the Plato AI marketplace."
      operationId: "redeemMarketplaceOffer"
      security:
        - oAuth2Auth: [banking.payments.write]
        - apiKeyAuth: []
      parameters:
        - name: "offerId"
          in: "path"
          required: true
          description: "The unique identifier of the offer to redeem."
          schema:
            type: string
      requestBody:
        description: "Optional: additional details required for redemption."
        content:
          application/json:
            schema:
              type: object
              properties:
                paymentAccountId:
                  type: string
                  description: "Optional: The ID of the account to use for any associated payment or credit."
      responses:
        "200":
          description: "Offer redeemed successfully. Details of the redemption are provided."
          content:
            application/json:
              schema:
                type: object
                properties:
                  redemptionId:
                    type: string
                  offerId:
                    type: string
                  status:
                    type: string
                    enum: [success, pending, failed]
                  message:
                    type: string
                  associatedTransactionId:
                    type: ["string", "null"]
                  redemptionDate:
                    type: string
                    format: date-time
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "409":
          $ref: "#/components/responses/ConflictError" # e.g., offer already redeemed or expired

components:
  securitySchemes:
    oAuth2Auth:
      type: oauth2
      description: "OAuth 2.0 flow for user authorization."
      flows:
        authorizationCode:
          authorizationUrl: "https://auth.demobank.com/oauth/authorize"
          tokenUrl: "https://auth.demobank.com/oauth/token"
          scopes:
            user.profile.read: "Read user's personal profile and preferences."
            user.profile.write: "Update user's personal profile and preferences."
            banking.accounts.read: "Read all linked financial accounts and balances."
            banking.accounts.write: "Manage and update linked financial accounts."
            banking.transactions.read: "Read transaction history and details."
            banking.transactions.write: "Categorize, tag, and dispute transactions."
            banking.payments.write: "Initiate and manage payments (e.g., transfers, bill pay)."
            ai.advisor.interact: "Interact with the Quantum AI Advisor for insights and actions."
            ai.oracle.interact: "Run predictive simulations with the Quantum Oracle."
            business.weaver.read: "Read business pitch status and AI feedback from Quantum Weaver."
            business.weaver.write: "Submit and update business pitches to Quantum Weaver."
            ai.ad_studio.read: "Read status and retrieve assets from AI Ad Studio (Veo 2.0)."
            ai.ad_studio.write: "Generate new video ads with AI Ad Studio (Veo 2.0)."
            corporate.cards.read: "Read corporate enterprise card details and transactions."
            corporate.cards.write: "Manage corporate enterprise cards (e.g., limits, freeze, issue virtual)."
            corporate.payments.read: "Read corporate payment orders and treasury activities."
            corporate.payments.write: "Initiate and manage corporate global payments."
            corporate.compliance.read: "Read compliance cases, risk alerts, and audit reports for corporate clients."
            corporate.compliance.write: "Update compliance cases, fraud rules, and initiate audits for corporate clients."
            user.rewards.read: "Read user loyalty points, tiers, and gamification status."
            user.rewards.write: "Manage loyalty program elements (e.g., redeem points)."
            analytics.read: "Read AI-driven analytics and predictive intelligence reports."
            analytics.write: "Configure analytics dashboards and custom reports."
            web3.read: "Read linked crypto wallets, asset balances, and NFT collections."
            web3.write: "Connect/disconnect crypto wallets, initiate blockchain transactions."
            sustainability.read: "Read carbon footprint reports and ESG investment impact."
            sustainability.write: "Purchase carbon offsets, configure ESG preferences."
            lending.read: "Read loan application status and pre-approved offers."
            lending.write: "Submit loan applications, accept loan offers."
            developer.tools.read: "Read API key and webhook subscription details."
            developer.tools.write: "Manage API keys and webhook subscriptions."
            identity.read: "Read digital identity status and verifiable credentials."
            identity.write: "Submit KYC documents, manage verifiable credentials."
            corporate.treasury.read: "Read corporate cash flow forecasts and liquidity positions."
            corporate.treasury.write: "Configure treasury optimization strategies."
            fx.rates.read: "Read real-time and predictive foreign exchange rates."
            investments.read: "Read investment portfolios, holdings, and performance."
            investments.write: "Manage investment portfolios, initiate rebalancing."
            user.personalization.read: "Read user personalization and experience design settings."
            user.personalization.write: "Update user personalization settings."
    apiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: "API Key for server-to-server authentication or public access where OAuth is not applicable. Must be passed in the `X-API-Key` header."

  parameters:
    Limit:
      name: limit
      in: query
      description: "Maximum number of items to return in a single page."
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 10
    Cursor:
      name: after
      in: query
      description: "A cursor for use in pagination. `after` is an object ID that defines your place in the list."
      required: false
      schema:
        type: string
    AccountId:
      name: accountId
      in: path
      description: "Unique identifier for the financial account."
      required: true
      schema:
        type: string
    TransactionId:
      name: transactionId
      in: path
      description: "Unique identifier for the transaction."
      required: true
      schema:
        type: string
    BudgetId:
      name: budgetId
      in: path
      description: "Unique identifier for the budget."
      required: true
      schema:
        type: string
    PortfolioId:
      name: portfolioId
      in: path
      description: "Unique identifier for the investment portfolio."
      required: true
      schema:
        type: string
    DeviceId:
      name: deviceId
      in: path
      description: "Unique identifier for the connected device."
      required: true
      schema:
        type: string
    SimulationId:
      name: simulationId
      in: path
      description: "Unique identifier for the financial simulation."
      required: true
      schema:
        type: string
    PitchId:
      name: pitchId
      in: path
      description: "Unique identifier for the business pitch."
      required: true
      schema:
        type: string
    CardId:
      name: cardId
      in: path
      description: "Unique identifier for the corporate card."
      required: true
      schema:
        type: string
    AnomalyId:
      name: anomalyId
      in: path
      description: "Unique identifier for the financial anomaly."
      required: true
      schema:
        type: string
    AuditId:
      name: auditId
      in: path
      description: "Unique identifier for the compliance audit."
      required: true
      schema:
        type: string
    WalletId:
      name: walletId
      in: path
      description: "Unique identifier for the crypto wallet connection."
      required: true
      schema:
        type: string
    PaymentId:
      name: paymentId
      in: path
      description: "Unique identifier for the international payment."
      required: true
      schema:
        type: string
    ForecastHorizonDays:
      name: forecastHorizonDays
      in: query
      description: "The number of days into the future for which to generate the cash flow forecast (e.g., 30, 90, 180)."
      required: false
      schema:
        type: integer
        minimum: 7
        maximum: 365
        default: 90
    IncludeScenarioAnalysis:
      name: includeScenarioAnalysis
      in: query
      description: "If true, the forecast will include best-case and worst-case scenario analysis."
      required: false
      schema:
        type: boolean
        default: false
    RuleId:
      name: ruleId
      in: path
      description: "Unique identifier for the fraud detection rule."
      required: true
      schema:
        type: string
    GoalId:
      name: goalId
      in: path
      description: "Unique identifier for the financial goal."
      required: true
      schema:
        type: string
    NotificationId:
      name: notificationId
      in: path
      description: "Unique identifier for the notification."
      required: true
      schema:
        type: string
    ProductId:
      name: productId
      in: path
      description: "Unique identifier for the marketplace product."
      required: true
      schema:
        type: string
    ApplicationId:
      name: applicationId
      in: path
      description: "Unique identifier for the loan application."
      required: true
      schema:
        type: string
    SubscriptionId:
      name: subscriptionId
      in: path
      description: "Unique identifier for the webhook subscription."
      required: true
      schema:
        type: string
    ApiKeyId:
      name: keyId
      in: path
      description: "Unique identifier for the API key."
      required: true
      schema:
        type: string
    StartDate:
      name: startDate
      in: query
      description: "Start date for filtering results (inclusive, YYYY-MM-DD)."
      schema:
        type: string
        format: date
    EndDate:
      name: endDate
      in: query
      description: "End date for filtering results (inclusive, YYYY-MM-DD)."
      schema:
        type: string
        format: date

  responses:
    BadRequestError:
      description: "Invalid request payload or parameters."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    UnauthorizedError:
      description: "Authentication failed or token is missing/invalid."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    ForbiddenError:
      description: "The authenticated user does not have the necessary permissions."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    NotFoundError:
      description: "The requested resource was not found."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    ConflictError:
      description: "The request could not be completed due to a conflict with the current state of the resource."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    TooManyRequestsError:
      description: "Rate limit exceeded. Too many requests have been sent in a given amount of time."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

  schemas:
    PaginatedCursorList:
      type: object
      properties:
        hasNextPage:
          type: boolean
          description: "Indicates if there are more items to fetch."
        endCursor:
          type: ["string", "null"]
          description: "The cursor to use to fetch the next page of results. Null if no more pages."
      required:
        - hasNextPage

    Error:
      type: object
      required:
        - code
        - message
        - timestamp
      properties:
        code:
          type: string
          description: "A unique error code for programmatic handling."
        message:
          type: string
          description: "A human-readable explanation of the error."
        details:
          type: ["object", "null"]
          description: "Optional, structured details about the error."
        timestamp:
          type: string
          format: date-time
          description: "The time the error occurred."

    Address:
      type: object
      properties:
        street:
          type: string
        city:
          type: string
        state:
          type: string
        zip:
          type: string
        country:
          type: string

    UserPreferences:
      type: object
      description: "User's personalized preferences for the platform."
      properties:
        preferredLanguage:
          type: string
          description: "Preferred language for the user interface."
        theme:
          type: string
          description: "Preferred UI theme."
        aiInteractionMode:
          type: string
          enum: [proactive, balanced, on_demand]
          description: "How the user prefers to interact with AI."
        notificationChannels:
          type: object
          properties:
            email:
              type: boolean
            push:
              type: boolean
            sms:
              type: boolean
            inApp:
              type: boolean
          description: "Preferred channels for receiving notifications."
        dataSharingConsent:
          type: boolean
          description: "Consent status for sharing anonymized data."
        transactionGrouping:
          type: string
          enum: [category, merchant, date, account]
          description: "Default grouping preference for transaction lists."

    SecurityStatus:
      type: object
      description: "Security-related status for the user account."
      properties:
        twoFactorEnabled:
          type: boolean
          description: "Indicates if two-factor authentication (2FA) is enabled."
        biometricsEnrolled:
          type: boolean
          description: "Indicates if biometric authentication is enrolled."
        lastLogin:
          type: string
          format: date-time
          description: "Timestamp of the last successful login."
        lastLoginIp:
          type: string
          format: ipv4
          description: "IP address of the last successful login."

    User:
      type: object
      required:
        - id
        - name
        - email
        - identityVerified
      properties:
        id:
          type: string
          description: "Unique identifier for the user."
        name:
          type: string
          description: "Full name of the user."
        email:
          type: string
          format: email
          description: "Primary email address of the user."
        phone:
          type: ["string", "null"]
          description: "Primary phone number of the user."
        dateOfBirth:
          type: ["string", "null"]
          format: date
          description: "Date of birth of the user (YYYY-MM-DD)."
        address:
          $ref: "#/components/schemas/Address"
        loyaltyTier:
          type: string
          description: "Current loyalty program tier."
        loyaltyPoints:
          type: integer
          description: "Current balance of loyalty points."
        gamificationLevel:
          type: integer
          description: "Current gamification level."
        aiPersona:
          type: string
          description: "AI-identified financial persona for tailored advice."
        securityStatus:
          $ref: "#/components/schemas/SecurityStatus"
        preferences:
          $ref: "#/components/schemas/UserPreferences"
        identityVerified:
          type: boolean
          description: "Indicates if the user's identity has been verified (e.g., via KYC)."

    UserRegistrationRequest:
      type: object
      required:
        - name
        - email
        - password
      properties:
        name:
          type: string
          description: "Full name of the user."
        email:
          type: string
          format: email
          description: "Email address for registration and login."
        password:
          type: string
          format: password
          description: "User's chosen password."
        phone:
          type: ["string", "null"]
          description: "Optional phone number for MFA or recovery."
        dateOfBirth:
          type: ["string", "null"]
          format: date
          description: "Optional date of birth (YYYY-MM-DD)."
        address:
          $ref: "#/components/schemas/Address"
          description: "Optional initial address details."

    UserLoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: "User's email address."
        password:
          type: string
          format: password
          description: "User's password."
        mfaCode:
          type: ["string", "null"]
          description: "Optional: Multi-factor authentication code, if required."

    LoginResponse:
      type: object
      required:
        - accessToken
        - refreshToken
        - expiresIn
        - tokenType
      properties:
        accessToken:
          type: string
          description: "JWT access token to authenticate subsequent API requests."
        refreshToken:
          type: string
          description: "Token used to obtain new access tokens without re-authenticating."
        expiresIn:
          type: integer
          description: "Lifetime of the access token in seconds."
        tokenType:
          type: string
          description: "Type of the access token."

    UserUpdateProfileRequest:
      type: object
      description: "Fields that can be updated in a user's profile."
      properties:
        name:
          type: string
          description: "Updated full name of the user."
        phone:
          type: ["string", "null"]
          description: "Updated primary phone number of the user."
        address:
          $ref: "#/components/schemas/Address"
          description: "Updated address details."
        preferences:
          $ref: "#/components/schemas/UserPreferences"
          description: "Updated personalization preferences."

    Device:
      type: object
      description: "Information about a connected device."
      required:
        - id
        - type
        - os
        - model
        - lastActive
        - ipAddress
        - trustLevel
      properties:
        id:
          type: string
          description: "Unique identifier for the device."
        type:
          type: string
          enum: [mobile, desktop, tablet, smart_watch]
          description: "Type of the device."
        os:
          type: string
          description: "Operating system of the device."
        model:
          type: string
          description: "Model of the device."
        deviceName:
          type: ["string", "null"]
          description: "User-assigned name for the device."
        lastActive:
          type: string
          format: date-time
          description: "Timestamp of the last activity from this device."
        ipAddress:
          type: string
          format: ipv4
          description: "Last known IP address of the device."
        trustLevel:
          type: string
          enum: [trusted, pending_verification, untrusted, blocked]
          description: "Security trust level of the device."
        pushToken:
          type: ["string", "null"]
          description: "Push notification token for the device."

    RegisterDeviceRequest:
      type: object
      required:
        - deviceType
        - os
        - model
      properties:
        deviceType:
          type: string
          enum: [mobile, desktop, tablet, smart_watch]
          description: "Type of the device being registered."
        os:
          type: string
          description: "Operating system of the device."
        model:
          type: string
          description: "Model of the device."
        biometricSignature:
          type: ["string", "null"]
          description: "Optional: Base64 encoded biometric signature for initial enrollment."
        deviceName:
          type: ["string", "null"]
          description: "Optional: A friendly name for the device."
        pushToken:
          type: ["string", "null"]
          description: "Optional: Push notification token for the device."

    BiometricEnrollmentRequest:
      type: object
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          description: "The type of biometric data being enrolled."
        biometricSignature:
          type: string
          description: "Base64 encoded representation of the biometric template or proof."
        deviceId:
          type: string
          description: "The ID of the device on which the biometric is being enrolled."
        deviceName:
          type: ["string", "null"]
          description: "Optional: A friendly name for the device, if not already linked."

    BiometricVerificationRequest:
      type: object
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          description: "The type of biometric data being verified."
        biometricSignature:
          type: string
          description: "Base64 encoded representation of the one-time biometric proof for verification."
        deviceId:
          type: string
          description: "The ID of the device initiating the biometric verification."

    BiometricStatus:
      type: object
      description: "Current biometric enrollment status for a user."
      required:
        - biometricsEnrolled
        - enrolledBiometrics
      properties:
        biometricsEnrolled:
          type: boolean
          description: "Overall status indicating if any biometrics are enrolled."
        enrolledBiometrics:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum: [fingerprint, facial_recognition, voice_recognition]
              deviceId:
                type: string
              enrollmentDate:
                type: string
                format: date-time
          description: "List of specific biometric types and devices enrolled."
        lastUsed:
          type: ["string", "null"]
          format: date-time
          description: "Timestamp of the last successful biometric authentication."

    LinkedAccount:
      type: object
      description: "Summary information for a linked financial account."
      required:
        - id
        - name
        - institutionName
        - type
        - currency
        - currentBalance
        - lastUpdated
      properties:
        id:
          type: string
          description: "Unique identifier for the linked account."
        externalId:
          type: ["string", "null"]
          description: "Optional: Identifier from the external data provider (e.g., Plaid)."
        name:
          type: string
          description: "Display name of the account."
        institutionName:
          type: string
          description: "Name of the financial institution where the account is held."
        mask:
          type: ["string", "null"]
          description: "Masked account number (e.g., last 4 digits)."
        type:
          type: string
          enum: [depository, credit, loan, investment, other]
          description: "General type of the account."
        subtype:
          type: ["string", "null"]
          description: "Specific subtype of the account (e.g., checking, savings, ira, 401k)."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "ISO 4217 currency code of the account."
        currentBalance:
          type: number
          format: float
          description: "Current balance of the account."
        availableBalance:
          type: ["number", "null"]
          format: float
          description: "Available balance (after pending transactions) of the account."
        lastUpdated:
          type: string
          format: date-time
          description: "Timestamp when the account balance was last synced."

    AccountDetail:
      allOf:
        - $ref: "#/components/schemas/LinkedAccount"
        - type: object
          properties:
            accountHolder:
              type: string
              description: "Name of the primary holder for this account."
            interestRate:
              type: ["number", "null"]
              format: float
              description: "Annual interest rate (if applicable)."
            openedDate:
              type: ["string", "null"]
              format: date
              description: "Date the account was opened."
            transactionsCount:
              type: integer
              description: "Total number of transactions in this account."
            projectedCashFlow:
              type: object
              properties:
                days30:
                  type: number
                  format: float
                  description: "Projected cash flow for the next 30 days."
                days90:
                  type: number
                  format: float
                  description: "Projected cash flow for the next 90 days."
                confidenceScore:
                  type: integer
                  minimum: 0
                  maximum: 100
                  description: "AI confidence score for the cash flow projection (0-100)."
            balanceHistory:
              type: array
              items:
                type: object
                properties:
                  date:
                    type: string
                    format: date
                  balance:
                    type: number
                    format: float
              description: "Historical daily balance data."
    MerchantDetails:
      type: object
      description: "Detailed information about a merchant associated with a transaction."
      properties:
        name:
          type: string
          description: "Official name of the merchant."
        logoUrl:
          type: ["string", "null"]
          format: uri
          description: "URL to the merchant's logo."
        website:
          type: ["string", "null"]
          format: uri
          description: "Merchant's website URL."
        address:
          $ref: "#/components/schemas/Address"
          description: "Physical address of the merchant."
        phone:
          type: ["string", "null"]
          description: "Merchant's phone number."
    TransactionLocation:
      type: object
      description: "Geographic location details for a transaction."
      properties:
        latitude:
          type: number
          format: float
          description: "Latitude coordinate of the transaction."
        longitude:
          type: number
          format: float
          description: "Longitude coordinate of the transaction."
        city:
          type: ["string", "null"]
          description: "City where the transaction occurred."
        state:
          type: ["string", "null"]
          description: "State where the transaction occurred."
        zip:
          type: ["string", "null"]
          description: "Zip code where the transaction occurred."

    Transaction:
      type: object
      required:
        - id
        - accountId
        - type
        - category
        - description
        - amount
        - currency
        - date
      properties:
        id:
          type: string
          description: "Unique identifier for the transaction."
        accountId:
          type: string
          description: "ID of the account from which the transaction occurred."
        type:
          type: string
          enum: [income, expense, transfer, investment, refund, bill_payment]
          description: "Type of the transaction."
        category:
          type: string
          description: "AI-assigned or user-defined category of the transaction."
        aiCategoryConfidence:
          type: ["number", "null"]
          format: float
          minimum: 0
          maximum: 1
          description: "AI confidence score for the assigned category (0-1)."
        description:
          type: string
          description: "Detailed description of the transaction."
        merchantDetails:
          $ref: "#/components/schemas/MerchantDetails"
        amount:
          type: number
          format: float
          description: "Amount of the transaction."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "ISO 4217 currency code of the transaction."
        date:
          type: string
          format: date
          description: "Date the transaction occurred (local date)."
        postedDate:
          type: ["string", "null"]
          format: date
          description: "Date the transaction was posted to the account (local date)."
        carbonFootprint:
          type: ["number", "null"]
          format: float
          description: "Estimated carbon footprint in kg CO2e for this transaction."
        location:
          $ref: "#/components/schemas/TransactionLocation"
        paymentChannel:
          type: ["string", "null"]
          enum: [in_store, online, mobile, atm, bill_payment, transfer, other]
          description: "Channel through which the payment was made."
        tags:
          type: ["array", "null"]
          items:
            type: string
          description: "User-defined tags for the transaction."
        receiptUrl:
          type: ["string", "null"]
          format: uri
          description: "URL to a digital receipt for the transaction."
        disputeStatus:
          type: string
          enum: [none, pending, under_review, resolved, rejected]
          description: "Current dispute status of the transaction."
        notes:
          type: ["string", "null"]
          description: "Personal notes added by the user to the transaction."

    PaginatedTransactions:
      allOf:
        - $ref: "#/components/schemas/PaginatedCursorList"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Transaction"

    TransactionUpdateRequest:
      type: object
      description: "Fields that can be updated for a transaction."
      properties:
        category:
          type: string
          description: "The new category for the transaction. Can be hierarchical."
        notes:
          type: ["string", "null"]
          description: "Optional notes to add to the transaction."
        applyToFuture:
          type: boolean
          default: false
          description: "If true, the AI will learn from this correction for similar future transactions."

    DisputeRequest:
      type: object
      required:
        - reason
        - details
      properties:
        reason:
          type: string
          enum: [unauthorized, duplicate_charge, incorrect_amount, product_service_issue, other]
          description: "The primary reason for disputing the transaction."
        details:
          type: string
          description: "Detailed explanation of the dispute."
        supportingDocuments:
          type: ["array", "null"]
          items:
            type: string
            format: uri
          description: "URLs to supporting documents (e.g., receipts, communication)."

    DisputeStatus:
      type: object
      required:
        - disputeId
        - status
        - nextSteps
        - lastUpdated
      properties:
        disputeId:
          type: string
          description: "Unique identifier for the dispute case."
        status:
          type: string
          enum: [pending, under_review, requires_more_info, resolved, rejected]
          description: "Current status of the dispute."
        nextSteps:
          type: string
          description: "Guidance on what to expect next in the dispute process."
        lastUpdated:
          type: string
          format: date-time
          description: "Timestamp when the dispute status was last updated."

    RecurringTransaction:
      type: object
      description: "Details of a detected or user-defined recurring transaction."
      required:
        - id
        - description
        - category
        - amount
        - currency
        - frequency
        - status
      properties:
        id:
          type: string
          description: "Unique identifier for the recurring transaction."
        description:
          type: string
          description: "Description of the recurring transaction."
        category:
          type: string
          description: "Category of the recurring transaction."
        amount:
          type: number
          format: float
          description: "Amount of the recurring transaction."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "ISO 4217 currency code."
        frequency:
          type: string
          enum: [daily, weekly, bi_weekly, monthly, quarterly, semi_annually, annually]
          description: "Frequency of the recurring transaction."
        nextDueDate:
          type: ["string", "null"]
          format: date
          description: "Next scheduled due date for the transaction."
        lastPaidDate:
          type: ["string", "null"]
          format: date
          description: "Date of the last payment for this recurring transaction."
        status:
          type: string
          enum: [active, inactive, cancelled, paused]
          description: "Current status of the recurring transaction."
        linkedAccountId:
          type: ["string", "null"]
          description: "ID of the account typically used for this recurring transaction."
        aiConfidenceScore:
          type: ["number", "null"]
          format: float
          minimum: 0
          maximum: 1
          description: "AI confidence score that this is a recurring transaction (0-1)."

    RecurringTransactionCreationRequest:
      type: object
      required:
        - description
        - category
        - amount
        - currency
        - frequency
        - startDate
        - linkedAccountId
      properties:
        description:
          type: string
          description: "Description of the recurring transaction."
        category:
          type: string
          description: "Category of the recurring transaction."
        amount:
          type: number
          format: float
          description: "Amount of the recurring transaction."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "ISO 4217 currency code."
        frequency:
          type: string
          enum: [daily, weekly, bi_weekly, monthly, quarterly, semi_annually, annually]
          description: "Frequency of the recurring transaction."
        startDate:
          type: string
          format: date
          description: "The date when this recurring transaction is expected to start."
        linkedAccountId:
          type: string
          description: "ID of the account to associate with this recurring transaction."

    AIInsight:
      type: object
      description: "An AI-generated insight, alert, or recommendation."
      required:
        - id
        - title
        - description
        - category
        - severity
        - timestamp
      properties:
        id:
          type: string
          description: "Unique identifier for the AI insight."
        title:
          type: string
          description: "A concise title for the insight."
        description:
          type: string
          description: "Detailed explanation of the insight."
        category:
          type: string
          enum: [spending, saving, investing, budgeting, security, financial_goals, sustainability, corporate_treasury, compliance, other]
          description: "Category of the insight."
        severity:
          type: string
          enum: [low, medium, high, critical]
          description: "AI-assessed severity or importance of the insight."
        actionableRecommendation:
          type: ["string", "null"]
          description: "Optional: A concrete action the user can take based on the insight."
        actionTrigger:
          type: ["string", "null"]
          description: "Optional: A programmatic trigger or deep link to initiate the recommended action."
        timestamp:
          type: string
          format: date-time
          description: "Timestamp when the insight was generated."

    SpendingTrends:
      type: object
      required:
        - period
        - overallTrend
        - percentageChange
        - topCategoriesByChange
        - aiInsights
        - forecastNextMonth
      properties:
        period:
          type: string
          description: "The period over which the spending trend is analyzed."
        overallTrend:
          type: string
          enum: [increasing, decreasing, stable]
          description: "Overall trend of spending."
        percentageChange:
          type: number
          format: float
          description: "Percentage change in spending over the period."
        topCategoriesByChange:
          type: array
          items:
            type: object
            properties:
              category:
                type: string
              percentageChange:
                type: number
                format: float
              absoluteChange:
                type: number
                format: float
          description: "Categories with the most significant changes in spending."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights and recommendations related to spending."
        forecastNextMonth:
          type: number
          format: float
          description: "AI-projected total spending for the next month."

    BudgetCategory:
      type: object
      required:
        - name
        - allocated
        - spent
        - remaining
      properties:
        name:
          type: string
          description: "Name of the budget category."
        allocated:
          type: number
          format: float
          description: "Amount allocated to this category."
        spent:
          type: number
          format: float
          description: "Amount spent in this category so far."
        remaining:
          type: number
          format: float
          description: "Remaining amount in this category."

    Budget:
      type: object
      required:
        - id
        - name
        - period
        - startDate
        - endDate
        - totalAmount
        - spentAmount
        - remainingAmount
        - categories
        - status
        - alertThreshold
      properties:
        id:
          type: string
          description: "Unique identifier for the budget."
        name:
          type: string
          description: "Name of the budget."
        period:
          type: string
          enum: [weekly, bi_weekly, monthly, quarterly, annually, custom]
          description: "The frequency or period of the budget."
        startDate:
          type: string
          format: date
          description: "Start date of the budget period."
        endDate:
          type: string
          format: date
          description: "End date of the budget period."
        totalAmount:
          type: number
          format: float
          description: "Total amount allocated for the entire budget."
        spentAmount:
          type: number
          format: float
          description: "Total amount spent against this budget so far."
        remainingAmount:
          type: number
          format: float
          description: "Remaining amount in the budget."
        categories:
          type: array
          items:
            $ref: "#/components/schemas/BudgetCategory"
          description: "Breakdown of the budget by categories."
        status:
          type: string
          enum: [active, archived, ended]
          description: "Current status of the budget."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          description: "Percentage threshold at which an alert is triggered."
        aiRecommendations:
          type: ["array", "null"]
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven recommendations related to this budget."

    BudgetCreationRequest:
      type: object
      required:
        - name
        - period
        - startDate
        - endDate
        - totalAmount
      properties:
        name:
          type: string
          description: "Name of the new budget."
        period:
          type: string
          enum: [weekly, bi_weekly, monthly, quarterly, annually, custom]
          description: "The frequency or period of the budget."
        startDate:
          type: string
          format: date
          description: "Start date of the budget period."
        endDate:
          type: string
          format: date
          description: "End date of the budget period."
        totalAmount:
          type: number
          format: float
          description: "Total amount allocated for the entire budget."
        categories:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              allocated:
                type: number
                format: float
          description: "Initial breakdown of the budget by categories."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          description: "Percentage threshold at which an alert is triggered."
        aiAutoPopulate:
          type: boolean
          default: false
          description: "If true, AI will automatically populate categories and amounts based on historical spending."

    BudgetUpdateRequest:
      type: object
      description: "Fields that can be updated for an existing budget."
      properties:
        name:
          type: string
          description: "Updated name of the budget."
        totalAmount:
          type: number
          format: float
          description: "Updated total amount for the entire budget."
        startDate:
          type: string
          format: date
          description: "Updated start date of the budget period."
        endDate:
          type: string
          format: date
          description: "Updated end date of the budget period."
        categories:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              allocated:
                type: number
                format: float
          description: "Updated breakdown of the budget by categories."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          description: "Updated percentage threshold for alerts."
        status:
          type: string
          enum: [active, archived, ended]
          description: "Updated status of the budget."

    InvestmentHolding:
      type: object
      required:
        - symbol
        - name
        - quantity
        - averageCost
        - currentPrice
        - marketValue
        - percentageOfPortfolio
      properties:
        symbol:
          type: string
          description: "Stock ticker or asset symbol."
        name:
          type: string
          description: "Full name of the investment asset."
        quantity:
          type: number
          format: float
          description: "Number of units held."
        averageCost:
          type: number
          format: float
          description: "Average cost per unit."
        currentPrice:
          type: number
          format: float
          description: "Current market price per unit."
        marketValue:
          type: number
          format: float
          description: "Total market value of the holding."
        percentageOfPortfolio:
          type: number
          format: float
          description: "Percentage of the total portfolio value this holding represents."
        esgScore:
          type: ["number", "null"]
          format: float
          minimum: 0
          maximum: 10
          description: "Overall ESG (Environmental, Social, Governance) score of the asset (0-10)."

    InvestmentPortfolio:
      type: object
      required:
        - id
        - name
        - type
        - currency
        - totalValue
        - unrealizedGainLoss
        - todayGainLoss
        - lastUpdated
        - riskTolerance
      properties:
        id:
          type: string
          description: "Unique identifier for the investment portfolio."
        name:
          type: string
          description: "Name of the portfolio."
        type:
          type: string
          enum: [equities, bonds, diversified, crypto, retirement, other]
          description: "General type or strategy of the portfolio."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "ISO 4217 currency code of the portfolio."
        totalValue:
          type: number
          format: float
          description: "Current total market value of the portfolio."
        unrealizedGainLoss:
          type: number
          format: float
          description: "Total unrealized gain or loss on the portfolio."
        todayGainLoss:
          type: number
          format: float
          description: "Daily gain or loss on the portfolio."
        lastUpdated:
          type: string
          format: date-time
          description: "Timestamp when the portfolio data was last updated."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          description: "User's stated or AI-assessed risk tolerance for this portfolio."
        aiPerformanceInsights:
          type: ["array", "null"]
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights into portfolio performance and market outlook."
        holdings:
          type: array
          items:
            $ref: "#/components/schemas/InvestmentHolding"
          description: "List of individual assets held in the portfolio."
        aiRebalancingFrequency:
          type: ["string", "null"]
          enum: [monthly, quarterly, semi_annually, annually, never]
          description: "Frequency at which AI-driven rebalancing is set to occur."

    InvestmentPortfolioCreationRequest:
      type: object
      required:
        - name
        - type
        - currency
        - initialInvestment
        - riskTolerance
      properties:
        name:
          type: string
          description: "Name for the new investment portfolio."
        type:
          type: string
          enum: [equities, bonds, diversified, crypto, retirement, other]
          description: "General type or strategy of the portfolio."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "ISO 4217 currency code of the portfolio."
        initialInvestment:
          type: number
          format: float
          description: "Initial amount to invest into the portfolio."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          description: "Desired risk tolerance for this portfolio."
        aiAutoAllocate:
          type: boolean
          default: false
          description: "If true, AI will automatically allocate initial investment based on risk tolerance."
        linkedAccountId:
          type: ["string", "null"]
          description: "Optional: ID of a linked account to fund the initial investment."

    InvestmentPortfolioUpdateRequest:
      type: object
      description: "Fields that can be updated for an investment portfolio."
      properties:
        name:
          type: string
          description: "Updated name of the portfolio."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          description: "Updated risk tolerance for this portfolio. May trigger rebalancing."
        aiRebalancingFrequency:
          type: ["string", "null"]
          enum: [monthly, quarterly, semi_annually, annually, never]
          description: "Updated frequency for AI-driven rebalancing."

    RebalanceRequest:
      type: object
      required:
        - targetRiskTolerance
      properties:
        targetRiskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          description: "The desired risk tolerance for rebalancing the portfolio."
        dryRun:
          type: boolean
          default: true
          description: "If true, only simulate the rebalance without executing trades."
        confirmationRequired:
          type: boolean
          default: true
          description: "If true, user confirmation is required before executing actual trades."

    RebalanceStatus:
      type: object
      required:
        - rebalanceId
        - portfolioId
        - status
        - statusMessage
      properties:
        rebalanceId:
          type: string
          description: "Unique identifier for the rebalancing operation."
        portfolioId:
          type: string
          description: "ID of the portfolio being rebalanced."
        status:
          type: string
          enum: [analyzing, pending_confirmation, executing_trades, completed, failed]
          description: "Current status of the rebalancing operation."
        statusMessage:
          type: string
          description: "A descriptive message about the current rebalance status."
        proposedTrades:
          type: ["array", "null"]
          items:
            type: object
            properties:
              action:
                type: string
                enum: [buy, sell]
              symbol:
                type: string
              quantity:
                type: number
              estimatedPrice:
                type: number
          description: "List of proposed trades if `dryRun` was true."
        estimatedImpact:
          type: ["string", "null"]
          description: "AI-estimated impact of the rebalance on the portfolio."
        confirmationRequired:
          type: ["boolean", "null"]
          description: "Indicates if user confirmation is required to proceed with trades."
        confirmationExpiresAt:
          type: ["string", "null"]
          format: date-time
          description: "Timestamp when the rebalance confirmation expires."

    ESGAssetSearchResult:
      type: object
      required:
        - assetSymbol
        - assetName
        - assetType
        - currentPrice
        - currency
        - overallESGScore
      properties:
        assetSymbol:
          type: string
          description: "Symbol of the investment asset."
        assetName:
          type: string
          description: "Full name of the investment asset."
        assetType:
          type: string
          enum: [stock, etf, mutual_fund, bond]
          description: "Type of the investment asset."
        currentPrice:
          type: number
          format: float
          description: "Current market price of the asset."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "Currency of the asset's price."
        overallESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          description: "Overall ESG score (0-10), higher is better."
        environmentalScore:
          type: ["number", "null"]
          format: float
          minimum: 0
          maximum: 10
          description: "Environmental component of the ESG score."
        socialScore:
          type: ["number", "null"]
          format: float
          minimum: 0
          maximum: 10
          description: "Social component of the ESG score."
        governanceScore:
          type: ["number", "null"]
          format: float
          minimum: 0
          maximum: 10
          description: "Governance component of the ESG score."
        esgRatingProvider:
          type: ["string", "null"]
          description: "Provider of the ESG rating (e.g., MSCI, Sustainalytics)."
        esgControversies:
          type: ["array", "null"]
          items:
            type: string
          description: "List of any significant ESG-related controversies associated with the asset."
        aiESGInsight:
          type: ["string", "null"]
          description: "AI-generated insight summarizing the ESG profile."

    AIChatMessage:
      type: object
      required:
        - role
        - content
        - timestamp
      properties:
        role:
          type: string
          enum: [user, assistant, tool_call, tool_response]
          description: "Role of the speaker."
        content:
          type: string
          description: "The textual content of the message."
        timestamp:
          type: string
          format: date-time
          description: "Timestamp of the message."
        functionCall:
          type: object
          properties:
            name:
              type: string
            args:
              type: object
          description: "If role is 'tool_call', details of the tool function called by the AI."
        functionResponse:
          type: object
          properties:
            name:
              type: string
            response:
              type: object
          description: "If role is 'tool_response', the output from the tool function."

    AIChatRequest:
      type: object
      oneOf:
        - required: [message]
        - required: [functionResponse]
      properties:
        message:
          type: string
          description: "The user's textual input to the AI Advisor."
        sessionId:
          type: ["string", "null"]
          description: "Optional: Session ID to continue a conversation."
        functionResponse:
          type: ["object", "null"]
          properties:
            name:
              type: string
              description: "The name of the tool function for which this is a response."
            response:
              type: object
              description: "The JSON output from the execution of the tool function."
          description: "Optional: The output from a tool function that the AI previously requested."

    AIChatResponse:
      type: object
      required:
        - sessionId
      properties:
        text:
          type: ["string", "null"]
          description: "The AI Advisor's textual response."
        sessionId:
          type: string
          description: "The active conversation session ID."
        proactiveInsights:
          type: ["array", "null"]
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "A list of proactive AI insights or recommendations."
        functionCalls:
          type: ["array", "null"]
          items:
            type: object
            properties:
              id:
                type: string
                description: "Unique ID for this tool call."
              name:
                type: string
                description: "The name of the tool function to call."
              args:
                type: object
                description: "Key-value pairs representing the arguments to pass to the tool function."
          description: "A list of tool functions the AI wants the system to execute."
        requiresUserAction:
          type: boolean
          default: false
          description: "Indicates if the AI's response implies that the user needs to take a specific action."

    AITool:
      type: object
      required:
        - name
        - description
        - parameters
        - accessScope
      properties:
        name:
          type: string
          description: "The unique name of the AI tool (function name)."
        description:
          type: string
          description: "A description of what the tool does."
        parameters:
          type: object
          description: "OpenAPI schema object defining the input parameters for the tool function."
        accessScope:
          type: string
          description: "The OAuth2 scope required to execute this tool."

    PaginatedChatMessages:
      allOf:
        - $ref: "#/components/schemas/PaginatedCursorList"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/AIChatMessage"

    SimulationRequest:
      type: object
      required:
        - prompt
      properties:
        prompt:
          type: string
          description: "A natural language prompt describing the 'what-if' scenario."
        parameters:
          type: ["object", "null"]
          description: "Optional structured parameters to guide the simulation."

    SimulationResponse:
      type: object
      required:
        - simulationId
        - narrativeSummary
        - keyImpacts
      properties:
        simulationId:
          type: string
          description: "Unique identifier for the completed simulation."
        narrativeSummary:
          type: string
          description: "A natural language summary of the simulation's results and key findings."
        keyImpacts:
          type: array
          items:
            type: object
            properties:
              metric:
                type: string
              value:
                type: string
              severity:
                type: string
                enum: [low, medium, high]
          description: "Key quantitative and qualitative impacts identified by the AI."
        recommendations:
          type: ["array", "null"]
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "Actionable recommendations derived from the simulation."
        riskAnalysis:
          type: ["object", "null"]
          properties:
            maxDrawdown:
              type: number
              format: float
              description: "Maximum potential loss from peak to trough."
            volatilityIndex:
              type: number
              format: float
              description: "Measure of market volatility associated with the scenario."
          description: "AI-driven risk assessment of the simulated scenario."
        visualizations:
          type: ["array", "null"]
          items:
            type: object
            properties:
              type:
                type: string
                enum: [line_chart, bar_chart, table]
              title:
                type: string
              dataUri:
                type: string
                format: uri
          description: "Optional: URLs to generated visualization data or images."

    AdvancedSimulationRequest:
      type: object
      required:
        - prompt
        - scenarios
      properties:
        prompt:
          type: string
          description: "A natural language prompt describing the complex, multi-variable scenario."
        scenarios:
          type: array
          minItems: 1
          items:
            type: object
            required:
              - name
              - events
              - durationYears
            properties:
              name:
                type: string
                description: "A descriptive name for this specific scenario."
              events:
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      enum: [job_loss, market_downturn, large_purchase, income_increase, medical_emergency]
                    details:
                      type: object
                      description: "Specific parameters for the event."
                description: "A list of discrete or continuous events that define this scenario."
              durationYears:
                type: integer
                minimum: 1
                maximum: 50
                description: "The duration in years over which this scenario is simulated."
              sensitivityAnalysisParams:
                type: ["array", "null"]
                items:
                  type: object
                  properties:
                    paramName:
                      type: string
                      description: "The name of the parameter to vary for sensitivity analysis."
                    min:
                      type: number
                      description: "Minimum value for the parameter."
                    max:
                      type: number
                      description: "Maximum value for the parameter."
                    step:
                      type: number
                      description: "Step increment for varying the parameter."
                description: "Parameters for multi-variable sensitivity analysis."
        globalEconomicFactors:
          type: ["object", "null"]
          description: "Optional: Global economic conditions to apply to all scenarios."
          properties:
            inflationRate:
              type: number
              format: float
            interestRateBaseline:
              type: number
              format: float
        personalAssumptions:
          type: ["object", "null"]
          description: "Optional: Personal financial assumptions to override defaults."
          properties:
            annualSavingsRate:
              type: number
              format: float
            riskTolerance:
              type: string
              enum: [conservative, moderate, aggressive]

    AdvancedSimulationResponse:
      type: object
      required:
        - simulationId
        - overallSummary
        - scenarioResults
      properties:
        simulationId:
          type: string
          description: "Unique identifier for the completed advanced simulation."
        overallSummary:
          type: string
          description: "A high-level summary of findings across all scenarios."
        scenarioResults:
          type: array
          items:
            type: object
            required:
              - scenarioName
              - narrativeSummary
            properties:
              scenarioName:
                type: string
                description: "Name of the individual scenario."
              narrativeSummary:
                type: string
                description: "Summary of results for this specific scenario."
              finalNetWorthProjected:
                type: ["number", "null"]
                format: float
                description: "Projected net worth at the end of the simulation period."
              liquidityMetrics:
                type: ["object", "null"]
                properties:
                  minCashBalance:
                    type: number
                    format: float
                    description: "Minimum cash balance reached during the scenario."
                  recoveryTimeMonths:
                    type: integer
                    description: "Time in months to recover to pre-event financial state."
              sensitivityAnalysisGraphs:
                type: ["array", "null"]
                items:
                  type: object
                  properties:
                    paramName:
                      type: string
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          paramValue:
                            type: number
                          outcomeValue:
                            type: number
                description: "Data for generating sensitivity analysis charts."
              aiInsights:
                type: ["array", "null"]
                items:
                  $ref: "#/components/schemas/AIInsight"
                description: "Specific AI insights for this scenario."
        strategicRecommendations:
          type: ["array", "null"]
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "Overarching strategic recommendations derived from the comparison of scenarios."

    SimulationSummary:
      type: object
      required:
        - simulationId
        - title
        - status
        - creationDate
        - lastUpdated
        - summary
      properties:
        simulationId:
          type: string
          description: "Unique identifier for the simulation."
        title:
          type: string
          description: "A user-friendly title for the simulation."
        status:
          type: string
          enum: [processing, completed, failed]
          description: "Current status of the simulation."
        creationDate:
          type: string
          format: date-time
          description: "Timestamp when the simulation was initiated."
        lastUpdated:
          type: string
          format: date-time
          description: "Timestamp when the simulation status or results were last updated."
        summary:
          type: string
          description: "A brief summary of what the simulation evaluated."

    QuantumWeaverState:
      type: object
      required:
        - pitchId
        - stage
        - statusMessage
        - lastUpdated
        - nextSteps
      properties:
        pitchId:
          type: string
          description: "Unique identifier for the business pitch."
        stage:
          type: string
          enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
          description: "Current stage of the business pitch in the incubation process."
        statusMessage:
          type: string
          description: "A human-readable status message."
        lastUpdated:
          type: string
          format: date-time
          description: "Timestamp of the last status update."
        feedbackSummary:
          type: ["string", "null"]
          description: "A summary of AI-generated feedback, if applicable."
        questions:
          type: ["array", "null"]
          items:
            type: object
            properties:
              id:
                type: string
              question:
                type: string
              category:
                type: string
              isRequired:
                type: boolean
          description: "List of questions from Quantum Weaver requiring the user's input."
        nextSteps:
          type: string
          description: "Guidance on the next actions for the user."
        estimatedFundingOffer:
          type: ["number", "null"]
          format: float
          description: "AI's estimated funding offer, if the pitch progresses."

    QuantumWeaverDetailedState:
      allOf:
        - $ref: "#/components/schemas/QuantumWeaverState"
        - type: object
          properties:
            aiFinancialModel:
              type: ["object", "null"]
              description: "AI's detailed financial model analysis."
              properties:
                revenueBreakdown:
                  type: object
                  additionalProperties:
                    type: string
                costStructureAnalysis:
                  type: object
                  additionalProperties:
                    type: string
                breakevenPoint:
                  type: string
                capitalRequirements:
                  type: number
                  format: float
                sensitivityAnalysis:
                  type: array
                  items:
                    type: object
                    properties:
                      scenario: {type: string}
                      projectedIRR: {type: number, format: float}
                      terminalValue: {type: number, format: float}
            aiMarketAnalysis:
              type: ["object", "null"]
              description: "AI's detailed market analysis."
              properties:
                targetMarketSize:
                  type: string
                competitiveAdvantages:
                  type: array
                  items: {type: string}
                growthOpportunities:
                  type: string
                riskFactors:
                  type: string
            aiCoachingPlan:
              type: ["object", "null"]
              description: "AI-generated coaching plan for the entrepreneur."
              properties:
                title: {type: string}
                summary: {type: string}
                steps:
                  type: array
                  items:
                    type: object
                    properties:
                      title: {type: string}
                      description: {type: string}
                      timeline: {type: string}
                      status: {type: string, enum: [pending, in_progress, completed]}
                      resources:
                        type: array
                        items:
                          type: object
                          properties:
                            name: {type: string}
                            url: {type: string, format: uri}
            investorMatchScore:
              type: ["number", "null"]
              format: float
              minimum: 0
              maximum: 1
              description: "AI's score for how well the pitch matches potential investors (0-1)."
            aiRiskAssessment:
              type: ["object", "null"]
              description: "AI's assessment of risks associated with the venture."
              properties:
                technicalRisk: {type: string}
                marketRisk: {type: string}
                teamRisk: {type: string}

    QuantumWeaverFeedbackRequest:
      type: object
      properties:
        feedback:
          type: ["string", "null"]
          description: "General textual feedback or additional details for Quantum Weaver."
        answers:
          type: array
          items:
            type: object
            required:
              - questionId
              - answer
            properties:
              questionId:
                type: string
                description: "The ID of the question being answered."
              answer:
                type: string
                description: "The answer to the specific question."

    GenerateVideoRequest:
      type: object
      required:
        - prompt
        - style
        - lengthSeconds
      properties:
        prompt:
          type: string
          description: "The textual prompt to guide the AI video generation."
        style:
          type: string
          enum: [cinematic, explainer, documentary, abstract, minimalist]
          description: "Artistic style of the video."
        lengthSeconds:
          type: integer
          minimum: 5
          maximum: 60
          description: "Desired length of the video in seconds."
        aspectRatio:
          type: string
          enum: ["16:9", "9:16", "1:1"]
          default: "16:9"
          description: "Aspect ratio of the video."
        brandColors:
          type: ["array", "null"]
          items:
            type: string
            pattern: "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"
          description: "Optional: Hex color codes to influence the video's aesthetic."
        keywords:
          type: ["array", "null"]
          items:
            type: string
          description: "Optional: Additional keywords to guide the AI's content generation."

    AdvancedGenerateVideoRequest:
      allOf:
        - $ref: "#/components/schemas/GenerateVideoRequest"
        - type: object
          properties:
            voiceoverText:
              type: ["string", "null"]
              description: "Optional: Text for an AI-generated voiceover."
            voiceoverStyle:
              type: ["string", "null"]
              enum: [male_professional, female_friendly, neutral_calm]
              description: "Style/tone for the AI voiceover."
            backgroundMusicGenre:
              type: ["string", "null"]
              enum: [corporate, uplifting, ambient, cinematic, none]
              description: "Genre of background music."
            audienceTarget:
              type: ["string", "null"]
              enum: [general, corporate, investor, youth]
              description: "Target audience for the ad, influencing tone and visuals."
            callToAction:
              type: ["object", "null"]
              properties:
                text:
                  type: string
                url:
                  type: string
                  format: uri
                displayTimeSeconds:
                  type: integer
                  minimum: 1
              description: "Call-to-action text and URL to be displayed."
            brandAssets:
              type: ["array", "null"]
              items:
                type: string
                format: uri
              description: "URLs to brand assets (e.g., logos) to be incorporated."

    VideoOperationStatus:
      type: object
      required:
        - operationId
        - status
        - progressPercentage
        - message
      properties:
        operationId:
          type: string
          description: "The unique identifier for the video generation operation."
        status:
          type: string
          enum: [queued, generating, rendering, done, error]
          description: "Current status of the video generation job."
        progressPercentage:
          type: integer
          minimum: 0
          maximum: 100
          description: "Estimated completion percentage (0-100)."
        message:
          type: string
          description: "A descriptive status message."
        errorMessage:
          type: ["string", "null"]
          description: "Error message if the operation failed."
        videoUri:
          type: ["string", "null"]
          format: uri
          description: "Temporary, signed URL to the generated video asset (available when status is 'done')."
        previewImageUri:
          type: ["string", "null"]
          format: uri
          description: "Temporary, signed URL to a preview image/thumbnail of the video."

    CorporateCardControls:
      type: object
      description: "Granular spending controls for a corporate card."
      properties:
        atmWithdrawals:
          type: boolean
          description: "If true, ATM cash withdrawals are allowed."
        contactlessPayments:
          type: boolean
          description: "If true, contactless payments are allowed."
        onlineTransactions:
          type: boolean
          description: "If true, online transactions are allowed."
        internationalTransactions:
          type: boolean
          description: "If true, international transactions are allowed."
        monthlyLimit:
          type: ["number", "null"]
          format: float
          description: "Maximum spending limit per month (null for no limit)."
        dailyLimit:
          type: ["number", "null"]
          format: float
          description: "Maximum spending limit per day (null for no limit)."
        singleTransactionLimit:
          type: ["number", "null"]
          format: float
          description: "Maximum amount for a single transaction (null for no limit)."
        merchantCategoryRestrictions:
          type: ["array", "null"]
          items:
            type: string
          description: "List of allowed merchant categories."
        vendorRestrictions:
          type: ["array", "null"]
          items:
            type: string
          description: "List of allowed vendors/merchants by name."

    CorporateCard:
      type: object
      required:
        - id
        - holderName
        - cardNumberMask
        - expirationDate
        - status
        - frozen
        - cardType
        - controls
        - createdDate
        - currency
      properties:
        id:
          type: string
          description: "Unique identifier for the corporate card."
        holderName:
          type: string
          description: "Name of the card holder."
        associatedEmployeeId:
          type: ["string", "null"]
          description: "Optional: ID of the employee associated with this card."
        cardNumberMask:
          type: string
          description: "Masked card number for display purposes."
        expirationDate:
          type: string
          format: date
          description: "Expiration date of the card (YYYY-MM-DD)."
        status:
          type: string
          enum: [active, suspended, deactivated, pending_activation]
          description: "Current status of the card."
        frozen:
          type: boolean
          description: "If true, the card is temporarily frozen and cannot be used."
        cardType:
          type: string
          enum: [physical, virtual]
          description: "Type of the card (physical or virtual)."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
        spendingPolicyId:
          type: ["string", "null"]
          description: "Optional: ID of the overarching spending policy applied to this card."
        createdDate:
          type: string
          format: date-time
          description: "Timestamp when the card was created."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "Currency of the card's limits and transactions."

    CorporateCardUpdateRequest:
      type: object
      description: "Fields that can be updated for a corporate card."
      properties:
        frozen:
          type: boolean
          description: "Set to `true` to freeze the card, `false` to unfreeze."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
          description: "The updated spending controls and limits for the corporate card."

    VirtualCardCreationRequest:
      type: object
      required:
        - holderName
        - purpose
        - controls
        - expirationDate
      properties:
        holderName:
          type: string
          description: "Name to appear on the virtual card."
        associatedEmployeeId:
          type: ["string", "null"]
          description: "Optional: ID of the employee or department this card is for."
        purpose:
          type: string
          description: "Brief description of the virtual card's purpose."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
          description: "Specific spending controls for this virtual card."
        expirationDate:
          type: string
          format: date
          description: "Expiration date for the virtual card (YYYY-MM-DD)."
        spendingPolicyId:
          type: ["string", "null"]
          description: "Optional: ID of a spending policy to link with this virtual card."

    FinancialAnomaly:
      type: object
      required:
        - id
        - description
        - severity
        - status
        - entityType
        - entityId
        - timestamp
        - riskScore
        - aiConfidenceScore
        - recommendedAction
      properties:
        id:
          type: string
          description: "Unique identifier for the detected anomaly."
        description:
          type: string
          description: "A brief summary of the anomaly."
        details:
          type: ["string", "null"]
          description: "Detailed context and reasoning behind the anomaly detection."
        severity:
          type: string
          enum: [low, medium, high, critical]
          description: "AI-assessed severity of the anomaly."
        status:
          type: string
          enum: [new, under_review, escalated, dismissed, resolved]
          description: "Current review status of the anomaly."
        entityType:
          type: string
          enum: [payment_order, transaction, counterparty, corporate_card, user, invoice]
          description: "The type of financial entity related to the anomaly."
        entityId:
          type: string
          description: "The ID of the specific entity the anomaly is linked to."
        timestamp:
          type: string
          format: date-time
          description: "Timestamp when the anomaly was detected."
        riskScore:
          type: integer
          minimum: 0
          maximum: 100
          description: "AI-assigned risk score (0-100), higher is more risky."
        aiConfidenceScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: "AI's confidence in its detection of the anomaly (0-1)."
        recommendedAction:
          type: ["string", "null"]
          description: "AI-recommended immediate action to address the anomaly."
        relatedTransactions:
          type: ["array", "null"]
          items:
            type: string
          description: "List of IDs of other transactions or entities related to this anomaly."
        resolutionNotes:
          type: ["string", "null"]
          description: "Notes recorded during the resolution or dismissal of the anomaly."

    ComplianceAuditRequest:
      type: object
      required:
        - auditScope
        - startDate
        - endDate
        - regulatoryFrameworks
      properties:
        auditScope:
          type: string
          enum: [all_transactions, specific_accounts, specific_cards, all_users]
          description: "The scope of the audit."
        startDate:
          type: string
          format: date
          description: "Start date for the audit period (inclusive)."
        endDate:
          type: string
          format: date
          description: "End date for the audit period (inclusive)."
        regulatoryFrameworks:
          type: array
          items:
            type: string
            enum: [aml, kyc, pci_dss, gdpr, ccpa, sox, ofac]
          description: "List of regulatory frameworks against which to audit."
        additionalContext:
          type: ["string", "null"]
          description: "Optional: Any additional context or specific areas of concern for the AI."

    ComplianceAuditReport:
      type: object
      required:
        - auditId
        - status
        - auditDate
        - periodCovered
        - overallComplianceScore
        - summary
        - findings
        - recommendedActions
      properties:
        auditId:
          type: string
          description: "Unique identifier for the compliance audit."
        status:
          type: string
          enum: [processing, completed, failed]
          description: "Current status of the audit."
        auditDate:
          type: string
          format: date-time
          description: "Timestamp when the audit report was generated."
        periodCovered:
          type: object
          properties:
            startDate:
              type: string
              format: date
            endDate:
              type: string
              format: date
          description: "The period covered by this audit report."
        overallComplianceScore:
          type: integer
          minimum: 0
          maximum: 100
          description: "Overall compliance score (0-100), higher is better."
        summary:
          type: string
          description: "A high-level summary of the audit findings."
        findings:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum: [finding, observation, recommendation]
              severity:
                type: string
                enum: [low, medium, high, critical]
              description:
                type: string
              relatedEntities:
                type: ["array", "null"]
                items:
                  type: string
                description: "IDs of entities related to this finding."
          description: "Detailed findings, observations, and recommendations."
        recommendedActions:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated actionable recommendations to improve compliance."

    SanctionScreeningRequest:
      type: object
      required:
        - name
        - entityType
        - country
      properties:
        name:
          type: string
          description: "Full name of the individual or organization to screen."
        entityType:
          type: string
          enum: [individual, organization]
          description: "The type of entity being screened."
        country:
          type: string
          pattern: '^[A-Z]{2}$'
          description: "Two-letter ISO country code related to the entity."
        dateOfBirth:
          type: ["string", "null"]
          format: date
          description: "Date of birth for individuals (YYYY-MM-DD)."
        identificationNumber:
          type: ["string", "null"]
          description: "Optional: Any government-issued identification number."
        address:
          $ref: "#/components/schemas/Address"

    SanctionScreeningResponse:
      type: object
      required:
        - screeningId
        - matchFound
        - matchDetails
        - screeningTimestamp
        - status
      properties:
        screeningId:
          type: string
          description: "Unique identifier for this screening operation."
        matchFound:
          type: boolean
          description: "True if any potential matches were found on sanction lists."
        matchDetails:
          type: array
          items:
            type: object
            properties:
              listName:
                type: string
                description: "Name of the sanction list where a match was found."
              matchedName:
                type: string
                description: "The name on the sanction list that matched."
              reason:
                type: string
                description: "Reason for the match."
              score:
                type: number
                format: float
                minimum: 0
                maximum: 1
                description: "Match confidence score (0-1)."
              publicUrl:
                type: ["string", "null"]
                format: uri
                description: "Optional: URL to public record of the sanction list entry."
          description: "Details of any potential or exact matches found."
        screeningTimestamp:
          type: string
          format: date-time
          description: "Timestamp when the screening was performed."
        status:
          type: string
          enum: [clear, potential_match, confirmed_match, error]
          description: "Overall status of the screening result."
        message:
          type: ["string", "null"]
          description: "An optional message providing more context on the status."

    CryptoWalletConnection:
      type: object
      required:
        - id
        - walletProvider
        - walletAddress
        - blockchainNetwork
        - status
        - lastSynced
        - readAccessGranted
        - writeAccessGranted
      properties:
        id:
          type: string
          description: "Unique identifier for this wallet connection."
        walletProvider:
          type: string
          description: "Name of the wallet provider (e.g., MetaMask, Ledger, Phantom)."
        walletAddress:
          type: string
          description: "Public address of the connected cryptocurrency wallet."
        blockchainNetwork:
          type: string
          description: "The blockchain network this wallet is primarily connected to."
        status:
          type: string
          enum: [connected, disconnected, pending_verification, error]
          description: "Current status of the wallet connection."
        lastSynced:
          type: string
          format: date-time
          description: "Timestamp when the wallet's data was last synchronized."
        readAccessGranted:
          type: boolean
          description: "Indicates if read access (balances, NFTs) is granted."
        writeAccessGranted:
          type: boolean
          description: "Indicates if write access (transactions) is granted."

    ConnectWalletRequest:
      type: object
      required:
        - walletAddress
        - walletProvider
        - blockchainNetwork
        - signedMessage
      properties:
        walletAddress:
          type: string
          description: "The public address of the cryptocurrency wallet."
        walletProvider:
          type: string
          description: "The name of the wallet provider."
        blockchainNetwork:
          type: string
          description: "The blockchain network for this wallet."
        signedMessage:
          type: string
          description: "A message cryptographically signed by the wallet owner to prove ownership."
        requestWriteAccess:
          type: boolean
          default: false
          description: "If true, requests write access to initiate transactions from this wallet."

    CryptoAssetBalance:
      type: object
      required:
        - assetSymbol
        - assetName
        - balance
        - usdValue
      properties:
        assetSymbol:
          type: string
          description: "Symbol of the crypto asset (e.g., ETH, BTC, USDC)."
        assetName:
          type: string
          description: "Full name of the crypto asset."
        balance:
          type: number
          format: float
          description: "Current balance of the asset in the wallet."
        usdValue:
          type: number
          format: float
          description: "Current USD value of the asset balance."
        contractAddress:
          type: ["string", "null"]
          description: "The contract address for ERC-20 tokens or similar."
        network:
          type: ["string", "null"]
          description: "The blockchain network the asset resides on."

    NFTAsset:
      type: object
      required:
        - id
        - collectionName
        - name
        - imageUrl
        - blockchainNetwork
        - ownerAddress
        - contractAddress
        - tokenId
      properties:
        id:
          type: string
          description: "Unique identifier for the NFT within the system."
        collectionName:
          type: string
          description: "Name of the NFT collection."
        name:
          type: string
          description: "Name of the specific NFT."
        description:
          type: ["string", "null"]
          description: "Description of the NFT."
        imageUrl:
          type: string
          format: uri
          description: "URL to the NFT's image."
        blockchainNetwork:
          type: string
          description: "Blockchain network on which the NFT exists."
        ownerAddress:
          type: string
          description: "Blockchain address of the current owner."
        contractAddress:
          type: string
          description: "Blockchain contract address of the NFT collection."
        tokenId:
          type: string
          description: "Unique ID of the token within its contract."
        lastSalePriceUSD:
          type: ["number", "null"]
          format: float
          description: "Last known sale price in USD."
        estimatedValueUSD:
          type: ["number", "null"]
          format: float
          description: "AI-estimated current market value in USD."
        attributes:
          type: ["array", "null"]
          items:
            type: object
            properties:
              trait_type:
                type: string
              value:
                type: string
          description: "Key-value attributes of the NFT (e.g., rarity traits)."

    CryptoTransferRequest:
      type: object
      required:
        - sourceWalletId
        - recipientAddress
        - amount
        - assetSymbol
        - blockchainNetwork
      properties:
        sourceWalletId:
          type: string
          description: "ID of the connected wallet from which to send funds."
        recipientAddress:
          type: string
          description: "The recipient's blockchain address."
        amount:
          type: number
          format: float
          description: "The amount of cryptocurrency to transfer."
        assetSymbol:
          type: string
          description: "Symbol of the crypto asset to transfer."
        blockchainNetwork:
          type: string
          description: "The blockchain network for the transfer."
        gasPriceGwei:
          type: ["integer", "null"]
          description: "Optional: Gas price in Gwei for Ethereum-based transactions."
        memo:
          type: ["string", "null"]
          description: "Optional: A short memo or note for the transaction."

    CryptoTransferStatus:
      type: object
      required:
        - transferId
        - status
      properties:
        transferId:
          type: string
          description: "Unique identifier for this cryptocurrency transfer operation."
        status:
          type: string
          enum: [pending_signature, pending_blockchain_confirmation, completed, failed, cancelled]
          description: "Current status of the transfer."
        blockchainTxnHash:
          type: ["string", "null"]
          description: "The blockchain transaction hash, if available and confirmed."
        message:
          type: ["string", "null"]
          description: "A descriptive message about the transfer status."

    InternationalPaymentRequest:
      type: object
      required:
        - sourceAccountId
        - amount
        - sourceCurrency
        - targetCurrency
        - beneficiary
        - purpose
      properties:
        sourceAccountId:
          type: string
          description: "The ID of the user's source account for the payment."
        amount:
          type: number
          format: float
          description: "The amount to send in the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The ISO 4217 currency code of the source funds."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The ISO 4217 currency code for the beneficiary's currency."
        beneficiary:
          type: object
          required:
            - name
            - address
            - bankName
          properties:
            name:
              type: string
              description: "Full name of the beneficiary."
            address:
              type: string
              description: "Full address of the beneficiary."
            bankName:
              type: string
              description: "Name of the beneficiary's bank."
            iban:
              type: ["string", "null"]
              description: "IBAN for Eurozone transfers."
            swiftBic:
              type: ["string", "null"]
              description: "SWIFT/BIC code for international transfers."
            accountNumber:
              type: ["string", "null"]
              description: "Account number (if IBAN/SWIFT not applicable)."
            routingNumber:
              type: ["string", "null"]
              description: "Routing number (if applicable)."
          description: "Details of the payment beneficiary."
        purpose:
          type: string
          description: "Purpose of the payment."
        fxRateLock:
          type: boolean
          default: false
          description: "If true, attempts to lock the quoted FX rate for a short period."
        fxRateProvider:
          type: string
          enum: [proprietary_ai, market_rate]
          default: "proprietary_ai"
          description: "Indicates whether to use AI-optimized FX rates or standard market rates."
        reference:
          type: ["string", "null"]
          description: "Optional: Your internal reference for this payment."

    InternationalPaymentStatus:
      type: object
      required:
        - paymentId
        - status
        - sourceAmount
        - sourceCurrency
        - targetAmount
        - targetCurrency
        - fxRateApplied
      properties:
        paymentId:
          type: string
          description: "Unique identifier for the international payment."
        status:
          type: string
          enum: [in_progress, held_for_review, completed, failed, cancelled]
          description: "Current processing status of the payment."
        sourceAmount:
          type: number
          format: float
          description: "The amount sent in the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The source currency code."
        targetAmount:
          type: number
          format: float
          description: "The amount received by the beneficiary in the target currency."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The target currency code."
        fxRateApplied:
          type: number
          format: float
          description: "The foreign exchange rate applied."
        estimatedCompletionTime:
          type: ["string", "null"]
          format: date-time
          description: "Estimated time when the payment will be completed."
        trackingUrl:
          type: ["string", "null"]
          format: uri
          description: "URL to track the payment's progress."
        feesApplied:
          type: ["number", "null"]
          format: float
          description: "Total fees applied to the payment."
        message:
          type: ["string", "null"]
          description: "An optional message providing more context on the status."

    FxRateResponse:
      type: object
      required:
        - baseCurrency
        - targetCurrency
        - currentRate
      properties:
        baseCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The base currency code."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The target currency code."
        currentRate:
          type: object
          properties:
            bid:
              type: number
              format: float
              description: "Current bid rate."
            ask:
              type: number
              format: float
              description: "Current ask rate."
            mid:
              type: number
              format: float
              description: "Mid-market rate."
            timestamp:
              type: string
              format: date-time
              description: "Timestamp of the current rate."
          description: "Real-time foreign exchange rates."
        predictiveRates:
          type: ["array", "null"]
          items:
            type: object
            properties:
              date:
                type: string
                format: date
                description: "Date for the predicted rate."
              predictedMidRate:
                type: number
                format: float
                description: "AI-predicted mid-market rate."
              confidenceIntervalLower:
                type: number
                format: float
                description: "Lower bound of the AI's confidence interval."
              confidenceIntervalUpper:
                type: number
                format: float
                description: "Upper bound of the AI's confidence interval."
              aiModelConfidence:
                type: number
                format: float
                minimum: 0
                maximum: 1
                description: "AI model's confidence in the prediction (0-1)."
          description: "AI-predicted foreign exchange rates for future dates."
        historicalVolatility:
          type: ["object", "null"]
          properties:
            past7Days:
              type: number
              format: float
              description: "Historical volatility over the past 7 days."
            past30Days:
              type: number
              format: float
              description: "Historical volatility over the past 30 days."

    CurrencyConversionRequest:
      type: object
      required:
        - sourceAccountId
        - sourceAmount
        - sourceCurrency
        - targetCurrency
      properties:
        sourceAccountId:
          type: string
          description: "The ID of the account from which funds will be converted."
        targetAccountId:
          type: ["string", "null"]
          description: "Optional: The ID of the account to deposit the converted funds."
        sourceAmount:
          type: number
          format: float
          description: "The amount to convert from the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The ISO 4217 currency code of the source funds."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The ISO 4217 currency code for the target currency."
        fxRateLock:
          type: boolean
          default: false
          description: "If true, attempts to lock the quoted FX rate for a short period."

    CurrencyConversionResponse:
      type: object
      required:
        - conversionId
        - status
        - sourceAmount
        - sourceCurrency
        - targetAmount
        - fxRateApplied
        - conversionTimestamp
      properties:
        conversionId:
          type: string
          description: "Unique identifier for the currency conversion."
        status:
          type: string
          enum: [completed, pending, failed]
          description: "Status of the currency conversion."
        sourceAmount:
          type: number
          format: float
          description: "The amount converted from the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The source currency code."
        targetAmount:
          type: number
          format: float
          description: "The amount converted into the target currency."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The target currency code."
        fxRateApplied:
          type: number
          format: float
          description: "The foreign exchange rate applied."
        feesApplied:
          type: ["number", "null"]
          format: float
          description: "Any fees applied to the conversion."
        conversionTimestamp:
          type: string
          format: date-time
          description: "Timestamp when the conversion was completed."
        transactionId:
          type: ["string", "null"]
          description: "The ID of the internal transaction representing this conversion."

    CarbonFootprintReport:
      type: object
      required:
        - reportId
        - period
        - totalCarbonFootprintKgCO2e
        - breakdownByCategory
        - aiInsights
      properties:
        reportId:
          type: string
          description: "Unique identifier for the carbon footprint report."
        period:
          type: string
          description: "The period covered by the report."
        totalCarbonFootprintKgCO2e:
          type: number
          format: float
          description: "Total estimated carbon footprint in kilograms of CO2 equivalent."
        breakdownByCategory:
          type: array
          items:
            type: object
            properties:
              category:
                type: string
              carbonFootprintKgCO2e:
                type: number
                format: float
              percentage:
                type: number
                format: float
          description: "Breakdown of carbon footprint by spending categories."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights and recommendations for reducing carbon footprint."
        offsetRecommendations:
          type: ["array", "null"]
          items:
            type: object
            properties:
              project:
                type: string
              costPerTonUSD:
                type: number
                format: float
              offsetAmountKgCO2e:
                type: number
                format: float
              totalCostUSD:
                type: number
                format: float
          description: "Recommendations for purchasing carbon offsets."

    InvestmentESGImpact:
      type: object
      required:
        - portfolioId
        - overallESGScore
        - benchmarkESGScore
        - breakdownByESGFactors
        - topESGHoldings
        - lowestESGHoldings
        - aiRecommendations
      properties:
        portfolioId:
          type: string
          description: "ID of the investment portfolio analyzed."
        overallESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          description: "Overall ESG score of the entire portfolio (0-10)."
        benchmarkESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          description: "Average ESG score of a relevant market benchmark for comparison."
        breakdownByESGFactors:
          type: object
          properties:
            environmentalScore:
              type: number
              format: float
              minimum: 0
              maximum: 10
            socialScore:
              type: number
              format: float
              minimum: 0
              maximum: 10
            governanceScore:
              type: number
              format: float
              minimum: 0
              maximum: 10
          description: "Breakdown of the portfolio's ESG score by individual factors."
        topESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol:
                type: string
              assetName:
                type: string
              esgScore:
                type: number
                format: float
          description: "Top holdings in the portfolio by ESG score."
        lowestESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol:
                type: string
              assetName:
                type: string
              esgScore:
                type: number
                format: float
          description: "Lowest holdings in the portfolio by ESG score."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven recommendations to improve the portfolio's ESG impact."

    CarbonOffsetPurchaseRequest:
      type: object
      required:
        - amountKgCO2e
        - paymentAccountId
        - offsetProject
      properties:
        amountKgCO2e:
          type: number
          format: float
          minimum: 1
          description: "The amount of carbon dioxide equivalent to offset in kilograms."
        paymentAccountId:
          type: string
          description: "The ID of the user's account to use for payment."
        offsetProject:
          type: ["string", "null"]
          description: "Optional: The specific carbon offset project to support."

    CarbonOffsetPurchaseResponse:
      type: object
      required:
        - purchaseId
        - amountOffsetKgCO2e
        - totalCostUSD
        - purchaseDate
      properties:
        purchaseId:
          type: string
          description: "Unique identifier for the carbon offset purchase."
        amountOffsetKgCO2e:
          type: number
          format: float
          description: "The amount of carbon dioxide equivalent offset by this purchase."
        totalCostUSD:
          type: number
          format: float
          description: "Total cost of the carbon offset purchase in USD."
        projectSupported:
          type: ["string", "null"]
          description: "The carbon offset project supported."
        transactionId:
          type: ["string", "null"]
          description: "The ID of the internal financial transaction for this purchase."
        purchaseDate:
          type: string
          format: date-time
          description: "Timestamp of the purchase."
        certificateUrl:
          type: ["string", "null"]
          format: uri
          description: "URL to the official carbon offset certificate."

    LoanApplicationRequest:
      type: object
      required:
        - loanAmount
        - loanPurpose
        - repaymentTermMonths
      properties:
        loanAmount:
          type: number
          format: float
          minimum: 1
          description: "The desired loan amount."
        loanPurpose:
          type: string
          enum: [home_improvement, debt_consolidation, medical_expense, education, auto_purchase, other]
          description: "The purpose of the loan."
        repaymentTermMonths:
          type: integer
          minimum: 1
          description: "The desired repayment term in months."
        additionalNotes:
          type: ["string", "null"]
          description: "Optional notes or details for the application."
        coApplicant:
          type: ["object", "null"]
          properties:
            name:
              type: string
            email:
              type: string
              format: email
            income:
              type: number
              format: float
          description: "Optional: Details of a co-applicant for the loan."

    LoanOffer:
      type: object
      required:
        - offerId
        - offerType
        - amount
        - interestRate
        - expirationDate
        - isPreApproved
      properties:
        offerId:
          type: string
          description: "Unique identifier for the loan offer."
        offerType:
          type: string
          enum: [personal_loan, auto_loan, mortgage, credit_line, microloan]
          description: "Type of loan being offered."
        amount:
          type: number
          format: float
          description: "The offered loan amount."
        interestRate:
          type: number
          format: float
          description: "Annual interest rate offered (as a percentage)."
        repaymentTermMonths:
          type: ["integer", "null"]
          description: "Repayment term in months (if applicable)."
        monthlyPayment:
          type: ["number", "null"]
          format: float
          description: "Estimated monthly payment (if applicable)."
        originationFee:
          type: ["number", "null"]
          format: float
          description: "Any origination fees for the loan."
        totalRepayable:
          type: ["number", "null"]
          format: float
          description: "Total amount repayable over the loan term."
        expirationDate:
          type: string
          format: date
          description: "Date the offer expires."
        isPreApproved:
          type: boolean
          description: "Indicates if this is a pre-approved offer."
        aiPersonalizationScore:
          type: ["number", "null"]
          format: float
          minimum: 0
          maximum: 1
          description: "AI's score for how well this offer is personalized to the user (0-1)."
        termsAndConditionsUrl:
          type: ["string", "null"]
          format: uri
          description: "URL to the full terms and conditions of the loan offer."

    AIUnderwritingResult:
      type: object
      required:
        - decision
        - reason
        - aiConfidence
      properties:
        decision:
          type: string
          enum: [approved, declined, referred_to_human]
          description: "The AI's underwriting decision."
        reason:
          type: string
          description: "Reasoning for the AI's decision."
        recommendedInterestRate:
          type: ["number", "null"]
          format: float
          description: "The interest rate recommended by the AI."
        maxApprovedAmount:
          type: ["number", "null"]
          format: float
          description: "The maximum amount the AI is willing to approve."
        aiConfidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: "AI's confidence in its underwriting decision (0-1)."

    LoanApplicationStatus:
      type: object
      required:
        - applicationId
        - status
        - loanAmountRequested
        - loanPurpose
        - applicationDate
        - nextSteps
      properties:
        applicationId:
          type: string
          description: "Unique identifier for the loan application."
        status:
          type: string
          enum: [submitted, underwriting, approved, declined, pending_acceptance, funded, cancelled]
          description: "Current status of the loan application."
        loanAmountRequested:
          type: number
          format: float
          description: "The amount originally requested in the application."
        loanPurpose:
          type: string
          enum: [home_improvement, debt_consolidation, medical_expense, education, auto_purchase, other]
          description: "The purpose of the loan."
        applicationDate:
          type: string
          format: date-time
          description: "Timestamp when the application was submitted."
        aiUnderwritingResult:
          $ref: "#/components/schemas/AIUnderwritingResult"
        offerDetails:
          $ref: "#/components/schemas/LoanOffer"
        nextSteps:
          type: string
          description: "Guidance on the next actions for the user."

    WebhookSubscription:
      type: object
      required:
        - id
        - callbackUrl
        - events
        - status
        - createdAt
      properties:
        id:
          type: string
          description: "Unique identifier for the webhook subscription."
        callbackUrl:
          type: string
          format: uri
          description: "The URL where webhook events will be sent."
        events:
          type: array
          items:
            type: string
          description: "List of event types subscribed to."
        status:
          type: string
          enum: [active, paused, suspended]
          description: "Current status of the webhook subscription."
        secret:
          type: ["string", "null"]
          description: "The shared secret used to sign webhook payloads, for verification. Only returned on creation."
        createdAt:
          type: string
          format: date-time
          description: "Timestamp when the subscription was created."
        lastTriggered:
          type: ["string", "null"]
          format: date-time
          description: "Timestamp of the last successful webhook delivery."
        failureCount:
          type: integer
          description: "Number of consecutive failed delivery attempts."

    WebhookSubscriptionCreationRequest:
      type: object
      required:
        - callbackUrl
        - events
      properties:
        callbackUrl:
          type: string
          format: uri
          description: "The URL to which webhook events will be sent."
        events:
          type: array
          items:
            type: string
          description: "List of event types to subscribe to."
        secret:
          type: ["string", "null"]
          description: "Optional: A custom shared secret for verifying webhook payloads."

    WebhookSubscriptionUpdateRequest:
      type: object
      properties:
        callbackUrl:
          type: string
          format: uri
          description: "Updated URL where webhook events will be sent."
        events:
          type: array
          items:
            type: string
          description: "Updated list of event types subscribed to."
        status:
          type: string
          enum: [active, paused, suspended]
          description: "Updated status of the webhook subscription."

    ApiKey:
      type: object
      required:
        - id
        - prefix
        - status
        - createdAt
        - scopes
      properties:
        id:
          type: string
          description: "Unique identifier for the API key."
        prefix:
          type: string
          description: "The non-secret prefix of the API key, used for identification."
        status:
          type: string
          enum: [active, revoked, expired]
          description: "Current status of the API key."
        createdAt:
          type: string
          format: date-time
          description: "Timestamp when the API key was created."
        expiresAt:
          type: ["string", "null"]
          format: date-time
          description: "Timestamp when the API key will expire, if set."
        scopes:
          type: array
          items:
            type: string
          description: "List of permissions granted to this API key."
        lastUsed:
          type: ["string", "null"]
          format: date-time
          description: "Timestamp of the last time this API key was used."

    ApiKeyCreationRequest:
      type: object
      required:
        - name
        - scopes
      properties:
        name:
          type: string
          description: "A descriptive name for the API key."
        scopes:
          type: array
          items:
            type: string
          description: "List of permissions to grant to this API key."
        expiresInDays:
          type: ["integer", "null"]
          minimum: 1
          description: "Optional: Number of days until the API key expires."

    KYCDocumentSubmission:
      type: object
      required:
        - documentType
        - documentNumber
        - issueDate
        - expirationDate
        - countryOfIssue
      properties:
        documentType:
          type: string
          enum: [drivers_license, passport, national_id, utility_bill, bank_statement, other]
          description: "The type of KYC document being submitted."
        documentFrontImage:
          type: ["string", "null"]
          format: byte
          description: "Base64 encoded image of the front of the document."
        documentBackImage:
          type: ["string", "null"]
          format: byte
          description: "Base64 encoded image of the back of the document (if applicable)."
        documentNumber:
          type: string
          description: "The identification number on the document."
        issueDate:
          type: string
          format: date
          description: "The issue date of the document (YYYY-MM-DD)."
        expirationDate:
          type: string
          format: date
          description: "The expiration date of the document (YYYY-MM-DD)."
        countryOfIssue:
          type: string
          pattern: '^[A-Z]{2}$'
          description: "The two-letter ISO country code where the document was issued."
        additionalDocuments:
          type: ["array", "null"]
          items:
            type: string
            format: byte
          description: "Array of additional documents as base64 encoded images."

    KYCStatus:
      type: object
      required:
        - userId
        - overallStatus
        - lastSubmissionDate
        - requiredActions
      properties:
        userId:
          type: string
          description: "The ID of the user whose KYC status is being retrieved."
        overallStatus:
          type: string
          enum: [not_submitted, in_review, verified, rejected, requires_more_info]
          description: "Overall status of the KYC verification process."
        lastSubmissionDate:
          type: ["string", "null"]
          format: date-time
          description: "Timestamp of the last KYC document submission."
        rejectionReason:
          type: ["string", "null"]
          description: "Reason for rejection if status is 'rejected'."
        requiredActions:
          type: array
          items:
            type: string
          description: "List of actions required from the user."
        verifiedTier:
          type: ["string", "null"]
          enum: [bronze, silver, gold, platinum]
          description: "The KYC verification tier achieved."

    CashFlowForecast:
      type: object
      required:
        - forecastId
        - period
        - currency
        - overallStatus
        - projectedBalances
        - inflowForecast
        - outflowForecast
        - liquidityRiskScore
        - aiRecommendations
      properties:
        forecastId:
          type: string
          description: "Unique identifier for the cash flow forecast report."
        period:
          type: string
          description: "The period covered by the forecast."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          description: "The currency of the forecast."
        overallStatus:
          type: string
          enum: [positive_outlook, negative_outlook, stable, uncertain]
          description: "Overall assessment of the projected cash flow."
        projectedBalances:
          type: array
          items:
            type: object
            properties:
              date:
                type: string
                format: date
              projectedCash:
                type: number
                format: float
              scenario:
                type: string
                enum: [most_likely, best_case, worst_case]
          description: "Projected cash balances at key dates."
        inflowForecast:
          type: object
          properties:
            totalProjected:
              type: number
              format: float
            bySource:
              type: array
              items:
                type: object
                properties:
                  source:
                    type: string
                  amount:
                    type: number
                    format: float
          description: "Forecast of cash inflows by source."
        outflowForecast:
          type: object
          properties:
            totalProjected:
              type: number
              format: float
            byCategory:
              type: array
              items:
                type: object
                properties:
                  category:
                    type: string
                  amount:
                    type: number
                    format: float
          description: "Forecast of cash outflows by category."
        liquidityRiskScore:
          type: integer
          minimum: 0
          maximum: 100
          description: "AI-assessed risk score for liquidity (0-100, lower is better)."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated recommendations for treasury optimization."

    LiquidityPositions:
      type: object
      required:
        - snapshotTime
        - totalLiquidAssets
        - currencyBreakdown
        - accountTypeBreakdown
        - shortTermInvestments
        - aiLiquidityAssessment
        - aiRecommendations
      properties:
        snapshotTime:
          type: string
          format: date-time
          description: "Timestamp of the liquidity snapshot."
        totalLiquidAssets:
          type: number
          format: float
          description: "Total value of all liquid assets across the organization."
        currencyBreakdown:
          type: array
          items:
            type: object
            properties:
              currency:
                type: string
                pattern: '^[A-Z]{3}$'
              amount:
                type: number
                format: float
              percentage:
                type: number
                format: float
          description: "Breakdown of liquid assets by currency."
        accountTypeBreakdown:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              amount:
                type: number
                format: float
          description: "Breakdown of liquid assets by account type."
        shortTermInvestments:
          type: object
          properties:
            totalValue:
              type: number
              format: float
            maturingNext30Days:
              type: number
              format: float
          description: "Details on short-term investments contributing to liquidity."
        aiLiquidityAssessment:
          type: object
          properties:
            status:
              type: string
              enum: [optimal, sufficient, tight, critical]
            message:
              type: string
          description: "AI's overall assessment of liquidity."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated recommendations for liquidity management."

    FraudRuleCriteria:
      type: object
      description: "Criteria that define when a fraud rule should trigger."
      properties:
        transactionAmountMin:
          type: ["number", "null"]
          format: float
          description: "Minimum transaction amount to consider."
        accountInactivityDays:
          type: ["integer", "null"]
          description: "Number of days an account must be inactive."
        transactionType:
          type: ["string", "null"]
          enum: [debit, credit]
          description: "Specific transaction type."
        countryOfOrigin:
          type: ["array", "null"]
          items:
            type: string
          description: "List of ISO 2-letter country codes for transaction origin."
        geographicDistanceKm:
          type: ["integer", "null"]
          description: "Minimum geographic distance (in km) from recent activity."
        lastLoginDays:
          type: ["integer", "null"]
          description: "Number of days since last user login."
        noTravelNotification:
          type: ["boolean", "null"]
          description: "If true, rule applies only if no prior travel notification was made."
        paymentCountMin:
          type: ["integer", "null"]
          description: "Minimum number of payments in a timeframe."
        timeframeHours:
          type: ["integer", "null"]
          description: "Timeframe in hours for event aggregations."
        recipientNew:
          type: ["boolean", "null"]
          description: "If true, recipient must be a new payee."
        recipientCountryRiskLevel:
          type: ["array", "null"]
          items:
            type: string
            enum: [low, medium, high, very_high]
          description: "List of risk levels for recipient countries."

    FraudRuleAction:
      type: object
      description: "Action to take when a fraud rule is triggered."
      required:
        - type
        - details
      properties:
        type:
          type: string
          enum: [block, alert, auto_review, manual_review, request_mfa]
          description: "Type of action to perform."
        details:
          type: string
          description: "Details or instructions for the action."
        targetTeam:
          type: ["string", "null"]
          description: "The team or department to notify for alerts/reviews."

    FraudRule:
      type: object
      required:
        - id
        - name
        - description
        - status
        - severity
        - criteria
        - action
        - createdBy
        - createdAt
        - lastUpdated
      properties:
        id:
          type: string
          description: "Unique identifier for the fraud detection rule."
        name:
          type: string
          description: "Name of the fraud rule."
        description:
          type: string
          description: "Detailed description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          description: "Current status of the rule."
        severity:
          type: string
          enum: [low, medium, high, critical]
          description: "Severity level when this rule is triggered."
        criteria:
          $ref: "#/components/schemas/FraudRuleCriteria"
        action:
          $ref: "#/components/schemas/FraudRuleAction"
        createdBy:
          type: string
          description: "Identifier of who created the rule."
        createdAt:
          type: string
          format: date-time
          description: "Timestamp when the rule was created."
        lastUpdated:
          type: string
          format: date-time
          description: "Timestamp when the rule was last updated."

    FraudRuleCreationRequest:
      type: object
      required:
        - name
        - description
        - status
        - severity
        - criteria
        - action
      properties:
        name:
          type: string
          description: "Name of the new fraud rule."
        description:
          type: string
          description: "Detailed description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          description: "Initial status of the rule."
        severity:
          type: string
          enum: [low, medium, high, critical]
          description: "Severity level when this rule is triggered."
        criteria:
          $ref: "#/components/schemas/FraudRuleCriteria"
        action:
          $ref: "#/components/schemas/FraudRuleAction"

    FraudRuleUpdateRequest:
      type: object
      description: "Fields that can be updated for an existing fraud detection rule."
      properties:
        name:
          type: string
          description: "Updated name of the fraud rule."
        description:
          type: string
          description: "Updated description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          description: "Updated status of the rule."
        severity:
          type: string
          enum: [low, medium, high, critical]
          description: "Updated severity level."
        criteria:
          $ref: "#/components/schemas/FraudRuleCriteria"
          description: "Updated criteria for the rule."
        action:
          $ref: "#/components/schemas/FraudRuleAction"
          description: "Updated action to take when the rule is triggered."

    FinancialGoal:
      type: object
      required:
        - id
        - name
        - type
        - targetAmount
        - currentAmount
        - targetDate
        - progressPercentage
        - status
        - lastUpdated
      properties:
        id:
          type: string
          description: "Unique identifier for the financial goal."
        name:
          type: string
          description: "Name of the financial goal."
        type:
          type: string
          enum: [retirement, home_purchase, education, large_purchase, debt_reduction, other]
          description: "Type of financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          description: "The target monetary amount for the goal."
        currentAmount:
          type: number
          format: float
          minimum: 0
          description: "The current amount saved or invested towards the goal."
        targetDate:
          type: string
          format: date
          description: "The target completion date for the goal."
        progressPercentage:
          type: number
          format: float
          minimum: 0
          maximum: 100
          description: "Percentage completion of the goal."
        status:
          type: string
          enum: [on_track, behind_schedule, ahead_of_schedule, completed, paused, cancelled]
          description: "Current status of the goal's progress."
        contributingAccounts:
          type: ["array", "null"]
          items:
            type: string
          description: "List of account IDs contributing to this goal."
        lastUpdated:
          type: string
          format: date-time
          description: "Timestamp when the goal's status or progress was last updated."
        riskTolerance:
          type: ["string", "null"]
          enum: [conservative, moderate, aggressive]
          description: "Recommended or chosen risk tolerance for investments related to this goal."
        aiStrategicPlan:
          type: ["object", "null"]
          properties:
            planId:
              type: string
            summary:
              type: string
            steps:
              type: array
              items:
                type: object
                properties:
                  title:
                    type: string
                  description:
                    type: string
                  status:
                    type: string
                    enum: [pending, in_progress, completed]
          description: "AI-generated strategic plan for achieving the goal."
        aiInsights:
          type: ["array", "null"]
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights and recommendations related to this goal."

    GoalCreationRequest:
      type: object
      required:
        - name
        - type
        - targetAmount
        - targetDate
      properties:
        name:
          type: string
          description: "Name of the new financial goal."
        type:
          type: string
          enum: [retirement, home_purchase, education, large_purchase, debt_reduction, other]
          description: "Type of financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          description: "The target monetary amount for the goal."
        targetDate:
          type: string
          format: date
          description: "The target completion date for the goal."
        initialContribution:
          type: number
          format: float
          minimum: 0
          default: 0
          description: "Optional: Initial amount to contribute to the goal."
        contributingAccounts:
          type: ["array", "null"]
          items:
            type: string
          description: "Optional: List of account IDs initially contributing to this goal."
        generateAIPlan:
          type: boolean
          default: false
          description: "If true, AI will automatically generate a strategic plan for the goal."
        riskTolerance:
          type: ["string", "null"]
          enum: [conservative, moderate, aggressive]
          description: "Desired risk tolerance for investments related to this goal."

    GoalUpdateRequest:
      type: object
      description: "Fields that can be updated for an existing financial goal."
      properties:
        name:
          type: string
          description: "Updated name of the financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          description: "The updated target monetary amount for the goal."
        targetDate:
          type: string
          format: date
          description: "The updated target completion date for the goal."
        contributingAccounts:
          type: ["array", "null"]
          items:
            type: string
          description: "Updated list of account IDs contributing to this goal."
        status:
          type: string
          enum: [on_track, behind_schedule, ahead_of_schedule, completed, paused, cancelled]
          description: "Updated status of the goal's progress."
        generateAIPlan:
          type: boolean
          default: false
          description: "If true, AI will recalculate and update the strategic plan for the goal."
        riskTolerance:
          type: ["string", "null"]
          enum: [conservative, moderate, aggressive]
          description: "Updated risk tolerance for investments related to this goal."

    Notification:
      type: object
      required:
        - id
        - type
        - title
        - message
        - severity
        - timestamp
        - read
      properties:
        id:
          type: string
          description: "Unique identifier for the notification."
        type:
          type: string
          enum: [security, financial_insight, marketing, system_update, transaction]
          description: "Type of notification."
        title:
          type: string
          description: "Concise title for the notification."
        message:
          type: string
          description: "Full message content of the notification."
        severity:
          type: string
          enum: [low, medium, high, critical]
          description: "Severity of the notification (AI-assessed)."
        timestamp:
          type: string
          format: date-time
          description: "Timestamp when the notification was generated."
        read:
          type: boolean
          default: false
          description: "Indicates if the user has read the notification."
        actionableLink:
          type: ["string", "null"]
          format: uri
          description: "Optional deep link for the user to take action."
        aiInsightId:
          type: ["string", "null"]
          description: "If applicable, the ID of the AIInsight that generated this notification."

    NotificationSettings:
      type: object
      required:
        - channelPreferences
        - eventPreferences
        - quietHours
      properties:
        channelPreferences:
          type: object
          properties:
            email:
              type: boolean
              description: "Receive notifications via email."
            push:
              type: boolean
              description: "Receive notifications via push notifications."
            sms:
              type: boolean
              description: "Receive notifications via SMS."
            inApp:
              type: boolean
              description: "Receive notifications within the application."
          description: "Preferences for notification delivery channels."
        eventPreferences:
          type: object
          properties:
            transactionAlerts:
              type: boolean
              description: "Receive alerts for transactions."
            budgetAlerts:
              type: boolean
              description: "Receive alerts for budget progress."
            securityAlerts:
              type: boolean
              description: "Receive critical security alerts."
            aiInsights:
              type: boolean
              description: "Receive proactive AI-driven financial insights."
            promotionalOffers:
              type: boolean
              description: "Receive promotional offers and marketing communications."
          description: "Preferences for different types of events."
        quietHours:
          type: object
          properties:
            enabled:
              type: boolean
              description: "If true, notifications are suppressed during specified quiet hours."
            startTime:
              type: string
              format: time
              description: "Start time for quiet hours (HH:MM format)."
            endTime:
              type: string
              format: time
              description: "End time for quiet hours (HH:MM format)."
          description: "Settings for notification quiet hours."

    NotificationSettingsUpdateRequest:
      type: object
      description: "Fields that can be updated for user notification settings."
      properties:
        channelPreferences:
          type: object
          properties:
            email:
              type: boolean
            push:
              type: boolean
            sms:
              type: boolean
            inApp:
              type: boolean
          description: "Updated preferences for notification delivery channels."
        eventPreferences:
          type: object
          properties:
            transactionAlerts:
              type: boolean
            budgetAlerts:
              type: boolean
            securityAlerts:
              type: boolean
            aiInsights:
              type: boolean
            promotionalOffers:
              type: boolean
          description: "Updated preferences for different types of events."
        quietHours:
          type: object
          properties:
            enabled:
              type: boolean
            startTime:
              type: string
              format: time
            endTime:
              type: string
              format: time
          description: "Updated settings for notification quiet hours."

    MarketplaceProduct:
      type: object
      required:
        - id
        - name
        - provider
        - category
        - description
        - price
        - rating
        - imageUrl
        - aiPersonalizationScore
      properties:
        id:
          type: string
          description: "Unique identifier for the marketplace product."
        name:
          type: string
          description: "Name of the product/service."
        provider:
          type: string
          description: "Provider or vendor of the product/service."
        category:
          type: string
          enum: [loans, insurance, credit_cards, investments, budgeting_tools, smart_home, travel, education, health]
          description: "Category of the product/service."
        description:
          type: string
          description: "Detailed description of the product/service."
        price:
          type: string
          description: "Pricing information."
        rating:
          type: number
          format: float
          minimum: 0
          maximum: 5
          description: "Average user rating for the product (0-5)."
        imageUrl:
          type: ["string", "null"]
          format: uri
          description: "URL to an image representing the product."
        aiPersonalizationScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: "AI's score for how well this product is personalized to the user (0-1)."
        aiRecommendationReason:
          type: ["string", "null"]
          description: "AI-generated explanation for recommending this product."
        offerDetails:
          type: ["object", "null"]
          properties:
            type:
              type: string
              enum: [discount, special_rate, free_trial]
            value:
              type: string
            code:
              type: ["string", "null"]
              description: "Optional redemption code."
          description: "Details of any special offers associated with the product."
        productUrl:
          type: ["string", "null"]
          format: uri
          description: "Direct URL to the product on the provider's website."

    ProductImpactSimulation:
      type: object
      required:
        - productId
        - simulationId
        - narrativeSummary
        - keyImpacts
      properties:
        productId:
          type: string
          description: "The ID of the marketplace product being simulated."
        simulationId:
          type: string
          description: "Unique identifier for the simulation performed."
        narrativeSummary:
          type: string
          description: "A natural language summary of the simulation's results for this product."
        keyImpacts:
          type: array
          items:
            type: object
            properties:
              metric:
                type: string
              value:
                type: string
              severity:
                type: string
                enum: [low, medium, high]
          description: "Key financial impacts identified by the AI."
        aiRecommendations:
          type: ["array", "null"]
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "Actionable recommendations or advice related to the product and its impact."
        projectedAmortizationSchedule:
          type: ["array", "null"]
          items:
            type: object
            properties:
              month:
                type: integer
              payment:
                type: number
                format: float
              interest:
                type: number
                format: float
              principal:
                type: number
                format: float
              remainingBalance:
                type: number
                format: float
          description: "Projected amortization schedule for loan products."

    StatementDownloadInfo:
      type: object
      required:
        - statementId
        - accountId
        - period
        - downloadUrls
      properties:
        statementId:
          type: string
          description: "Unique identifier for the statement."
        accountId:
          type: string
          description: "The account ID the statement belongs to."
        period:
          type: string
          description: "The period covered by the statement."
        downloadUrls:
          type: object
          properties:
            pdf:
              type: string
              format: uri
              description: "Signed URL to download the statement in PDF format."
            csv:
              type: string
              format: uri
              description: "Signed URL to download the statement in CSV format."
          description: "Map of available download URLs for different formats."

    OverdraftSettings:
      type: object
      required:
        - accountId
        - enabled
        - feePreference
      properties:
        accountId:
          type: string
          description: "The account ID these overdraft settings apply to."
        enabled:
          type: boolean
          description: "If true, overdraft protection is enabled."
        protectionLimit:
          type: ["number", "null"]
          format: float
          description: "The maximum amount that can be covered by overdraft protection."
        linkToSavings:
          type: ["boolean", "null"]
          description: "If true, attempts to draw funds from a linked savings account."
        linkedSavingsAccountId:
          type: ["string", "null"]
          description: "The ID of the linked savings account."
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me_first]
          description: "User's preference for how overdraft fees are handled."

    OverdraftSettingsUpdateRequest:
      type: object
      description: "Fields for updating overdraft protection settings."
      properties:
        enabled:
          type: boolean
          description: "Enable or disable overdraft protection."
        protectionLimit:
          type: ["number", "null"]
          format: float
          description: "New maximum amount for overdraft protection."
        linkToSavings:
          type: ["boolean", "null"]
          description: "Enable or disable linking to a savings account."
        linkedSavingsAccountId:
          type: ["string", "null"]
          description: "New ID of the linked savings account."
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me_first]
          description: "New preference for how overdraft fees are handled."

    LinkAccountRequest:
      type: object
      required:
        - institutionName
        - countryCode
      properties:
        institutionName:
          type: string
          description: "Name of the financial institution to link."
        countryCode:
          type: string
          pattern: '^[A-Z]{2}$'
          description: "Two-letter ISO country code of the institution."
        providerIdentifier:
          type: ["string", "null"]
          description: "Optional: Specific identifier for a third-party linking provider."
        redirectUri:
          type: ["string", "null"]
          format: uri
          description: "Optional: URI to redirect the user after completing the external authentication flow."

    LinkAccountResponse:
      type: object
      required:
        - linkSessionId
        - authUri
        - status
      properties:
        linkSessionId:
          type: string
          description: "Unique session ID for the account linking process."
        authUri:
          type: string
          format: uri
          description: "The URI to redirect the user to complete authentication."
        status:
          type: string
          enum: [pending_user_action, completed, failed]
          description: "Current status of the linking process."
        message:
          type: ["string", "null"]
          description: "A descriptive message regarding the next steps."