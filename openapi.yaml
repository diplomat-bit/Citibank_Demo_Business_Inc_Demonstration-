openapi: 3.0.3
info:
  title: "Demo Bank API: The Quantum Core - Publisher Edition"
  description: |
    Welcome to the **Quantum Core 3.0**, the pinnacle of financial technology, meticulously engineered to power the Demo Bank experience. This is far more than a mere set of endpoints; it is the living, breathing neural network of a next-generation financial ecosystem, poised to redefine digital banking for a global audience.
    
    Our API is a testament to the philosophy that finance should be an intelligent, predictive, and intensely personal dialogueâ€”a dynamic, self-optimizing collaboration between users, visionary developers, and our proprietary Artificial General Intelligence, **Quantum**. We provide unparalleled programmatic access to the sophisticated tools and vast data reservoirs that fuel our platform, spanning from hyper-personalized wealth management to AI-driven corporate finance automation, decentralized asset orchestration, and pioneering business incubation.
    
    This comprehensive specification unveils the secure and high-performance protocols to connect with and command the core functionalities of Demo Bank. Empower yourself to architect and deploy the future of finance, with an infrastructure designed for exponential scalability, impenetrable security, real-time intelligence, and seamless global integration. As your most ambitious visions crystallize, our platform's unparalleled capabilities will not just meet themâ€”they will amplify them. This is finance, reimagined, limitless, and brought to life by AI.
servers:
  - url: "/"
tags:
  - name: "Users & Identity Management"
    description: "Comprehensive management of user profiles, advanced biometric authentication, multi-factor security, and digital identity verification (KYC/AML)."
  - name: "Accounts & Balances"
    description: "Real-time interaction with all linked financial accounts, including comprehensive balance sheets, predictive cash flow, and intelligent overdraft management."
  - name: "Transactions & Insights"
    description: "Access, intelligent categorization, real-time analysis, and AI-driven insights into transaction data, including advanced dispute resolution and trend detection."
  - name: "Budgets & Financial Planning"
    description: "AI-powered creation and dynamic management of user spending budgets, real-time progress tracking, and proactive alert systems."
  - name: "Investments & Portfolio Intelligence"
    description: "Sophisticated management of investment portfolios, AI-driven asset discovery, ESG impact analysis, predictive growth simulations, and automated rebalancing strategies."
  - name: "AI Advisor (Quantum)"
    description: "Engage with our state-of-the-art conversational AI, Quantum, for deeply personalized financial insights, proactive advice, and autonomous task execution via a rich tool ecosystem."
  - name: "Quantum Weaver (Business Incubation)"
    description: "The AI-driven seed funding and incubation platform. Submit, refine, and track business plans, receive AI-generated feedback, and secure investment capital."
  - name: "Quantum Oracle (Predictive Simulation)"
    description: "Unleash the power of 'what-if' scenario modeling. Run complex, multi-variable financial simulations with AI-powered foresight to understand future impacts and optimize strategies."
  - name: "AI Ad Studio (Veo 2.0)"
    description: "Programmatically generate high-fidelity, commercially viable video content from text prompts, leveraging cutting-edge generative AI models for targeted marketing campaigns."
  - name: "Personalization & Experience Design"
    description: "Endpoints for hyper-personalizing the user experience, including AI-generated themes, bespoke digital card designs, and adaptive interface elements."
  - name: "Financial Goals & Strategic Planning"
    description: "Define, manage, and accelerate progress towards long-term financial goals with AI-generated strategic plans, real-time progress tracking, and adaptive adjustments."
  - name: "Marketplace (Plato AI)"
    description: "Access a dynamic, AI-curated marketplace offering hyper-personalized product recommendations, simulate purchase impacts, and discover exclusive partner offers."
  - name: "Decentralized Finance (DeFi) & Web3 Assets"
    description: "Seamless integration with digital assets, cryptocurrencies, NFTs, and DeFi protocols. Connect wallets, execute on-chain transactions, and manage your Web3 portfolio."
  - name: "Corporate Finance - Enterprise Cards"
    description: "Sophisticated management of corporate card programs, granular spending controls, virtual card issuance, and intelligent compliance monitoring."
  - name: "Corporate Finance - Global Payments & Treasury"
    description: "Streamlined management of payment orders, automated invoice processing, multi-currency transactions, international transfers, and AI-driven treasury optimization."
  - name: "Corporate Finance - Compliance & Risk"
    description: "Advanced access to compliance cases, AI-powered financial anomaly detection, real-time risk assessments, and automated sanction screening for enterprise clients."
  - name: "Rewards & Gamification Engine"
    description: "Interact with the user's loyalty points, elite tiers, achievements, and dynamic gamification status within the Demo Bank ecosystem."
  - name: "Credit Health & AI Underwriting"
    description: "Comprehensive access to credit scores, detailed history, AI-generated improvement plans, and personalized lending offers with instant underwriting."
  - name: "Notifications & Proactive Alerts"
    description: "Retrieve, manage, and configure highly personalized user notifications across multiple channels, including AI-driven proactive alerts and critical security advisories."
  - name: "Security & Open Banking Ecosystem"
    description: "Manage advanced security settings, monitor login activity, control third-party application connections, and oversee API key access for external integrations."
  - name: "Real-time Analytics & Predictive Intelligence"
    description: "Unlocking advanced, AI-driven analytics dashboards, predictive financial forecasting, and custom report generation for both personal and corporate users."
  - name: "Global Payments & Foreign Exchange"
    description: "Facilitate secure, multi-currency transactions and international transfers with real-time and predictive foreign exchange rate analysis."
  - name: "Sustainability & ESG Impact"
    description: "Measure, track, and improve personal and corporate environmental, social, and governance (ESG) impact, including carbon footprint analysis and green investment opportunities."
  - name: "AI-Powered Lending & Credit Solutions"
    description: "Streamlined application for microloans and traditional credit products, featuring instant AI underwriting, personalized repayment schedules, and dynamic pre-approval offers."
  - name: "Developer Tools & API Management"
    description: "Tools for developers to integrate deeply with Demo Bank, including webhook management, API key lifecycle, event logging, and SDK access."
  - name: "Digital Identity & Verifiable Credentials"
    description: "Securely manage and verify digital identities, submit KYC documentation, and issue or receive verifiable digital credentials for seamless trust across platforms."
  - name: "Treasury & Liquidity Management"
    description: "Advanced corporate treasury functions, including AI-driven cash flow forecasting, liquidity optimization, investment strategy, and asset-liability management."
  - name: "Enterprise Risk & Fraud Prevention"
    description: "Define custom AI-powered fraud detection rules, monitor enterprise-wide risk alerts, leverage transactional risk scoring, and manage security incidents proactively."
security:
  - oAuth2Auth: [] # Global OAuth2 security applied

paths:
  /users/register:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Register a New User Account"
      description: "Registers a new user account with Demo Bank, initiating the onboarding process. Requires basic user details."
      operationId: "registerUser"
      requestBody:
        required: true
        description: "User registration details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegistrationRequest"
      responses:
        "201":
          description: "User registered successfully. Awaits email/MFA verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/login:
    post:
      tags:
        - "Users & Identity Management"
      summary: "User Login and Session Creation"
      description: "Authenticates a user and creates a secure session, returning access tokens. May require MFA depending on user settings."
      operationId: "userLogin"
      requestBody:
        required: true
        description: "User login credentials."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLoginRequest"
      responses:
        "200":
          description: "Login successful, returns authentication tokens."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          description: "MFA required or account locked."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/password-reset/initiate:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Initiate Password Reset"
      description: "Starts the password reset flow by sending a verification code or link to the user's registered email or phone."
      operationId: "initiatePasswordReset"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
              properties:
                identifier:
                  type: string
                  format: email
                  example: "user@example.com"
                  description: "User's email or phone number for verification."
      responses:
        "200":
          description: "Password reset initiated. Check your email/phone for verification."
        "404":
          $ref: "#/components/responses/NotFoundError"

  /users/password-reset/confirm:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Confirm Password Reset"
      description: "Confirms the password reset using the received verification code and sets a new password."
      operationId: "confirmPasswordReset"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
                - verificationCode
                - newPassword
              properties:
                identifier:
                  type: string
                  format: email
                  example: "user@example.com"
                verificationCode:
                  type: string
                  example: "123456"
                newPassword:
                  type: string
                  format: password
                  example: "SecureP@ssw0rd2024!"
      responses:
        "200":
          description: "Password reset successfully."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          description: "Invalid or expired verification code."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/me:
    get:
      tags:
        - "Users & Identity Management"
      summary: "Retrieve Comprehensive Current User Profile"
      description: "Fetches the complete and dynamically updated profile information for the currently authenticated user, encompassing personal details, security status, gamification level, loyalty points, and linked identity attributes."
      operationId: "getCurrentUserEnhancedProfile"
      security:
        - oAuth2Auth: [read:profile, read:security, read:rewards, read:identity]
      responses:
        "200":
          description: "The user's complete, enriched profile information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    put:
      tags:
        - "Users & Identity Management"
      summary: "Update Current User Profile"
      description: "Updates selected fields of the currently authenticated user's profile information."
      operationId: "updateCurrentUserProfile"
      security:
        - oAuth2Auth: [write:profile]
      requestBody:
        required: true
        description: "Updated user profile details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserUpdateProfileRequest"
      responses:
        "200":
          description: "User profile updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/preferences:
    get:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Get User Personalization Preferences"
      description: "Retrieves the user's deep personalization preferences, including AI customization settings, notification channel priorities, thematic choices, and data sharing consents."
      operationId: "getUserPreferences"
      security:
        - oAuth2Auth: [read:profile, read:personalization]
      responses:
        "200":
          description: "The user's personalized preferences."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Update User Personalization Preferences"
      description: "Updates the user's deep personalization preferences, allowing dynamic control over AI behavior, notification delivery, thematic choices, and data privacy settings."
      operationId: "updateUserPreferences"
      security:
        - oAuth2Auth: [write:profile, write:personalization]
      requestBody:
        required: true
        description: "The updated user preference payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserPreferences"
      responses:
        "200":
          description: "User preferences updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/devices:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Connected Devices"
      description: "Retrieves a list of all devices linked to the user's account, including mobile phones, tablets, and desktops, indicating their last active status and security posture."
      operationId: "listConnectedDevices"
      security:
        - oAuth2Auth: [read:profile, read:security]
      responses:
        "200":
          description: "A list of connected devices."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Device"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Register a New Device"
      description: "Registers a new device for secure access and multi-factor authentication, associating it with the user's profile. This typically initiates a biometric or MFA enrollment flow."
      operationId: "registerDevice"
      security:
        - oAuth2Auth: [write:profile, write:security]
      requestBody:
        required: true
        description: "Details for the device to be registered."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterDeviceRequest"
      responses:
        "201":
          description: "Device registered successfully, awaiting final verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Device"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/devices/{deviceId}:
    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister a Device"
      description: "Removes a specific device from the user's linked devices, revoking its access and requiring re-registration for future use. Useful for lost or compromised devices."
      operationId: "deregisterDevice"
      security:
        - oAuth2Auth: [write:profile, write:security]
      parameters:
        - $ref: "#/components/parameters/DeviceId"
      responses:
        "204":
          description: "Device deregistered successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /users/me/biometrics/enroll:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Enroll Biometric Data for Authentication"
      description: "Initiates the enrollment process for biometric authentication (e.g., fingerprint, facial scan) to enable secure and convenient access to sensitive features. Requires a biometric signature for initial proof."
      operationId: "enrollBiometrics"
      security:
        - oAuth2Auth: [write:security]
      requestBody:
        required: true
        description: "Biometric enrollment request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricEnrollmentRequest"
      responses:
        "201":
          description: "Biometric enrollment initiated/successful."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/biometrics/verify:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Verify Biometric Data for Sensitive Operations"
      description: "Performs real-time biometric verification to authorize sensitive actions or access protected resources, using a one-time biometric signature."
      operationId: "verifyBiometrics"
      security:
        - biometricAuth: [] # Uses biometricAuth here
      requestBody:
        required: true
        description: "Biometric verification request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricVerificationRequest"
      responses:
        "200":
          description: "Biometric verification successful."
          content:
            application/json:
              schema:
                type: object
                properties:
                  verificationStatus:
                    type: string
                    enum: [success, failed]
                    example: "success"
                  message:
                    type: string
                    example: "Biometric authentication successful."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/biometrics:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Get Biometric Enrollment Status"
      description: "Retrieves the current status of biometric enrollments for the authenticated user."
      operationId: "getBiometricStatus"
      security:
        - oAuth2Auth: [read:security, read:profile]
      responses:
        "200":
          description: "Current biometric enrollment status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister All Biometric Data"
      description: "Removes all enrolled biometric data associated with the user's account for security reasons."
      operationId: "deregisterAllBiometrics"
      security:
        - oAuth2Auth: [write:security]
      responses:
        "204":
          description: "All biometric data deregistered successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /accounts/me:
    get:
      tags:
        - "Accounts & Balances"
      summary: "List Linked Financial Accounts"
      description: "Fetches a comprehensive, real-time list of all external financial accounts linked to the user's Demo Bank profile, including consolidated balances and institutional details."
      operationId: "listLinkedAccounts"
      security:
        - oAuth2Auth: [read:accounts]
      responses:
        "200":
          description: "A detailed list of linked financial accounts."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LinkedAccount"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /accounts/{accountId}/details:
    get:
      tags:
        - "Accounts & Balances"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Detailed Account Analytics & Forecasts"
      description: "Retrieves comprehensive analytics for a specific financial account, including historical balance trends, projected cash flow, and AI-driven insights into spending patterns."
      operationId: "getAccountDetailsAndAnalytics"
      security:
        - oAuth2Auth: [read:accounts, read:analytics]
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Detailed account information with analytics and forecasts."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountDetail"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/transactions/pending:
    get:
      tags:
        - "Accounts & Balances"
        - "Transactions & Insights"
      summary: "Get Pending Transactions for an Account"
      description: "Retrieves a list of pending transactions that have not yet cleared for a specific financial account."
      operationId: "getPendingAccountTransactions"
      security:
        - oAuth2Auth: [read:accounts, read:transactions]
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "A list of pending transactions."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Transaction"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/statements:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Retrieve Account Statements"
      description: "Fetches digital statements for a specific account, allowing filtering by date range and format."
      operationId: "getAccountStatements"
      security:
        - oAuth2Auth: [read:accounts]
      parameters:
        - $ref: "#/components/parameters/AccountId"
        - name: "year"
          in: "query"
          required: true
          description: "Year for the statement."
          schema:
            type: integer
            example: 2024
        - name: "month"
          in: "query"
          required: true
          description: "Month for the statement (1-12)."
          schema:
            type: integer
            minimum: 1
            maximum: 12
            example: 7
        - name: "format"
          in: "query"
          description: "Desired format for the statement."
          schema:
            type: string
            enum: [pdf, csv]
            default: pdf
      responses:
        "200":
          description: "Account statement in the requested format. (Content type may vary based on format)."
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
                format: binary
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/overdraft-settings:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Get Overdraft Protection Settings"
      description: "Retrieves the current overdraft protection settings for a specific account."
      operationId: "getOverdraftSettings"
      security:
        - oAuth2Auth: [read:accounts]
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Overdraft settings for the account."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Accounts & Balances"
      summary: "Update Overdraft Protection Settings"
      description: "Updates the overdraft protection settings for a specific account, enabling or disabling protection and configuring preferences."
      operationId: "updateOverdraftSettings"
      security:
        - oAuth2Auth: [write:accounts]
      parameters:
        - $ref: "#/components/parameters/AccountId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OverdraftSettingsUpdateRequest"
      responses:
        "200":
          description: "Overdraft settings updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/link:
    post:
      tags:
        - "Accounts & Balances"
        - "Security & Open Banking Ecosystem"
      summary: "Initiate Linking a New External Institution"
      description: "Begins the secure process of linking a new external financial institution (e.g., another bank, investment platform) to the user's Demo Bank profile, typically involving a third-party tokenized flow."
      operationId: "initiateAccountLinking"
      security:
        - oAuth2Auth: [write:accounts]
      requestBody:
        required: true
        description: "Parameters for initiating the linking process, such as institution name or specific provider."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LinkAccountRequest"
      responses:
        "200":
          description: "Account linking initiated. Provides a URI for the user to complete the connection securely."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LinkAccountResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List & Filter Transactions with Advanced Options"
      description: "Retrieves a paginated list of the user's transactions, with extensive options for filtering by type, category, date range, amount, and intelligent AI-driven sorting and search capabilities."
      operationId: "listTransactionsEnhanced"
      security:
        - oAuth2Auth: [read:transactions]
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "type"
          in: "query"
          description: "Filter transactions by type (e.g., income, expense, transfer)."
          schema:
            type: string
            enum: [income, expense, transfer, investment, refund, bill_payment]
        - name: "category"
          in: "query"
          description: "Filter transactions by their AI-assigned or user-defined category."
          schema:
            type: string
            example: "Groceries"
        - name: "startDate"
          in: "query"
          description: "Retrieve transactions from this date (inclusive)."
          schema:
            type: string
            format: date
            example: "2024-01-01"
        - name: "endDate"
          in: "query"
          description: "Retrieve transactions up to this date (inclusive)."
          schema:
            type: string
            format: date
            example: "2024-12-31"
        - name: "minAmount"
          in: "query"
          description: "Filter for transactions with an amount greater than or equal to this value."
          schema:
            type: number
            format: float
            minimum: 0
        - name: "maxAmount"
          in: "query"
          description: "Filter for transactions with an amount less than or equal to this value."
          schema:
            type: number
            format: float
            minimum: 0
        - name: "searchQuery"
          in: "query"
          description: "Free-text search across transaction descriptions, merchants, and notes."
          schema:
            type: string
            example: "Starbucks"
      responses:
        "200":
          description: "A paginated, intelligently filtered list of transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}:
    get:
      tags:
        - "Transactions & Insights"
      summary: "Get Detailed Transaction by ID"
      description: "Retrieves granular information for a single transaction by its unique ID, including AI categorization confidence, merchant details, and associated carbon footprint."
      operationId: "getTransactionByIdDetailed"
      security:
        - oAuth2Auth: [read:transactions]
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      responses:
        "200":
          description: "The requested transaction details with enhanced data."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}/categorize:
    put:
      tags:
        - "Transactions & Insights"
      summary: "Manually Categorize or Recategorize a Transaction"
      description: "Allows the user to override or refine the AI's categorization for a transaction, improving future AI accuracy and personal financial reporting."
      operationId: "categorizeTransaction"
      security:
        - oAuth2Auth: [write:transactions]
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "The new category for the transaction, along with optional notes."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CategorizeTransactionRequest"
      responses:
        "200":
          description: "Transaction category updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /transactions/{transactionId}/dispute:
    post:
      tags:
        - "Transactions & Insights"
      summary: "Initiate a Transaction Dispute"
      description: "Begins the process of disputing a specific transaction, providing details and supporting documentation for review by our compliance team and AI."
      operationId: "initiateTransactionDispute"
      security:
        - oAuth2Auth: [write:transactions]
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "Details regarding the transaction dispute."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DisputeRequest"
      responses:
        "202":
          description: "Transaction dispute initiated. Status will be available via the transaction details."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DisputeStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /transactions/recurring:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List Recurring Transactions"
      description: "Retrieves a list of all detected or user-defined recurring transactions, useful for budget tracking and subscription management."
      operationId: "listRecurringTransactions"
      security:
        - oAuth2Auth: [read:transactions]
      responses:
        "200":
          description: "A list of recurring transactions."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RecurringTransaction"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Transactions & Insights"
      summary: "Create a New Recurring Transaction"
      description: "Defines a new recurring transaction pattern for future tracking and budgeting."
      operationId: "createRecurringTransaction"
      security:
        - oAuth2Auth: [write:transactions]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RecurringTransactionCreationRequest"
      responses:
        "201":
          description: "Recurring transaction created."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecurringTransaction"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}/notes:
    put:
      tags:
        - "Transactions & Insights"
      summary: "Add/Update Notes for a Transaction"
      description: "Allows the user to add or update personal notes for a specific transaction."
      operationId: "updateTransactionNotes"
      security:
        - oAuth2Auth: [write:transactions]
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - notes
              properties:
                notes:
                  type: string
                  example: "Bought new books for my AI course."
      responses:
        "200":
          description: "Transaction notes updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /transactions/insights/spending-trends:
    get:
      tags:
        - "Transactions & Insights"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get AI-Driven Spending Trends"
      description: "Retrieves AI-generated insights into user spending trends over time, identifying patterns and anomalies."
      operationId: "getSpendingTrends"
      security:
        - oAuth2Auth: [read:transactions, read:analytics]
      responses:
        "200":
          description: "Spending trends analysis."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SpendingTrends"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "List All User Budgets"
      description: "Retrieves a list of all active and historical budgets for the authenticated user."
      operationId: "listBudgets"
      security:
        - oAuth2Auth: [read:profile]
      responses:
        "200":
          description: "A list of user budgets."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Budget"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Budgets & Financial Planning"
      summary: "Create a New Budget"
      description: "Creates a new financial budget for the user, with optional AI auto-population of categories and amounts."
      operationId: "createBudget"
      security:
        - oAuth2Auth: [write:profile]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetCreationRequest"
      responses:
        "201":
          description: "Budget created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets/{budgetId}:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "Get Detailed Budget Information"
      description: "Retrieves detailed information for a specific budget, including current spending, remaining amounts, and AI recommendations."
      operationId: "getBudgetDetails"
      security:
        - oAuth2Auth: [read:profile]
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "200":
          description: "Detailed budget information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Budgets & Financial Planning"
      summary: "Update an Existing Budget"
      description: "Updates the parameters of an existing budget, such as total amount, dates, or categories."
      operationId: "updateBudget"
      security:
        - oAuth2Auth: [write:profile]
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetUpdateRequest"
      responses:
        "200":
          description: "Budget updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Budgets & Financial Planning"
      summary: "Delete a Budget"
      description: "Deletes a specific budget from the user's profile."
      operationId: "deleteBudget"
      security:
        - oAuth2Auth: [write:profile]
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "204":
          description: "Budget deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "List All Investment Portfolios"
      description: "Retrieves a summary of all investment portfolios linked to the user's account."
      operationId: "listInvestmentPortfolios"
      security:
        - oAuth2Auth: [read:investments]
      responses:
        "200":
          description: "A list of investment portfolios."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/InvestmentPortfolio"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Create a New Investment Portfolio"
      description: "Creates a new investment portfolio, with options for initial asset allocation."
      operationId: "createInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioCreationRequest"
      responses:
        "201":
          description: "Investment portfolio created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /investments/portfolios/{portfolioId}:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Get Detailed Investment Portfolio"
      description: "Retrieves detailed information for a specific investment portfolio, including holdings, performance, and AI insights."
      operationId: "getInvestmentPortfolioDetails"
      security:
        - oAuth2Auth: [read:investments]
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      responses:
        "200":
          description: "Detailed investment portfolio information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Update Investment Portfolio Details"
      description: "Updates high-level details of an investment portfolio, such as name or risk tolerance."
      operationId: "updateInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioUpdateRequest"
      responses:
        "200":
          description: "Investment portfolio updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios/{portfolioId}/rebalance:
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Initiate AI-Driven Portfolio Rebalancing"
      description: "Triggers an AI-driven rebalancing process for a specific investment portfolio based on a target risk tolerance or strategy."
      operationId: "rebalanceInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RebalanceRequest"
      responses:
        "202":
          description: "Portfolio rebalancing initiated. Details will be provided asynchronously."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RebalanceStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/assets/search:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
        - "Sustainability & ESG Impact"
      summary: "Search for Investment Assets with ESG Scores"
      description: "Searches for available investment assets (stocks, ETFs, mutual funds) and returns their ESG impact scores."
      operationId: "searchESGAssets"
      security:
        - oAuth2Auth: [read:investments, read:sustainability]
      parameters:
        - name: "query"
          in: "query"
          required: true
          description: "Search query for asset name or symbol."
          schema:
            type: string
            example: "Tesla"
        - name: "minESGScore"
          in: "query"
          description: "Minimum desired ESG score (0-10)."
          schema:
            type: number
            format: float
            minimum: 0
            maximum: 10
            example: 7.0
      responses:
        "200":
          description: "A list of investment assets with ESG data."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ESGAssetSearchResult"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat:
    post:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Send a Message to the Quantum AI Advisor"
      description: "Initiates or continues a sophisticated conversation with Quantum, the AI Advisor. Quantum can provide advanced financial insights, execute complex tasks via an expanding suite of intelligent tools, and learn from user interactions to offer hyper-personalized guidance."
      operationId: "chatWithQuantumAdvanced"
      security:
        - oAuth2Auth: [interact:ai_advisor]
      requestBody:
        required: true
        description: "The rich message payload for the AI, including textual input and potential tool function outputs."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AIChatRequest"
      responses:
        "200":
          description: "The AI Advisor's comprehensive response, which may include text, proactive recommendations, and declarative tool calls for execution."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIChatResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "The Quantum AI Advisor service is temporarily overloaded or unavailable. Please try again shortly."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /ai/advisor/tools:
    get:
      tags:
        - "AI Advisor (Quantum)"
        - "Developer Tools & API Management"
      summary: "List Available AI Tools for Quantum"
      description: "Retrieves a dynamic manifest of all integrated AI tools that Quantum can invoke and execute, providing details on their capabilities, parameters, and access requirements."
      operationId: "listQuantumAITools"
      security:
        - oAuth2Auth: [read:ai_advisor]
      responses:
        "200":
          description: "A list of available AI tools."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/AITool"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat/history:
    get:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Retrieve AI Advisor Conversation History"
      description: "Fetches the full conversation history with the Quantum AI Advisor for a given session or user."
      operationId: "getQuantumChatHistory"
      security:
        - oAuth2Auth: [read:ai_advisor]
      parameters:
        - name: "sessionId"
          in: "query"
          nullable: true
          description: "Optional: Filter history by a specific session ID. If omitted, recent conversations will be returned."
          schema:
            type: string
            example: "session-quantum-xyz-789-alpha"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "Paginated list of chat messages."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedChatMessages"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulate:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run a 'What-If' Financial Simulation (Standard)"
      description: "Submits a hypothetical scenario to the Quantum Oracle AI for standard financial impact analysis. The AI simulates the effect on the user's current financial state and provides a summary."
      operationId: "simulateWithQuantumOracle"
      security:
        - oAuth2Auth: [interact:ai_oracle]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SimulationRequest"
      responses:
        "200":
          description: "The simulation was successful. The response contains a detailed impact analysis and actionable recommendations."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulationResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "AI simulation service is temporarily unavailable due to high demand or maintenance."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /ai/oracle/simulate/advanced:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run an Advanced Multi-Variable Financial Simulation"
      description: "Engages the Quantum Oracle for highly complex, multi-variable simulations, allowing precise control over numerous financial parameters, market conditions, and personal events to generate deep, predictive insights and sensitivity analysis."
      operationId: "simulateWithQuantumOracleAdvanced"
      security:
        - oAuth2Auth: [interact:ai_oracle]
      requestBody:
        required: true
        description: "An advanced request payload detailing the complex scenario and parameters for the AI simulation."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedSimulationRequest"
      responses:
        "200":
          description: "Advanced simulation completed successfully, returning granular impact analysis, sensitivity curves, and optimized strategies."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdvancedSimulationResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "503":
          description: "AI simulation service is experiencing extended processing times or is unavailable for complex requests."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /ai/oracle/simulations:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "List All User Simulations"
      description: "Retrieves a list of all financial simulations previously run by the user, including their status and summaries."
      operationId: "listUserSimulations"
      security:
        - oAuth2Auth: [read:ai_oracle]
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of financial simulations."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit: {type: integer, example: 50}
                  offset: {type: integer, example: 0}
                  total: {type: integer, example: 5}
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/SimulationSummary"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulations/{simulationId}:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Get Detailed Simulation Results"
      description: "Retrieves the full, detailed results of a specific financial simulation by its ID."
      operationId: "getSimulationResults"
      security:
        - oAuth2Auth: [read:ai_oracle]
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "200":
          description: "Detailed simulation results."
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/SimulationResponse"
                  - $ref: "#/components/schemas/AdvancedSimulationResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Delete a Financial Simulation"
      description: "Deletes a previously run financial simulation and its results."
      operationId: "deleteSimulation"
      security:
        - oAuth2Auth: [write:ai_oracle]
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "204":
          description: "Simulation deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitch:
    post:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit a High-Potential Business Plan to Quantum Weaver"
      description: "Submits a detailed business plan to the Quantum Weaver AI for rigorous analysis, market validation, and seed funding consideration. This initiates the AI-driven incubation journey, aiming to transform innovative ideas into commercially successful ventures."
      operationId: "pitchToQuantumWeaver"
      security:
        - oAuth2Auth: [write:weaver]
      requestBody:
        required: true
        description: "The comprehensive business plan document, including executive summary, market analysis, financial projections, and team overview."
        content:
          application/json:
            schema:
              type: object
              required:
                - businessPlan
                - foundingTeam
                - marketOpportunity
                - financialProjections
              properties:
                businessPlan:
                  type: string
                  description: "The user's detailed narrative business plan (e.g., executive summary, vision, strategy)."
                  example: "Our venture, 'SynergyChain AI,' aims to revolutionize global supply chain transparency and efficiency using a decentralized AI ledger. We leverage quantum-inspired algorithms to predict disruptions and optimize logistics, targeting multinational corporations..."
                foundingTeam:
                  type: array
                  description: "Key profiles and expertise of the founding team members."
                  items:
                    type: object
                    properties:
                      name: {type: string, example: "Dr. Anya Sharma"}
                      role: {type: string, example: "CEO, Lead AI Architect"}
                      experience: {type: string, example: "20+ years in AI/ML, ex-Google X"}
                marketOpportunity:
                  type: string
                  description: "Detailed analysis of the target market, problem statement, and proposed solution's unique value proposition."
                  example: "The global supply chain market faces $1.5T in annual losses due to inefficiencies and lack of real-time data. SynergyChain AI offers a 30% reduction in lead times and a 15% cut in operational costs..."
                financialProjections:
                  type: object
                  description: "Key financial metrics and projections for the next 3-5 years."
                  properties:
                    seedRoundAmount: {type: number, format: float, example: 5000000, description: "Requested seed funding in USD."}
                    valuationPreMoney: {type: number, format: float, example: 20000000, description: "Pre-money valuation in USD."}
                    projectionYears: {type: integer, example: 3}
                    revenueForecast:
                      type: array
                      items: {type: number, format: float, example: 1000000, description: "Annual revenue forecast in USD."}
                    profitabilityEstimate: {type: string, example: "Achieve profitability within 24 months."}
      responses:
        "202":
          description: "The business plan was successfully ingested and is undergoing initial AI analysis. A unique pitch ID is provided for tracking progress."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /ai/incubator/pitch/{pitchId}/details:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Get Detailed AI Analysis & Feedback for a Business Pitch"
      description: "Retrieves the granular AI-driven analysis, strategic feedback, market validation results, and any outstanding questions from Quantum Weaver for a specific business pitch."
      operationId: "getQuantumWeaverPitchDetails"
      security:
        - oAuth2Auth: [read:weaver]
      parameters:
        - $ref: "#/components/parameters/PitchId"
      responses:
        "200":
          description: "Comprehensive details of the pitch's current state, AI feedback, and next steps."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverDetailedState"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitches:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "List All User Business Pitches"
      description: "Retrieves a summary list of all business pitches submitted by the authenticated user to Quantum Weaver."
      operationId: "listUserBusinessPitches"
      security:
        - oAuth2Auth: [read:weaver]
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "status"
          in: "query"
          description: "Filter pitches by their current stage."
          schema:
            type: string
            enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
      responses:
        "200":
          description: "A paginated list of business pitches."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit: {type: integer, example: 50}
                  offset: {type: integer, example: 0}
                  total: {type: integer, example: 3}
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/QuantumWeaverState"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/incubator/pitch/{pitchId}/feedback:
    put:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit Feedback or Answers to AI Questions for a Business Pitch"
      description: "Allows the entrepreneur to respond to specific questions or provide additional details requested by Quantum Weaver, moving the pitch forward in the incubation process."
      operationId: "submitQuantumWeaverFeedback"
      security:
        - oAuth2Auth: [write:weaver]
      parameters:
        - $ref: "#/components/parameters/PitchId"
      requestBody:
        required: true
        description: "Payload containing answers to AI questions or general feedback."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuantumWeaverFeedbackRequest"
      responses:
        "200":
          description: "Feedback submitted successfully. Pitch status updated."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/ads/generate:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate a Standard Video Ad with Veo 2.0"
      description: "Submits a request to generate a high-quality video ad using the advanced Veo 2.0 generative AI model. This is an asynchronous operation, suitable for standard ad content creation."
      operationId: "generateVideoAd"
      security:
        - oAuth2Auth: [write:ad_studio]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GenerateVideoRequest"
      responses:
        "202":
          description: "Video generation initiated. The response contains an operation ID to poll for status updates and retrieve the final asset."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                    example: "op-video-gen-12345-abcde"
                  estimatedCompletionTimeSeconds:
                    type: integer
                    description: "Estimated time until video generation is complete."
                    example: 300
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /ai/ads/generate/advanced:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate an Advanced Video Ad with Granular Controls"
      description: "Submits a highly customized request to generate a video ad, allowing fine-grained control over artistic style, aspect ratio, voiceover, background music, target audience, and call-to-action elements for professional-grade productions."
      operationId: "generateAdvancedVideoAd"
      security:
        - oAuth2Auth: [write:ad_studio]
      requestBody:
        required: true
        description: "Payload for advanced video ad generation with comprehensive customization options."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedGenerateVideoRequest"
      responses:
        "202":
          description: "Advanced video generation initiated. An operation ID is provided for polling status and fetching the final asset."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                    example: "op-adv-video-gen-xyz789-fghjk"
                  estimatedCompletionTimeSeconds:
                    type: integer
                    description: "Estimated time until advanced video generation is complete. May be longer than standard generation."
                    example: 900
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "429":
          $ref: "#/components/responses/TooManyRequestsError"

  /ai/ads/operations/{operationId}:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Get Video Generation Status & Retrieve Asset"
      description: "Polls the real-time status of an asynchronous video generation operation. Once complete ('done'), the response includes a temporary, signed URL to access and download the generated video asset."
      operationId: "getVideoGenerationStatusAndAsset"
      security:
        - oAuth2Auth: [read:ad_studio]
      parameters:
        - name: "operationId"
          in: "path"
          required: true
          description: "The unique identifier for the video generation operation."
          schema:
            type: string
            example: "op-video-gen-12345-abcde"
      responses:
        "200":
          description: "The current status of the video generation job. If 'done', the response includes the video URI and metadata."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VideoOperationStatus"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /ai/ads:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "List All Generated Video Ads"
      description: "Retrieves a list of all video advertisements previously generated by the user in the AI Ad Studio."
      operationId: "listGeneratedVideoAds"
      security:
        - oAuth2Auth: [read:ad_studio]
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "status"
          in: "query"
          description: "Filter ads by their generation status."
          schema:
            type: string
            enum: [queued, generating, done, error]
      responses:
        "200":
          description: "A paginated list of generated video ads."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit: {type: integer, example: 50}
                  offset: {type: integer, example: 0}
                  total: {type: integer, example: 10}
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/VideoOperationStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/cards:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "List All Corporate Enterprise Cards"
      description: "Retrieves a comprehensive list of all physical and virtual corporate cards associated with the user's organization, including their status, assigned holder, and current spending controls."
      operationId: "listCorporateCardsDetailed"
      security:
        - oAuth2Auth: [read:corporate_cards]
      responses:
        "200":
          description: "A detailed list of all corporate enterprise cards."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CorporateCard"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/cards/{cardId}/controls:
    put:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Update Granular Corporate Card Spending Controls"
      description: "Updates the sophisticated spending controls, limits, and policy overrides for a specific corporate card, enabling real-time adjustments for security and budget adherence."
      operationId: "updateCorporateCardControls"
      security:
        - oAuth2Auth: [write:corporate_cards]
      parameters:
        - $ref: "#/components/parameters/CardId"
      requestBody:
        required: true
        description: "The updated spending controls and limits for the corporate card."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CorporateCardControls"
      responses:
        "200":
          description: "The corporate card with its advanced controls updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/cards/{cardId}/freeze:
    post:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Instantly Freeze or Unfreeze a Corporate Card"
      description: "Immediately changes the frozen status of a corporate card, preventing or allowing transactions in real-time, critical for security and expense management."
      operationId: "toggleCorporateCardFreeze"
      security:
        - oAuth2Auth: [write:corporate_cards]
      parameters:
        - $ref: "#/components/parameters/CardId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - freeze
              properties:
                freeze:
                  type: boolean
                  description: "Set to `true` to freeze the card, `false` to unfreeze."
                  example: true
      responses:
        "200":
          description: "The updated corporate card object reflecting the new frozen status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/cards/virtual:
    post:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Issue a New Virtual Corporate Card"
      description: "Creates and issues a new virtual corporate card with specified spending limits, merchant restrictions, and expiration dates, ideal for secure online purchases and temporary projects."
      operationId: "issueVirtualCorporateCard"
      security:
        - oAuth2Auth: [write:corporate_cards]
      requestBody:
        required: true
        description: "Details for the new virtual card, including holder, limits, and purpose."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VirtualCardCreationRequest"
      responses:
        "201":
          description: "Virtual corporate card issued successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/cards/{cardId}/transactions:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
        - "Transactions & Insights"
      summary: "List Transactions for a Corporate Card"
      description: "Retrieves a paginated list of transactions made with a specific corporate card, including AI categorization and compliance flags."
      operationId: "getCorporateCardTransactions"
      security:
        - oAuth2Auth: [read:corporate_cards, read:transactions]
      parameters:
        - $ref: "#/components/parameters/CardId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
      responses:
        "200":
          description: "A paginated list of corporate card transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/anomalies:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "List AI-Detected Financial Anomalies"
      description: "Retrieves a comprehensive list of AI-detected financial anomalies across transactions, payments, and corporate cards that require immediate review and potential action to mitigate risk and ensure compliance."
      operationId: "listFinancialAnomalies"
      security:
        - oAuth2Auth: [read:compliance]
      parameters:
        - name: status
          in: query
          description: "Filter anomalies by their current review status."
          schema:
            type: string
            enum: [New, Under Review, Escalated, Dismissed, Resolved]
            default: New
        - name: severity
          in: query
          description: "Filter anomalies by their AI-assessed severity level."
          schema:
            type: string
            enum: [Low, Medium, High, Critical]
        - name: entityType
          in: query
          description: "Filter anomalies by the type of financial entity they are related to."
          schema:
            type: string
            enum: [PaymentOrder, Transaction, Counterparty, CorporateCard, Invoice]
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of AI-detected financial anomalies, prioritized by risk score."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit: {type: integer, example: 50}
                  offset: {type: integer, example: 0}
                  total: {type: integer, example: 120}
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/FinancialAnomaly"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/anomalies/{anomalyId}/status:
    put:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Update Anomaly Review Status"
      description: "Updates the review status of a specific financial anomaly, allowing compliance officers to mark it as dismissed, resolved, or escalate for further investigation after thorough AI-assisted and human review."
      operationId: "updateAnomalyStatus"
      security:
        - oAuth2Auth: [write:compliance]
      parameters:
        - $ref: "#/components/parameters/AnomalyId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [Dismissed, Resolved, Under Review, Escalated]
                  description: "The new status for the financial anomaly."
                  example: "Resolved"
                resolutionNotes:
                  type: string
                  nullable: true
                  description: "Optional notes regarding the resolution or dismissal of the anomaly."
                  example: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."
      responses:
        "200":
          description: "The updated anomaly object with the new status and resolution notes."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialAnomaly"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/compliance/audits:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Request an AI-Driven Compliance Audit Report"
      description: "Initiates an AI-powered compliance audit for a specific period or scope, generating a comprehensive report detailing adherence to regulatory frameworks, internal policies, and flagging potential risks."
      operationId: "requestComplianceAudit"
      security:
        - oAuth2Auth: [write:compliance]
      requestBody:
        required: true
        description: "Parameters for the compliance audit, including scope and date range."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ComplianceAuditRequest"
      responses:
        "202":
          description: "Compliance audit initiated. An audit ID is returned to check the status and retrieve the report."
          content:
            application/json:
              schema:
                type: object
                properties:
                  auditId:
                    type: string
                    example: "audit_corp_xyz789"
                  status:
                    type: string
                    enum: [initiated, processing, completed, failed]
                    example: "processing"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/compliance/audits/{auditId}/report:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Retrieve AI-Generated Compliance Audit Report"
      description: "Retrieves the full report generated by an AI-driven compliance audit."
      operationId: "getComplianceAuditReport"
      security:
        - oAuth2Auth: [read:compliance]
      parameters:
        - $ref: "#/components/parameters/AuditId"
      responses:
        "200":
          description: "The comprehensive compliance audit report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ComplianceAuditReport"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/sanction-screening:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Perform Real-time Sanction Screening"
      description: "Executes a real-time screening of an individual or entity against global sanction lists and watchlists."
      operationId: "performSanctionScreening"
      security:
        - oAuth2Auth: [read:compliance]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SanctionScreeningRequest"
      responses:
        "200":
          description: "Sanction screening results."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SanctionScreeningResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /web3/wallets:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "List Connected Crypto Wallets"
      description: "Retrieves a list of all securely linked cryptocurrency wallets (e.g., MetaMask, Ledger integration), showing their addresses, associated networks, and verification status."
      operationId: "listCryptoWallets"
      security:
        - oAuth2Auth: [read:web3]
      responses:
        "200":
          description: "A list of connected cryptocurrency wallets."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CryptoWalletConnection"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "Connect a New Crypto Wallet"
      description: "Initiates the process to securely connect a new cryptocurrency wallet to the user's Demo Bank profile, typically involving a signed message or OAuth flow from the wallet provider."
      operationId: "connectCryptoWallet"
      security:
        - oAuth2Auth: [write:web3]
      requestBody:
        required: true
        description: "Details for connecting a new crypto wallet, including the wallet type and signature/proof."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConnectWalletRequest"
      responses:
        "201":
          description: "Wallet connection initiated or confirmed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoWalletConnection"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /web3/wallets/{walletId}/balances:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Get Crypto Asset Balances for a Wallet"
      description: "Retrieves the current balances of all recognized crypto assets within a specific connected wallet."
      operationId: "getCryptoWalletBalances"
      security:
        - oAuth2Auth: [read:web3]
      parameters:
        - $ref: "#/components/parameters/WalletId"
      responses:
        "200":
          description: "A list of crypto asset balances."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CryptoAssetBalance"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/nfts:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Retrieve User's NFT Collection"
      description: "Fetches a comprehensive list of Non-Fungible Tokens (NFTs) owned by the user across all connected wallets and supported blockchain networks, including metadata and market values."
      operationId: "getUserNFTCollection"
      security:
        - oAuth2Auth: [read:web3]
      responses:
        "200":
          description: "A list of the user's NFT assets."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NFTAsset"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/transactions/initiate:
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Initiate a Cryptocurrency Transfer"
      description: "Prepares and initiates a cryptocurrency transfer from a connected wallet to a specified recipient address. Requires user confirmation (e.g., via wallet signature)."
      operationId: "initiateCryptoTransfer"
      security:
        - oAuth2Auth: [write:web3]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CryptoTransferRequest"
      responses:
        "202":
          description: "Crypto transfer initiated. Awaiting user signature/confirmation."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoTransferStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /payments/international/initiate:
    post:
      tags:
        - "Global Payments & FX"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Initiate an International Wire Transfer"
      description: "Facilitates the secure initiation of an international wire transfer to a beneficiary in another country and currency, leveraging optimal FX rates and tracking capabilities."
      operationId: "initiateInternationalPayment"
      security:
        - oAuth2Auth: [write:payments, write:corporate_payments]
      requestBody:
        required: true
        description: "Details for the international payment, including beneficiary, amount, currency, and bank details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InternationalPaymentRequest"
      responses:
        "202":
          description: "International payment initiated and is being processed. A payment ID is provided for tracking."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /payments/fx/rates:
    get:
      tags:
        - "Global Payments & FX"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time & Predictive Foreign Exchange Rates"
      description: "Retrieves current and AI-predicted future foreign exchange rates for a specified currency pair, including bid/ask spreads and historical volatility data for informed decisions."
      operationId: "getFxRates"
      security:
        - oAuth2Auth: [read:fx_rates, read:analytics]
      parameters:
        - name: "baseCurrency"
          in: "query"
          required: true
          description: "The base currency code (e.g., USD)."
          schema:
            type: string
            example: "USD"
        - name: "targetCurrency"
          in: "query"
          required: true
          description: "The target currency code (e.g., EUR)."
          schema:
            type: string
            example: "EUR"
        - name: "forecastDays"
          in: "query"
          description: "Number of days into the future to provide an AI-driven prediction."
          schema:
            type: integer
            minimum: 1
            maximum: 30
            default: 7
      responses:
        "200":
          description: "Real-time and predictive foreign exchange rates."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FxRateResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /payments/international/{paymentId}/status:
    get:
      tags:
        - "Global Payments & FX"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get Status of an International Payment"
      description: "Retrieves the current processing status and details of an initiated international payment."
      operationId: "getInternationalPaymentStatus"
      security:
        - oAuth2Auth: [read:payments, read:corporate_payments]
      parameters:
        - $ref: "#/components/parameters/PaymentId"
      responses:
        "200":
          description: "Current status of the international payment."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /payments/fx/convert:
    post:
      tags:
        - "Global Payments & FX"
      summary: "Initiate a Currency Conversion"
      description: "Executes an instant currency conversion between two currencies, either from a balance or into a specified account."
      operationId: "initiateCurrencyConversion"
      security:
        - oAuth2Auth: [write:payments]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CurrencyConversionRequest"
      responses:
        "200":
          description: "Currency conversion completed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CurrencyConversionResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /sustainability/carbon-footprint:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Retrieve Personal Carbon Footprint Report"
      description: "Generates a detailed report of the user's estimated carbon footprint based on transaction data, lifestyle choices, and AI-driven impact assessments, offering insights and reduction strategies."
      operationId: "getPersonalCarbonFootprint"
      security:
        - oAuth2Auth: [read:profile, read:transactions, read:sustainability]
      responses:
        "200":
          description: "A comprehensive personal carbon footprint report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonFootprintReport"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /sustainability/investments/impact:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Investments & Portfolio Intelligence"
      summary: "Analyze ESG Impact of Investment Portfolio"
      description: "Provides an AI-driven analysis of the Environmental, Social, and Governance (ESG) impact of the user's entire investment portfolio, benchmarking against industry standards and suggesting more sustainable alternatives."
      operationId: "getInvestmentESGImpact"
      security:
        - oAuth2Auth: [read:accounts, read:investments, read:sustainability]
      responses:
        "200":
          description: "An analysis of the ESG impact of the investment portfolio."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentESGImpact"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /sustainability/carbon-offsets:
    post:
      tags:
        - "Sustainability & ESG Impact"
      summary: "Purchase Carbon Offsets"
      description: "Allows users to purchase carbon offsets to neutralize their estimated carbon footprint, supporting environmental initiatives."
      operationId: "purchaseCarbonOffsets"
      security:
        - oAuth2Auth: [write:sustainability, write:payments]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CarbonOffsetPurchaseRequest"
      responses:
        "200":
          description: "Carbon offsets purchased successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonOffsetPurchaseResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /lending/applications:
    post:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Submit a Loan Application with AI Underwriting"
      description: "Submits a new loan application, which is instantly processed and underwritten by our Quantum AI, providing rapid decisions and personalized loan offers based on real-time financial health data."
      operationId: "submitLoanApplication"
      security:
        - oAuth2Auth: [write:lending, read:profile, read:accounts, read:transactions, read:credit]
      requestBody:
        required: true
        description: "The loan application details, including desired amount, purpose, and term."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoanApplicationRequest"
      responses:
        "202":
          description: "Loan application submitted. The AI is evaluating and will provide a decision shortly."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /lending/applications/{applicationId}:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Loan Application Status & Details"
      description: "Retrieves the current status and detailed information for a submitted loan application, including AI underwriting outcomes, approved terms, and next steps."
      operationId: "getLoanApplicationDetails"
      security:
        - oAuth2Auth: [read:lending]
      parameters:
        - $ref: "#/components/parameters/ApplicationId"
      responses:
        "200":
          description: "Detailed status and terms of the loan application."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /lending/offers/pre-approved:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Pre-Approved Loan Offers"
      description: "Retrieves a list of personalized, pre-approved loan offers generated by the AI based on the user's financial profile and credit health."
      operationId: "getPreApprovedLoanOffers"
      security:
        - oAuth2Auth: [read:lending, read:credit]
      responses:
        "200":
          description: "A list of pre-approved loan offers."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LoanOffer"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/webhooks:
    get:
      tags:
        - "Developer Tools & API Management"
      summary: "List Webhook Subscriptions"
      description: "Retrieves a list of all active webhook subscriptions for the authenticated developer application, detailing endpoint URLs, subscribed events, and current status."
      operationId: "listWebhookSubscriptions"
      security:
        - oAuth2Auth: [read:developer_tools]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of active webhook subscriptions."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/WebhookSubscription"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Developer Tools & API Management"
      summary: "Create a New Webhook Subscription"
      description: "Establishes a new webhook subscription, allowing a developer application to receive real-time notifications for specified events (e.g., new transaction, account update) via a provided callback URL."
      operationId: "createWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the new webhook subscription, including callback URL and desired event types."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionCreationRequest"
      responses:
        "201":
          description: "Webhook subscription created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/webhooks/{subscriptionId}:
    put:
      tags:
        - "Developer Tools & API Management"
      summary: "Update Webhook Subscription"
      description: "Modifies an existing webhook subscription, allowing changes to the callback URL, subscribed events, or activation status."
      operationId: "updateWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      requestBody:
        required: true
        description: "The updated webhook subscription details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionUpdateRequest"
      responses:
        "200":
          description: "Webhook subscription updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Developer Tools & API Management"
      summary: "Delete Webhook Subscription"
      description: "Deletes an existing webhook subscription, stopping all future event notifications to the specified callback URL."
      operationId: "deleteWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      responses:
        "204":
          description: "Webhook subscription deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /developers/api-keys:
    get:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Developer API Keys"
      description: "Retrieves a list of API keys issued to the authenticated developer application."
      operationId: "listApiKeys"
      security:
        - oAuth2Auth: [read:developer_tools]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of API keys."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ApiKey"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Create a New Developer API Key"
      description: "Generates a new API key for the developer application with specified scopes and an optional expiration."
      operationId: "createApiKey"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ApiKeyCreationRequest"
      responses:
        "201":
          description: "API key created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKey"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/api-keys/{keyId}:
    delete:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Revoke a Developer API Key"
      description: "Revokes an existing API key, disabling its access immediately."
      operationId: "revokeApiKey"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ApiKeyId"
      responses:
        "204":
          description: "API key revoked successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /identity/kyc/submit:
    post:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Submit KYC Documentation for Verification"
      description: "Submits Know Your Customer (KYC) documentation, such as identity proofs and address verification, for AI-accelerated compliance and identity verification, crucial for higher service tiers and regulatory adherence."
      operationId: "submitKYCDocuments"
      security:
        - oAuth2Auth: [write:identity]
      requestBody:
        required: true
        description: "The KYC document submission payload, potentially including base64 encoded images or links to secure document stores."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/KYCDocumentSubmission"
      responses:
        "202":
          description: "KYC documentation submitted and undergoing AI-powered verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /identity/kyc/status:
    get:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Get Current KYC Verification Status"
      description: "Retrieves the current status of the user's Know Your Customer (KYC) verification process."
      operationId: "getKYCStatus"
      security:
        - oAuth2Auth: [read:identity]
      responses:
        "200":
          description: "Current KYC verification status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/treasury/cash-flow/forecast:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get AI-Driven Corporate Cash Flow Forecast"
      description: "Retrieves an advanced AI-driven cash flow forecast for the organization, projecting liquidity, identifying potential surpluses or deficits, and providing recommendations for optimal treasury management."
      operationId: "getCorporateCashFlowForecast"
      security:
        - oAuth2Auth: [read:corporate_treasury, read:corporate_payments, read:compliance, read:analytics]
      parameters:
        - $ref: "#/components/parameters/ForecastHorizonDays"
        - $ref: "#/components/parameters/IncludeScenarioAnalysis"
      responses:
        "200":
          description: "A comprehensive AI-driven cash flow forecast report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CashFlowForecast"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/treasury/liquidity-positions:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time Corporate Liquidity Positions"
      description: "Provides a real-time overview of the organization's liquidity across all accounts, currencies, and short-term investments."
      operationId: "getCorporateLiquidityPositions"
      security:
        - oAuth2Auth: [read:corporate_treasury]
      responses:
        "200":
          description: "Real-time liquidity positions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LiquidityPositions"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/risk/fraud/rules:
    get:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "List AI-Powered Fraud Detection Rules"
      description: "Retrieves a list of AI-powered fraud detection rules currently active for the organization, including their parameters, thresholds, and associated actions (e.g., flag, block, alert)."
      operationId: "listFraudDetectionRules"
      security:
        - oAuth2Auth: [read:compliance, read:corporate_treasury]
      responses:
        "200":
          description: "A list of fraud detection rules."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FraudRule"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Create a New AI-Powered Fraud Detection Rule"
      description: "Creates a new custom AI-powered fraud detection rule, allowing organizations to define specific criteria, risk scores, and automated responses to evolving threat landscapes."
      operationId: "createFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
      requestBody:
        required: true
        description: "The definition of the new fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleCreationRequest"
      responses:
        "201":
          description: "Fraud detection rule created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /corporate/risk/fraud/rules/{ruleId}:
    put:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Update an AI-Powered Fraud Detection Rule"
      description: "Updates an existing custom AI-powered fraud detection rule, modifying its criteria, actions, or status."
      operationId: "updateFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
      parameters:
        - $ref: "#/components/parameters/RuleId"
      requestBody:
        required: true
        description: "The updated definition of the fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleUpdateRequest"
      responses:
        "200":
          description: "Fraud detection rule updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Delete an AI-Powered Fraud Detection Rule"
      description: "Deletes a specific custom AI-powered fraud detection rule."
      operationId: "deleteFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
      parameters:
        - $ref: "#/components/parameters/RuleId"
      responses:
        "204":
          description: "Fraud detection rule deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /goals:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "List All User Financial Goals"
      description: "Retrieves a list of all financial goals defined by the user, including their progress and associated AI plans."
      operationId: "listFinancialGoals"
      security:
        - oAuth2Auth: [read:profile]
      responses:
        "200":
          description: "A list of financial goals."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FinancialGoal"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Create a New Financial Goal"
      description: "Creates a new long-term financial goal, with optional AI plan generation."
      operationId: "createFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalCreationRequest"
      responses:
        "201":
          description: "Financial goal created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /goals/{goalId}:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Get Detailed Financial Goal"
      description: "Retrieves detailed information for a specific financial goal, including its AI strategic plan and progress tracking."
      operationId: "getFinancialGoalDetails"
      security:
        - oAuth2Auth: [read:profile]
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "200":
          description: "Detailed financial goal information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Update Financial Goal"
      description: "Updates parameters for an existing financial goal."
      operationId: "updateFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
      parameters:
        - $ref: "#/components/parameters/GoalId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalUpdateRequest"
      responses:
        "200":
          description: "Financial goal updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Delete Financial Goal"
      description: "Deletes a specific financial goal."
      operationId: "deleteFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "204":
          description: "Financial goal deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /marketplace/products:
    get:
      tags:
        - "Marketplace (Plato AI)"
      summary: "Browse AI-Curated Marketplace Products"
      description: "Retrieves a list of personalized product recommendations from the Plato AI Marketplace."
      operationId: "browseMarketplaceProducts"
      security:
        - oAuth2Auth: [read:profile]
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "category"
          in: "query"
          description: "Filter products by category."
          schema:
            type: string
            example: "Smart Home Devices"
      responses:
        "200":
          description: "A list of personalized product listings."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProductListing"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /marketplace/products/{productId}/simulate-impact:
    post:
      tags:
        - "Marketplace (Plato AI)"
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Simulate Financial Impact of a Product Purchase"
      description: "Runs an AI simulation to predict the financial impact of purchasing a specific product on the user's budget and cash flow."
      operationId: "simulateProductPurchaseImpact"
      security:
        - oAuth2Auth: [read:profile, interact:ai_oracle]
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProductImpactSimulationRequest"
      responses:
        "200":
          description: "Detailed financial impact simulation results."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductImpactSimulationResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /rewards/balance:
    get:
      tags:
        - "Rewards & Gamification Engine"
      summary: "Get User's Reward Balance and Tier"
      description: "Retrieves the authenticated user's current loyalty points, elite tier, and associated benefits."
      operationId: "getRewardBalance"
      security:
        - oAuth2Auth: [read:rewards]
      responses:
        "200":
          description: "User's reward balance and tier information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RewardBalance"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /rewards/redeem:
    post:
      tags:
        - "Rewards & Gamification Engine"
      summary: "Redeem Loyalty Points for Rewards"
      description: "Allows the user to redeem their accumulated loyalty points for available reward items from the catalog."
      operationId: "redeemRewardPoints"
      security:
        - oAuth2Auth: [write:rewards]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RedemptionRequest"
      responses:
        "200":
          description: "Reward redemption initiated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RedemptionConfirmation"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /credit/score:
    get:
      tags:
        - "Credit Health & AI Underwriting"
      summary: "Get Detailed Credit Score and Factors"
      description: "Retrieves the user's most recent credit score, provider details, and the key factors influencing the score, along with AI recommendations for improvement."
      operationId: "getCreditScoreDetails"
      security:
        - oAuth2Auth: [read:credit]
      responses:
        "200":
          description: "Detailed credit score information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreditScoreDetails"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /credit/improvement-plan:
    get:
      tags:
        - "Credit Health & AI Underwriting"
      summary: "Get AI-Generated Credit Improvement Plan"
      description: "Retrieves a personalized, AI-generated plan with actionable steps to improve the user's credit score over time."
      operationId: "getCreditImprovementPlan"
      security:
        - oAuth2Auth: [read:credit]
      responses:
        "200":
          description: "AI-generated credit improvement plan."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreditImprovementPlan"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /notifications:
    get:
      tags:
        - "Notifications & Proactive Alerts"
      summary: "List All User Notifications"
      description: "Retrieves a paginated list of all active notifications and proactive alerts for the authenticated user."
      operationId: "listNotifications"
      security:
        - oAuth2Auth: [read:profile]
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "readStatus"
          in: "query"
          description: "Filter notifications by read status."
          schema:
            type: boolean
            nullable: true
        - name: "severity"
          in: "query"
          description: "Filter notifications by severity."
          schema:
            type: string
            enum: [info, warning, critical]
      responses:
        "200":
          description: "A paginated list of notifications."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit: {type: integer, example: 50}
                  offset: {type: integer, example: 0}
                  total: {type: integer, example: 15}
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Notification"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /notifications/{notificationId}/read:
    put:
      tags:
        - "Notifications & Proactive Alerts"
      summary: "Mark Notification as Read"
      description: "Updates the status of a specific notification to 'read'."
      operationId: "markNotificationAsRead"
      security:
        - oAuth2Auth: [write:profile]
      parameters:
        - $ref: "#/components/parameters/NotificationId"
      responses:
        "200":
          description: "Notification marked as read."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notification"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /notifications/settings:
    get:
      tags:
        - "Notifications & Proactive Alerts"
      summary: "Get User Notification Settings"
      description: "Retrieves the user's preferences for receiving various types of notifications."
      operationId: "getNotificationSettings"
      security:
        - oAuth2Auth: [read:profile]
      responses:
        "200":
          description: "User's notification settings."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationSettings"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags:
        - "Notifications & Proactive Alerts"
      summary: "Update User Notification Settings"
      description: "Updates the user's preferences for notification delivery channels and types."
      operationId: "updateNotificationSettings"
      security:
        - oAuth2Auth: [write:profile]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationSettingsUpdateRequest"
      responses:
        "200":
          description: "Notification settings updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationSettings"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /security/third-party-connections:
    get:
      tags:
        - "Security & Open Banking Ecosystem"
        - "Developer Tools & API Management"
      summary: "List Third-Party Application Connections"
      description: "Retrieves a list of all third-party applications that have been granted access to the user's Demo Bank data."
      operationId: "listThirdPartyConnections"
      security:
        - oAuth2Auth: [read:profile, read:security]
      responses:
        "200":
          description: "A list of third-party connections."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ThirdPartyConnection"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /security/third-party-connections/{connectionId}/revoke:
    post:
      tags:
        - "Security & Open Banking Ecosystem"
        - "Developer Tools & API Management"
      summary: "Revoke Access for a Third-Party Application"
      description: "Revokes access for a specific third-party application, immediately terminating its ability to access user data."
      operationId: "revokeThirdPartyAccess"
      security:
        - oAuth2Auth: [write:security]
      parameters:
        - $ref: "#/components/parameters/ConnectionId"
      responses:
        "204":
          description: "Access revoked successfully for the third-party application."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /analytics/personal/dashboard:
    get:
      tags:
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Personalized Financial Dashboard Data"
      description: "Retrieves aggregated, AI-powered insights and key metrics for the user's personalized financial dashboard."
      operationId: "getPersonalDashboard"
      security:
        - oAuth2Auth: [read:profile, read:accounts, read:transactions, read:investments, read:analytics]
      responses:
        "200":
          description: "Personalized financial dashboard data."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PersonalDashboard"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /analytics/personal/forecast:
    get:
      tags:
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Personal Financial Forecast"
      description: "Provides an AI-driven forecast of the user's financial future, including projected net worth, savings, and debt reduction over a specified horizon."
      operationId: "getPersonalFinancialForecast"
      security:
        - oAuth2Auth: [read:profile, read:accounts, read:transactions, read:analytics]
      parameters:
        - $ref: "#/components/parameters/ForecastHorizonDays"
      responses:
        "200":
          description: "Personal financial forecast."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialForecast"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /analytics/reports/custom:
    post:
      tags:
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Request a Custom Financial Report"
      description: "Initiates the generation of a custom financial report based on user-defined criteria, such as expense categories, income sources, or investment performance."
      operationId: "requestCustomReport"
      security:
        - oAuth2Auth: [write:analytics]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CustomReportRequest"
      responses:
        "202":
          description: "Custom report generation initiated. Report ID provided for status tracking."
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: string
                    example: "report_q2_expenses_abc"
                  status:
                    type: string
                    enum: [processing, completed, failed]
                    example: "processing"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

components:
  securitySchemes:
    oAuth2Auth:
      type: oauth2
      description: "Advanced OAuth2 for granular user and application authentication, supporting multiple flows for diverse use cases."
      flows:
        authorizationCode:
          authorizationUrl: https://api.demobank.com/oauth2/auth
          tokenUrl: https://api.demobank.com/oauth2/token
          scopes:
            read:profile: "Read comprehensive user profile information and basic identity attributes."
            write:profile: "Modify user profile, preferences, and security settings."
            read:accounts: "Read access to all linked financial accounts, balances, and basic analytics."
            write:accounts: "Manage linked accounts, initiate linking new institutions, and configure account settings."
            read:transactions: "Read granular transaction history, AI categorizations, and dispute statuses."
            write:transactions: "Modify transaction data (e.g., categorization, notes), and initiate disputes."
            write:payments: "Initiate personal payments, transfers, and recurring payment setups."
            interact:ai_advisor: "Full access to the conversational AI Advisor, including tool invocation."
            interact:ai_oracle: "Access to the Quantum Oracle for standard and advanced financial simulations."
            read:weaver: "Read status, feedback, and offers related to business plan submissions."
            write:weaver: "Submit, manage, and respond to AI-generated questions for business plans in Quantum Weaver."
            read:ad_studio: "Check status and retrieve generated assets from the AI Ad Studio."
            write:ad_studio: "Generate standard and advanced video content using Veo 2.0."
            read:corporate_cards: "Read comprehensive corporate card information, controls, and audit trails."
            write:corporate_cards: "Modify corporate card status, spending controls, issue virtual cards, and manage policies."
            read:corporate_payments: "Read corporate payment orders, invoices, counterparties, and approval workflows."
            write:corporate_payments: "Create, approve, and manage corporate payment orders, batch payments, and international transfers."
            read:compliance: "Read compliance cases, AI-detected financial anomalies, and audit reports."
            write:compliance: "Update compliance case/anomaly status, configure risk rules, and request audit reports."
            read:rewards: "Read rewards balance, loyalty tier, and available redemption items."
            write:rewards: "Redeem reward points for items and manage loyalty program interactions."
            read:analytics: "Access real-time dashboards, predictive forecasts, and custom reports for personal and corporate finance."
            write:analytics: "Request and manage custom analytics reports."
            read:web3: "Read connected crypto wallets, NFTs, and DeFi protocol information."
            write:web3: "Connect crypto wallets, initiate crypto transfers, and interact with DeFi protocols."
            read:sustainability: "Access personal and corporate carbon footprint reports, and ESG investment impact analysis."
            write:sustainability: "Contribute to green initiatives and configure sustainability preferences."
            read:lending: "Access loan application status, terms, and pre-approval offers."
            write:lending: "Submit loan applications and manage repayment schedules."
            read:developer_tools: "Read webhook subscriptions, API keys, and event logs."
            write:developer_tools: "Manage webhook subscriptions, create/revoke API keys."
            read:identity: "Read KYC status, verified credentials, and biometric enrollment status."
            write:identity: "Submit KYC documentation, enroll biometrics, and issue verifiable credentials."
            read:corporate_treasury: "Access corporate cash flow forecasts, liquidity management strategies, and investment analyses."
            write:corporate_treasury: "Define corporate investment strategies and liquidity adjustments."
            read:fx_rates: "Access real-time and predictive foreign exchange rates."
            read:investments: "Read investment portfolio holdings, performance, and insights."
            write:investments: "Manage investment portfolios, initiate trades, and rebalance assets."
            read:personalization: "Read user personalization preferences."
            write:personalization: "Update user personalization preferences (themes, notifications, AI behavior)."
        clientCredentials:
          tokenUrl: https://api.demobank.com/oauth2/token
          scopes:
            system:admin: "Full administrative control for trusted internal systems."
            system:auditor: "Read-only access for auditing and compliance systems."
            webhook:events: "Scope for webhook callbacks to authenticate event delivery."
    apiKeyAuth:
      type: apiKey
      in: header
      name: X-API-KEY
      description: "API Key authentication for server-to-server and trusted developer applications, typically used for developer tools and webhook validation."
    biometricAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "Bearer token authentication validated against biometric enrollment, used for high-security transactions or sensitive data access."
  parameters:
    TransactionId:
      name: transactionId
      in: path
      required: true
      description: "The unique, immutable identifier for the financial transaction (e.g., `txn_quantum-2024-07-21-A7B8C9`)."
      schema:
        type: string
        example: "txn_quantum-2024-07-21-A7B8C9"
    CardId:
      name: cardId
      in: path
      required: true
      description: "The globally unique identifier for the corporate card (physical or virtual)."
      schema:
        type: string
        example: "corp_card_xyz987654"
    AnomalyId:
      name: anomalyId
      in: path
      required: true
      description: "The unique identifier assigned to a detected financial anomaly by the AI risk engine."
      schema:
        type: string
        example: "anom_risk-2024-07-21-D1E2F3"
    AccountId:
      name: accountId
      in: path
      required: true
      description: "The unique identifier for a linked financial account (e.g., `acc_chase_checking_4567`)."
      schema:
        type: string
        example: "acc_chase_checking_4567"
    DeviceId:
      name: deviceId
      in: path
      required: true
      description: "The unique identifier for a registered device associated with the user's account."
      schema:
        type: string
        example: "dev_mobile_ios_aabbcc"
    PitchId:
      name: pitchId
      in: path
      required: true
      description: "The unique identifier for a business pitch submitted to Quantum Weaver."
      schema:
        type: string
        example: "pitch_qw_synergychain-xyz"
    OperationId:
      name: operationId
      in: path
      required: true
      description: "The unique identifier for an asynchronous operation (e.g., video generation, large report processing)."
      schema:
        type: string
        example: "op-video-gen-12345-abcde"
    ApplicationId:
      name: applicationId
      in: path
      required: true
      description: "The unique identifier for a submitted loan application."
      schema:
        type: string
        example: "loan_app_creditflow-123"
    SubscriptionId:
      name: subscriptionId
      in: path
      required: true
      description: "The unique identifier for a webhook subscription."
      schema:
        type: string
        example: "whsub_devtool_finance_events"
    Limit:
      name: "limit"
      in: "query"
      description: "The maximum number of items to return per page. Optimized for performance and typical use cases."
      schema:
        type: integer
        default: 50
        minimum: 1
        maximum: 200
    Offset:
      name: "offset"
      in: "query"
      description: "The starting index of the list for pagination. Use with `limit` for efficient data retrieval."
      schema:
        type: integer
        default: 0
        minimum: 0
    StartDate:
      name: startDate
      in: query
      description: "The inclusive start date for filtering data, in `YYYY-MM-DD` format. All items after or on this date will be included."
      schema:
        type: string
        format: date
        example: "2024-01-01"
    EndDate:
      name: endDate
      in: query
      description: "The inclusive end date for filtering data, in `YYYY-MM-DD` format. All items before or on this date will be included."
      schema:
        type: string
        format: date
        example: "2024-12-31"
    ForecastHorizonDays:
      name: forecastHorizonDays
      in: query
      description: "The number of days into the future for which the AI should generate a forecast. Max 365 days."
      schema:
        type: integer
        minimum: 1
        maximum: 365
        default: 90
    IncludeScenarioAnalysis:
      name: includeScenarioAnalysis
      in: query
      description: "If true, the forecast will include AI-generated best-case, worst-case, and most-likely scenarios."
      schema:
        type: boolean
        default: false
    AuditId:
      name: auditId
      in: path
      required: true
      description: "The unique identifier for a compliance audit."
      schema:
        type: string
        example: "audit_corp_xyz789"
    WalletId:
      name: walletId
      in: path
      required: true
      description: "The unique identifier for a connected cryptocurrency wallet."
      schema:
        type: string
        example: "wallet_conn_eth_0xabc123"
    PaymentId:
      name: paymentId
      in: path
      required: true
      description: "The unique identifier for an international payment."
      schema:
        type: string
        example: "int_pmt_xyz7890"
    BudgetId:
      name: budgetId
      in: path
      required: true
      description: "The unique identifier for a user's budget."
      schema:
        type: string
        example: "budget_monthly_aug"
    PortfolioId:
      name: portfolioId
      in: path
      required: true
      description: "The unique identifier for an investment portfolio."
      schema:
        type: string
        example: "portfolio_equity_growth"
    SimulationId:
      name: simulationId
      in: path
      required: true
      description: "The unique identifier for a financial simulation."
      schema:
        type: string
        example: "sim_oracle-growth-2024-xyz"
    ProductId:
      name: productId
      in: path
      required: true
      description: "The unique identifier for a marketplace product."
      schema:
        type: string
        example: "prod_smart_speaker_001"
    NotificationId:
      name: notificationId
      in: path
      required: true
      description: "The unique identifier for a user notification."
      schema:
        type: string
        example: "notif_txn_alert_001"
    ConnectionId:
      name: connectionId
      in: path
      required: true
      description: "The unique identifier for a third-party application connection."
      schema:
        type: string
        example: "tpc_plaid_app_789"
    ApiKeyId:
      name: keyId
      in: path
      required: true
      description: "The unique identifier for a developer API key."
      schema:
        type: string
        example: "api_key_dev_app_01"
    GoalId:
      name: goalId
      in: path
      required: true
      description: "The unique identifier for a financial goal."
      schema:
        type: string
        example: "goal_retirement_2050"
    RuleId:
      name: ruleId
      in: path
      required: true
      description: "The unique identifier for a fraud detection rule."
      schema:
        type: string
        example: "fraud_rule_high_value_inactive"

  responses:
    UnauthorizedError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    ForbiddenError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFoundError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    BadRequestError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    TooManyRequestsError:
      headers:
        Retry-After:
          schema:
            type: integer
            description: "Number of seconds after which the client can make another request."
            example: 30
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    ConflictError:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  schemas:
    UserRegistrationRequest:
      type: object
      description: "Payload for a new user registration."
      required:
        - name
        - email
        - password
      properties:
        name: {type: string, example: "New User"}
        email: {type: string, format: email, example: "new.user@example.com"}
        password: {type: string, format: password, example: "StrongP@ssw0rd!"}
        phone: {type: string, nullable: true, example: "+1-555-987-6543"}

    UserLoginRequest:
      type: object
      description: "Payload for user login."
      required:
        - email
        - password
      properties:
        email: {type: string, format: email, example: "quantum.visionary@demobank.com"}
        password: {type: string, format: password, example: "YourSecurePassword123"}
        mfaCode: {type: string, nullable: true, example: "123456", description: "Multi-factor authentication code, if required."}

    LoginResponse:
      type: object
      description: "Response containing authentication tokens after successful login."
      properties:
        accessToken: {type: string, example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"}
        refreshToken: {type: string, example: "some_long_refresh_token_string"}
        expiresIn: {type: integer, example: 3600, description: "Time in seconds until the access token expires."}
        tokenType: {type: string, example: "Bearer"}

    UserUpdateProfileRequest:
      type: object
      description: "Partial payload for updating user profile."
      properties:
        name: {type: string, example: "Quantum Visionary Pro"}
        phone: {type: string, nullable: true, example: "+1-555-999-0000"}
        address:
          type: object
          properties:
            street: {type: string, example: "200 Innovation Parkway"}
            city: {type: string, example: "Quantum Heights"}
            state: {type: string, example: "CA"}
            zip: {type: string, example: "90211"}
            country: {type: string, example: "USA"}

    BiometricEnrollmentRequest:
      type: object
      description: "Request to enroll biometric data."
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          example: "facial_recognition"
          description: "Type of biometric data being enrolled."
        biometricSignature:
          type: string
          example: "base64encoded_biometric_template_or_challenge_response"
          description: "A cryptographic signature or template of the biometric data."
        deviceId:
          type: string
          example: "dev_mobile_ios_aabbcc"
          description: "ID of the device from which the biometric is being enrolled."
        deviceName:
          type: string
          nullable: true
          example: "My Secure Phone"

    BiometricVerificationRequest:
      type: object
      description: "Request to verify biometric data."
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          example: "facial_recognition"
        biometricSignature:
          type: string
          example: "base64encoded_one_time_biometric_proof"
          description: "A cryptographic proof of the biometric scan for a single transaction."
        deviceId:
          type: string
          example: "dev_mobile_ios_aabbcc"

    BiometricStatus:
      type: object
      description: "Current biometric enrollment status for the user."
      properties:
        biometricsEnrolled: {type: boolean, example: true, description: "Indicates if any biometric data is enrolled."}
        enrolledBiometrics:
          type: array
          items:
            type: object
            properties:
              type: {type: string, enum: [fingerprint, facial_recognition, voice_recognition], example: "facial_recognition"}
              deviceId: {type: string, example: "dev_mobile_ios_aabbcc"}
              enrollmentDate: {type: string, format: date-time, example: "2024-07-21T17:00:00Z"}
        lastUsed:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-21T17:30:00Z"

    User:
      type: object
      description: "The comprehensive user profile, incorporating personal details, security status, financial summaries, and loyalty program standing."
      properties:
        id:
          type: string
          example: "user-quantum-visionary-001"
          description: "Unique identifier for the user across the Demo Bank ecosystem."
        name:
          type: string
          example: "The Quantum Visionary"
          description: "Full name of the user."
        email:
          type: string
          format: email
          example: "quantum.visionary@demobank.com"
          description: "Primary email address, used for communications and login."
        phone:
          type: string
          example: "+1-555-123-4567"
          description: "Primary phone number, used for MFA and notifications."
          nullable: true
        dateOfBirth:
          type: string
          format: date
          example: "1980-01-15"
          description: "User's date of birth, for age verification and personalization."
        address:
          type: object
          description: "Physical address of the user."
          properties:
            street: {type: string, example: "100 Innovation Drive"}
            city: {type: string, example: "Quantumville"}
            state: {type: string, example: "CA"}
            zip: {type: string, example: "90210"}
            country: {type: string, example: "USA"}
        loyaltyTier:
          type: string
          example: "Zenith Platinum"
          description: "Current loyalty program tier, influencing benefits and rewards."
        loyaltyPoints:
          type: integer
          example: 12500
          description: "Accumulated loyalty points, redeemable for various rewards."
        gamificationLevel:
          type: integer
          example: 7
          description: "Current gamification level, reflecting engagement and achievements."
        aiPersona:
          type: string
          example: "Prudent Planner"
          description: "AI-identified financial persona, used by Quantum for tailored advice."
        securityStatus:
          type: object
          description: "Summary of user's security posture."
          properties:
            twoFactorEnabled: {type: boolean, example: true, description: "Indicates if 2FA is enabled."}
            biometricsEnrolled: {type: boolean, example: true, description: "Indicates if biometric authentication is set up."}
            lastLogin:
              type: string
              format: date-time
              example: "2024-07-21T10:30:00Z"
              description: "Timestamp of the last successful login."
            lastLoginIp:
              type: string
              format: ipv4
              example: "203.0.113.45"
              description: "IP address of the last successful login."
        preferences:
          $ref: "#/components/schemas/UserPreferences"
        identityVerified:
          type: boolean
          example: true
          description: "True if KYC/identity verification is complete."
    UserPreferences:
      type: object
      description: "Comprehensive settings for user experience, AI interaction, and notification management."
      properties:
        preferredLanguage:
          type: string
          example: "en-US"
          description: "User's preferred interface language."
        theme:
          type: string
          example: "Dark-Quantum"
          description: "Chosen visual theme for the application."
        aiInteractionMode:
          type: string
          enum: [proactive, reactive, balanced]
          default: "balanced"
          description: "How Quantum AI should interact: 'proactive' (frequent suggestions), 'reactive' (responds only when asked), 'balanced'."
        notificationChannels:
          type: object
          description: "Preferred notification channels and their activation status."
          properties:
            email: {type: boolean, example: true}
            push: {type: boolean, example: true}
            sms: {type: boolean, example: false}
            inApp: {type: boolean, example: true}
        dataSharingConsent:
          type: boolean
          example: true
          description: "User consent for sharing anonymized data to improve AI models."
        transactionGrouping:
          type: string
          enum: [merchant, category, date]
          default: "category"
          description: "Default grouping preference for transaction lists."
    Device:
      type: object
      description: "Details of a device registered to the user's account for access and security."
      properties:
        id:
          type: string
          example: "dev_mobile_ios_aabbcc"
          description: "Unique identifier for the registered device."
        type:
          type: string
          enum: [mobile, tablet, desktop, wearable]
          example: "mobile"
          description: "Type of device."
        os:
          type: string
          example: "iOS 17.5"
          description: "Operating system and version of the device."
        model:
          type: string
          example: "iPhone 15 Pro Max"
          description: "Device model."
        lastActive:
          type: string
          format: date-time
          example: "2024-07-21T11:05:00Z"
          description: "Timestamp of the last recorded activity from this device."
        ipAddress:
          type: string
          format: ipv4
          example: "203.0.113.12"
          description: "Last known IP address associated with the device."
        trustLevel:
          type: string
          enum: [trusted, untrusted, pending_verification]
          example: "trusted"
          description: "Security trust level of the device. Untrusted devices may require additional MFA."
        pushToken:
          type: string
          nullable: true
          description: "Push notification token for the device, if registered."
          example: "ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]"
    RegisterDeviceRequest:
      type: object
      description: "Request to register a new device."
      required:
        - deviceType
        - os
        - model
        - biometricSignature
      properties:
        deviceType:
          type: string
          enum: [mobile, tablet, desktop, wearable]
          example: "mobile"
        os:
          type: string
          example: "Android 14"
        model:
          type: string
          example: "Samsung Galaxy S24 Ultra"
        biometricSignature:
          type: string
          description: "A cryptographic signature derived from a local biometric scan (e.g., face or fingerprint) on the new device, used for initial trust establishment."
          example: "base64encoded_biometric_proof_string"
        deviceName:
          type: string
          nullable: true
          description: "Optional, user-friendly name for the device."
          example: "My Work Laptop"
    LinkedAccount:
      type: object
      description: "A summary of a financial account linked from an external institution."
      properties:
        id:
          type: string
          example: "acc_chase_checking_4567"
          description: "A unique, internal ID for the linked account."
        externalId:
          type: string
          description: "The institution's ID for the account from the data provider (e.g., Plaid)."
          example: "plaid_acc_abc123"
        name:
          type: string
          example: "Chase Checking"
          description: "User-friendly name of the account."
        institutionName:
          type: string
          example: "Chase Bank"
          description: "Name of the financial institution."
        mask:
          type: string
          example: "1111"
          description: "Last four digits of the account number, for display purposes."
        type:
          type: string
          enum: [depository, credit, loan, investment, brokerage, crypto]
          example: "depository"
          description: "Primary type of the account."
        subtype:
          type: string
          example: "checking"
          description: "Specific subtype of the account."
        currency:
          type: string
          example: "USD"
          description: "The currency of the account."
        currentBalance:
          type: number
          format: float
          example: 1250.75
          description: "The current available balance in the account."
        availableBalance:
          type: number
          format: float
          example: 1200.00
          description: "The current available balance, accounting for pending transactions."
          nullable: true
        limit:
          type: number
          format: float
          example: 5000.00
          description: "Credit limit for credit accounts, or overdraft limit for checking accounts."
          nullable: true
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-21T10:45:00Z"
          description: "Timestamp of the last successful balance update."
    AccountDetail:
      type: object
      description: "Detailed information and analytics for a specific financial account."
      allOf:
        - $ref: "#/components/schemas/LinkedAccount"
        - type: object
          properties:
            accountId:
              type: string
              example: "acc_chase_checking_4567"
              description: "The unique identifier for the account."
            accountHolder:
              type: string
              example: "The Quantum Visionary"
              description: "Name of the primary account holder."
            interestRate:
              type: number
              format: float
              example: 0.01
              description: "Annual interest rate for savings or lending accounts."
              nullable: true
            openedDate:
              type: string
              format: date
              example: "2020-03-01"
              description: "Date the account was opened."
            transactionsCount:
              type: integer
              example: 150
              description: "Total number of transactions linked to this account."
            projectedCashFlow:
              type: object
              description: "AI-driven projection of future cash flow for the account."
              properties:
                days30: {type: number, format: float, example: 500, description: "Projected cash flow for the next 30 days."}
                days90: {type: number, format: float, example: 1200, description: "Projected cash flow for the next 90 days."}
                confidenceScore: {type: integer, minimum: 0, maximum: 100, example: 85, description: "AI confidence score for the cash flow projection."}
            balanceHistory:
              type: array
              description: "Historical daily balance snapshots."
              items:
                type: object
                properties:
                  date: {type: string, format: date, example: "2024-07-20"}
                  balance: {type: number, format: float, example: 1230.50}
    OverdraftSettings:
      type: object
      description: "Current overdraft protection settings for an account."
      properties:
        accountId: {type: string, example: "acc_chase_checking_4567"}
        enabled: {type: boolean, example: true, description: "Is overdraft protection enabled?"}
        protectionLimit: {type: number, format: float, nullable: true, example: 500.00, description: "The maximum amount allowed for overdraft protection."}
        linkToSavings: {type: boolean, example: true, description: "Is the account linked to a savings account for overdraft transfers?"}
        linkedSavingsAccountId: {type: string, nullable: true, example: "acc_chase_savings_1234"}
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me]
          example: "always_pay"
          description: "Preference for handling overdraft fees."

    OverdraftSettingsUpdateRequest:
      type: object
      description: "Request to update overdraft protection settings."
      properties:
        enabled: {type: boolean, example: true}
        protectionLimit: {type: number, format: float, nullable: true, example: 750.00}
        linkToSavings: {type: boolean, example: false}
        linkedSavingsAccountId: {type: string, nullable: true, example: "acc_chase_savings_1234"}
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me]
          example: "decline_if_over_limit"

    LinkAccountRequest:
      type: object
      description: "Request to initiate linking a new external account."
      required:
        - institutionName
        - countryCode
      properties:
        institutionName:
          type: string
          example: "Bank of America"
          description: "The name of the financial institution to link."
        countryCode:
          type: string
          example: "US"
          description: "ISO 3166-1 alpha-2 country code of the institution."
        accessToken:
          type: string
          nullable: true
          description: "Optional: OAuth token from the institution if direct connection is supported."
          example: "eyJr...jwt_token_from_institution"
    LinkAccountResponse:
      type: object
      description: "Response containing instructions to complete the account linking."
      required:
        - linkSessionId
        - authUri
        - status
      properties:
        linkSessionId:
          type: string
          example: "link_session_xyz789"
          description: "A session ID to track the linking process."
        authUri:
          type: string
          format: uri
          example: "https://auth.plaid.com/oauth/initiate?client_id=...&redirect_uri=..."
          description: "The URI the user should be redirected to, or presented in a webview, to complete the linking process at the external institution's portal."
        status:
          type: string
          enum: [pending_user_action, complete, failed]
          example: "pending_user_action"
          description: "Current status of the linking request."
        message:
          type: string
          nullable: true
          example: "Please redirect user to the provided URI to complete authentication."
    Transaction:
      type: object
      description: "A detailed financial transaction entry with AI-enriched data."
      properties:
        id:
          type: string
          example: "txn_quantum-2024-07-21-A7B8C9"
          description: "Unique identifier for the transaction."
        accountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "ID of the account this transaction belongs to."
        type:
          type: string
          enum: [income, expense, transfer, investment, refund, bill_payment, fee]
          example: "expense"
          description: "The type of transaction (e.g., income, expense)."
        category:
          type: string
          example: "Dining & Restaurants"
          description: "AI-assigned or user-defined category for the transaction."
        aiCategoryConfidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          example: 0.92
          description: "AI's confidence score (0-1) in the assigned category."
        description:
          type: string
          example: "Coffee Shop - Quantum Cafe"
          description: "Raw description from the bank statement or merchant."
        merchantDetails:
          type: object
          nullable: true
          description: "Detailed information about the merchant."
          properties:
            name: {type: string, example: "Quantum Cafe"}
            logoUrl: {type: string, format: uri, example: "https://assets.demobank.com/merchants/quantum_cafe.png"}
            website: {type: string, format: uri, example: "https://quantum.cafe"}
            address:
              type: object
              properties:
                city: {type: string, example: "Quantumville"}
                state: {type: string, example: "CA"}
                zip: {type: string, example: "90210"}
        amount:
          type: number
          format: float
          example: 12.50
          description: "The transaction amount."
        currency:
          type: string
          example: "USD"
          description: "The currency of the transaction."
        date:
          type: string
          format: date
          example: "2024-07-21"
          description: "The date the transaction occurred."
        postedDate:
          type: string
          format: date
          example: "2024-07-22"
          description: "The date the transaction was officially posted."
          nullable: true
        carbonFootprint:
          type: number
          format: float
          nullable: true
          example: 1.2
          description: "Estimated carbon footprint (in kg CO2e) associated with this transaction, calculated by AI."
        location:
          type: object
          nullable: true
          description: "Geographic location data for the transaction, if available."
          properties:
            latitude: {type: number, format: float, example: 34.0522}
            longitude: {type: number, format: float, example: -118.2437}
            city: {type: string, example: "Los Angeles"}
        paymentChannel:
          type: string
          enum: [online, in_store, atm, recurring_bill, p2p]
          example: "in_store"
          description: "How the payment was made (e.g., online, in-store)."
        tags:
          type: array
          items:
            type: string
          example: ["work_lunch", "tax_deductible"]
          description: "User-defined tags for deeper organization."
        receiptUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/receipts/txn_1a2b3c4d5e.pdf"
          description: "URL to a digital receipt, if captured or uploaded."
        disputeStatus:
          type: string
          enum: [none, pending, under_review, resolved, rejected]
          example: "none"
          description: "Current status of any dispute related to this transaction."
    PaginatedTransactions:
      type: object
      description: "A paginated list structure for transactions."
      properties:
        limit:
          type: integer
          example: 50
        offset:
          type: integer
          example: 0
        total:
          type: integer
          example: 250
        data:
          type: array
          items:
            $ref: "#/components/schemas/Transaction"
        nextOffset:
          type: integer
          nullable: true
          description: "The offset to use for the next page of results, if available."
          example: 50
        prevOffset:
          type: integer
          nullable: true
          description: "The offset for the previous page of results, if available."
          example: 0
    CategorizeTransactionRequest:
      type: object
      description: "Request to update a transaction's category."
      required:
        - category
      properties:
        category:
          type: string
          example: "Business Expenses > Client Entertainment"
          description: "The new category for the transaction. Can be a hierarchical path."
        notes:
          type: string
          nullable: true
          example: "Meeting with client for project Alpha."
          description: "Optional user notes for the transaction."
        applyToFuture:
          type: boolean
          default: false
          description: "If true, Quantum AI will learn from this correction for future similar transactions."
    DisputeRequest:
      type: object
      description: "Request to initiate a dispute for a transaction."
      required:
        - reason
      properties:
        reason:
          type: string
          enum: [unauthorized, duplicate, wrong_amount, not_received_goods, other]
          example: "unauthorized"
          description: "The primary reason for disputing the transaction."
        details:
          type: string
          nullable: true
          description: "Detailed explanation of the dispute."
          example: "I did not authorize this purchase. My card may have been compromised."
        supportingDocuments:
          type: array
          items:
            type: string
            format: uri
          nullable: true
          description: "URLs to supporting documents (e.g., screenshots, communication logs)."
          example: ["https://demobank.com/uploads/proof_of_non_purchase.png"]
    DisputeStatus:
      type: object
      description: "Current status of a transaction dispute."
      required:
        - disputeId
        - status
      properties:
        disputeId:
          type: string
          example: "dispute_txn_xyz123"
          description: "Unique identifier for the dispute case."
        status:
          type: string
          enum: [pending, under_review, documentation_requested, resolved_favorable, resolved_unfavorable, closed]
          example: "pending"
          description: "Current status of the dispute."
        nextSteps:
          type: string
          example: "Our AI-powered fraud team is reviewing your claim. You will be notified within 2-3 business days."
          description: "Recommended next steps or expected timeline."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-21T11:30:00Z"

    RecurringTransaction:
      type: object
      description: "Details of a detected or user-defined recurring transaction."
      properties:
        id: {type: string, example: "rec_txn_netflix_001"}
        description: {type: string, example: "Netflix Subscription"}
        category: {type: string, example: "Entertainment"}
        amount: {type: number, format: float, example: 19.99}
        currency: {type: string, example: "USD"}
        frequency: {type: string, enum: [daily, weekly, biweekly, monthly, quarterly, yearly], example: "monthly"}
        nextDueDate: {type: string, format: date, example: "2024-08-01"}
        lastPaidDate: {type: string, format: date, example: "2024-07-01"}
        status: {type: string, enum: [active, paused, cancelled], example: "active"}
        linkedAccountId: {type: string, example: "acc_chase_checking_4567"}
        aiConfidenceScore: {type: number, format: float, minimum: 0, maximum: 1, example: 0.95, description: "AI's confidence in identifying this as a recurring transaction."}

    RecurringTransactionCreationRequest:
      type: object
      description: "Request to create a new recurring transaction pattern."
      required:
        - description
        - amount
        - currency
        - frequency
        - startDate
      properties:
        description: {type: string, example: "Gym Membership"}
        category: {type: string, nullable: true, example: "Health & Fitness"}
        amount: {type: number, format: float, example: 49.99}
        currency: {type: string, example: "USD"}
        frequency: {type: string, enum: [weekly, biweekly, monthly, quarterly, yearly], example: "monthly"}
        startDate: {type: string, format: date, example: "2024-09-01"}
        endDate: {type: string, format: date, nullable: true, example: "2025-08-31", description: "Optional end date for the recurring transaction."}
        linkedAccountId: {type: string, nullable: true, example: "acc_chase_checking_4567"}
        notes: {type: string, nullable: true}

    SpendingTrends:
      type: object
      description: "AI-driven analysis of user spending trends."
      properties:
        period: {type: string, example: "Last 3 Months"}
        overallTrend: {type: string, enum: [increasing, decreasing, stable], example: "increasing", description: "Overall spending trend."}
        percentageChange: {type: number, format: float, example: 5.2, description: "Percentage change in spending compared to previous period."}
        topCategoriesByChange:
          type: array
          items:
            type: object
            properties:
              category: {type: string, example: "Dining & Restaurants"}
              percentageChange: {type: number, format: float, example: 15.0}
              absoluteChange: {type: number, format: float, example: 120.00}
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
        forecastNextMonth:
          type: number
          format: float
          example: 2850.00
          description: "AI-predicted total spending for the next month."

    AIChatRequest:
      type: object
      description: "A comprehensive request payload for interacting with the Quantum AI Advisor, supporting conversational turns and tool outputs."
      properties:
        message:
          type: string
          example: "Can you analyze my recent spending patterns and suggest areas for saving, focusing on my dining expenses?"
          description: "The user's natural language message to the AI."
        sessionId:
          type: string
          description: "Unique ID to maintain conversation history and context across turns. A new session is automatically created if omitted."
          nullable: true
          example: "session-quantum-xyz-789-alpha"
        context:
          type: array
          items:
            type: object
            properties:
              role: {type: string, enum: [user, assistant, tool], example: "user"}
              content: {type: string, example: "What's my balance?"}
              toolCalls:
                type: array
                items:
                  $ref: "#/components/schemas/AIToolCall"
                nullable: true
              toolCallId: {type: string, nullable: true}
          description: "Previous turns in the conversation for maintaining context. AI processes messages within this context."
          nullable: true
        functionResponse:
          type: object
          description: "The structured result from a tool call that was previously requested by the AI. This is how the AI receives data back from executed actions."
          nullable: true
          properties:
            name:
              type: string
              example: "send_money"
              description: "The name of the tool that was executed."
            response:
              type: object
              description: "The JSON object representing the output of the tool's execution."
              example: {"status": "success", "transactionId": "pmt_654321", "amountSent": 50, "recipient": "Alex"}
    AIChatResponse:
      type: object
      description: "Quantum AI Advisor's rich response, potentially including conversational text, proactive insights, and calls to external tools for execution."
      properties:
        text:
          type: string
          description: "The natural language text response from the AI."
          example: "I've completed a detailed analysis of your spending. It appears your dining expenses account for 35% of your total outflows this month, significantly higher than your target. Would you like me to identify specific areas for reduction or suggest alternative dining options?"
        sessionId:
          type: string
          example: "session-quantum-xyz-789-alpha"
          description: "The active session ID for this conversation."
        proactiveInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "Proactive, AI-generated insights or recommendations relevant to the conversation or user's financial state."
        functionCalls:
          type: array
          items:
            $ref: "#/components/schemas/AIToolCall"
          description: "A list of tool calls that the AI wants the system to execute based on the user's request. These must be executed by the client/system."
    AIToolCall:
      type: object
      description: "A structured representation of an AI's request to execute an external tool or function."
      properties:
        id:
          type: string
          example: "call_abc123"
          description: "Unique identifier for this tool call."
        name:
          type: string
          example: "send_money"
          description: "The name of the tool/function to be executed."
        args:
          type: object
          description: "A JSON object containing the arguments required by the tool, as inferred by the AI."
          example: {"amount": 50, "recipient": "Alex", "currency": "USD", "memo": "Birthday gift"}
    AITool:
      type: object
      description: "Definition of an AI-callable tool, including its name, description, and expected parameters."
      properties:
        name:
          type: string
          example: "send_money"
          description: "The programmatic name of the tool."
        description:
          type: string
          example: "Sends money to a specified recipient from the user's primary checking account."
          description: "A human-readable description of what the tool does."
        parameters:
          type: object
          description: "OpenAPI Schema Object defining the input parameters for the tool."
          example:
            type: object
            properties:
              amount:
                type: number
                description: "The amount of money to send."
              recipient:
                type: string
                description: "The name or ID of the recipient."
              currency:
                type: string
                description: "The currency of the transaction (e.g., USD, EUR)."
            required:
              - amount
              - recipient
              - currency
        accessScope:
          type: string
          example: "write:payments"
          description: "The OAuth2 scope required to execute this tool."
    AIInsight:
      type: object
      description: "A proactive, AI-generated financial insight or recommendation."
      properties:
        id:
          type: string
          example: "insight-spending-alert-001"
          description: "Unique ID for the insight."
        title:
          type: string
          example: "High Dining Spend Alert"
          description: "Concise title for the insight."
        description:
          type: string
          example: "Your dining expenses this month are 35% higher than your average, potentially impacting your budget by $150."
          description: "Detailed explanation of the insight."
        category:
          type: string
          enum: [spending, saving, investing, debt, goals, security, income, compliance]
          example: "spending"
          description: "Category of the financial insight."
        severity:
          type: string
          enum: [low, medium, high, critical]
          example: "medium"
          description: "Severity level of the insight."
        actionableRecommendation:
          type: string
          nullable: true
          example: "Consider utilizing the 'Budget Optimizer' tool to adjust your dining budget or explore meal prep options."
          description: "An optional, concrete action the user can take."
        relatedToolCall:
          $ref: "#/components/schemas/AIToolCall"
          nullable: true
          description: "An optional tool call that, if executed, can address the insight."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-21T11:45:00Z"

    PaginatedChatMessages:
      type: object
      description: "A paginated list of AI chat messages."
      properties:
        limit: {type: integer, example: 50}
        offset: {type: integer, example: 0}
        total: {type: integer, example: 12}
        data:
          type: array
          items:
            type: object
            properties:
              role: {type: string, enum: [user, assistant, tool], example: "user"}
              content: {type: string, example: "What is my current net worth?"}
              timestamp: {type: string, format: date-time, example: "2024-07-21T18:00:00Z"}
              toolCalls:
                type: array
                items:
                  $ref: "#/components/schemas/AIToolCall"
                nullable: true

    SimulationRequest:
      type: object
      description: "Request to run a standard 'what-if' financial simulation."
      required: [prompt]
      properties:
        prompt:
          type: string
          description: "A natural language description of the hypothetical scenario to simulate."
          example: "What if I invest an additional $1,000 per month into my aggressive growth portfolio for the next 5 years?"
        parameters:
          type: object
          description: "Key numerical parameters to guide the simulation, allowing the AI to focus on specific variables."
          properties:
            durationYears:
              type: integer
              example: 5
              description: "Duration of the scenario in years."
            monthlyInvestmentAmount:
              type: number
              format: float
              example: 1000
              description: "Monthly investment amount in USD."
            riskTolerance:
              type: string
              enum: [low, medium, high, aggressive]
              example: "aggressive"
              description: "Simulated risk tolerance for investment scenarios."
    SimulationResponse:
      type: object
      description: "Detailed results of a financial simulation from Quantum Oracle."
      properties:
        simulationId:
          type: string
          example: "sim_oracle-growth-2024-xyz"
          description: "Unique ID for the completed simulation."
        narrativeSummary:
          type: string
          description: "An AI-generated, easy-to-understand summary of the simulation's outcome and key takeaways."
          example: "If you consistently invest an additional $1,000 per month into your aggressive growth portfolio over the next 5 years, the Quantum Oracle predicts your portfolio could grow by approximately 45-60%, significantly increasing your wealth. However, this comes with elevated risk during market downturns."
        keyImpacts:
          type: array
          items:
            type: object
            properties:
              metric:
                type: string
                example: "Projected Portfolio Value"
              value:
                type: string
                example: "$120,000 - $140,000"
              severity:
                type: string
                enum: [low, medium, high]
                description: "Indicates the positive/negative magnitude of the impact. 'High' for significant positive or negative change."
          description: "A list of critical financial metrics and their projected impact."
        recommendations:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
                example: "Review Portfolio Diversification"
              description:
                type: string
                example: "Given the aggressive nature of this strategy, the Oracle suggests reviewing your current portfolio diversification to mitigate concentration risk."
              actionTrigger:
                type: string
                nullable: true
                description: "An optional trigger for a specific action within the Demo Bank ecosystem."
                example: "open_portfolio_diversification_tool"
          description: "AI-generated, actionable recommendations based on the simulation results."
        riskAnalysis:
          type: object
          description: "Analysis of potential risks associated with the simulated scenario."
          properties:
            maxDrawdown: {type: number, format: float, example: 0.25, description: "Simulated maximum percentage drawdown."}
            volatilityIndex: {type: number, format: float, example: 0.18, description: "Expected volatility index."}
    AdvancedSimulationRequest:
      type: object
      description: "Request for a highly detailed, multi-variable financial simulation."
      required:
        - prompt
        - scenarios
      properties:
        prompt:
          type: string
          description: "An overarching natural language prompt for the advanced simulation."
          example: "Evaluate the long-term impact of a sudden job loss combined with a variable market downturn, analyzing worst-case and best-case recovery scenarios over a decade."
        scenarios:
          type: array
          minItems: 1
          items:
            type: object
            description: "Individual scenarios to simulate and compare."
            properties:
              name:
                type: string
                example: "Job Loss & Mild Market Recovery"
                description: "Name for this specific scenario."
              events:
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      enum: [job_loss, market_downturn, salary_increase, unexpected_expense, windfall]
                      example: "job_loss"
                    details:
                      type: object
                      example: {"durationMonths": 6, "severanceAmount": 10000, "unemploymentBenefits": 2000}
                description: "A sequence of financial events to apply in this scenario."
              durationYears:
                type: integer
                example: 10
                description: "Total duration of this scenario in years."
              sensitivityAnalysisParams:
                type: array
                items:
                  type: object
                  properties:
                    paramName: {type: string, example: "marketRecoveryRate"}
                    min: {type: number, example: 0.03}
                    max: {type: number, example: 0.07}
                    step: {type: number, example: 0.01}
                description: "Parameters to vary for sensitivity analysis within this scenario."
    AdvancedSimulationResponse:
      type: object
      description: "Comprehensive results from an advanced multi-variable financial simulation."
      properties:
        simulationId:
          type: string
          example: "sim_oracle-complex-macro-123"
        overallSummary:
          type: string
          description: "An AI-generated executive summary across all simulated scenarios."
        scenarioResults:
          type: array
          items:
            type: object
            description: "Results for each individual scenario simulated."
            properties:
              scenarioName: {type: string, example: "Job Loss & Mild Market Recovery"}
              narrativeSummary: {type: string, example: "In this scenario, initial liquidity challenges are observed, but a swift market recovery and prudent spending lead to recovery within 3 years."}
              finalNetWorthProjected: {type: number, format: float, example: 1250000}
              liquidityMetrics:
                type: object
                properties:
                  minCashBalance: {type: number, format: float, example: -5000, description: "Lowest cash balance reached."}
                  recoveryTimeMonths: {type: integer, example: 36, description: "Months to regain initial financial position."}
              sensitivityAnalysisGraphs:
                type: array
                items:
                  type: object
                  properties:
                    paramName: {type: string, example: "marketRecoveryRate"}
                    data: {type: array, items: {type: object, properties: {paramValue: {type: number}, outcomeValue: {type: number}}}, description: "Data points for plotting sensitivity curve."}
        strategicRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "Holistic, AI-driven strategic recommendations across all scenarios."

    SimulationSummary:
      type: object
      description: "Summary of a financial simulation."
      properties:
        simulationId: {type: string, example: "sim_oracle-growth-2024-xyz"}
        title: {type: string, example: "Investment Growth Scenario"}
        status: {type: string, enum: [completed, pending, failed], example: "completed"}
        creationDate: {type: string, format: date-time, example: "2024-07-20T10:00:00Z"}
        lastUpdated: {type: string, format: date-time, example: "2024-07-20T10:15:00Z"}
        summary: {type: string, example: "Simulated impact of additional monthly investments over 5 years."}

    QuantumWeaverState:
      type: object
      description: "The current state and progress of a business pitch within the Quantum Weaver incubation platform."
      properties:
        pitchId:
          type: string
          example: "pitch_qw_synergychain-xyz"
          description: "Unique identifier for the business pitch."
        stage:
          type: string
          enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
          example: "ai_analysis"
          description: "Current stage of the business plan in the incubation process."
        statusMessage:
          type: string
          example: "Quantum Weaver is currently conducting an in-depth market validation and AI-driven financial projection analysis for SynergyChain AI."
          description: "A human-readable status message."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-21T12:00:00Z"
        feedbackSummary:
          type: string
          nullable: true
          description: "A summary of initial AI-generated feedback and potential areas for improvement."
          example: "Initial analysis indicates a strong market fit, but further detail is required on customer acquisition costs and scaling strategy."
        questions:
          type: array
          items:
            $ref: "#/components/schemas/AIQuestion"
          description: "Specific questions from Quantum Weaver requiring clarification or additional data from the entrepreneur."
        nextSteps:
          type: string
          example: "Please address the outstanding questions in the 'questions' array and resubmit feedback."
        estimatedFundingOffer:
          type: number
          format: float
          nullable: true
          example: 5000000
          description: "AI's preliminary estimate of potential seed funding amount (in USD)."
    QuantumWeaverDetailedState:
      type: object
      description: "Expanded, granular state of a business pitch with full AI feedback, financial modeling, and market analysis."
      allOf:
        - $ref: "#/components/schemas/QuantumWeaverState"
        - type: object
          properties:
            aiFinancialModel:
              type: object
              description: "AI-generated financial projections and sensitivity analysis for the business."
              properties:
                revenueBreakdown: {type: object, example: {"Year 1": "2.5M", "Year 2": "7.8M"}}
                costStructureAnalysis: {type: object, example: {"Fixed Costs": "30%", "Variable Costs": "40%"}}
                breakevenPoint: {type: string, example: "18 months"}
                capitalRequirements: {type: number, format: float, example: 4500000}
                sensitivityAnalysis:
                  type: array
                  items:
                    type: object
                    properties:
                      scenario: {type: string, example: "Aggressive Growth"}
                      projectedIRR: {type: number, format: float, example: 0.35}
                      terminalValue: {type: number, format: float, example: 50000000}
            aiMarketAnalysis:
              type: object
              description: "AI-driven market validation, competitive landscape, and growth potential."
              properties:
                targetMarketSize: {type: string, example: "$50 Billion (TAM)"}
                competitiveAdvantages: {type: array, items: {type: string}, example: ["Proprietary AI Algorithm", "First-mover advantage"]}
                growthOpportunities: {type: string, example: "Expansion into APAC region, new product lines."}
                riskFactors: {type: string, example: "Regulatory changes in AI governance."}
            aiCoachingPlan:
              $ref: "#/components/schemas/AIPlan"
              description: "A personalized coaching plan generated by AI to help the entrepreneur refine their pitch and business strategy."
            investorMatchScore:
              type: number
              format: float
              minimum: 0
              maximum: 1
              example: 0.88
              description: "AI's score indicating the alignment of the pitch with Demo Bank's investment thesis and risk appetite."
            aiRiskAssessment:
              type: object
              description: "AI's assessment of the overall business risk."
              properties:
                technicalRisk: {type: string, example: "Medium (complex AI development)"}
                marketRisk: {type: string, example: "Low (established market, clear pain points)"}
                teamRisk: {type: string, example: "Low (experienced founding team)"}
    AIQuestion:
      type: object
      description: "A specific question from Quantum Weaver to the entrepreneur for clarification or elaboration."
      properties:
        id:
          type: string
          example: "q_qa-team-001"
          description: "Unique identifier for the question."
        question:
          type: string
          example: "Please elaborate on the specific technical challenges you anticipate in deploying your quantum-inspired algorithms at scale, and how your team plans to mitigate these."
          description: "The detailed question posed by the AI."
        category:
          type: string
          enum: [team, technology, market, finance, legal, strategy]
          example: "technology"
          description: "The category the question relates to."
        isRequired:
          type: boolean
          example: true
          description: "Indicates if a response to this question is mandatory for progression."
    AIPlan:
      type: object
      description: "A structured, AI-generated plan with a title, summary, and a series of actionable steps."
      properties:
        title:
          type: string
          example: "Pre-Seed Fundraising Strategy"
          description: "Title of the AI-generated plan."
        summary:
          type: string
          example: "This plan outlines key strategic steps to optimize your pitch deck, identify target investors, and prepare for due diligence to secure pre-seed funding."
          description: "Overall summary of the plan."
        steps:
          type: array
          items:
            $ref: "#/components/schemas/AIPlanStep"
          description: "A sequential list of actionable steps within the plan."
    AIPlanStep:
      type: object
      description: "An individual actionable step within an AI-generated plan."
      properties:
        title:
          type: string
          example: "Refine Investor Presentation"
          description: "Concise title for the step."
        description:
          type: string
          example: "Update your pitch deck to incorporate recent market validation data and clearly articulate the competitive differentiation of SynergyChain AI, guided by feedback from Quantum Weaver."
          description: "Detailed description of the action required."
        timeline:
          type: string
          example: "1-2 weeks"
          description: "Estimated timeline for completing this step."
        status:
          type: string
          enum: [pending, in_progress, completed, blocked]
          example: "pending"
          description: "Current status of the step (can be updated by the user)."
        resources:
          type: array
          items:
            type: object
            properties:
              name: {type: string, example: "Pitch Deck Template"}
              url: {type: string, format: uri, example: "https://demobank.com/resources/pitch-template.pptx"}
          nullable: true
          description: "Links to helpful resources for completing the step."
    QuantumWeaverFeedbackRequest:
      type: object
      description: "Request to submit feedback or answers to AI questions for a business pitch."
      required:
        - feedback
      properties:
        feedback:
          type: string
          example: "Regarding the technical challenges, our team has allocated 3 months for R&D on quantum-resistant cryptography, mitigating the risk. We've also brought in Dr. Elena Petrova, a leading expert in secure multi-party computation."
          description: "Detailed response to AI questions or general feedback."
        answers:
          type: array
          items:
            type: object
            properties:
              questionId: {type: string, example: "q_qa-team-001"}
              answer: {type: string, example: "Our mitigation strategy includes..."}
          nullable: true
          description: "Specific answers to previously asked AI questions."

    GenerateVideoRequest:
      type: object
      description: "Request to generate a standard video ad using Veo 2.0."
      required:
        - prompt
      properties:
        prompt:
          type: string
          example: "A captivating ad featuring a young entrepreneur using Demo Bank's AI tools to grow their startup. Focus on innovation and ease of use."
          description: "The text prompt describing the desired video content."
        style:
          type: string
          enum: [Cinematic, Vibrant, Monochrome, Surreal, Abstract, Minimalist]
          default: Cinematic
          description: "The artistic style for the video generation."
        lengthSeconds:
          type: integer
          example: 15
          minimum: 5
          maximum: 60
          description: "Desired length of the video in seconds."
        aspectRatio:
          type: string
          enum: [16:9, 9:16, 1:1]
          default: "16:9"
          description: "Desired aspect ratio of the video (e.g., for YouTube, Instagram Story, or Square feeds)."
        brandColors:
          type: array
          items:
            type: string
            pattern: "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"
          nullable: true
          description: "Optional: Hex codes for brand colors to incorporate into the visual theme."
          example: ["#0000FF", "#FFD700"]
        backgroundMusicGenre:
          type: string
          enum: [none, cinematic, upbeat, ambient, electronic, classical]
          default: "cinematic"
          description: "Optional: Genre of background music to accompany the video."
    AdvancedGenerateVideoRequest:
      type: object
      description: "Request to generate an advanced video ad with fine-grained control."
      allOf:
        - $ref: "#/components/schemas/GenerateVideoRequest"
        - type: object
          properties:
            voiceoverText:
              type: string
              nullable: true
              description: "Optional: Text to be used for an AI-generated voiceover. If provided, overrides default narration."
              example: "Demo Bank: Your future, amplified by Quantum AI."
            voiceoverStyle:
              type: string
              enum: [male_professional, female_professional, male_friendly, female_friendly, neutral_optimistic]
              default: "neutral_optimistic"
              description: "The style of the AI-generated voiceover."
            audienceTarget:
              type: string
              enum: [general, young_adult, entrepreneur, corporate, investor]
              nullable: true
              description: "Specify the target audience to influence AI's narrative and visual choices."
              example: "entrepreneur"
            callToAction:
              type: object
              nullable: true
              description: "Details for an explicit call-to-action to be included in the video."
              properties:
                text: {type: string, example: "Visit DemoBank.com to learn more!"}
                url: {type: string, format: uri, example: "https://demobank.com"}
                displayTimeSeconds: {type: integer, example: 5}
            visualElements:
              type: array
              items:
                type: object
                properties:
                  description: {type: string, example: "A seamless transition to a user interacting with the Demo Bank app interface."}
                  timestampSeconds: {type: number, format: float, example: 5.2}
              nullable: true
              description: "Optional: Specific visual cues or scenes to prioritize at certain timestamps."
            brandAssets:
              type: array
              items:
                type: string
                format: uri
              nullable: true
              description: "URLs to brand logos, specific imagery, or video clips to be incorporated into the ad. (Requires prior asset upload)."
              example: ["https://demobank.com/assets/logo_hd.png", "https://demobank.com/assets/quantum_loop_video.mp4"]
    VideoOperationStatus:
      type: object
      description: "The real-time status of a video generation job, including progress and final asset URI."
      properties:
        operationId:
          type: string
          example: "op-video-gen-12345-abcde"
          description: "The unique identifier for the video generation operation."
        status:
          type: string
          enum: [queued, generating, rendering, encoding, post_processing, done, error, cancelled]
          example: "rendering"
          description: "Current status of the video generation process."
        progressPercentage:
          type: integer
          minimum: 0
          maximum: 100
          nullable: true
          example: 75
          description: "Estimated percentage completion of the video generation."
        message:
          type: string
          example: "Encoding final video with optimized codecs..."
          description: "A descriptive message about the current stage of the operation."
        videoUri:
          type: string
          format: uri
          nullable: true
          description: "A temporary, signed URL to download the generated video file. Only present when status is 'done'."
          example: "https://demobank-cdn.com/generated-videos/final/1a2b3c4d.mp4?sig=eyJ..."
        previewImageUri:
          type: string
          format: uri
          nullable: true
          description: "A URL to a static image preview of the generated video. Available during or after generation."
          example: "https://demobank-cdn.com/generated-videos/preview/1a2b3c4d.png"
        errorMessage:
          type: string
          nullable: true
          description: "Detailed error message if the generation failed."
          example: "Failed to process prompt: 'Inappropriate content detected. Please adjust your request.'"
    CorporateCard:
      type: object
      description: "Detailed information for a corporate enterprise card, including its holder, status, and spending controls."
      properties:
        id:
          type: string
          example: "corp_card_xyz987654"
          description: "Unique identifier for the corporate card."
        holderName:
          type: string
          example: "Alex Johnson"
          description: "Name of the employee or individual holding the card."
        associatedEmployeeId:
          type: string
          example: "emp_ajohnson_007"
          description: "Internal employee ID linked to this card."
        cardNumberMask:
          type: string
          example: "4111********1234"
          description: "Masked card number for security (first six and last four digits)."
        expirationDate:
          type: string
          format: date
          example: "2028-12-31"
          description: "Expiration date of the card."
        status:
          type: string
          enum: [Active, Suspended, Lost, Stolen, Cancelled, Expired]
          example: "Active"
          description: "Current operational status of the card."
        frozen:
          type: boolean
          example: false
          description: "Indicates if the card is temporarily frozen, preventing transactions."
        cardType:
          type: string
          enum: [physical, virtual]
          example: "physical"
          description: "Type of card: physical or virtual."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
          description: "Configured spending limits and transaction controls for the card."
        spendingPolicyId:
          type: string
          nullable: true
          example: "policy_travel_eu"
          description: "ID of the corporate spending policy applied to this card."
        createdDate:
          type: string
          format: date-time
          example: "2023-01-15T09:00:00Z"
          description: "Date and time the card was issued."
    CorporateCardControls:
      type: object
      description: "Granular spending controls and limits for a corporate card."
      properties:
        atmWithdrawals:
          type: boolean
          example: true
          description: "Allow or disallow ATM cash withdrawals."
        contactlessPayments:
          type: boolean
          example: true
          description: "Allow or disallow contactless (NFC) payments."
        onlineTransactions:
          type: boolean
          example: true
          description: "Allow or disallow online transactions."
        internationalTransactions:
          type: boolean
          example: false
          description: "Allow or disallow international transactions."
        monthlyLimit:
          type: number
          format: float
          example: 2500.00
          description: "The total spending limit in USD for the current calendar month."
        dailyLimit:
          type: number
          format: float
          example: 500.00
          description: "The daily spending limit in USD."
        singleTransactionLimit:
          type: number
          format: float
          example: 1000.00
          description: "The maximum amount for a single transaction in USD."
        merchantCategoryRestrictions:
          type: array
          items:
            type: string
          example: ["Restaurants", "Travel", "Office Supplies"]
          description: "List of allowed merchant categories (MCCs). If empty, all are allowed subject to other controls."
        vendorRestrictions:
          type: array
          items:
            type: string
          example: ["Amazon", "Uber"]
          description: "Specific vendors or merchants that are explicitly allowed or blocked."
    VirtualCardCreationRequest:
      type: object
      description: "Request to issue a new virtual corporate card."
      required:
        - holderName
        - purpose
        - controls
      properties:
        holderName:
          type: string
          example: "Marketing Campaign Q3"
          description: "Name or purpose for which the virtual card is issued."
        associatedEmployeeId:
          type: string
          nullable: true
          description: "Optional: Employee ID if this virtual card is tied to a specific employee."
          example: "emp_marketing_01"
        purpose:
          type: string
          example: "Online advertising for Q3 product launch."
          description: "Brief description of the virtual card's intended use."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
          description: "Specific spending controls and limits for this virtual card. Overrides default policy if provided."
        expirationDate:
          type: string
          format: date
          nullable: true
          description: "Optional: Specific expiration date for the virtual card. Defaults to 1 year if not provided."
          example: "2025-09-30"
    FinancialAnomaly:
      type: object
      description: "An AI-detected financial anomaly requiring review by compliance or risk teams."
      properties:
        id:
          type: string
          example: "anom_risk-2024-07-21-D1E2F3"
          description: "Unique identifier for the financial anomaly."
        description:
          type: string
          example: "Unusual large transaction detected in an inactive account."
          description: "A concise description of the anomaly."
        details:
          type: string
          description: "AI-generated detailed explanation of why this event is considered an anomaly, referencing deviation from normal patterns."
          example: "Transaction of $15,000 to 'International Widgets Inc.' from account 'CHASE CHECKING 4567'. This account has been dormant for 6 months and typical transactions are under $500. High risk score due to dormancy and unusual amount/payee combination."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "Critical"
          description: "AI-assessed severity of the anomaly, indicating potential impact."
        status:
          type: string
          enum: [New, Under Review, Escalated, Dismissed, Resolved]
          example: "New"
          description: "Current review status of the anomaly."
        entityType:
          type: string
          enum: [PaymentOrder, Transaction, Counterparty, CorporateCard, Invoice, Account]
          example: "Transaction"
          description: "The type of financial entity or event related to the anomaly."
        entityId:
          type: string
          example: "txn_quantum-2024-07-21-A7B8C9"
          description: "The unique identifier of the related financial entity (e.g., transaction ID, card ID)."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-21T10:15:30Z"
          description: "Timestamp when the anomaly was detected."
        riskScore:
          type: integer
          description: "An AI-generated risk score from 0-100, indicating the probability and potential impact of a fraudulent or non-compliant event."
          minimum: 0
          maximum: 100
          example: 95
        aiConfidenceScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          example: 0.98
          description: "AI's confidence in the detection of this anomaly."
        recommendedAction:
          type: string
          nullable: true
          example: "Immediately freeze associated corporate card and contact cardholder for verification."
          description: "AI-suggested immediate action for mitigation."
        relatedTransactions:
          type: array
          items:
            type: string
          description: "List of other transaction IDs potentially related to this anomaly."
          example: ["txn_previous_small_txns", "txn_concurrent_suspicious_login"]
    ComplianceAuditRequest:
      type: object
      description: "Request to initiate an AI-driven compliance audit."
      required:
        - auditScope
        - startDate
        - endDate
      properties:
        auditScope:
          type: string
          enum: [all_transactions, corporate_cards, international_payments, specific_entity]
          example: "all_transactions"
          description: "The scope of the compliance audit."
        startDate:
          type: string
          format: date
          description: "Start date for the audit period (inclusive)."
          example: "2024-01-01"
        endDate:
          type: string
          format: date
          description: "End date for the audit period (inclusive)."
          example: "2024-06-30"
        entityId:
          type: string
          nullable: true
          description: "Optional: If `auditScope` is `specific_entity`, the ID of the entity (e.g., corporate card ID, counterparty ID)."
          example: "corp_card_xyz987654"
        regulatoryFrameworks:
          type: array
          items:
            type: string
          nullable: true
          description: "Optional: Specific regulatory frameworks to audit against (e.g., 'GDPR', 'PCI-DSS', 'AML')."
          example: ["AML", "PCI-DSS"]

    ComplianceAuditReport:
      type: object
      description: "Comprehensive AI-generated compliance audit report."
      properties:
        auditId: {type: string, example: "audit_corp_xyz789"}
        status: {type: string, enum: [completed, processing, failed], example: "completed"}
        auditDate: {type: string, format: date-time, example: "2024-07-21T19:00:00Z"}
        periodCovered:
          type: object
          properties:
            startDate: {type: string, format: date, example: "2024-01-01"}
            endDate: {type: string, format: date, example: "2024-06-30"}
        overallComplianceScore: {type: integer, minimum: 0, maximum: 100, example: 92}
        summary: {type: string, example: "Overall high compliance across all transaction types. Minor areas for improvement identified in expense reporting."}
        findings:
          type: array
          items:
            type: object
            properties:
              type: {type: string, enum: [violation, recommendation, observation]}
              severity: {type: string, enum: [Low, Medium, High]}
              description: {type: string, example: "Several small transactions lacked complete receipt documentation."}
              relatedEntities:
                type: array
                items: {type: string, example: "txn_abc123"}
        recommendedActions:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"

    SanctionScreeningRequest:
      type: object
      description: "Request to perform a sanction screening."
      required:
        - name
        - country
      properties:
        name: {type: string, example: "John Doe"}
        country: {type: string, example: "US"}
        dateOfBirth: {type: string, format: date, nullable: true, example: "1970-01-01"}
        nationalId: {type: string, nullable: true, example: "123456789"}
        entityType: {type: string, enum: [individual, organization], default: "individual"}

    SanctionScreeningResponse:
      type: object
      description: "Results of a sanction screening."
      properties:
        screeningId: {type: string, example: "screen_xyz456"}
        matchFound: {type: boolean, example: false}
        matchDetails:
          type: array
          items:
            type: object
            properties:
              listName: {type: string, example: "OFAC SDN List"}
              matchedName: {type: string, example: "John Doe A.K.A. J. D."}
              reason: {type: string, example: "Possible alias match."}
              score: {type: number, format: float, example: 0.85, description: "Match confidence score (0-1)."}
          nullable: true
        screeningTimestamp: {type: string, format: date-time, example: "2024-07-21T19:30:00Z"}
        status: {type: string, enum: [clear, potential_match, red_flag], example: "clear"}

    CryptoWalletConnection:
      type: object
      description: "Details of a connected cryptocurrency wallet."
      properties:
        id:
          type: string
          example: "wallet_conn_eth_0xabc123"
          description: "Unique identifier for the wallet connection."
        walletProvider:
          type: string
          enum: [MetaMask, Ledger, Trezor, CoinbaseWallet, Other]
          example: "MetaMask"
          description: "The provider or type of the cryptocurrency wallet."
        walletAddress:
          type: string
          example: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
          description: "The primary public address of the wallet."
        blockchainNetwork:
          type: string
          enum: [Ethereum, Polygon, Solana, Bitcoin, BinanceSmartChain, Other]
          example: "Ethereum"
          description: "The primary blockchain network associated with this wallet."
        status:
          type: string
          enum: [connected, disconnected, pending_verification, error]
          example: "connected"
          description: "Current connection status of the wallet."
        lastSynced:
          type: string
          format: date-time
          example: "2024-07-21T13:00:00Z"
          description: "Timestamp of the last successful synchronization with the blockchain."
        readAccessGranted:
          type: boolean
          example: true
          description: "Indicates if Demo Bank has permission to read wallet balances and transaction history."
        writeAccessGranted:
          type: boolean
          example: false
          description: "Indicates if Demo Bank has permission to initiate transactions from this wallet (e.g., via signing requests)."
    ConnectWalletRequest:
      type: object
      description: "Request to connect a new crypto wallet."
      required:
        - walletAddress
        - walletProvider
        - signedMessage
      properties:
        walletAddress:
          type: string
          example: "0x123abc..."
          description: "The public address of the wallet to connect."
        walletProvider:
          type: string
          enum: [MetaMask, Ledger, Trezor, CoinbaseWallet, Other]
          example: "MetaMask"
          description: "The provider of the wallet."
        signedMessage:
          type: string
          description: "A cryptographic signature generated by the wallet, proving ownership of the address (e.g., signing a nonce provided by Demo Bank)."
          example: "0xabcdef1234567890..."
        blockchainNetwork:
          type: string
          enum: [Ethereum, Polygon, Solana, Bitcoin, BinanceSmartChain, Other]
          default: "Ethereum"
          description: "The primary blockchain network for this wallet."

    CryptoAssetBalance:
      type: object
      description: "Balance of a specific cryptocurrency asset in a wallet."
      properties:
        assetSymbol: {type: string, example: "ETH"}
        assetName: {type: string, example: "Ethereum"}
        balance: {type: number, format: float, example: 2.5}
        usdValue: {type: number, format: float, example: 7500.00}
        contractAddress: {type: string, nullable: true, example: "0x..."}

    CryptoTransferRequest:
      type: object
      description: "Request to initiate a cryptocurrency transfer."
      required:
        - sourceWalletId
        - recipientAddress
        - amount
        - assetSymbol
      properties:
        sourceWalletId: {type: string, example: "wallet_conn_eth_0xabc123"}
        recipientAddress: {type: string, example: "0xdef456..."}
        amount: {type: number, format: float, example: 0.1}
        assetSymbol: {type: string, example: "ETH"}
        blockchainNetwork: {type: string, enum: [Ethereum, Polygon, Solana, Bitcoin, BinanceSmartChain, Other], example: "Ethereum"}
        gasPriceGwei: {type: number, format: float, nullable: true, example: 50}
        memo: {type: string, nullable: true, example: "Payment for services"}

    CryptoTransferStatus:
      type: object
      description: "Status of an initiated cryptocurrency transfer."
      properties:
        transferId: {type: string, example: "crypto_txn_xyz789"}
        status: {type: string, enum: [pending_signature, pending_blockchain, completed, failed], example: "pending_signature"}
        blockchainTxnHash: {type: string, nullable: true, example: "0xabc123def456..."}
        message: {type: string, example: "Please confirm the transaction in your MetaMask wallet."}

    NFTAsset:
      type: object
      description: "Detailed information about a Non-Fungible Token (NFT)."
      properties:
        id:
          type: string
          example: "nft_bored_ape_yacht_club_1234"
          description: "Unique identifier for the NFT (often contract address + token ID)."
        collectionName:
          type: string
          example: "Bored Ape Yacht Club"
          description: "Name of the NFT collection."
        name:
          type: string
          example: "Bored Ape #1234"
          description: "Individual name of the NFT."
        description:
          type: string
          nullable: true
          example: "A unique digital collectible from the Bored Ape Yacht Club series."
          description: "Description of the NFT."
        imageUrl:
          type: string
          format: uri
          example: "https://opensea.io/assets/ethereum/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d/1234"
          description: "URL to the NFT's primary image."
        blockchainNetwork:
          type: string
          enum: [Ethereum, Polygon, Solana, Other]
          example: "Ethereum"
          description: "The blockchain network where the NFT resides."
        ownerAddress:
          type: string
          example: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
          description: "The blockchain address currently owning the NFT."
        contractAddress:
          type: string
          example: "0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d"
          description: "The smart contract address of the NFT collection."
        tokenId:
          type: string
          example: "1234"
          description: "The unique token ID within the contract."
        lastSalePriceUSD:
          type: number
          format: float
          nullable: true
          example: 150000.00
          description: "Last recorded sale price in USD, if available."
        estimatedValueUSD:
          type: number
          format: float
          nullable: true
          example: 160000.00
          description: "AI-estimated current market value in USD."
        attributes:
          type: array
          items:
            type: object
            properties:
              trait_type: {type: string, example: "Background"}
              value: {type: string, example: "Blue"}
          description: "Key attributes or traits of the NFT."
    InternationalPaymentRequest:
      type: object
      description: "Request to initiate an international wire transfer."
      required:
        - sourceAccountId
        - amount
        - sourceCurrency
        - targetCurrency
        - beneficiary
        - purpose
      properties:
        sourceAccountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The ID of the Demo Bank account from which to send funds."
        amount:
          type: number
          format: float
          example: 5000.00
          description: "The amount to send in the source currency."
        sourceCurrency:
          type: string
          example: "USD"
          description: "The currency of the source account."
        targetCurrency:
          type: string
          example: "EUR"
          description: "The currency the beneficiary will receive."
        beneficiary:
          type: object
          description: "Details of the recipient."
          properties:
            name: {type: string, example: "Maria Schmidt"}
            address: {type: string, example: "Hauptstrasse 1, 10115 Berlin, Germany"}
            bankName: {type: string, example: "Deutsche Bank"}
            iban: {type: string, example: "DE89370400440532013000"}
            swiftBic: {type: string, example: "DEUTDEFF"}
          required:
            - name
            - address
            - bankName
            - iban
            - swiftBic
        purpose:
          type: string
          example: "Vendor payment for Q2 services."
          description: "A description of the purpose of the transfer."
        fxRateLock:
          type: boolean
          default: false
          description: "If true, attempts to lock the FX rate at the time of request for a limited period."
        fxRateProvider:
          type: string
          enum: [best_available, proprietary_ai, preferred_partner]
          default: "proprietary_ai"
          description: "Strategy for selecting the foreign exchange rate provider."
    InternationalPaymentStatus:
      type: object
      description: "Status of an international payment request."
      required:
        - paymentId
        - status
        - sourceAmount
        - sourceCurrency
        - targetAmount
        - targetCurrency
        - fxRateApplied
      properties:
        paymentId:
          type: string
          example: "int_pmt_xyz7890"
          description: "Unique ID for the international payment."
        status:
          type: string
          enum: [pending, in_progress, completed, failed, cancelled, held_for_review]
          example: "in_progress"
          description: "Current status of the payment."
        sourceAmount:
          type: number
          format: float
          example: 5000.00
          description: "The amount sent from the source account."
        sourceCurrency:
          type: string
          example: "USD"
          description: "The currency of the source amount."
        targetAmount:
          type: number
          format: float
          example: 4500.00
          description: "The estimated or actual amount to be received by the beneficiary in target currency."
        targetCurrency:
          type: string
          example: "EUR"
          description: "The currency received by the beneficiary."
        fxRateApplied:
          type: number
          format: float
          example: 0.90
          description: "The foreign exchange rate applied (Target per Source, e.g., 0.90 EUR per 1 USD)."
        estimatedCompletionTime:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T15:00:00Z"
          description: "Estimated time when the payment will be completed."
        trackingUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/payments/track/xyz7890"
          description: "URL to a page for real-time payment tracking."
        feesApplied:
          type: number
          format: float
          example: 15.00
          description: "Total fees applied to the transfer (in source currency)."
    FxRateResponse:
      type: object
      description: "Real-time and predictive foreign exchange rates."
      properties:
        baseCurrency:
          type: string
          example: "USD"
        targetCurrency:
          type: string
          example: "EUR"
        currentRate:
          type: object
          properties:
            bid: {type: number, format: float, example: 0.9025}
            ask: {type: number, format: float, example: 0.9035}
            mid: {type: number, format: float, example: 0.9030}
            timestamp: {type: string, format: date-time, example: "2024-07-21T13:30:00Z"}
          description: "Real-time bid, ask, and mid-market rates."
        predictiveRates:
          type: array
          items:
            type: object
            properties:
              date: {type: string, format: date, example: "2024-07-28"}
              predictedMidRate: {type: number, format: float, example: 0.9050}
              confidenceIntervalLower: {type: number, format: float, example: 0.9010}
              confidenceIntervalUpper: {type: number, format: float, example: 0.9090}
              aiModelConfidence: {type: number, format: float, minimum: 0, maximum: 1, example: 0.88, description: "AI's confidence in the prediction."}
          description: "AI-predicted FX rates for future dates with confidence intervals."
        historicalVolatility:
          type: object
          properties:
            past7Days: {type: number, format: float, example: 0.005}
            past30Days: {type: number, format: float, example: 0.012}
          description: "Historical volatility metrics for the currency pair."

    CurrencyConversionRequest:
      type: object
      description: "Request to initiate a currency conversion."
      required:
        - sourceAccountId
        - targetAccountId
        - sourceAmount
        - sourceCurrency
        - targetCurrency
      properties:
        sourceAccountId: {type: string, example: "acc_chase_checking_4567"}
        targetAccountId: {type: string, example: "acc_euro_savings_9876"}
        sourceAmount: {type: number, format: float, example: 1000.00}
        sourceCurrency: {type: string, example: "USD"}
        targetCurrency: {type: string, example: "EUR"}
        fxRateLock: {type: boolean, default: true, description: "Attempt to lock the FX rate for the conversion."}

    CurrencyConversionResponse:
      type: object
      description: "Response for a completed currency conversion."
      properties:
        conversionId: {type: string, example: "fx_conv_abc123"}
        status: {type: string, enum: [completed, failed], example: "completed"}
        sourceAmount: {type: number, format: float, example: 1000.00}
        sourceCurrency: {type: string, example: "USD"}
        targetAmount: {type: number, format: float, example: 920.50}
        fxRateApplied: {type: number, format: float, example: 0.9205}
        feesApplied: {type: number, format: float, example: 5.00, description: "Total fees applied to the conversion (in source currency)."}
        conversionTimestamp: {type: string, format: date-time, example: "2024-07-21T13:45:00Z"}
        transactionId: {type: string, example: "txn_fx_conv_abc123-20240721", description: "The ID of the resulting transaction in the source account."}

    CarbonFootprintReport:
      type: object
      description: "Detailed report of the user's estimated carbon footprint."
      properties:
        reportId: {type: string, example: "cf_report_2024-Q2"}
        period: {type: string, example: "April - June 2024"}
        totalCarbonFootprintKgCO2e: {type: number, format: float, example: 1250.7}
        breakdownByCategory:
          type: array
          items:
            type: object
            properties:
              category: {type: string, example: "Transportation"}
              carbonFootprintKgCO2e: {type: number, format: float, example: 450.2}
              percentage: {type: number, format: float, example: 36.0}
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated insights and suggestions for reducing carbon footprint."
        offsetRecommendations:
          type: array
          items:
            type: object
            properties:
              project: {type: string, example: "Amazon Reforestation Project"}
              costPerTonUSD: {type: number, format: float, example: 25.00}
              offsetAmountKgCO2e: {type: number, format: float, example: 1250.7}
              totalCostUSD: {type: number, format: float, example: 31.27}
          description: "Recommendations for purchasing carbon offsets."

    InvestmentESGImpact:
      type: object
      description: "Analysis of the ESG impact of an investment portfolio."
      properties:
        portfolioId: {type: string, example: "portfolio_equity_growth"}
        overallESGScore: {type: number, format: float, minimum: 0, maximum: 10, example: 7.8, description: "Aggregated ESG score for the entire portfolio."}
        benchmarkESGScore: {type: number, format: float, minimum: 0, maximum: 10, example: 6.5, description: "ESG score of a relevant market benchmark (e.g., S&P 500 ESG)."
        breakdownByESGFactors:
          type: object
          properties:
            environmentalScore: {type: number, format: float, example: 7.0}
            socialScore: {type: number, format: float, example: 8.5}
            governanceScore: {type: number, format: float, example: 8.0}
        topESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol: {type: string, example: "TSLA"}
              assetName: {type: string, example: "Tesla Inc."}
              esgScore: {type: number, format: float, example: 9.1}
        lowestESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol: {type: string, example: "XOM"}
              assetName: {type: string, example: "ExxonMobil Corp."}
              esgScore: {type: number, format: float, example: 4.5}
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated recommendations for improving the portfolio's ESG profile."

    CarbonOffsetPurchaseRequest:
      type: object
      description: "Request to purchase carbon offsets."
      required:
        - amountKgCO2e
        - paymentAccountId
      properties:
        amountKgCO2e:
          type: number
          format: float
          example: 500.0
          description: "The amount of carbon (in kg CO2e) to offset."
        paymentAccountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The ID of the account to debit for the purchase."
        offsetProject:
          type: string
          nullable: true
          example: "Verified Carbon Standard Project X"
          description: "Optional: Specific carbon offset project to support. If omitted, AI selects optimal."

    CarbonOffsetPurchaseResponse:
      type: object
      description: "Confirmation of a carbon offset purchase."
      properties:
        purchaseId: {type: string, example: "co_purchase_xyz123"}
        amountOffsetKgCO2e: {type: number, format: float, example: 500.0}
        totalCostUSD: {type: number, format: float, example: 12.50}
        projectSupported: {type: string, example: "Amazon Reforestation Project"}
        transactionId: {type: string, example: "txn_offset_12345", description: "The ID of the resulting transaction for the payment."}
        purchaseDate: {type: string, format: date-time, example: "2024-07-21T14:00:00Z"}
        certificateUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/certificates/co_purchase_xyz123.pdf"
          description: "URL to a digital certificate of carbon offset."

    LoanApplicationRequest:
      type: object
      description: "Details for a new loan application."
      required:
        - loanAmount
        - loanPurpose
        - repaymentTermMonths
      properties:
        loanAmount:
          type: number
          format: float
          example: 10000.00
          description: "The desired loan amount in USD."
        loanPurpose:
          type: string
          enum: [personal_loan, home_improvement, debt_consolidation, business_startup, education, auto]
          example: "home_improvement"
          description: "The purpose of the loan."
        repaymentTermMonths:
          type: integer
          minimum: 6
          maximum: 72
          example: 36
          description: "Desired repayment term in months."
        coApplicant:
          type: object
          nullable: true
          description: "Optional details for a co-applicant."
          properties:
            name: {type: string, example: "Jane Doe"}
            email: {type: string, format: email, example: "jane.doe@example.com"}
            income: {type: number, format: float, example: 75000.00}
        additionalNotes:
          type: string
          nullable: true
          example: "Funds needed to replace a broken HVAC system."

    LoanApplicationStatus:
      type: object
      description: "Current status and details of a submitted loan application."
      properties:
        applicationId: {type: string, example: "loan_app_creditflow-123"}
        status:
          type: string
          enum: [submitted, underwriting, approved, declined, pending_documents, funded]
          example: "underwriting"
          description: "Current status of the application."
        loanAmountRequested: {type: number, format: float, example: 10000.00}
        loanPurpose: {type: string, example: "home_improvement"}
        applicationDate: {type: string, format: date-time, example: "2024-07-21T15:00:00Z"}
        aiUnderwritingResult:
          type: object
          nullable: true
          description: "AI-powered underwriting outcome, if available."
          properties:
            decision: {type: string, enum: [approved, declined, referred_manual_review], example: "approved"}
            reason: {type: string, example: "Strong credit score and consistent income history."}
            recommendedInterestRate: {type: number, format: float, example: 6.5, description: "Recommended interest rate."}
            maxApprovedAmount: {type: number, format: float, example: 12000.00, description: "Maximum amount approved."}
            aiConfidence: {type: number, format: float, minimum: 0, maximum: 1, example: 0.95, description: "AI's confidence in its underwriting decision."}
        offerDetails:
          $ref: "#/components/schemas/LoanOffer"
          nullable: true
          description: "The detailed loan offer, if approved."
        requiredDocuments:
          type: array
          items:
            type: string
          nullable: true
          example: ["Proof of Income", "Bank Statements (last 3 months)"]
          description: "List of documents still required if status is 'pending_documents'."
        nextSteps:
          type: string
          example: "Your application is currently under review by our AI. You will receive an update within minutes."
          description: "Guidance on the next steps in the application process."

    LoanOffer:
      type: object
      description: "Details of a personalized loan offer."
      properties:
        offerId: {type: string, example: "offer_pers_loan_001"}
        offerType: {type: string, enum: [personal_loan, auto_loan, mortgage_refinance, credit_line], example: "personal_loan"}
        amount: {type: number, format: float, example: 12000.00}
        interestRate: {type: number, format: float, example: 5.99, description: "Annual Percentage Rate (APR)."}
        repaymentTermMonths: {type: integer, example: 48}
        monthlyPayment: {type: number, format: float, example: 282.49}
        originationFee: {type: number, format: float, example: 250.00, description: "One-time fee to process the loan."}
        totalRepayable: {type: number, format: float, example: 13559.52}
        expirationDate: {type: string, format: date, example: "2024-08-31"}
        isPreApproved: {type: boolean, example: true, description: "True if the offer is pre-approved and requires minimal further checks."}
        aiPersonalizationScore: {type: number, format: float, minimum: 0, maximum: 1, example: 0.92, description: "AI's score reflecting how well this offer matches the user's financial profile and needs."}

    CreditScoreDetails:
      type: object
      description: "Detailed credit score information and contributing factors."
      properties:
        score: {type: integer, minimum: 300, maximum: 850, example: 780}
        provider: {type: string, example: "Quantum Credit Bureau"}
        lastUpdated: {type: string, format: date, example: "2024-07-15"}
        factors:
          type: array
          items:
            type: object
            properties:
              name: {type: string, example: "Payment History"}
              impact: {type: string, enum: [positive, negative, neutral], example: "positive"}
              description: {type: string, example: "Excellent record of on-time payments."}
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated actionable recommendations for credit improvement."
        nextScorePrediction:
          type: object
          properties:
            score: {type: integer, example: 790}
            date: {type: string, format: date, example: "2024-10-15"}
            confidence: {type: number, format: float, minimum: 0, maximum: 1, example: 0.85}
          description: "AI's prediction for the next credit score update."

    CreditImprovementPlan:
      type: object
      description: "An AI-generated plan to improve the user's credit score."
      properties:
        planId: {type: string, example: "credit_plan_xyz_001"}
        summary: {type: string, example: "A personalized plan focusing on reducing credit utilization and ensuring timely payments to boost your credit score over the next 6-12 months."}
        targetScore: {type: integer, example: 800, description: "The AI-recommended target credit score."}
        targetMonths: {type: integer, example: 9, description: "Estimated time in months to reach the target score."}
        steps:
          type: array
          items:
            $ref: "#/components/schemas/AIPlanStep"
          description: "Actionable steps to take for credit improvement."
        aiScoreIncreaseProjection:
          type: array
          items:
            type: object
            properties:
              month: {type: integer, example: 1}
              projectedScore: {type: integer, example: 785}
              impactFactors:
                type: array
                items: {type: string}
                example: ["Reduced Credit Card Balance"]
          description: "Month-by-month projection of credit score increase based on plan adherence."

    Notification:
      type: object
      description: "A single user notification or proactive alert."
      properties:
        id: {type: string, example: "notif_txn_alert_001"}
        userId: {type: string, example: "user-quantum-visionary-001"}
        title: {type: string, example: "Unusual Spending Alert"}
        message: {type: string, example: "You've spent $500 on 'Dining & Restaurants' this week, 30% higher than your usual. This may impact your monthly budget."}
        type:
          type: string
          enum: [transaction_alert, budget_alert, security_alert, goal_progress, marketing, system_update, AI_insight]
          example: "budget_alert"
        severity:
          type: string
          enum: [info, warning, critical]
          example: "warning"
        isRead: {type: boolean, example: false}
        timestamp: {type: string, format: date-time, example: "2024-07-21T16:00:00Z"}
        actionLink:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/app/budgets"
          description: "Optional URL for the user to take action related to the notification."
        relatedEntityId:
          type: string
          nullable: true
          example: "budget_monthly_aug"
          description: "ID of the entity (e.g., transaction, budget) related to the notification."

    NotificationSettings:
      type: object
      description: "User's preferences for receiving various types of notifications across channels."
      properties:
        userId: {type: string, example: "user-quantum-visionary-001"}
        emailEnabled: {type: boolean, example: true}
        pushEnabled: {type: boolean, example: true}
        smsEnabled: {type: boolean, example: false}
        inAppEnabled: {type: boolean, example: true}
        alertPreferences:
          type: object
          description: "Granular preferences for specific alert types."
          properties:
            transactionAlerts:
              type: object
              properties:
                enabled: {type: boolean, example: true}
                channels: {type: array, items: {type: string, enum: [email, push]}, example: ["push"]}
                thresholdAmount: {type: number, format: float, nullable: true, example: 500.00, description: "Only alert for transactions above this amount."}
            budgetAlerts:
              type: object
              properties:
                enabled: {type: boolean, example: true}
                channels: {type: array, items: {type: string, enum: [email, push, inApp]}, example: ["push", "inApp"]}
                percentageOverBudget: {type: integer, example: 80, description: "Alert when budget is X% utilized."}
            securityAlerts:
              type: object
              properties:
                enabled: {type: boolean, example: true}
                channels: {type: array, items: {type: string, enum: [email, push, sms]}, example: ["email", "push", "sms"]}
            aiInsights:
              type: object
              properties:
                enabled: {type: boolean, example: true}
                channels: {type: array, items: {type: string, enum: [email, push, inApp]}, example: ["inApp"]}

    NotificationSettingsUpdateRequest:
      type: object
      description: "Payload to update user notification settings."
      properties:
        emailEnabled: {type: boolean, example: false}
        pushEnabled: {type: boolean, example: true}
        smsEnabled: {type: boolean, example: false}
        inAppEnabled: {type: boolean, example: true}
        alertPreferences:
          type: object
          properties:
            transactionAlerts:
              type: object
              properties:
                enabled: {type: boolean, example: true}
                channels: {type: array, items: {type: string, enum: [email, push]}, example: ["push"]}
                thresholdAmount: {type: number, format: float, nullable: true, example: 750.00}
            budgetAlerts:
              type: object
              properties:
                enabled: {type: boolean, example: true}
                channels: {type: array, items: {type: string, enum: [email, push, inApp]}, example: ["push", "inApp"]}
                percentageOverBudget: {type: integer, example: 90}
            securityAlerts:
              type: object
              properties:
                enabled: {type: boolean, example: true}
                channels: {type: array, items: {type: string, enum: [email, push, sms]}, example: ["email", "push", "sms"]}
            aiInsights:
              type: object
              properties:
                enabled: {type: boolean, example: false}
                channels: {type: array, items: {type: string, enum: [email, push, inApp]}, example: ["inApp"]}

    ThirdPartyConnection:
      type: object
      description: "Details of a third-party application connection and its granted permissions."
      properties:
        id:
          type: string
          example: "tpc_plaid_app_789"
          description: "Unique identifier for the connection."
        appName:
          type: string
          example: "Personal Finance Manager Pro"
          description: "Name of the connected third-party application."
        developerName:
          type: string
          example: "FinTech Innovations Inc."
          description: "Name of the developer or company behind the app."
        connectionDate:
          type: string
          format: date-time
          example: "2023-11-01T09:00:00Z"
          description: "Date when the connection was established."
        lastAccessed:
          type: string
          format: date-time
          example: "2024-07-21T16:30:00Z"
          description: "Last time the application accessed data."
        grantedScopes:
          type: array
          items:
            type: string
          example: ["read:accounts", "read:transactions", "write:budget"]
          description: "List of API scopes (permissions) granted to this application."
        status:
          type: string
          enum: [active, revoked]
          example: "active"
          description: "Current status of the connection."
        expirationDate:
          type: string
          format: date-time
          nullable: true
          example: "2025-11-01T09:00:00Z"
          description: "Optional: Date when the connection will automatically expire."

    PersonalDashboard:
      type: object
      description: "Aggregated, AI-powered insights and key metrics for the user's personalized financial dashboard."
      properties:
        netWorth:
          type: object
          properties:
            current: {type: number, format: float, example: 150000.00}
            change24h: {type: number, format: float, example: 150.75}
            change7d: {type: number, format: float, example: 1200.50}
        totalBalance:
          type: number
          format: float
          example: 25000.00
          description: "Combined balance across all accessible accounts."
        incomeLast30Days: {type: number, format: float, example: 6000.00}
        expensesLast30Days: {type: number, format: float, example: 3500.00}
        budgetUtilization:
          type: object
          properties:
            percentage: {type: number, format: float, example: 70.5, description: "Overall budget utilization percentage."}
            remainingAmount: {type: number, format: float, example: 1500.00}
        portfolioPerformance:
          type: object
          properties:
            gainLossToday: {type: number, format: float, example: 75.20}
            totalReturnPercentage: {type: number, format: float, example: 12.8}
        topSpendingCategories:
          type: array
          items:
            type: object
            properties:
              category: {type: string, example: "Groceries"}
              amount: {type: number, format: float, example: 600.00}
              percentage: {type: number, format: float, example: 18.2}
        upcomingBills:
          type: array
          items:
            type: object
            properties:
              name: {type: string, example: "Rent"}
              amount: {type: number, format: float, example: 2000.00}
              dueDate: {type: string, format: date, example: "2024-08-01"}
          description: "List of upcoming bills with due dates."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"

    FinancialForecast:
      type: object
      description: "AI-driven forecast of the user's financial future."
      properties:
        forecastId: {type: string, example: "forecast_pers_2024_001"}
        forecastHorizonDays: {type: integer, example: 90}
        startDate: {type: string, format: date, example: "2024-07-21"}
        endDate: {type: string, format: date, example: "2024-10-19"}
        projectedNetWorth:
          type: array
          items:
            type: object
            properties:
              date: {type: string, format: date, example: "2024-07-31"}
              value: {type: number, format: float, example: 151500.00}
              scenario: {type: string, enum: [most_likely, best_case, worst_case], example: "most_likely", description: "Indicates if this is a scenario projection."}
        projectedSavingsBalance:
          type: array
          items:
            type: object
            properties:
              date: {type: string, format: date, example: "2024-07-31"}
              value: {type: number, format: float, example: 10500.00}
              scenario: {type: string, enum: [most_likely, best_case, worst_case], example: "most_likely"}
        aiConfidenceScore: {type: number, format: float, minimum: 0, maximum: 1, example: 0.90, description: "AI's overall confidence in the forecast accuracy."}
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated insights and recommendations based on the forecast."

    CustomReportRequest:
      type: object
      description: "Request for the generation of a custom financial report."
      required:
        - reportName
        - reportType
        - startDate
        - endDate
      properties:
        reportName: {type: string, example: "Q2 Expense Breakdown"}
        reportType:
          type: string
          enum: [expense_breakdown, income_analysis, investment_performance, cash_flow_statement, budget_comparison, net_worth_statement]
          example: "expense_breakdown"
        startDate: {type: string, format: date, example: "2024-04-01"}
        endDate: {type: string, format: date, example: "2024-06-30"}
        categories:
          type: array
          items: {type: string}
          nullable: true
          example: ["Groceries", "Utilities", "Transportation"]
          description: "Optional: Specific categories to include in the report."
        accounts:
          type: array
          items: {type: string}
          nullable: true
          example: ["acc_chase_checking_4567", "acc_bofa_credit_9876"]
          description: "Optional: Specific account IDs to include in the report."
        format:
          type: string
          enum: [pdf, csv, json]
          default: "pdf"
          description: "Desired output format of the report."
        emailRecipients:
          type: array
          items:
            type: string
            format: email
          nullable: true
          example: ["admin@demobank.com"]
          description: "Optional: Email addresses to send the completed report to."

    WebhookSubscription:
      type: object
      description: "Details of an active webhook subscription."
      properties:
        id:
          type: string
          example: "whsub_devtool_finance_events"
          description: "Unique ID of the webhook subscription."
        callbackUrl:
          type: string
          format: uri
          example: "https://my-app.com/webhooks/demobank-events"
          description: "The URL where event notifications will be sent."
        events:
          type: array
          items:
            type: string
          example: ["transaction.created", "account.updated", "user.login_failed"]
          description: "List of event types subscribed to."
        status:
          type: string
          enum: [active, paused, disabled]
          example: "active"
          description: "Current status of the subscription."
        secret:
          type: string
          nullable: true
          example: "whsec_some_secret_for_signature_validation"
          description: "Optional: A secret used to sign webhook payloads for verification. Not returned on GET."
        lastTriggered:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-21T17:00:00Z"
          description: "Timestamp of the last successful webhook delivery."
        failureCount:
          type: integer
          example: 0
          description: "Number of consecutive failed delivery attempts."

    WebhookSubscriptionCreationRequest:
      type: object
      description: "Request to create a new webhook subscription."
      required:
        - callbackUrl
        - events
      properties:
        callbackUrl: {type: string, format: uri, example: "https://my-app.com/webhooks/demobank-events"}
        events:
          type: array
          items: {type: string}
          example: ["transaction.created", "account.updated", "user.login_failed"]
        secret:
          type: string
          nullable: true
          description: "Optional: A custom secret for signing webhook payloads. If omitted, one will be generated."
          example: "my_custom_webhook_secret_123"

    WebhookSubscriptionUpdateRequest:
      type: object
      description: "Request to update an existing webhook subscription."
      properties:
        callbackUrl: {type: string, format: uri, example: "https://my-new-app.com/webhooks/demobank-events"}
        events:
          type: array
          items: {type: string}
          example: ["transaction.created", "user.login_failed"]
        status:
          type: string
          enum: [active, paused, disabled]
          example: "paused"
        secret:
          type: string
          nullable: true
          description: "Optional: Update the webhook secret. If null, current secret remains. If a new string is provided, it replaces the existing one."

    ApiKey:
      type: object
      description: "Details of a developer API key."
      properties:
        id:
          type: string
          example: "api_key_dev_app_01"
          description: "Unique identifier for the API key."
        prefix:
          type: string
          example: "db_pk_test_"
          description: "The visible prefix of the API key."
        status:
          type: string
          enum: [active, revoked]
          example: "active"
          description: "Current status of the API key."
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T10:00:00Z"
          description: "Timestamp when the API key was created."
        expiresAt:
          type: string
          format: date-time
          nullable: true
          example: "2025-01-01T10:00:00Z"
          description: "Optional: Timestamp when the API key will expire."
        scopes:
          type: array
          items:
            type: string
          example: ["read:developer_tools", "write:developer_tools"]
          description: "List of scopes (permissions) associated with this API key."
        lastUsed:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-21T17:15:00Z"
          description: "Last time the API key was used."

    ApiKeyCreationRequest:
      type: object
      description: "Request to create a new developer API key."
      required:
        - name
        - scopes
      properties:
        name: {type: string, example: "My Integration Key"}
        scopes:
          type: array
          items: {type: string}
          example: ["read:accounts", "write:payments"]
          description: "List of desired scopes for the new API key."
        expiresInDays:
          type: integer
          nullable: true
          example: 365
          description: "Optional: Number of days until the API key expires. If omitted, key does not expire."

    KYCDocumentSubmission:
      type: object
      description: "Payload for submitting KYC documentation."
      required:
        - documentType
        - documentFrontImage
      properties:
        documentType:
          type: string
          enum: [passport, drivers_license, national_id, utility_bill, bank_statement, proof_of_address]
          example: "drivers_license"
          description: "Type of document being submitted."
        documentFrontImage:
          type: string
          format: binary
          description: "Base64 encoded image of the front side of the document. Max 5MB."
        documentBackImage:
          type: string
          format: binary
          nullable: true
          description: "Optional: Base64 encoded image of the back side of the document (e.g., for drivers_license)."
        documentNumber:
          type: string
          nullable: true
          example: "ABC12345"
          description: "Optional: The document number itself (e.g., passport number)."
        issueDate:
          type: string
          format: date
          nullable: true
          example: "2020-01-01"
        expirationDate:
          type: string
          format: date
          nullable: true
          example: "2030-01-01"
        countryOfIssue:
          type: string
          nullable: true
          example: "US"
        metadata:
          type: object
          nullable: true
          description: "Additional metadata for the document (e.g., facial scan for liveness check, if captured client-side)."

    KYCStatus:
      type: object
      description: "Current status of the user's KYC verification process."
      properties:
        userId: {type: string, example: "user-quantum-visionary-001"}
        overallStatus:
          type: string
          enum: [pending, in_review, verified, rejected, insufficient_documents]
          example: "in_review"
          description: "Overall KYC verification status."
        lastSubmissionDate:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-21T18:00:00Z"
        rejectionReason:
          type: string
          nullable: true
          example: "Document image unclear."
          description: "Reason for rejection, if applicable."
        requiredActions:
          type: array
          items:
            type: string
          nullable: true
          example: ["Resubmit clearer ID image", "Provide proof of address"]
          description: "List of actions required from the user to proceed."
        verifiedTier:
          type: string
          nullable: true
          enum: [basic, bronze, silver, gold, platinum]
          example: "gold"
          description: "The level of verification achieved, influencing service access."

    CashFlowForecast:
      type: object
      description: "AI-driven cash flow forecast for an organization."
      properties:
        forecastId: {type: string, example: "cf_forecast_corp_Q3_2024"}
        period: {type: string, example: "Q3 2024 (July - September)"}
        currency: {type: string, example: "USD"}
        overallStatus:
          type: string
          enum: [positive_outlook, neutral_stable, potential_deficit, critical_liquidity_risk]
          example: "positive_outlook"
          description: "AI's overall assessment of the cash flow outlook."
        projectedBalances:
          type: array
          items:
            type: object
            properties:
              date: {type: string, format: date, example: "2024-07-31"}
              projectedCash: {type: number, format: float, example: 1500000.00}
              scenario: {type: string, enum: [most_likely, best_case, worst_case], example: "most_likely"}
        inflowForecast:
          type: object
          properties:
            totalProjected: {type: number, format: float, example: 3000000.00}
            bySource:
              type: array
              items:
                type: object
                properties:
                  source: {type: string, example: "Client Payments"}
                  amount: {type: number, format: float, example: 2500000.00}
        outflowForecast:
          type: object
          properties:
            totalProjected: {type: number, format: float, example: 2000000.00}
            byCategory:
              type: array
              items:
                type: object
                properties:
                  category: {type: string, example: "Payroll"}
                  amount: {type: number, format: float, example: 1000000.00}
        liquidityRiskScore: {type: integer, minimum: 0, maximum: 100, example: 15, description: "AI-generated score for liquidity risk (lower is better)."}
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "Actionable recommendations for optimizing cash flow and liquidity."

    LiquidityPositions:
      type: object
      description: "Real-time overview of the organization's liquidity across accounts."
      properties:
        snapshotTime: {type: string, format: date-time, example: "2024-07-21T18:30:00Z"}
        totalLiquidAssets: {type: number, format: float, example: 5200000.00, description: "Total liquid assets across all accounts and short-term investments."}
        currencyBreakdown:
          type: array
          items:
            type: object
            properties:
              currency: {type: string, example: "USD"}
              amount: {type: number, format: float, example: 4000000.00}
              percentage: {type: number, format: float, example: 76.9}
        accountTypeBreakdown:
          type: array
          items:
            type: object
            properties:
              type: {type: string, example: "Checking"}
              amount: {type: number, format: float, example: 3500000.00}
        shortTermInvestments:
          type: object
          properties:
            totalValue: {type: number, format: float, example: 1200000.00}
            maturingNext30Days: {type: number, format: float, example: 300000.00}
        aiLiquidityAssessment:
          type: object
          properties:
            status: {type: string, enum: [optimal, healthy, cautious, stressed, critical]}
            message: {type: string, example: "Current liquidity is healthy and sufficient for short-term obligations."}
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"

    FraudRule:
      type: object
      description: "Definition of an AI-powered fraud detection rule."
      properties:
        id:
          type: string
          example: "fraud_rule_high_value_inactive"
          description: "Unique identifier for the fraud rule."
        name:
          type: string
          example: "High Value Transaction from Inactive Account"
          description: "A human-readable name for the rule."
        description:
          type: string
          example: "Flags transactions over a certain threshold from accounts that have been inactive for a specified period."
          description: "Detailed description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          example: "active"
          description: "Current operational status of the rule."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "High"
          description: "Default severity level assigned to anomalies detected by this rule."
        criteria:
          type: object
          example:
            transactionAmountMin: 5000
            accountInactivityDays: 90
            transactionType: "debit"
            countryOfOrigin: ["US", "CA"]
          description: "JSON object defining the specific criteria that trigger this rule. Schema is dynamic based on rule type."
        action:
          type: object
          properties:
            type: {type: string, enum: [flag, block, alert, auto_review], example: "block"}
            details: {type: string, example: "Block transaction and send critical alert to fraud team."}
          description: "Automated action to take when the rule is triggered."
        createdBy:
          type: string
          example: "system:ai-risk-engine"
          description: "User or system that created the rule."
        createdAt:
          type: string
          format: date-time
          example: "2024-05-01T10:00:00Z"
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-20T11:30:00Z"

    FraudRuleCreationRequest:
      type: object
      description: "Request to create a new AI-powered fraud detection rule."
      required:
        - name
        - description
        - severity
        - criteria
        - action
      properties:
        name: {type: string, example: "Suspicious International Payment Pattern"}
        description: {type: string, example: "Detects multiple international payments to new beneficiaries in high-risk countries within a short timeframe."}
        status:
          type: string
          enum: [active, inactive, draft]
          default: "active"
        severity: {type: string, enum: [Low, Medium, High, Critical], example: "Critical"}
        criteria:
          type: object
          example:
            paymentCountMin: 3
            timeframeHours: 24
            recipientNew: true
            recipientCountryRiskLevel: ["High", "Very High"]
        action:
          type: object
          properties:
            type: {type: string, enum: [flag, block, alert, auto_review], example: "auto_review"}
            details: {type: string, example: "Hold payment, notify sender for additional verification, and escalate to compliance."}

    FraudRuleUpdateRequest:
      type: object
      description: "Request to update an existing AI-powered fraud detection rule."
      properties:
        name: {type: string, example: "Updated Rule Name"}
        description: {type: string, example: "Revised description for clarity."}
        status: {type: string, enum: [active, inactive, draft], example: "inactive"}
        severity: {type: string, enum: [Low, Medium, High, Critical], example: "Medium"}
        criteria:
          type: object
          example:
            transactionAmountMin: 7500
            accountInactivityDays: 60
        action:
          type: object
          properties:
            type: {type: string, enum: [flag, block, alert, auto_review], example: "flag"}
            details: {type: string, example: "Flag for manual review."}

    FinancialGoal:
      type: object
      description: "A user's long-term financial goal, with progress tracking and AI strategic plan."
      properties:
        id: {type: string, example: "goal_retirement_2050"}
        name: {type: string, example: "Retirement Fund by 2050"}
        type:
          type: string
          enum: [retirement, home_purchase, education, debt_reduction, large_purchase, investment_growth, other]
          example: "retirement"
        targetAmount: {type: number, format: float, example: 1000000.00}
        currentAmount: {type: number, format: float, example: 350000.00}
        targetDate: {type: string, format: date, example: "2050-12-31"}
        progressPercentage: {type: number, format: float, minimum: 0, maximum: 100, example: 35.0}
        status:
          type: string
          enum: [on_track, behind_schedule, ahead_of_schedule, completed, cancelled]
          example: "on_track"
        aiStrategicPlan:
          $ref: "#/components/schemas/AIPlan"
          description: "AI-generated plan to achieve the goal."
        contributingAccounts:
          type: array
          items:
            type: string
          example: ["acc_chase_invest_ira_001", "acc_fidelity_401k_xyz"]
          description: "IDs of accounts contributing to this goal."
        lastUpdated: {type: string, format: date-time, example: "2024-07-21T19:00:00Z"}
        riskTolerance: {type: string, enum: [low, medium, high, aggressive], example: "medium", description: "Risk tolerance associated with this goal's investment strategy."}

    GoalCreationRequest:
      type: object
      description: "Request to create a new financial goal."
      required:
        - name
        - targetAmount
        - targetDate
      properties:
        name: {type: string, example: "Dream Vacation Fund"}
        type: {type: string, enum: [retirement, home_purchase, education, debt_reduction, large_purchase, investment_growth, other], example: "large_purchase"}
        targetAmount: {type: number, format: float, example: 15000.00}
        targetDate: {type: string, format: date, example: "2026-06-30"}
        initialContribution: {type: number, format: float, default: 0.00, example: 1000.00}
        generateAIPlan: {type: boolean, default: true, description: "If true, AI will automatically generate a strategic plan for this goal."}
        riskTolerance: {type: string, enum: [low, medium, high, aggressive], default: "medium"}

    GoalUpdateRequest:
      type: object
      description: "Request to update an existing financial goal."
      properties:
        name: {type: string, example: "Early Retirement by 2045"}
        targetAmount: {type: number, format: float, example: 1200000.00}
        targetDate: {type: string, format: date, example: "2045-12-31"}
        status: {type: string, enum: [on_track, behind_schedule, ahead_of_schedule, completed, cancelled], example: "ahead_of_schedule"}
        riskTolerance: {type: string, enum: [low, medium, high, aggressive], example: "high"}
        regenerateAIPlan: {type: boolean, default: false, description: "If true, the AI plan will be regenerated based on updated parameters."}

    ProductListing:
      type: object
      description: "A product listing from the AI-curated marketplace."
      properties:
        productId: {type: string, example: "prod_smart_speaker_001"}
        name: {type: string, example: "Quantum Voice Assistant 3000"}
        description: {type: string, example: "A next-generation smart speaker with integrated Quantum AI assistant capabilities."}
        category: {type: string, example: "Smart Home Devices"}
        price: {type: number, format: float, example: 199.99}
        currency: {type: string, example: "USD"}
        imageUrl: {type: string, format: uri, example: "https://marketplace.demobank.com/images/qva3000.jpg"}
        productUrl: {type: string, format: uri, example: "https://marketplace.demobank.com/products/qva3000"}
        merchantName: {type: string, example: "FutureTech Solutions"}
        personalizationScore: {type: number, format: float, minimum: 0, maximum: 1, example: 0.95, description: "AI's score reflecting how relevant this product is to the user."}
        aiPurchaseImpactSummary:
          type: string
          nullable: true
          example: "Purchasing this item will increase your 'Electronics' spending by ~$200 this month, potentially overshooting your budget by 10%."
          description: "A brief AI-generated summary of the financial impact."
        offers:
          type: array
          items:
            type: object
            properties:
              type: {type: string, example: "Exclusive Discount"}
              value: {type: string, example: "10% off"}
              endDate: {type: string, format: date, example: "2024-08-15"}
          nullable: true
          description: "Exclusive offers or discounts for Demo Bank users."

    ProductImpactSimulationRequest:
      type: object
      description: "Request to simulate the financial impact of a product purchase."
      properties:
        productId: {type: string, example: "prod_smart_speaker_001"}
        purchasePriceOverride:
          type: number
          format: float
          nullable: true
          description: "Optional: Override the product's listed price for simulation (e.g., if user has a coupon)."
          example: 180.00
        paymentMethod:
          type: string
          enum: [cash, credit_card, loan]
          default: "cash"
          description: "How the user intends to pay for the product."
        loanTermMonths:
          type: integer
          nullable: true
          minimum: 1
          maximum: 60
          example: 12
          description: "If 'paymentMethod' is 'loan', the desired loan term in months."
        considerBudgets: {type: boolean, default: true, description: "If true, AI will analyze impact on current budgets."}
        considerGoals: {type: boolean, default: true, description: "If true, AI will analyze impact on financial goals."}

    ProductImpactSimulationResponse:
      type: object
      description: "Detailed financial impact simulation results for a product purchase."
      properties:
        simulationId: {type: string, example: "sim_prod_qva3000_123"}
        productId: {type: string, example: "prod_smart_speaker_001"}
        productName: {type: string, example: "Quantum Voice Assistant 3000"}
        purchasePriceUsed: {type: number, format: float, example: 199.99}
        simulationSummary:
          type: string
          example: "Purchasing the Quantum Voice Assistant 3000 for $199.99 will reduce your discretionary cash by 8%, but remains within your overall monthly budget. There is no significant impact on long-term financial goals."
        financialBreakdown:
          type: object
          properties:
            cashFlowImpact:
              type: object
              properties:
                initialReduction: {type: number, format: float, example: 199.99}
                monthlyLoanPayment: {type: number, format: float, nullable: true, example: 17.50}
            budgetImpact:
              type: array
              items:
                type: object
                properties:
                  budgetId: {type: string, example: "budget_monthly_aug"}
                  category: {type: string, example: "Electronics"}
                  currentUtilization: {type: number, format: float, example: 60.0}
                  newUtilization: {type: number, format: float, example: 110.0}
                  status: {type: string, enum: [within_budget, over_budget], example: "over_budget"}
            goalImpact:
              type: array
              items:
                type: object
                properties:
                  goalId: {type: string, example: "goal_retirement_2050"}
                  name: {type: string, example: "Retirement Fund by 2050"}
                  estimatedDelayMonths: {type: integer, default: 0, example: 0}
                  impactSeverity: {type: string, enum: [low, medium, high], example: "low"}
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated recommendations related to the purchase, e.g., budgeting adjustments."

    RewardBalance:
      type: object
      description: "User's current loyalty points, elite tier, and associated benefits."
      properties:
        userId: {type: string, example: "user-quantum-visionary-001"}
        currentPoints: {type: integer, example: 12500}
        loyaltyTier: {type: string, example: "Zenith Platinum"}
        pointsTowardsNextTier: {type: integer, example: 7500, description: "Points needed to reach the next tier."}
        nextTier: {type: string, nullable: true, example: "Quantum Elite"}
        availableRedemptions:
          type: array
          items:
            type: object
            properties:
              rewardId: {type: string, example: "reward_travel_voucher_500"}
              name: {type: string, example: "$500 Travel Voucher"}
              pointsCost: {type: integer, example: 10000}
              description: {type: string, example: "Redeem 10,000 points for a $500 travel voucher."}
          description: "List of rewards available for redemption."
        recentAchievements:
          type: array
          items:
            type: object
            properties:
              achievementName: {type: string, example: "Budget Master"}
              dateAchieved: {type: string, format: date, example: "2024-06-01"}
              pointsAwarded: {type: integer, example: 500}
          description: "List of recently unlocked gamification achievements."

    RedemptionRequest:
      type: object
      description: "Request to redeem loyalty points for a reward."
      required:
        - rewardId
        - pointsToRedeem
      properties:
        rewardId: {type: string, example: "reward_travel_voucher_500"}
        pointsToRedeem: {type: integer, example: 10000}
        confirmationMethod:
          type: string
          enum: [sms_otp, email_otp, in_app_pin]
          default: "in_app_pin"
          description: "Preferred method for confirmation if required for high-value rewards."
        otpCode:
          type: string
          nullable: true
          example: "654321"
          description: "The One-Time Password (OTP) if a confirmation method is used."

    RedemptionConfirmation:
      type: object
      description: "Confirmation of a successful reward redemption."
      properties:
        redemptionId: {type: string, example: "redempt_xyz456"}
        rewardName: {type: string, example: "$500 Travel Voucher"}
        pointsUsed: {type: integer, example: 10000}
        newPointBalance: {type: integer, example: 2500}
        status: {type: string, enum: [success, pending_delivery, failed], example: "success"}
        fulfillmentDetails:
          type: string
          nullable: true
          example: "Your voucher code 'TRVL500-ABCDEF' has been sent to your registered email."
        redemptionDate: {type: string, format: date-time, example: "2024-07-21T19:30:00Z"}

    InvestmentPortfolio:
      type: object
      description: "Summary of an investment portfolio."
      properties:
        id: {type: string, example: "portfolio_equity_growth"}
        name: {type: string, example: "Aggressive Growth Portfolio"}
        type:
          type: string
          enum: [equities, bonds, mutual_funds, etfs, crypto, real_estate, diversified]
          example: "equities"
        currency: {type: string, example: "USD"}
        totalValue: {type: number, format: float, example: 250000.00}
        unrealizedGainLoss: {type: number, format: float, example: 25000.00}
        todayGainLoss: {type: number, format: float, example: 500.00}
        lastUpdated: {type: string, format: date-time, example: "2024-07-21T10:00:00Z"}
        riskTolerance: {type: string, enum: [low, medium, high, aggressive], example: "aggressive"}
        aiPerformanceInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated insights into portfolio performance and market outlook."
        holdings:
          type: array
          items:
            type: object
            properties:
              symbol: {type: string, example: "GOOG"}
              name: {type: string, example: "Alphabet Inc."}
              quantity: {type: number, format: float, example: 100}
              averageCost: {type: number, format: float, example: 120.00}
              currentPrice: {type: number, format: float, example: 135.00}
              marketValue: {type: number, format: float, example: 13500.00}
              percentageOfPortfolio: {type: number, format: float, example: 5.4}
              esgScore: {type: number, format: float, nullable: true, example: 8.2}
          description: "List of assets held in the portfolio."

    InvestmentPortfolioCreationRequest:
      type: object
      description: "Request to create a new investment portfolio."
      required:
        - name
        - type
        - currency
        - riskTolerance
      properties:
        name: {type: string, example: "My First Growth Portfolio"}
        type: {type: string, enum: [equities, bonds, mutual_funds, etfs, crypto, real_estate, diversified], example: "diversified"}
        currency: {type: string, example: "USD"}
        initialInvestment: {type: number, format: float, default: 0.00, example: 10000.00}
        riskTolerance: {type: string, enum: [low, medium, high, aggressive], example: "medium"}
        aiAutoAllocate: {type: boolean, default: true, description: "If true, AI will suggest an initial asset allocation based on risk tolerance."}
        linkedAccountId: {type: string, nullable: true, description: "Optional: ID of the bank account to link for funding/withdrawals."}

    InvestmentPortfolioUpdateRequest:
      type: object
      description: "Request to update high-level details of an investment portfolio."
      properties:
        name: {type: string, example: "Global Innovation Portfolio"}
        riskTolerance: {type: string, enum: [low, medium, high, aggressive], example: "high"}
        targetAllocation:
          type: object
          nullable: true
          description: "Optional: Desired target allocation percentages by asset class for rebalancing."
          properties:
            equities: {type: number, format: float, example: 0.70}
            bonds: {type: number, format: float, example: 0.20}
            cash: {type: number, format: float, example: 0.10}
        aiRebalancingFrequency:
          type: string
          enum: [monthly, quarterly, semiannually, annually, none]
          default: "quarterly"
          description: "How often AI should proactively suggest or execute rebalancing."

    RebalanceRequest:
      type: object
      description: "Request to initiate an AI-driven portfolio rebalancing."
      properties:
        targetRiskTolerance:
          type: string
          enum: [low, medium, high, aggressive]
          nullable: true
          description: "Optional: Override the portfolio's default risk tolerance for this rebalance."
        targetAllocation:
          type: object
          nullable: true
          description: "Optional: Specific target allocation percentages (e.g., equities: 0.6, bonds: 0.3, cash: 0.1)."
          properties:
            equities: {type: number, format: float, example: 0.65}
            bonds: {type: number, format: float, example: 0.25}
            cash: {type: number, format: float, example: 0.10}
        dryRun: {type: boolean, default: true, description: "If true, the rebalance will only simulate changes without executing trades."}
        confirmationRequired: {type: boolean, default: true, description: "If true, user confirmation will be required before executing trades (for non-dry-run)."}

    RebalanceStatus:
      type: object
      description: "Status of an initiated portfolio rebalancing operation."
      properties:
        rebalanceId: {type: string, example: "rebal_port_growth_123"}
        portfolioId: {type: string, example: "portfolio_equity_growth"}
        status:
          type: string
          enum: [pending, analyzing, proposed, awaiting_confirmation, executing, completed, failed, cancelled]
          example: "analyzing"
        statusMessage:
          type: string
          example: "AI is analyzing optimal trade strategy to match target risk profile."
        proposedTrades:
          type: array
          items:
            type: object
            properties:
              action: {type: string, enum: [buy, sell]}
              symbol: {type: string, example: "GOOG"}
              quantity: {type: number, format: float, example: 50}
              estimatedAmount: {type: number, format: float, example: 7000.00}
          nullable: true
          description: "List of proposed trades, if status is 'proposed' or 'awaiting_confirmation'."
        estimatedImpact:
          type: string
          nullable: true
          example: "Projected 5% reduction in portfolio volatility."
          description: "AI's estimated impact of the rebalance."
        confirmationRequired: {type: boolean, example: true}
        confirmationExpiresAt: {type: string, format: date-time, nullable: true, example: "2024-07-21T15:00:00Z"}

    ESGAssetSearchResult:
      type: object
      description: "A search result for an investment asset with its ESG scores."
      properties:
        assetSymbol: {type: string, example: "TSLA"}
        assetName: {type: string, example: "Tesla Inc."}
        assetType: {type: string, enum: [stock, etf, mutual_fund], example: "stock"}
        currentPrice: {type: number, format: float, example: 250.75}
        currency: {type: string, example: "USD"}
        overallESGScore: {type: number, format: float, minimum: 0, maximum: 10, example: 9.1}
        environmentalScore: {type: number, format: float, example: 9.5}
        socialScore: {type: number, format: float, example: 8.8}
        governanceScore: {type: number, format: float, example: 9.0}
        esgRatingProvider: {type: string, example: "MSCI"}
        esgControversies:
          type: array
          items:
            type: string
          nullable: true
          example: ["Labor Practices Controversy"]
          description: "List of significant ESG controversies associated with the asset."
        aiESGInsight:
          type: string
          nullable: true
          example: "Tesla's high environmental score is driven by its focus on sustainable transportation, though social scores reflect recent labor concerns."

    Error:
      type: object
      description: "Standard error response format."
      required:
        - code
        - message
      properties:
        code:
          type: string
          example: "UNAUTHORIZED_ACCESS"
          description: "A unique error code for programmatic handling."
        message:
          type: string
          example: "Authentication failed due to invalid credentials."
          description: "A human-readable error message."
        details:
          type: string
          nullable: true
          example: "The provided API key or access token is either missing or invalid. Please check your credentials and try again."
          description: "Optional detailed explanation of the error."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-21T10:00:00Z"
          description: "Timestamp when the error occurred."