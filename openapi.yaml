openapi: 3.1.0
info:
  version: '1.0'
  title: "Demo Bank API: The Quantum Core - Publisher Edition"
  description: |
    Welcome to the **Quantum Core 3.0**, the pinnacle of financial technology, meticulously engineered to power the Demo Bank experience. This is far more than a mere set of endpoints; it is the living, breathing neural network of a next-generation financial ecosystem, poised to redefine digital banking for a global audience.
    
    Our API is a testament to the philosophy that finance should be an intelligent, predictive, and intensely personal dialogue—a dynamic, self-optimizing collaboration between users, visionary developers, and our proprietary Artificial General Intelligence, **Quantum**. We provide unparalleled programmatic access to the sophisticated tools and vast data reservoirs that fuel our platform, spanning from hyper-personalized wealth management to AI-driven corporate finance automation, decentralized asset orchestration, and pioneering business incubation.
    
    This comprehensive specification unveils the secure and high-performance protocols to connect with and command the core functionalities of Demo Bank. Empower yourself to architect and deploy the future of finance, with an infrastructure designed for exponential scalability, impenetrable security, real-time intelligence, and seamless global integration. As your most ambitious visions crystallize, our platform's unparalleled capabilities will not just meet them—they will amplify them. This is finance, reimagined, limitless, and brought to life by AI.
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/JOCALL3_1/jamesburvelocallaghaniiiapi/1.0

tags:
  - name: "Users & Identity Management"
    description: "Comprehensive management of user profiles, advanced biometric authentication, multi-factor security, and digital identity verification (KYC/AML)."
  - name: "Accounts & Balances"
    description: "Real-time interaction with all linked financial accounts, including comprehensive balance sheets, predictive cash flow, and intelligent overdraft management."
  - name: "Transactions & Insights"
    description: "Access, intelligent categorization, real-time analysis, and AI-driven insights into transaction data, including advanced dispute resolution and trend detection."
  - name: "Budgets & Financial Planning"
    description: "AI-powered creation and dynamic management of user spending budgets, real-time progress tracking, and proactive alert systems."
  - name: "Investments & Portfolio Intelligence"
    description: "Sophisticated management of investment portfolios, AI-driven asset discovery, ESG impact analysis, predictive growth simulations, and automated rebalancing strategies."
  - name: "AI Advisor (Quantum)"
    description: "Engage with our state-of-the-art conversational AI, Quantum, for deeply personalized financial insights, proactive advice, and autonomous task execution via a rich tool ecosystem."
  - name: "Quantum Weaver (Business Incubation)"
    description: "The AI-driven seed funding and incubation platform. Submit, refine, and track business plans, receive AI-generated feedback, and secure investment capital."
  - name: "Quantum Oracle (Predictive Simulation)"
    description: "Unleash the power of 'what-if' scenario modeling. Run complex, multi-variable financial simulations with AI-powered foresight to understand future impacts and optimize strategies."
  - name: "AI Ad Studio (Veo 2.0)"
    description: "Programmatically generate high-fidelity, commercially viable video content from text prompts, leveraging cutting-edge generative AI models for targeted marketing campaigns."
  - name: "Personalization & Experience Design"
    description: "Endpoints for hyper-personalizing the user experience, including AI-generated themes, bespoke digital card designs, and adaptive interface elements."
  - name: "Financial Goals & Strategic Planning"
    description: "Define, manage, and accelerate progress towards long-term financial goals with AI-generated strategic plans, real-time progress tracking, and adaptive adjustments."
  - name: "Marketplace (Plato AI)"
    description: "Access a dynamic, AI-curated marketplace offering hyper-personalized product recommendations, simulate purchase impacts, and discover exclusive partner offers."
  - name: "Decentralized Finance (DeFi) & Web3 Assets"
    description: "Seamless integration with digital assets, cryptocurrencies, NFTs, and DeFi protocols. Connect wallets, execute on-chain transactions, and manage your Web3 portfolio."
  - name: "Corporate Finance - Enterprise Cards"
    description: "Sophisticated management of corporate card programs, granular spending controls, virtual card issuance, and intelligent compliance monitoring."
  - name: "Corporate Finance - Global Payments & Treasury"
    description: "Streamlined management of payment orders, automated invoice processing, multi-currency transactions, international transfers, and AI-driven treasury optimization."
  - name: "Corporate Finance - Compliance & Risk"
    description: "Advanced access to compliance cases, AI-powered financial anomaly detection, real-time risk assessments, and automated sanction screening for enterprise clients."
  - name: "Rewards & Gamification Engine"
    description: "Interact with the user's loyalty points, elite tiers, achievements, and dynamic gamification status within the Demo Bank ecosystem."
  - name: "Credit Health & AI Underwriting"
    description: "Comprehensive access to credit scores, detailed history, AI-generated improvement plans, and personalized lending offers with instant underwriting."
  - name: "Notifications & Proactive Alerts"
    description: "Retrieve, manage, and configure highly personalized user notifications across multiple channels, including AI-driven proactive alerts and critical security advisories."
  - name: "Security & Open Banking Ecosystem"
    description: "Manage advanced security settings, monitor login activity, control third-party application connections, and oversee API key access for external integrations."
  - name: "Real-time Analytics & Predictive Intelligence"
    description: "Unlocking advanced, AI-driven analytics dashboards, predictive financial forecasting, and custom report generation for both personal and corporate users."
  - name: "Global Payments & Foreign Exchange"
    description: "Facilitate secure, multi-currency transactions and international transfers with real-time and predictive foreign exchange rate analysis."
  - name: "Sustainability & ESG Impact"
    description: "Measure, track, and improve personal and corporate environmental, social, and governance (ESG) impact, including carbon footprint analysis and green investment opportunities."
  - name: "AI-Powered Lending & Credit Solutions"
    description: "Streamlined application for microloans and traditional credit products, featuring instant AI underwriting, personalized repayment schedules, and dynamic pre-approval offers."
  - name: "Developer Tools & API Management"
    description: "Tools for developers to integrate deeply with Demo Bank, including webhook management, API key lifecycle, event logging, and SDK access."
  - name: "Digital Identity & Verifiable Credentials"
    description: "Securely manage and verify digital identities, submit KYC documentation, and issue or receive verifiable digital credentials for seamless trust across platforms."
  - name: "Treasury & Liquidity Management"
    description: "Advanced corporate treasury functions, including AI-driven cash flow forecasting, liquidity optimization, investment strategy, and asset-liability management."
  - name: "Enterprise Risk & Fraud Prevention"
    description: "Define custom AI-powered fraud detection rules, monitor enterprise-wide risk alerts, leverage transactional risk scoring, and manage security incidents proactively."
security: # Global security applied to all operations unless overridden
  - oAuth2Auth:
      - read:profile
      - write:profile
      - read:accounts
      - write:accounts
      - read:transactions
      - write:transactions
      - write:payments
      - interact:ai_advisor
      - interact:ai_oracle
      - read:weaver
      - write:weaver
      - read:ad_studio
      - write:ad_studio
      - read:corporate_cards
      - write:corporate_cards
      - read:corporate_payments
      - write:corporate_payments
      - read:compliance
      - write:compliance
      - read:rewards
      - write:rewards
      - read:analytics
      - write:analytics
      - read:web3
      - write:web3
      - read:sustainability
      - write:sustainability
      - read:lending
      - write:lending
      - read:developer_tools
      - write:developer_tools
      - read:identity
      - write:identity
      - read:corporate_treasury
      - write:corporate_treasury
      - read:fx_rates
      - read:investments
      - write:investments
      - read:personalization
      - write:personalization
  - apiKeyAuth: []

paths:
  /users/register:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Register a New User Account"
      description: "Registers a new user account with Demo Bank, initiating the onboarding process. Requires basic user details."
      operationId: "registerUser"
      security:
        - {} # No specific security for public registration
      requestBody:
        required: true
        description: "User registration details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegistrationRequest"
            examples:
              RegistrationSuccess:
                summary: "Example successful registration"
                value:
                  name: "Alice Wonderland"
                  email: "alice.w@example.com"
                  password: "SecureP@ssw0rd2024!"
                  phone: "+1-555-987-6543"
      responses:
        "201":
          description: "User registered successfully. Awaits email/MFA verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                UserCreated:
                  summary: "Example of a newly registered user profile"
                  value:
                    id: "user-alice-001"
                    name: "Alice Wonderland"
                    email: "alice.w@example.com"
                    phone: "+1-555-987-6543"
                    dateOfBirth: "1990-05-10"
                    address:
                      street: "123 Magic Lane"
                      city: "Fantasyland"
                      state: "CA"
                      zip: "90210"
                      country: "USA"
                    loyaltyTier: "Bronze"
                    loyaltyPoints: 0
                    gamificationLevel: 1
                    aiPersona: "Conservative Saver"
                    securityStatus:
                      twoFactorEnabled: false
                      biometricsEnrolled: false
                      lastLogin: "2024-07-22T08:00:00Z"
                      lastLoginIp: "203.0.113.10"
                    preferences:
                      preferredLanguage: "en-US"
                      theme: "Light-Default"
                      aiInteractionMode: "balanced"
                      notificationChannels:
                        email: true
                        push: true
                        sms: false
                        inApp: true
                      dataSharingConsent: true
                      transactionGrouping: "category"
                    identityVerified: false
        "400":
          $ref: "#/components/responses/BadRequestError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/login:
    post:
      tags:
        - "Users & Identity Management"
      summary: "User Login and Session Creation"
      description: "Authenticates a user and creates a secure session, returning access tokens. May require MFA depending on user settings."
      operationId: "userLogin"
      security:
        - {} # No specific security for public login
      requestBody:
        required: true
        description: "User login credentials."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLoginRequest"
            examples:
              StandardLogin:
                summary: "Standard login with email and password"
                value:
                  email: "quantum.visionary@demobank.com"
                  password: "YourSecurePassword123"
              MFALogin:
                summary: "Login with MFA code"
                value:
                  email: "quantum.visionary@demobank.com"
                  password: "YourSecurePassword123"
                  mfaCode: "123456"
      responses:
        "200":
          description: "Login successful, returns authentication tokens."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"
              examples:
                Success:
                  summary: "Successful login response"
                  value:
                    accessToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
                    refreshToken: "some_long_refresh_token_string_for_renewal"
                    expiresIn: 3600
                    tokenType: "Bearer"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          description: "MFA required or account locked."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                MFARequired:
                  summary: "MFA required error"
                  value:
                    code: "MFA_REQUIRED"
                    message: "Multi-factor authentication is required. Please provide your MFA code."
                    timestamp: "2024-07-22T08:05:00Z"

  /users/password-reset/initiate:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Initiate Password Reset"
      description: "Starts the password reset flow by sending a verification code or link to the user's registered email or phone."
      operationId: "initiatePasswordReset"
      security:
        - {} # No specific security for public password reset initiation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
              properties:
                identifier:
                  type: string
                  format: email
                  example: "user@example.com"
                  description: "User's email or phone number for verification."
            examples:
              EmailReset:
                summary: "Initiate reset via email"
                value:
                  identifier: "reset.user@example.com"
      responses:
        "200":
          description: "Password reset initiated. Check your email/phone for verification."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Verification code sent to your registered email/phone."
        "404":
          $ref: "#/components/responses/NotFoundError"

  /users/password-reset/confirm:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Confirm Password Reset"
      description: "Confirms the password reset using the received verification code and sets a new password."
      operationId: "confirmPasswordReset"
      security:
        - {} # No specific security for public password reset confirmation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
                - verificationCode
                - newPassword
              properties:
                identifier:
                  type: string
                  format: email
                  example: "user@example.com"
                  description: "User's email or phone number used for verification."
                verificationCode:
                  type: string
                  example: "123456"
                  description: "The verification code received via email or SMS."
                newPassword:
                  type: string
                  format: password
                  example: "SecureP@ssw0rd2024!"
                  description: "The new password for the user account."
            examples:
              ConfirmReset:
                summary: "Confirm password reset with code"
                value:
                  identifier: "reset.user@example.com"
                  verificationCode: "654321"
                  newPassword: "MyNewStrongPassword@789"
      responses:
        "200":
          description: "Password reset successfully."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Password updated successfully."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          description: "Invalid or expired verification code."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                InvalidCode:
                  summary: "Invalid verification code error"
                  value:
                    code: "INVALID_VERIFICATION_CODE"
                    message: "The provided verification code is invalid or has expired."
                    timestamp: "2024-07-22T08:10:00Z"

  /users/me:
    get:
      tags:
        - "Users & Identity Management"
      summary: "Retrieve Comprehensive Current User Profile"
      description: "Fetches the complete and dynamically updated profile information for the currently authenticated user, encompassing personal details, security status, gamification level, loyalty points, and linked identity attributes."
      operationId: "getCurrentUserEnhancedProfile"
      security:
        - oAuth2Auth: [read:profile, read:security, read:rewards, read:identity]
        - apiKeyAuth: []
      responses:
        "200":
          description: "The user's complete, enriched profile information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                SuccessfulRetrieval:
                  summary: "Example of a fully detailed user profile"
                  value:
                    id: "user-quantum-visionary-001"
                    name: "The Quantum Visionary"
                    email: "quantum.visionary@demobank.com"
                    phone: "+1-555-123-4567"
                    dateOfBirth: "1980-01-15"
                    address:
                      street: "100 Innovation Drive"
                      city: "Quantumville"
                      state: "CA"
                      zip: "90210"
                      country: "USA"
                    loyaltyTier: "Zenith Platinum"
                    loyaltyPoints: 12500
                    gamificationLevel: 7
                    aiPersona: "Prudent Planner"
                    securityStatus:
                      twoFactorEnabled: true
                      biometricsEnrolled: true
                      lastLogin: "2024-07-22T08:00:00Z"
                      lastLoginIp: "203.0.113.45"
                    preferences:
                      preferredLanguage: "en-US"
                      theme: "Dark-Quantum"
                      aiInteractionMode: "balanced"
                      notificationChannels:
                        email: true
                        push: true
                        sms: false
                        inApp: true
                      dataSharingConsent: true
                      transactionGrouping: "category"
                    identityVerified: true
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    put:
      tags:
        - "Users & Identity Management"
      summary: "Update Current User Profile"
      description: "Updates selected fields of the currently authenticated user's profile information."
      operationId: "updateCurrentUserProfile"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Updated user profile details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserUpdateProfileRequest"
            examples:
              UpdateNameAndPhone:
                summary: "Update user's name and phone number"
                value:
                  name: "Quantum Visionary Pro"
                  phone: "+1-555-999-0000"
              UpdateAddress:
                summary: "Update user's address"
                value:
                  address:
                    street: "200 Innovation Parkway"
                    city: "Quantum Heights"
                    state: "NY"
                    zip: "10001"
                    country: "USA"
      responses:
        "200":
          description: "User profile updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                SuccessfulUpdate:
                  summary: "Example of updated user profile"
                  value:
                    id: "user-quantum-visionary-001"
                    name: "Quantum Visionary Pro"
                    email: "quantum.visionary@demobank.com"
                    phone: "+1-555-999-0000"
                    dateOfBirth: "1980-01-15"
                    address:
                      street: "100 Innovation Drive"
                      city: "Quantumville"
                      state: "CA"
                      zip: "90210"
                      country: "USA"
                    loyaltyTier: "Zenith Platinum"
                    loyaltyPoints: 12500
                    gamificationLevel: 7
                    aiPersona: "Prudent Planner"
                    securityStatus:
                      twoFactorEnabled: true
                      biometricsEnrolled: true
                      lastLogin: "2024-07-22T08:00:00Z"
                      lastLoginIp: "203.0.113.45"
                    preferences:
                      preferredLanguage: "en-US"
                      theme: "Dark-Quantum"
                      aiInteractionMode: "balanced"
                      notificationChannels:
                        email: true
                        push: true
                        sms: false
                        inApp: true
                      dataSharingConsent: true
                      transactionGrouping: "category"
                    identityVerified: true
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/preferences:
    get:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Get User Personalization Preferences"
      description: "Retrieves the user's deep personalization preferences, including AI customization settings, notification channel priorities, thematic choices, and data sharing consents."
      operationId: "getUserPreferences"
      security:
        - oAuth2Auth: [read:profile, read:personalization]
        - apiKeyAuth: []
      responses:
        "200":
          description: "The user's personalized preferences."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
              examples:
                DefaultPreferences:
                  summary: "Example of default user preferences"
                  value:
                    preferredLanguage: "en-US"
                    theme: "Light-Default"
                    aiInteractionMode: "balanced"
                    notificationChannels:
                      email: true
                      push: true
                      sms: false
                      inApp: true
                    dataSharingConsent: true
                    transactionGrouping: "category"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Update User Personalization Preferences"
      description: "Updates the user's deep personalization preferences, allowing dynamic control over AI behavior, notification delivery, thematic choices, and data privacy settings."
      operationId: "updateUserPreferences"
      security:
        - oAuth2Auth: [write:profile, write:personalization]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The updated user preference payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserPreferences"
            examples:
              UpdateThemeAndAI:
                summary: "Update theme and AI interaction mode"
                value:
                  theme: "Dark-Quantum"
                  aiInteractionMode: "proactive"
      responses:
        "200":
          description: "User preferences updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
              examples:
                UpdatedPreferences:
                  summary: "Example of updated user preferences"
                  value:
                    preferredLanguage: "en-US"
                    theme: "Dark-Quantum"
                    aiInteractionMode: "proactive"
                    notificationChannels:
                      email: true
                      push: true
                      sms: false
                      inApp: true
                    dataSharingConsent: true
                    transactionGrouping: "category"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/devices:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Connected Devices"
      description: "Retrieves a list of all devices linked to the user's account, including mobile phones, tablets, and desktops, indicating their last active status and security posture."
      operationId: "listConnectedDevices"
      security:
        - oAuth2Auth: [read:profile, read:security]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of connected devices."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Device"
              examples:
                DeviceList:
                  summary: "Example list of connected devices"
                  value:
                    - id: "dev_mobile_ios_aabbcc"
                      type: "mobile"
                      os: "iOS 17.5"
                      model: "iPhone 15 Pro Max"
                      lastActive: "2024-07-22T11:05:00Z"
                      ipAddress: "203.0.113.12"
                      trustLevel: "trusted"
                      pushToken: "ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]"
                    - id: "dev_desktop_win_123456"
                      type: "desktop"
                      os: "Windows 11"
                      model: "Dell XPS 15"
                      lastActive: "2024-07-22T10:00:00Z"
                      ipAddress: "203.0.113.15"
                      trustLevel: "trusted"
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Register a New Device"
      description: "Registers a new device for secure access and multi-factor authentication, associating it with the user's profile. This typically initiates a biometric or MFA enrollment flow."
      operationId: "registerDevice"
      security:
        - oAuth2Auth: [write:profile, write:security]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the device to be registered."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterDeviceRequest"
            examples:
              RegisterMobile:
                summary: "Register a new mobile device"
                value:
                  deviceType: "mobile"
                  os: "Android 14"
                  model: "Samsung Galaxy S24 Ultra"
                  biometricSignature: "base64encoded_android_biometric_proof"
                  deviceName: "Alex's Work Phone"
      responses:
        "201":
          description: "Device registered successfully, awaiting final verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Device"
              examples:
                DeviceRegistered:
                  summary: "Example of a newly registered device"
                  value:
                    id: "dev_mobile_android_ddeeff"
                    type: "mobile"
                    os: "Android 14"
                    model: "Samsung Galaxy S24 Ultra"
                    lastActive: "2024-07-22T12:00:00Z"
                    ipAddress: "203.0.113.18"
                    trustLevel: "pending_verification"
                    pushToken: "ExponentPushToken[yzzzyzzzyzzzyzzz]"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/devices/{deviceId}:
    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister a Device"
      description: "Removes a specific device from the user's linked devices, revoking its access and requiring re-registration for future use. Useful for lost or compromised devices."
      operationId: "deregisterDevice"
      security:
        - oAuth2Auth: [write:profile, write:security]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/DeviceId"
      responses:
        "204":
          description: "Device deregistered successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /users/me/biometrics/enroll:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Enroll Biometric Data for Authentication"
      description: "Initiates the enrollment process for biometric authentication (e.g., fingerprint, facial scan) to enable secure and convenient access to sensitive features. Requires a biometric signature for initial proof."
      operationId: "enrollBiometrics"
      security:
        - oAuth2Auth: [write:security]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Biometric enrollment request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricEnrollmentRequest"
            examples:
              EnrollFaceID:
                summary: "Enroll Facial Recognition (Face ID)"
                value:
                  biometricType: "facial_recognition"
                  biometricSignature: "base64encoded_facial_template_for_enrollment"
                  deviceId: "dev_mobile_ios_aabbcc"
                  deviceName: "My Primary iPhone"
      responses:
        "201":
          description: "Biometric enrollment initiated/successful."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
              examples:
                EnrollmentSuccess:
                  summary: "Example successful biometric enrollment status"
                  value:
                    biometricsEnrolled: true
                    enrolledBiometrics:
                      - type: "facial_recognition"
                        deviceId: "dev_mobile_ios_aabbcc"
                        enrollmentDate: "2024-07-22T17:00:00Z"
                    lastUsed: "2024-07-22T17:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/biometrics/verify:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Verify Biometric Data for Sensitive Operations"
      description: "Performs real-time biometric verification to authorize sensitive actions or access protected resources, using a one-time biometric signature."
      operationId: "verifyBiometrics"
      security:
        - biometricAuth: [] # Uses biometricAuth here explicitly
      requestBody:
        required: true
        description: "Biometric verification request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricVerificationRequest"
            examples:
              VerifyFingerprint:
                summary: "Verify with fingerprint"
                value:
                  biometricType: "fingerprint"
                  biometricSignature: "base64encoded_one_time_fingerprint_proof"
                  deviceId: "dev_mobile_android_ddeeff"
      responses:
        "200":
          description: "Biometric verification successful."
          content:
            application/json:
              schema:
                type: object
                properties:
                  verificationStatus:
                    type: string
                    enum: [success, failed]
                    example: "success"
                    description: "Status of the biometric verification."
                  message:
                    type: string
                    example: "Biometric authentication successful."
                    description: "A descriptive message for the verification result."
              examples:
                VerificationSuccess:
                  summary: "Successful biometric verification"
                  value:
                    verificationStatus: "success"
                    message: "Biometric authentication successful."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/biometrics:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Get Biometric Enrollment Status"
      description: "Retrieves the current status of biometric enrollments for the authenticated user."
      operationId: "getBiometricStatus"
      security:
        - oAuth2Auth: [read:security, read:profile]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current biometric enrollment status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
              examples:
                BiometricStatusExample:
                  summary: "Example biometric status for a user"
                  value:
                    biometricsEnrolled: true
                    enrolledBiometrics:
                      - type: "facial_recognition"
                        deviceId: "dev_mobile_ios_aabbcc"
                        enrollmentDate: "2024-07-22T17:00:00Z"
                      - type: "fingerprint"
                        deviceId: "dev_mobile_android_ddeeff"
                        enrollmentDate: "2024-06-15T09:30:00Z"
                    lastUsed: "2024-07-22T17:30:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister All Biometric Data"
      description: "Removes all enrolled biometric data associated with the user's account for security reasons."
      operationId: "deregisterAllBiometrics"
      security:
        - oAuth2Auth: [write:security]
        - apiKeyAuth: []
      responses:
        "204":
          description: "All biometric data deregistered successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /accounts/me:
    get:
      tags:
        - "Accounts & Balances"
      summary: "List Linked Financial Accounts"
      description: "Fetches a comprehensive, real-time list of all external financial accounts linked to the user's Demo Bank profile, including consolidated balances and institutional details."
      operationId: "listLinkedAccounts"
      security:
        - oAuth2Auth: [read:accounts]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A detailed list of linked financial accounts."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LinkedAccount"
              examples:
                AccountList:
                  summary: "Example list of linked accounts"
                  value:
                    - id: "acc_chase_checking_4567"
                      externalId: "plaid_acc_abc123"
                      name: "Chase Checking"
                      institutionName: "Chase Bank"
                      mask: "4567"
                      type: "depository"
                      subtype: "checking"
                      currency: "USD"
                      currentBalance: 1250.75
                      availableBalance: 1200.00
                      lastUpdated: "2024-07-22T10:45:00Z"
                    - id: "acc_fidelity_ira_1234"
                      externalId: "plaid_acc_def456"
                      name: "Fidelity IRA"
                      institutionName: "Fidelity Investments"
                      mask: "1234"
                      type: "investment"
                      subtype: "ira"
                      currency: "USD"
                      currentBalance: 150000.50
                      availableBalance: 149000.00
                      lastUpdated: "2024-07-22T10:45:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /accounts/{accountId}/details:
    get:
      tags:
        - "Accounts & Balances"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Detailed Account Analytics & Forecasts"
      description: "Retrieves comprehensive analytics for a specific financial account, including historical balance trends, projected cash flow, and AI-driven insights into spending patterns."
      operationId: "getAccountDetailsAndAnalytics"
      security:
        - oAuth2Auth: [read:accounts, read:analytics]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Detailed account information with analytics and forecasts."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountDetail"
              examples:
                AccountDetails:
                  summary: "Detailed account information with cash flow forecast"
                  value:
                    id: "acc_chase_checking_4567"
                    externalId: "plaid_acc_abc123"
                    name: "Chase Checking"
                    institutionName: "Chase Bank"
                    mask: "4567"
                    type: "depository"
                    subtype: "checking"
                    currency: "USD"
                    currentBalance: 1250.75
                    availableBalance: 1200.00
                    lastUpdated: "2024-07-22T10:45:00Z"
                    accountHolder: "The Quantum Visionary"
                    interestRate: 0.01
                    openedDate: "2020-03-01"
                    transactionsCount: 150
                    projectedCashFlow:
                      days30: 500
                      days90: 1200
                      confidenceScore: 85
                    balanceHistory:
                      - date: "2024-07-21"
                        balance: 1230.50
                      - date: "2024-07-20"
                        balance: 1500.00
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/transactions/pending:
    get:
      tags:
        - "Accounts & Balances"
        - "Transactions & Insights"
      summary: "Get Pending Transactions for an Account"
      description: "Retrieves a list of pending transactions that have not yet cleared for a specific financial account."
      operationId: "getPendingAccountTransactions"
      security:
        - oAuth2Auth: [read:accounts, read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "A list of pending transactions."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Transaction"
              examples:
                PendingTransactions:
                  summary: "Example list of pending transactions"
                  value:
                    - id: "txn_pending-123"
                      accountId: "acc_chase_checking_4567"
                      type: "expense"
                      category: "Shopping"
                      aiCategoryConfidence: 0.85
                      description: "Amazon.com"
                      amount: 75.20
                      currency: "USD"
                      date: "2024-07-22"
                      carbonFootprint: 0.5
                      paymentChannel: "online"
                      disputeStatus: "none"
                    - id: "txn_pending-456"
                      accountId: "acc_chase_checking_4567"
                      type: "expense"
                      category: "Utilities"
                      aiCategoryConfidence: 0.90
                      description: "Electric Bill"
                      amount: 110.00
                      currency: "USD"
                      date: "2024-07-22"
                      carbonFootprint: 2.0
                      paymentChannel: "bill_payment"
                      disputeStatus: "none"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/statements:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Retrieve Account Statements"
      description: "Fetches digital statements for a specific account, allowing filtering by date range and format."
      operationId: "getAccountStatements"
      security:
        - oAuth2Auth: [read:accounts]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
        - name: "year"
          in: "query"
          required: true
          description: "Year for the statement."
          schema:
            type: integer
            example: 2024
        - name: "month"
          in: "query"
          required: true
          description: "Month for the statement (1-12)."
          schema:
            type: integer
            minimum: 1
            maximum: 12
            example: 7
        - name: "format"
          in: "query"
          description: "Desired format for the statement."
          schema:
            type: string
            enum: [pdf, csv]
            default: pdf
            example: "pdf"
      responses:
        "200":
          description: "Account statement in the requested format. (Content type may vary based on format)."
          content:
            application/pdf:
              schema:
                type: string
                format: binary
              examples:
                PdfStatement:
                  summary: "Example PDF statement"
                  value: "binary content of PDF"
            text/csv:
              schema:
                type: string
                format: binary
              examples:
                CsvStatement:
                  summary: "Example CSV statement"
                  value: "Date,Description,Amount\n2024-07-01,Salary,5000.00\n2024-07-02,Coffee,4.50"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/overdraft-settings:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Get Overdraft Protection Settings"
      description: "Retrieves the current overdraft protection settings for a specific account."
      operationId: "getOverdraftSettings"
      security:
        - oAuth2Auth: [read:accounts]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Overdraft settings for the account."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
              examples:
                OverdraftSettingsExample:
                  summary: "Example overdraft settings"
                  value:
                    accountId: "acc_chase_checking_4567"
                    enabled: true
                    protectionLimit: 500.00
                    linkToSavings: true
                    linkedSavingsAccountId: "acc_chase_savings_1234"
                    feePreference: "always_pay"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Accounts & Balances"
      summary: "Update Overdraft Protection Settings"
      description: "Updates the overdraft protection settings for a specific account, enabling or disabling protection and configuring preferences."
      operationId: "updateOverdraftSettings"
      security:
        - oAuth2Auth: [write:accounts]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      requestBody:
        required: true
        description: "Request to update overdraft protection settings."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OverdraftSettingsUpdateRequest"
            examples:
              UpdateOverdraft:
                summary: "Update overdraft settings request"
                value:
                  enabled: false
                  linkToSavings: false
                  feePreference: "decline_if_over_limit"
      responses:
        "200":
          description: "Overdraft settings updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
              examples:
                UpdatedOverdraftSettings:
                  summary: "Example updated overdraft settings"
                  value:
                    accountId: "acc_chase_checking_4567"
                    enabled: false
                    protectionLimit: null
                    linkToSavings: false
                    linkedSavingsAccountId: null
                    feePreference: "decline_if_over_limit"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/link:
    post:
      tags:
        - "Accounts & Balances"
        - "Security & Open Banking Ecosystem"
      summary: "Initiate Linking a New External Institution"
      description: "Begins the secure process of linking a new external financial institution (e.g., another bank, investment platform) to the user's Demo Bank profile, typically involving a third-party tokenized flow."
      operationId: "initiateAccountLinking"
      security:
        - oAuth2Auth: [write:accounts]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Parameters for initiating the linking process, such as institution name or specific provider."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LinkAccountRequest"
            examples:
              LinkPlaidAccount:
                summary: "Initiate linking via Plaid-like provider"
                value:
                  institutionName: "Bank of America"
                  countryCode: "US"
      responses:
        "200":
          description: "Account linking initiated. Provides a URI for the user to complete the connection securely."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LinkAccountResponse"
              examples:
                LinkInitiated:
                  summary: "Successful account linking initiation"
                  value:
                    linkSessionId: "link_session_xyz789"
                    authUri: "https://auth.plaid.com/oauth/initiate?client_id=...&redirect_uri=..."
                    status: "pending_user_action"
                    message: "Please redirect user to the provided URI to complete authentication."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List & Filter Transactions with Advanced Options"
      description: "Retrieves a paginated list of the user's transactions, with extensive options for filtering by type, category, date range, amount, and intelligent AI-driven sorting and search capabilities."
      operationId: "listTransactionsEnhanced"
      security:
        - oAuth2Auth: [read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "type"
          in: "query"
          description: "Filter transactions by type (e.g., income, expense, transfer)."
          schema:
            type: string
            enum: [income, expense, transfer, investment, refund, bill_payment]
            example: "expense"
        - name: "category"
          in: "query"
          description: "Filter transactions by their AI-assigned or user-defined category."
          schema:
            type: string
            example: "Groceries"
        - name: "startDate"
          in: "query"
          description: "Retrieve transactions from this date (inclusive)."
          schema:
            type: string
            format: date
            example: "2024-01-01"
        - name: "endDate"
          in: "query"
          description: "Retrieve transactions up to this date (inclusive)."
          schema:
            type: string
            format: date
            example: "2024-12-31"
        - name: "minAmount"
          in: "query"
          description: "Filter for transactions with an amount greater than or equal to this value."
          schema:
            type: number
            format: float
            minimum: 0
            example: 20.00
        - name: "maxAmount"
          in: "query"
          description: "Filter for transactions with an amount less than or equal to this value."
          schema:
            type: number
            format: float
            minimum: 0
            example: 100.00
        - name: "searchQuery"
          in: "query"
          description: "Free-text search across transaction descriptions, merchants, and notes."
          schema:
            type: string
            example: "Starbucks"
      responses:
        "200":
          description: "A paginated, intelligently filtered list of transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
              examples:
                FilteredTransactions:
                  summary: "Example of filtered and paginated transactions"
                  value:
                    limit: 2
                    offset: 0
                    total: 5
                    data:
                      - id: "txn_quantum-2024-07-21-A7B8C9"
                        accountId: "acc_chase_checking_4567"
                        type: "expense"
                        category: "Dining & Restaurants"
                        aiCategoryConfidence: 0.92
                        description: "Coffee Shop - Quantum Cafe"
                        merchantDetails:
                          name: "Quantum Cafe"
                          logoUrl: "https://assets.demobank.com/merchants/quantum_cafe.png"
                          website: "https://quantum.cafe"
                          address:
                            city: "Quantumville"
                            state: "CA"
                            zip: "90210"
                        amount: 12.50
                        currency: "USD"
                        date: "2024-07-21"
                        postedDate: "2024-07-22"
                        carbonFootprint: 1.2
                        paymentChannel: "in_store"
                        tags: ["work_lunch"]
                        disputeStatus: "none"
                      - id: "txn_quantum-2024-07-20-B1C2D3"
                        accountId: "acc_chase_checking_4567"
                        type: "expense"
                        category: "Groceries"
                        aiCategoryConfidence: 0.95
                        description: "Whole Foods Market"
                        merchantDetails:
                          name: "Whole Foods Market"
                          logoUrl: "https://assets.demobank.com/merchants/whole_foods.png"
                          website: "https://wholefoodsmarket.com"
                          address:
                            city: "Quantumville"
                            state: "CA"
                            zip: "90210"
                        amount: 85.30
                        currency: "USD"
                        date: "2024-07-20"
                        postedDate: "2024-07-20"
                        carbonFootprint: 5.5
                        paymentChannel: "in_store"
                        tags: ["weekly_shop"]
                        disputeStatus: "none"
                    nextOffset: 2
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}:
    get:
      tags:
        - "Transactions & Insights"
      summary: "Get Detailed Transaction by ID"
      description: "Retrieves granular information for a single transaction by its unique ID, including AI categorization confidence, merchant details, and associated carbon footprint."
      operationId: "getTransactionByIdDetailed"
      security:
        - oAuth2Auth: [read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      responses:
        "200":
          description: "The requested transaction details with enhanced data."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                SingleTransaction:
                  summary: "Example of a single detailed transaction"
                  value:
                    id: "txn_quantum-2024-07-21-A7B8C9"
                    accountId: "acc_chase_checking_4567"
                    type: "expense"
                    category: "Dining & Restaurants"
                    aiCategoryConfidence: 0.92
                    description: "Coffee Shop - Quantum Cafe"
                    merchantDetails:
                      name: "Quantum Cafe"
                      logoUrl: "https://assets.demobank.com/merchants/quantum_cafe.png"
                      website: "https://quantum.cafe"
                      address:
                        city: "Quantumville"
                        state: "CA"
                        zip: "90210"
                    amount: 12.50
                    currency: "USD"
                    date: "2024-07-21"
                    postedDate: "2024-07-22"
                    carbonFootprint: 1.2
                    location:
                      latitude: 34.0522
                      longitude: -118.2437
                      city: "Los Angeles"
                    paymentChannel: "in_store"
                    tags: ["work_lunch"]
                    receiptUrl: "https://demobank.com/receipts/txn_1a2b3c4d5e.pdf"
                    disputeStatus: "none"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}/categorize:
    put:
      tags:
        - "Transactions & Insights"
      summary: "Manually Categorize or Recategorize a Transaction"
      description: "Allows the user to override or refine the AI's categorization for a transaction, improving future AI accuracy and personal financial reporting."
      operationId: "categorizeTransaction"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "The new category for the transaction, along with optional notes."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CategorizeTransactionRequest"
            examples:
              RecategorizeGrocery:
                summary: "Recategorize a grocery transaction"
                value:
                  category: "Home > Groceries"
                  notes: "Bulk purchase for party"
                  applyToFuture: true
      responses:
        "200":
          description: "Transaction category updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                UpdatedCategory:
                  summary: "Example of transaction with updated category"
                  value:
                    id: "txn_quantum-2024-07-21-A7B8C9"
                    accountId: "acc_chase_checking_4567"
                    type: "expense"
                    category: "Home > Groceries"
                    aiCategoryConfidence: 0.98 # Higher due to user correction
                    description: "Coffee Shop - Quantum Cafe"
                    amount: 12.50
                    currency: "USD"
                    date: "2024-07-21"
                    postedDate: "2024-07-22"
                    carbonFootprint: 1.2
                    paymentChannel: "in_store"
                    tags: ["work_lunch"]
                    disputeStatus: "none"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /transactions/{transactionId}/dispute:
    post:
      tags:
        - "Transactions & Insights"
      summary: "Initiate a Transaction Dispute"
      description: "Begins the process of disputing a specific transaction, providing details and supporting documentation for review by our compliance team and AI."
      operationId: "initiateTransactionDispute"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "Details regarding the transaction dispute."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DisputeRequest"
            examples:
              DisputeUnauthorized:
                summary: "Dispute an unauthorized transaction"
                value:
                  reason: "unauthorized"
                  details: "I did not authorize this purchase. My card may have been compromised and I was traveling internationally on this date."
                  supportingDocuments: ["https://demobank.com/uploads/flight_ticket.png"]
      responses:
        "202":
          description: "Transaction dispute initiated. Status will be available via the transaction details."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DisputeStatus"
              examples:
                DisputeInitiated:
                  summary: "Transaction dispute initiated successfully"
                  value:
                    disputeId: "dispute_txn_xyz123"
                    status: "pending"
                    nextSteps: "Our AI-powered fraud team is reviewing your claim. You will be notified within 2-3 business days."
                    lastUpdated: "2024-07-22T11:30:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /transactions/recurring:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List Recurring Transactions"
      description: "Retrieves a list of all detected or user-defined recurring transactions, useful for budget tracking and subscription management."
      operationId: "listRecurringTransactions"
      security:
        - oAuth2Auth: [read:transactions]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of recurring transactions."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RecurringTransaction"
              examples:
                RecurringTxnList:
                  summary: "Example list of recurring transactions"
                  value:
                    - id: "rec_txn_netflix_001"
                      description: "Netflix Subscription"
                      category: "Entertainment"
                      amount: 19.99
                      currency: "USD"
                      frequency: "monthly"
                      nextDueDate: "2024-08-01"
                      lastPaidDate: "2024-07-01"
                      status: "active"
                      linkedAccountId: "acc_chase_checking_4567"
                      aiConfidenceScore: 0.95
                    - id: "rec_txn_gym_002"
                      description: "Gym Membership"
                      category: "Health & Fitness"
                      amount: 49.00
                      currency: "USD"
                      frequency: "monthly"
                      nextDueDate: "2024-08-15"
                      lastPaidDate: "2024-07-15"
                      status: "active"
                      linkedAccountId: "acc_chase_checking_4567"
                      aiConfidenceScore: 0.99
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Transactions & Insights"
      summary: "Create a New Recurring Transaction"
      description: "Defines a new recurring transaction pattern for future tracking and budgeting."
      operationId: "createRecurringTransaction"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new recurring transaction pattern."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RecurringTransactionCreationRequest"
            examples:
              CreateGymMembership:
                summary: "Create new gym membership recurring transaction"
                value:
                  description: "New Gym Membership"
                  category: "Health & Fitness"
                  amount: 55.50
                  currency: "USD"
                  frequency: "monthly"
                  startDate: "2024-09-01"
                  linkedAccountId: "acc_chase_checking_4567"
      responses:
        "201":
          description: "Recurring transaction created."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecurringTransaction"
              examples:
                RecurringTxnCreated:
                  summary: "Example of a newly created recurring transaction"
                  value:
                    id: "rec_txn_new_gym_003"
                    description: "New Gym Membership"
                    category: "Health & Fitness"
                    amount: 55.50
                    currency: "USD"
                    frequency: "monthly"
                    nextDueDate: "2024-09-01"
                    lastPaidDate: null
                    status: "active"
                    linkedAccountId: "acc_chase_checking_4567"
                    aiConfidenceScore: 0.80
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}/notes:
    put:
      tags:
        - "Transactions & Insights"
      summary: "Add/Update Notes for a Transaction"
      description: "Allows the user to add or update personal notes for a specific transaction."
      operationId: "updateTransactionNotes"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "Payload to add/update notes for a transaction."
        content:
          application/json:
            schema:
              type: object
              required:
                - notes
              properties:
                notes:
                  type: string
                  example: "Bought new books for my AI course."
                  description: "The personal notes to add or update for the transaction."
            examples:
              UpdateNotes:
                summary: "Add notes to a transaction"
                value:
                  notes: "This was a special coffee for a client meeting."
      responses:
        "200":
          description: "Transaction notes updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                NotesUpdated:
                  summary: "Example of transaction with updated notes"
                  value:
                    id: "txn_quantum-2024-07-21-A7B8C9"
                    accountId: "acc_chase_checking_4567"
                    type: "expense"
                    category: "Dining & Restaurants"
                    aiCategoryConfidence: 0.92
                    description: "Coffee Shop - Quantum Cafe"
                    amount: 12.50
                    currency: "USD"
                    date: "2024-07-21"
                    postedDate: "2024-07-22"
                    carbonFootprint: 1.2
                    paymentChannel: "in_store"
                    tags: ["work_lunch"]
                    receiptUrl: "https://demobank.com/receipts/txn_1a2b3c4d5e.pdf"
                    disputeStatus: "none"
                    notes: "This was a special coffee for a client meeting."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /transactions/insights/spending-trends:
    get:
      tags:
        - "Transactions & Insights"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get AI-Driven Spending Trends"
      description: "Retrieves AI-generated insights into user spending trends over time, identifying patterns and anomalies."
      operationId: "getSpendingTrends"
      security:
        - oAuth2Auth: [read:transactions, read:analytics]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Spending trends analysis."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SpendingTrends"
              examples:
                SpendingTrendsExample:
                  summary: "Example spending trends analysis"
                  value:
                    period: "Last 3 Months"
                    overallTrend: "increasing"
                    percentageChange: 5.2
                    topCategoriesByChange:
                      - category: "Dining & Restaurants"
                        percentageChange: 15.0
                        absoluteChange: 120.00
                      - category: "Groceries"
                        percentageChange: 8.0
                        absoluteChange: 50.00
                    aiInsights:
                      - id: "insight-spending-alert-001"
                        title: "High Dining Spend Alert"
                        description: "Your dining expenses this month are 35% higher than your average, potentially impacting your budget by $150."
                        category: "spending"
                        severity: "medium"
                        actionableRecommendation: "Consider utilizing the 'Budget Optimizer' tool to adjust your dining budget or explore meal prep options."
                        timestamp: "2024-07-22T11:45:00Z"
                    forecastNextMonth: 2850.00
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "List All User Budgets"
      description: "Retrieves a list of all active and historical budgets for the authenticated user."
      operationId: "listBudgets"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of user budgets."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Budget"
              examples:
                BudgetList:
                  summary: "Example list of user budgets"
                  value:
                    - id: "budget_monthly_aug"
                      name: "August 2024 Household Budget"
                      period: "monthly"
                      startDate: "2024-08-01"
                      endDate: "2024-08-31"
                      totalAmount: 3000.00
                      spentAmount: 1200.50
                      remainingAmount: 1799.50
                      categories:
                        - name: "Groceries"
                          allocated: 500.00
                          spent: 250.75
                          remaining: 249.25
                        - name: "Utilities"
                          allocated: 150.00
                          spent: 110.00
                          remaining: 40.00
                      status: "active"
                      alertThreshold: 80
                    - id: "budget_vacation_2025"
                      name: "2025 Europe Trip"
                      period: "yearly"
                      startDate: "2024-01-01"
                      endDate: "2025-12-31"
                      totalAmount: 5000.00
                      spentAmount: 1500.00
                      remainingAmount: 3500.00
                      categories:
                        - name: "Flights"
                          allocated: 2000.00
                          spent: 800.00
                          remaining: 1200.00
                      status: "active"
                      alertThreshold: 90
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Budgets & Financial Planning"
      summary: "Create a New Budget"
      description: "Creates a new financial budget for the user, with optional AI auto-population of categories and amounts."
      operationId: "createBudget"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new budget."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetCreationRequest"
            examples:
              CreateMonthlyBudget:
                summary: "Create a new monthly budget"
                value:
                  name: "September Living Expenses"
                  period: "monthly"
                  startDate: "2024-09-01"
                  endDate: "2024-09-30"
                  totalAmount: 2800.00
                  categories:
                    - name: "Rent"
                      allocated: 1500.00
                    - name: "Groceries"
                      allocated: 400.00
                  alertThreshold: 75
                  aiAutoPopulate: true
      responses:
        "201":
          description: "Budget created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
              examples:
                BudgetCreated:
                  summary: "Example of a newly created budget"
                  value:
                    id: "budget_monthly_sep"
                    name: "September Living Expenses"
                    period: "monthly"
                    startDate: "2024-09-01"
                    endDate: "2024-09-30"
                    totalAmount: 2800.00
                    spentAmount: 0.00
                    remainingAmount: 2800.00
                    categories:
                      - name: "Rent"
                        allocated: 1500.00
                        spent: 0.00
                        remaining: 1500.00
                      - name: "Groceries"
                        allocated: 400.00
                        spent: 0.00
                        remaining: 400.00
                      - name: "Utilities"
                        allocated: 150.00
                        spent: 0.00
                        remaining: 150.00 # Auto-populated by AI
                    status: "active"
                    alertThreshold: 75
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets/{budgetId}:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "Get Detailed Budget Information"
      description: "Retrieves detailed information for a specific budget, including current spending, remaining amounts, and AI recommendations."
      operationId: "getBudgetDetails"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "200":
          description: "Detailed budget information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
              examples:
                BudgetDetails:
                  summary: "Detailed budget information"
                  value:
                    id: "budget_monthly_aug"
                    name: "August 2024 Household Budget"
                    period: "monthly"
                    startDate: "2024-08-01"
                    endDate: "2024-08-31"
                    totalAmount: 3000.00
                    spentAmount: 1200.50
                    remainingAmount: 1799.50
                    categories:
                      - name: "Groceries"
                        allocated: 500.00
                        spent: 250.75
                        remaining: 249.25
                      - name: "Utilities"
                        allocated: 150.00
                        spent: 110.00
                        remaining: 40.00
                      - name: "Dining & Restaurants"
                        allocated: 300.00
                        spent: 350.00
                        remaining: -50.00
                    status: "active"
                    alertThreshold: 80
                    aiRecommendations:
                      - id: "insight-budget-overspend-001"
                        title: "Dining Budget Exceeded"
                        description: "You've exceeded your dining budget by $50. Consider reallocating funds or reducing future dining expenses."
                        category: "budget"
                        severity: "medium"
                        actionableRecommendation: "Adjust your 'Dining & Restaurants' category or use the 'Budget Optimizer' tool."
                        timestamp: "2024-07-22T13:00:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Budgets & Financial Planning"
      summary: "Update an Existing Budget"
      description: "Updates the parameters of an existing budget, such as total amount, dates, or categories."
      operationId: "updateBudget"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      requestBody:
        required: true
        description: "Request to update an existing budget."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetUpdateRequest"
            examples:
              UpdateBudgetAmount:
                summary: "Increase total budget amount"
                value:
                  totalAmount: 3200.00
                  alertThreshold: 85
      responses:
        "200":
          description: "Budget updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
              examples:
                BudgetUpdated:
                  summary: "Example of an updated budget"
                  value:
                    id: "budget_monthly_aug"
                    name: "August 2024 Household Budget"
                    period: "monthly"
                    startDate: "2024-08-01"
                    endDate: "2024-08-31"
                    totalAmount: 3200.00
                    spentAmount: 1200.50
                    remainingAmount: 1999.50
                    categories:
                      - name: "Groceries"
                        allocated: 500.00
                        spent: 250.75
                        remaining: 249.25
                    status: "active"
                    alertThreshold: 85
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Budgets & Financial Planning"
      summary: "Delete a Budget"
      description: "Deletes a specific budget from the user's profile."
      operationId: "deleteBudget"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "204":
          description: "Budget deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "List All Investment Portfolios"
      description: "Retrieves a summary of all investment portfolios linked to the user's account."
      operationId: "listInvestmentPortfolios"
      security:
        - oAuth2Auth: [read:investments]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of investment portfolios."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioList:
                  summary: "Example list of investment portfolios"
                  value:
                    - id: "portfolio_equity_growth"
                      name: "Aggressive Growth Portfolio"
                      type: "equities"
                      currency: "USD"
                      totalValue: 250000.00
                      unrealizedGainLoss: 25000.00
                      todayGainLoss: 500.00
                      lastUpdated: "2024-07-22T10:00:00Z"
                      riskTolerance: "aggressive"
                    - id: "portfolio_retirement_bond"
                      name: "Retirement Bond Portfolio"
                      type: "bonds"
                      currency: "USD"
                      totalValue: 180000.00
                      unrealizedGainLoss: 5000.00
                      todayGainLoss: 100.00
                      lastUpdated: "2024-07-22T10:00:00Z"
                      riskTolerance: "low"
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Create a New Investment Portfolio"
      description: "Creates a new investment portfolio, with options for initial asset allocation."
      operationId: "createInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new investment portfolio."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioCreationRequest"
            examples:
              CreateNewPortfolio:
                summary: "Create a new diversified portfolio"
                value:
                  name: "My First Growth Portfolio"
                  type: "diversified"
                  currency: "USD"
                  initialInvestment: 10000.00
                  riskTolerance: "medium"
                  aiAutoAllocate: true
                  linkedAccountId: "acc_chase_checking_4567"
      responses:
        "201":
          description: "Investment portfolio created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioCreated:
                  summary: "Example of a newly created investment portfolio"
                  value:
                    id: "portfolio_new_growth_001"
                    name: "My First Growth Portfolio"
                    type: "diversified"
                    currency: "USD"
                    totalValue: 10000.00
                    unrealizedGainLoss: 0.00
                    todayGainLoss: 0.00
                    lastUpdated: "2024-07-22T14:00:00Z"
                    riskTolerance: "medium"
                    holdings:
                      - symbol: "SPY"
                        name: "S&P 500 ETF"
                        quantity: 10
                        averageCost: 450.00
                        currentPrice: 450.00
                        marketValue: 4500.00
                        percentageOfPortfolio: 45.0
                        esgScore: 7.5
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /investments/portfolios/{portfolioId}:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Get Detailed Investment Portfolio"
      description: "Retrieves detailed information for a specific investment portfolio, including holdings, performance, and AI insights."
      operationId: "getInvestmentPortfolioDetails"
      security:
        - oAuth2Auth: [read:investments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      responses:
        "200":
          description: "Detailed investment portfolio information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioDetails:
                  summary: "Example of detailed investment portfolio"
                  value:
                    id: "portfolio_equity_growth"
                    name: "Aggressive Growth Portfolio"
                    type: "equities"
                    currency: "USD"
                    totalValue: 250000.00
                    unrealizedGainLoss: 25000.00
                    todayGainLoss: 500.00
                    lastUpdated: "2024-07-22T10:00:00Z"
                    riskTolerance: "aggressive"
                    aiPerformanceInsights:
                      - id: "insight-market-outlook-001"
                        title: "Strong Tech Sector Performance"
                        description: "The AI predicts continued strong performance in the tech sector, which currently forms a significant portion of your portfolio."
                        category: "investing"
                        severity: "low"
                        timestamp: "2024-07-22T14:15:00Z"
                    holdings:
                      - symbol: "AAPL"
                        name: "Apple Inc."
                        quantity: 100
                        averageCost: 150.00
                        currentPrice: 180.00
                        marketValue: 18000.00
                        percentageOfPortfolio: 7.2
                        esgScore: 8.5
                      - symbol: "MSFT"
                        name: "Microsoft Corp."
                        quantity: 50
                        averageCost: 300.00
                        currentPrice: 320.00
                        marketValue: 16000.00
                        percentageOfPortfolio: 6.4
                        esgScore: 8.9
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Update Investment Portfolio Details"
      description: "Updates high-level details of an investment portfolio, such as name or risk tolerance."
      operationId: "updateInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        description: "Request to update high-level details of an investment portfolio."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioUpdateRequest"
            examples:
              UpdatePortfolioRisk:
                summary: "Update portfolio risk tolerance"
                value:
                  riskTolerance: "medium"
                  aiRebalancingFrequency: "quarterly"
      responses:
        "200":
          description: "Investment portfolio updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioUpdated:
                  summary: "Example of an updated investment portfolio"
                  value:
                    id: "portfolio_equity_growth"
                    name: "Aggressive Growth Portfolio"
                    type: "equities"
                    currency: "USD"
                    totalValue: 250000.00
                    unrealizedGainLoss: 25000.00
                    todayGainLoss: 500.00
                    lastUpdated: "2024-07-22T14:30:00Z"
                    riskTolerance: "medium"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios/{portfolioId}/rebalance:
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Initiate AI-Driven Portfolio Rebalancing"
      description: "Triggers an AI-driven rebalancing process for a specific investment portfolio based on a target risk tolerance or strategy."
      operationId: "rebalanceInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        description: "Request to initiate an AI-driven portfolio rebalancing."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RebalanceRequest"
            examples:
              InitiateRebalance:
                summary: "Initiate a rebalance for medium risk"
                value:
                  targetRiskTolerance: "medium"
                  dryRun: true
                  confirmationRequired: true
      responses:
        "202":
          description: "Portfolio rebalancing initiated. Details will be provided asynchronously."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RebalanceStatus"
              examples:
                RebalanceInitiated:
                  summary: "Rebalance initiated successfully"
                  value:
                    rebalanceId: "rebal_port_growth_123"
                    portfolioId: "portfolio_equity_growth"
                    status: "analyzing"
                    statusMessage: "AI is analyzing optimal trade strategy to match target risk profile."
                    proposedTrades: null
                    estimatedImpact: "Projected 5% reduction in portfolio volatility."
                    confirmationRequired: true
                    confirmationExpiresAt: "2024-07-22T15:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/assets/search:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
        - "Sustainability & ESG Impact"
      summary: "Search for Investment Assets with ESG Scores"
      description: "Searches for available investment assets (stocks, ETFs, mutual funds) and returns their ESG impact scores."
      operationId: "searchESGAssets"
      security:
        - oAuth2Auth: [read:investments, read:sustainability]
        - apiKeyAuth: []
      parameters:
        - name: "query"
          in: "query"
          required: true
          description: "Search query for asset name or symbol."
          schema:
            type: string
            example: "Tesla"
        - name: "minESGScore"
          in: "query"
          description: "Minimum desired ESG score (0-10)."
          schema:
            type: number
            format: float
            minimum: 0
            maximum: 10
            example: 7.0
      responses:
        "200":
          description: "A list of investment assets with ESG data."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ESGAssetSearchResult"
              examples:
                ESGSearchResults:
                  summary: "Example ESG asset search results"
                  value:
                    - assetSymbol: "TSLA"
                      assetName: "Tesla Inc."
                      assetType: "stock"
                      currentPrice: 250.75
                      currency: "USD"
                      overallESGScore: 9.1
                      environmentalScore: 9.5
                      socialScore: 8.8
                      governanceScore: 9.0
                      esgRatingProvider: "MSCI"
                      esgControversies: ["Labor Practices Controversy"]
                      aiESGInsight: "Tesla's high environmental score is driven by its focus on sustainable transportation, though social scores reflect recent labor concerns."
                    - assetSymbol: "Vanguard Total Stock Market ETF"
                      assetName: "Vanguard Total Stock Market ETF"
                      assetType: "etf"
                      currentPrice: 200.00
                      currency: "USD"
                      overallESGScore: 7.8
                      environmentalScore: 7.5
                      socialScore: 8.0
                      governanceScore: 8.0
                      esgRatingProvider: "Sustainalytics"
                      esgControversies: []
                      aiESGInsight: "A broadly diversified ETF with a solid overall ESG profile, reflecting average market performance in sustainability."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat:
    post:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Send a Message to the Quantum AI Advisor"
      description: "Initiates or continues a sophisticated conversation with Quantum, the AI Advisor. Quantum can provide advanced financial insights, execute complex tasks via an expanding suite of intelligent tools, and learn from user interactions to offer hyper-personalized guidance."
      operationId: "chatWithQuantumAdvanced"
      security:
        - oAuth2Auth: [interact:ai_advisor]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The rich message payload for the AI, including textual input and potential tool function outputs."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AIChatRequest"
            examples:
              AskAboutSpending:
                summary: "Ask about spending patterns"
                value:
                  message: "Can you analyze my recent spending patterns and suggest areas for saving, focusing on my dining expenses?"
                  sessionId: "session-quantum-xyz-789-alpha"
              ToolResponse:
                summary: "Providing tool output to AI"
                value:
                  sessionId: "session-quantum-xyz-789-alpha"
                  functionResponse:
                    name: "send_money"
                    response:
                      status: "success"
                      transactionId: "pmt_654321"
                      amountSent: 50
                      recipient: "Alex"
      responses:
        "200":
          description: "The AI Advisor's comprehensive response, which may include text, proactive recommendations, and declarative tool calls for execution."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIChatResponse"
              examples:
                AIInsightResponse:
                  summary: "AI response with spending insights"
                  value:
                    text: "I've completed a detailed analysis of your spending. It appears your dining expenses account for 35% of your total outflows this month, significantly higher than your target. Would you like me to identify specific areas for reduction or suggest alternative dining options?"
                    sessionId: "session-quantum-xyz-789-alpha"
                    proactiveInsights:
                      - id: "insight-dining-overspend-002"
                        title: "High Dining Spend Alert"
                        description: "Your dining expenses this month are 35% higher than your average, potentially impacting your budget by $150."
                        category: "spending"
                        severity: "medium"
                        actionableRecommendation: "Consider utilizing the 'Budget Optimizer' tool to adjust your dining budget or explore meal prep options."
                        timestamp: "2024-07-22T15:00:00Z"
                AIToolCallResponse:
                  summary: "AI requesting to send money"
                  value:
                    text: "I can help with that. What amount would you like to send to Alex?"
                    sessionId: "session-quantum-xyz-789-beta"
                    functionCalls:
                      - id: "call_abc123"
                        name: "send_money"
                        args:
                          recipient: "Alex"
                          currency: "USD"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "The Quantum AI Advisor service is temporarily overloaded or unavailable. Please try again shortly."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                ServiceUnavailable:
                  summary: "AI service overloaded"
                  value:
                    code: "AI_SERVICE_UNAVAILABLE"
                    message: "The Quantum AI Advisor service is temporarily overloaded. Please try again in a few minutes."
                    timestamp: "2024-07-22T15:05:00Z"

  /ai/advisor/tools:
    get:
      tags:
        - "AI Advisor (Quantum)"
        - "Developer Tools & API Management"
      summary: "List Available AI Tools for Quantum"
      description: "Retrieves a dynamic manifest of all integrated AI tools that Quantum can invoke and execute, providing details on their capabilities, parameters, and access requirements."
      operationId: "listQuantumAITools"
      security:
        - oAuth2Auth: [read:ai_advisor]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of available AI tools."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/AITool"
              examples:
                ToolList:
                  summary: "Example list of AI tools"
                  value:
                    - name: "send_money"
                      description: "Sends money to a specified recipient from the user's primary checking account."
                      parameters:
                        type: "object"
                        properties:
                          amount:
                            type: "number"
                            description: "The amount of money to send."
                          recipient:
                            type: "string"
                            description: "The name or ID of the recipient."
                          currency:
                            type: "string"
                            description: "The currency of the transaction (e.g., USD, EUR)."
                        required:
                          - "amount"
                          - "recipient"
                          - "currency"
                      accessScope: "write:payments"
                    - name: "get_account_balance"
                      description: "Retrieves the current balance of a specified financial account."
                      parameters:
                        type: "object"
                        properties:
                          accountId:
                            type: "string"
                            description: "The ID of the account."
                        required:
                          - "accountId"
                      accessScope: "read:accounts"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat/history:
    get:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Retrieve AI Advisor Conversation History"
      description: "Fetches the full conversation history with the Quantum AI Advisor for a given session or user."
      operationId: "getQuantumChatHistory"
      security:
        - oAuth2Auth: [read:ai_advisor]
        - apiKeyAuth: []
      parameters:
        - name: "sessionId"
          in: "query"
          nullable: true
          description: "Optional: Filter history by a specific session ID. If omitted, recent conversations will be returned."
          schema:
            type: string
            example: "session-quantum-xyz-789-alpha"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "Paginated list of chat messages."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedChatMessages"
              examples:
                ChatHistory:
                  summary: "Example chat history for a session"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - role: "user"
                        content: "What is my current net worth?"
                        timestamp: "2024-07-22T18:00:00Z"
                      - role: "assistant"
                        content: "Based on your linked accounts and investments, your estimated net worth is $450,000. Would you like a detailed breakdown?"
                        timestamp: "2024-07-22T18:01:00Z"
                      - role: "user"
                        content: "Yes, please provide a breakdown."
                        timestamp: "2024-07-22T18:02:00Z"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulate:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run a 'What-If' Financial Simulation (Standard)"
      description: "Submits a hypothetical scenario to the Quantum Oracle AI for standard financial impact analysis. The AI simulates the effect on the user's current financial state and provides a summary."
      operationId: "simulateWithQuantumOracle"
      security:
        - oAuth2Auth: [interact:ai_oracle]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to run a standard 'what-if' financial simulation."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SimulationRequest"
            examples:
              InvestmentSimulation:
                summary: "Simulate additional investment"
                value:
                  prompt: "What if I invest an additional $1,000 per month into my aggressive growth portfolio for the next 5 years?"
                  parameters:
                    durationYears: 5
                    monthlyInvestmentAmount: 1000
                    riskTolerance: "aggressive"
      responses:
        "200":
          description: "The simulation was successful. The response contains a detailed impact analysis and actionable recommendations."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulationResponse"
              examples:
                SimulationResult:
                  summary: "Example of a successful simulation result"
                  value:
                    simulationId: "sim_oracle-growth-2024-xyz"
                    narrativeSummary: "If you consistently invest an additional $1,000 per month into your aggressive growth portfolio over the next 5 years, the Quantum Oracle predicts your portfolio could grow by approximately 45-60%, significantly increasing your wealth. However, this comes with elevated risk during market downturns."
                    keyImpacts:
                      - metric: "Projected Portfolio Value"
                        value: "$120,000 - $140,000"
                        severity: "high"
                      - metric: "Overall Net Worth Increase"
                        value: "$60,000 - $70,000"
                        severity: "high"
                    recommendations:
                      - title: "Review Portfolio Diversification"
                        description: "Given the aggressive nature of this strategy, the Oracle suggests reviewing your current portfolio diversification to mitigate concentration risk."
                        actionTrigger: "open_portfolio_diversification_tool"
                    riskAnalysis:
                      maxDrawdown: 0.25
                      volatilityIndex: 0.18
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "AI simulation service is temporarily unavailable due to high demand or maintenance."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                ServiceUnavailable:
                  summary: "AI service unavailable"
                  value:
                    code: "SIMULATION_SERVICE_UNAVAILABLE"
                    message: "AI simulation service is temporarily unavailable due to high demand. Please try again shortly."
                    timestamp: "2024-07-22T16:00:00Z"

  /ai/oracle/simulate/advanced:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run an Advanced Multi-Variable Financial Simulation"
      description: "Engages the Quantum Oracle for highly complex, multi-variable simulations, allowing precise control over numerous financial parameters, market conditions, and personal events to generate deep, predictive insights and sensitivity analysis."
      operationId: "simulateWithQuantumOracleAdvanced"
      security:
        - oAuth2Auth: [interact:ai_oracle]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "An advanced request payload detailing the complex scenario and parameters for the AI simulation."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedSimulationRequest"
            examples:
              ComplexJobLossSimulation:
                summary: "Simulate job loss with market recovery"
                value:
                  prompt: "Evaluate the long-term impact of a sudden job loss combined with a variable market downturn, analyzing worst-case and best-case recovery scenarios over a decade."
                  scenarios:
                    - name: "Job Loss & Mild Market Recovery"
                      events:
                        - type: "job_loss"
                          details:
                            durationMonths: 6
                            severanceAmount: 10000
                            unemploymentBenefits: 2000
                        - type: "market_downturn"
                          details:
                            impactPercentage: 0.15
                            recoveryYears: 3
                      durationYears: 10
                      sensitivityAnalysisParams:
                        - paramName: "marketRecoveryRate"
                          min: 0.03
                          max: 0.07
                          step: 0.01
      responses:
        "200":
          description: "Advanced simulation completed successfully, returning granular impact analysis, sensitivity curves, and optimized strategies."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdvancedSimulationResponse"
              examples:
                AdvancedSimulationResult:
                  summary: "Example of a complex advanced simulation result"
                  value:
                    simulationId: "sim_oracle-complex-macro-123"
                    overallSummary: "The advanced simulation reveals that a job loss scenario has a significant initial impact on liquidity, but recovery is highly dependent on market conditions and the duration of unemployment. Proactive savings and diversified investments are key mitigating factors."
                    scenarioResults:
                      - scenarioName: "Job Loss & Mild Market Recovery"
                        narrativeSummary: "In this scenario, initial liquidity challenges are observed, but a swift market recovery and prudent spending lead to recovery within 3 years."
                        finalNetWorthProjected: 1250000
                        liquidityMetrics:
                          minCashBalance: -5000
                          recoveryTimeMonths: 36
                        sensitivityAnalysisGraphs:
                          - paramName: "marketRecoveryRate"
                            data:
                              - paramValue: 0.03
                                outcomeValue: 1100000
                              - paramValue: 0.05
                                outcomeValue: 1250000
                              - paramValue: 0.07
                                outcomeValue: 1400000
                    strategicRecommendations:
                      - id: "insight-emergency-fund-003"
                        title: "Strengthen Emergency Fund"
                        description: "Maintain an emergency fund equivalent to 6-12 months of living expenses to buffer against unexpected job loss."
                        category: "saving"
                        severity: "high"
                        timestamp: "2024-07-22T16:30:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "503":
          description: "AI simulation service is experiencing extended processing times or is unavailable for complex requests."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                LongProcessing:
                  summary: "AI service long processing time"
                  value:
                    code: "SIMULATION_LONG_PROCESSING"
                    message: "AI simulation service is experiencing extended processing times for complex requests. Please allow more time."
                    timestamp: "2024-07-22T16:45:00Z"

  /ai/oracle/simulations:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "List All User Simulations"
      description: "Retrieves a list of all financial simulations previously run by the user, including their status and summaries."
      operationId: "listUserSimulations"
      security:
        - oAuth2Auth: [read:ai_oracle]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of financial simulations."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit:
                    type: integer
                    example: 50
                    description: "The maximum number of items returned per page."
                  offset:
                    type: integer
                    example: 0
                    description: "The starting index of the list for pagination."
                  total:
                    type: integer
                    example: 5
                    description: "The total number of available items."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/SimulationSummary"
              examples:
                SimulationSummaries:
                  summary: "Example list of simulation summaries"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - simulationId: "sim_oracle-growth-2024-xyz"
                        title: "Investment Growth Scenario"
                        status: "completed"
                        creationDate: "2024-07-20T10:00:00Z"
                        lastUpdated: "2024-07-20T10:15:00Z"
                        summary: "Simulated impact of additional monthly investments over 5 years."
                      - simulationId: "sim_oracle-complex-macro-123"
                        title: "Job Loss & Market Downturn Impact"
                        status: "completed"
                        creationDate: "2024-07-18T14:30:00Z"
                        lastUpdated: "2024-07-18T14:45:00Z"
                        summary: "Evaluated long-term impact of job loss with variable market conditions."
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulations/{simulationId}:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Get Detailed Simulation Results"
      description: "Retrieves the full, detailed results of a specific financial simulation by its ID."
      operationId: "getSimulationResults"
      security:
        - oAuth2Auth: [read:ai_oracle]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "200":
          description: "Detailed simulation results."
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/SimulationResponse"
                  - $ref: "#/components/schemas/AdvancedSimulationResponse"
              examples:
                DetailedSimulationResult:
                  summary: "Example of detailed simulation result (Standard)"
                  value:
                    simulationId: "sim_oracle-growth-2024-xyz"
                    narrativeSummary: "If you consistently invest an additional $1,000 per month into your aggressive growth portfolio over the next 5 years, the Quantum Oracle predicts your portfolio could grow by approximately 45-60%..."
                    keyImpacts:
                      - metric: "Projected Portfolio Value"
                        value: "$120,000 - $140,000"
                        severity: "high"
                    recommendations:
                      - title: "Review Portfolio Diversification"
                        description: "Given the aggressive nature of this strategy, the Oracle suggests reviewing your current portfolio diversification to mitigate concentration risk."
                    riskAnalysis:
                      maxDrawdown: 0.25
                      volatilityIndex: 0.18
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Delete a Financial Simulation"
      description: "Deletes a previously run financial simulation and its results."
      operationId: "deleteSimulation"
      security:
        - oAuth2Auth: [write:ai_oracle]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "204":
          description: "Simulation deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitch:
    post:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit a High-Potential Business Plan to Quantum Weaver"
      description: "Submits a detailed business plan to the Quantum Weaver AI for rigorous analysis, market validation, and seed funding consideration. This initiates the AI-driven incubation journey, aiming to transform innovative ideas into commercially successful ventures."
      operationId: "pitchToQuantumWeaver"
      security:
        - oAuth2Auth: [write:weaver]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The comprehensive business plan document, including executive summary, market analysis, financial projections, and team overview."
        content:
          application/json:
            schema:
              type: object
              required:
                - businessPlan
                - foundingTeam
                - marketOpportunity
                - financialProjections
              properties:
                businessPlan:
                  type: string
                  description: "The user's detailed narrative business plan (e.g., executive summary, vision, strategy)."
                  example: "Our venture, 'SynergyChain AI,' aims to revolutionize global supply chain transparency and efficiency using a decentralized AI ledger. We leverage quantum-inspired algorithms to predict disruptions and optimize logistics, targeting multinational corporations..."
                foundingTeam:
                  type: array
                  description: "Key profiles and expertise of the founding team members."
                  items:
                    type: object
                    properties:
                      name: {type: string, example: "Dr. Anya Sharma", description: "Name of the team member."}
                      role: {type: string, example: "CEO, Lead AI Architect", description: "Role of the team member."}
                      experience: {type: string, example: "20+ years in AI/ML, ex-Google X", description: "Relevant experience."}
                marketOpportunity:
                  type: string
                  description: "Detailed analysis of the target market, problem statement, and proposed solution's unique value proposition."
                  example: "The global supply chain market faces $1.5T in annual losses due to inefficiencies and lack of real-time data. SynergyChain AI offers a 30% reduction in lead times and a 15% cut in operational costs..."
                financialProjections:
                  type: object
                  description: "Key financial metrics and projections for the next 3-5 years."
                  properties:
                    seedRoundAmount: {type: number, format: float, example: 5000000, description: "Requested seed funding in USD."}
                    valuationPreMoney: {type: number, format: float, example: 20000000, description: "Pre-money valuation in USD."}
                    projectionYears: {type: integer, example: 3, description: "Number of years for financial projections."}
                    revenueForecast:
                      type: array
                      items: {type: number, format: float, example: 1000000, description: "Annual revenue forecast in USD."}
                    profitabilityEstimate: {type: string, example: "Achieve profitability within 24 months.", description: "Estimated time to profitability."}
            examples:
              SubmitBusinessPlan:
                summary: "Submit a business plan for review"
                value:
                  businessPlan: "Quantum-AI powered financial advisor platform leveraging neural networks for predictive analytics and hyper-personalized advice..."
                  foundingTeam:
                    - name: "Dr. Eleanor Vance"
                      role: "CEO & Lead AI Scientist"
                      experience: "15+ years in AI/ML, PhD in Quantum Computing, ex-Google Brain"
                    - name: "Marcus Thorne"
                      role: "COO & Finance Expert"
                      experience: "20+ years in Fintech, ex-Goldman Sachs"
                  marketOpportunity: "The booming digital finance market coupled with demand for truly personalized, AI-driven financial guidance presents a multi-billion dollar opportunity. Our unique quantum-AI approach provides unparalleled accuracy and foresight."
                  financialProjections:
                    seedRoundAmount: 2500000
                    valuationPreMoney: 10000000
                    projectionYears: 3
                    revenueForecast: [500000, 2000000, 6000000]
                    profitabilityEstimate: "Achieve profitability within 18 months."
      responses:
        "202":
          description: "The business plan was successfully ingested and is undergoing initial AI analysis. A unique pitch ID is provided for tracking progress."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
              examples:
                PitchSubmitted:
                  summary: "Successful pitch submission"
                  value:
                    pitchId: "pitch_qw_synergychain-xyz"
                    stage: "initial_review"
                    statusMessage: "Your business plan has been received and is undergoing initial review by Quantum Weaver."
                    lastUpdated: "2024-07-22T20:00:00Z"
                    nextSteps: "Please monitor for AI-generated feedback and potential questions within the next 48 hours."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /ai/incubator/pitch/{pitchId}/details:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Get Detailed AI Analysis & Feedback for a Business Pitch"
      description: "Retrieves the granular AI-driven analysis, strategic feedback, market validation results, and any outstanding questions from Quantum Weaver for a specific business pitch."
      operationId: "getQuantumWeaverPitchDetails"
      security:
        - oAuth2Auth: [read:weaver]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PitchId"
      responses:
        "200":
          description: "Comprehensive details of the pitch's current state, AI feedback, and next steps."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverDetailedState"
              examples:
                DetailedPitchState:
                  summary: "Detailed AI analysis and feedback for a business pitch"
                  value:
                    pitchId: "pitch_qw_synergychain-xyz"
                    stage: "feedback_required"
                    statusMessage: "Quantum Weaver has completed its initial analysis. Please review the feedback and answer the outstanding questions."
                    lastUpdated: "2024-07-22T21:00:00Z"
                    feedbackSummary: "Initial analysis indicates a strong market fit, but further detail is required on customer acquisition costs and scaling strategy."
                    questions:
                      - id: "q_qa-team-001"
                        question: "Please elaborate on the specific technical challenges you anticipate in deploying your quantum-inspired algorithms at scale, and how your team plans to mitigate these."
                        category: "technology"
                        isRequired: true
                      - id: "q_qa-market-002"
                        question: "Provide more granular projections for customer acquisition cost (CAC) for the first 12 months."
                        category: "market"
                        isRequired: true
                    nextSteps: "Please address the outstanding questions in the 'questions' array and resubmit feedback."
                    estimatedFundingOffer: 5000000
                    aiFinancialModel:
                      revenueBreakdown: {"Year 1": "2.5M", "Year 2": "7.8M", "Year 3": "15M"}
                      costStructureAnalysis: {"Fixed Costs": "30%", "Variable Costs": "40%", "R&D": "15%"}
                      breakevenPoint: "18 months"
                      capitalRequirements: 4500000
                      sensitivityAnalysis:
                        - scenario: "Aggressive Growth"
                          projectedIRR: 0.35
                          terminalValue: 50000000
                        - scenario: "Moderate Growth"
                          projectedIRR: 0.20
                          terminalValue: 30000000
                    aiMarketAnalysis:
                      targetMarketSize: "$50 Billion (TAM)"
                      competitiveAdvantages: ["Proprietary AI Algorithm", "First-mover advantage in quantum-AI finance"]
                      growthOpportunities: "Expansion into APAC region, new product lines (e.g., corporate treasury solutions)."
                      riskFactors: "Regulatory changes in AI governance, talent acquisition challenges."
                    aiCoachingPlan:
                      title: "Pre-Seed Fundraising Strategy"
                      summary: "This plan outlines key strategic steps to optimize your pitch deck, identify target investors, and prepare for due diligence to secure pre-seed funding."
                      steps:
                        - title: "Refine Investor Presentation"
                          description: "Update your pitch deck to incorporate recent market validation data and clearly articulate the competitive differentiation of SynergyChain AI, guided by feedback from Quantum Weaver."
                          timeline: "1-2 weeks"
                          status: "pending"
                          resources:
                            - name: "Pitch Deck Template"
                              url: "https://demobank.com/resources/pitch-template.pptx"
                        - title: "Market Research Deep Dive"
                          description: "Conduct further detailed market research to validate customer acquisition cost assumptions for enterprise clients."
                          timeline: "2 weeks"
                          status: "pending"
                    investorMatchScore: 0.88
                    aiRiskAssessment:
                      technicalRisk: "Medium (complex AI development, quantum compute dependencies)"
                      marketRisk: "Low (established market, clear pain points, strong value prop)"
                      teamRisk: "Low (experienced founding team with relevant domain expertise)"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitches:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "List All User Business Pitches"
      description: "Retrieves a summary list of all business pitches submitted by the authenticated user to Quantum Weaver."
      operationId: "listUserBusinessPitches"
      security:
        - oAuth2Auth: [read:weaver]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "status"
          in: "query"
          description: "Filter pitches by their current stage."
          schema:
            type: string
            enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
            example: "feedback_required"
      responses:
        "200":
          description: "A paginated list of business pitches."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit:
                    type: integer
                    example: 50
                    description: "The maximum number of items returned per page."
                  offset:
                    type: integer
                    example: 0
                    description: "The starting index of the list for pagination."
                  total:
                    type: integer
                    example: 3
                    description: "The total number of available items."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/QuantumWeaverState"
              examples:
                PitchSummaries:
                  summary: "Example list of business pitches"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - pitchId: "pitch_qw_synergychain-xyz"
                        stage: "feedback_required"
                        statusMessage: "Quantum Weaver has completed its initial analysis. Please review the feedback and answer the outstanding questions."
                        lastUpdated: "2024-07-22T21:00:00Z"
                        feedbackSummary: "Initial analysis indicates a strong market fit, but further detail is required on customer acquisition costs and scaling strategy."
                        questions:
                          - id: "q_qa-team-001"
                            question: "Please elaborate on technical challenges."
                            category: "technology"
                            isRequired: true
                        nextSteps: "Please address the outstanding questions."
                      - pitchId: "pitch_qw_fintech-ai-app"
                        stage: "approved_for_funding"
                        statusMessage: "Congratulations! Your pitch has been approved for seed funding."
                        lastUpdated: "2024-07-15T10:00:00Z"
                        estimatedFundingOffer: 1000000
                        nextSteps: "Contact our investment team to finalize terms."
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/incubator/pitch/{pitchId}/feedback:
    put:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit Feedback or Answers to AI Questions for a Business Pitch"
      description: "Allows the entrepreneur to respond to specific questions or provide additional details requested by Quantum Weaver, moving the pitch forward in the incubation process."
      operationId: "submitQuantumWeaverFeedback"
      security:
        - oAuth2Auth: [write:weaver]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PitchId"
      requestBody:
        required: true
        description: "Payload containing answers to AI questions or general feedback."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuantumWeaverFeedbackRequest"
            examples:
              SubmitFeedback:
                summary: "Submit answers to AI questions"
                value:
                  feedback: "Regarding the technical challenges, our team has allocated 3 months for R&D on quantum-resistant cryptography, mitigating the risk. We've also brought in Dr. Elena Petrova, a leading expert in secure multi-party computation."
                  answers:
                    - questionId: "q_qa-team-001"
                      answer: "Our mitigation strategy includes dedicated R&D and new hires with specific expertise."
                    - questionId: "q_qa-market-002"
                      answer: "Our CAC projections are based on pilot program results showing $500 per enterprise client with a conversion rate of 10% from trials."
      responses:
        "200":
          description: "Feedback submitted successfully. Pitch status updated."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
              examples:
                FeedbackSubmittedState:
                  summary: "Pitch state after successful feedback submission"
                  value:
                    pitchId: "pitch_qw_synergychain-xyz"
                    stage: "ai_analysis"
                    statusMessage: "Thank you for your feedback. Quantum Weaver is now re-evaluating your pitch based on the new information."
                    lastUpdated: "2024-07-22T22:00:00Z"
                    feedbackSummary: "Updated technical and market details provided."
                    questions: []
                    nextSteps: "The AI will provide updated analysis and next steps shortly."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/ads/generate:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate a Standard Video Ad with Veo 2.0"
      description: "Submits a request to generate a high-quality video ad using the advanced Veo 2.0 generative AI model. This is an asynchronous operation, suitable for standard ad content creation."
      operationId: "generateVideoAd"
      security:
        - oAuth2Auth: [write:ad_studio]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to generate a standard video ad using Veo 2.0."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GenerateVideoRequest"
            examples:
              GenerateStandardAd:
                summary: "Generate a 15-second cinematic ad"
                value:
                  prompt: "A captivating ad featuring a young entrepreneur using Demo Bank's AI tools to grow their startup. Focus on innovation and ease of use."
                  style: "Cinematic"
                  lengthSeconds: 15
                  aspectRatio: "16:9"
                  brandColors: ["#0000FF", "#FFD700"]
      responses:
        "202":
          description: "Video generation initiated. The response contains an operation ID to poll for status updates and retrieve the final asset."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                    example: "op-video-gen-12345-abcde"
                    description: "The unique identifier for the video generation operation."
                  estimatedCompletionTimeSeconds:
                    type: integer
                    description: "Estimated time until video generation is complete."
                    example: 300
              examples:
                AdGenerationInitiated:
                  summary: "Video generation initiated successfully"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    estimatedCompletionTimeSeconds: 300
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /ai/ads/generate/advanced:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate an Advanced Video Ad with Granular Controls"
      description: "Submits a highly customized request to generate a video ad, allowing fine-grained control over artistic style, aspect ratio, voiceover, background music, target audience, and call-to-action elements for professional-grade productions."
      operationId: "generateAdvancedVideoAd"
      security:
        - oAuth2Auth: [write:ad_studio]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Payload for advanced video ad generation with comprehensive customization options."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedGenerateVideoRequest"
            examples:
              GenerateAdvancedAd:
                summary: "Generate an advanced ad with voiceover and CTA"
                value:
                  prompt: "A professional ad showcasing Demo Bank's corporate finance solutions, targeting business owners. Highlight security and efficiency."
                  style: "Minimalist"
                  lengthSeconds: 30
                  aspectRatio: "16:9"
                  voiceoverText: "Demo Bank: Your business, powered by intelligent finance."
                  voiceoverStyle: "male_professional"
                  audienceTarget: "corporate"
                  callToAction:
                    text: "Learn more at DemoBank.com/business"
                    url: "https://demobank.com/business"
                    displayTimeSeconds: 5
                  brandAssets: ["https://demobank.com/assets/corporate_logo.png"]
      responses:
        "202":
          description: "Advanced video generation initiated. An operation ID is provided for polling status and fetching the final asset."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                    example: "op-adv-video-gen-xyz789-fghjk"
                    description: "The unique identifier for the advanced video generation operation."
                  estimatedCompletionTimeSeconds:
                    type: integer
                    description: "Estimated time until advanced video generation is complete. May be longer than standard generation."
                    example: 900
              examples:
                AdvancedAdGenerationInitiated:
                  summary: "Advanced video generation initiated successfully"
                  value:
                    operationId: "op-adv-video-gen-xyz789-fghjk"
                    estimatedCompletionTimeSeconds: 900
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "429":
          $ref: "#/components/responses/TooManyRequestsError"

  /ai/ads/operations/{operationId}:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Get Video Generation Status & Retrieve Asset"
      description: "Polls the real-time status of an asynchronous video generation operation. Once complete ('done'), the response includes a temporary, signed URL to access and download the generated video asset."
      operationId: "getVideoGenerationStatusAndAsset"
      security:
        - oAuth2Auth: [read:ad_studio]
        - apiKeyAuth: []
      parameters:
        - name: "operationId"
          in: "path"
          required: true
          description: "The unique identifier for the video generation operation."
          schema:
            type: string
            example: "op-video-gen-12345-abcde"
      responses:
        "200":
          description: "The current status of the video generation job. If 'done', the response includes the video URI and metadata."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VideoOperationStatus"
              examples:
                InProgress:
                  summary: "Video generation in progress"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    status: "rendering"
                    progressPercentage: 75
                    message: "Encoding final video with optimized codecs..."
                Completed:
                  summary: "Video generation completed"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    status: "done"
                    progressPercentage: 100
                    message: "Video generation successfully completed."
                    videoUri: "https://demobank-cdn.com/generated-videos/final/1a2b3c4d.mp4?sig=eyJ..."
                    previewImageUri: "https://demobank-cdn.com/generated-videos/preview/1a2b3c4d.png"
                Failed:
                  summary: "Video generation failed"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    status: "error"
                    progressPercentage: 50
                    message: "An error occurred during video generation."
                    errorMessage: "Failed to process prompt: 'Inappropriate content detected. Please adjust your request.'"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /ai/ads:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "List All Generated Video Ads"
      description: "Retrieves a list of all video advertisements previously generated by the user in the AI Ad Studio."
      operationId: "listGeneratedVideoAds"
      security:
        - oAuth2Auth: [read:ad_studio]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "status"
          in: "query"
          description: "Filter ads by their generation status."
          schema:
            type: string
            enum: [queued, generating, done, error]
            example: "done"
      responses:
        "200":
          description: "A paginated list of generated video ads."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit:
                    type: integer
                    example: 50
                    description: "The maximum number of items returned per page."
                  offset:
                    type: integer
                    example: 0
                    description: "The starting index of the list for pagination."
                  total:
                    type: integer
                    example: 10
                    description: "The total number of available items."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/VideoOperationStatus"
              examples:
                GeneratedAdsList:
                  summary: "Example list of generated video ads"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - operationId: "op-video-gen-12345-abcde"
                        status: "done"
                        progressPercentage: 100
                        message: "Video generation successfully completed."
                        videoUri: "https://demobank-cdn.com/generated-videos/final/1a2b3c4d.mp4?sig=eyJ..."
                        previewImageUri: "https://demobank-cdn.com/generated-videos/preview/1a2b3c4d.png"
                      - operationId: "op-adv-video-gen-xyz789-fghjk"
                        status: "done"
                        progressPercentage: 100
                        message: "Advanced video generation completed."
                        videoUri: "https://demobank-cdn.com/generated-videos/final/adv_1a2b3c4d.mp4?sig=eyJ..."
                        previewImageUri: "https://demobank-cdn.com/generated-videos/preview/adv_1a2b3c4d.png"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/cards:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "List All Corporate Enterprise Cards"
      description: "Retrieves a comprehensive list of all physical and virtual corporate cards associated with the user's organization, including their status, assigned holder, and current spending controls."
      operationId: "listCorporateCardsDetailed"
      security:
        - oAuth2Auth: [read:corporate_cards]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A detailed list of all corporate enterprise cards."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CorporateCard"
              examples:
                CorporateCardList:
                  summary: "Example list of corporate cards"
                  value:
                    - id: "corp_card_xyz987654"
                      holderName: "Alex Johnson"
                      associatedEmployeeId: "emp_ajohnson_007"
                      cardNumberMask: "4111********1234"
                      expirationDate: "2028-12-31"
                      status: "Active"
                      frozen: false
                      cardType: "physical"
                      controls:
                        atmWithdrawals: true
                        contactlessPayments: true
                        onlineTransactions: true
                        internationalTransactions: false
                        monthlyLimit: 2500.00
                        dailyLimit: 500.00
                        singleTransactionLimit: 1000.00
                        merchantCategoryRestrictions: ["Restaurants", "Travel", "Office Supplies"]
                        vendorRestrictions: ["Amazon", "Uber"]
                      spendingPolicyId: "policy_travel_eu"
                      createdDate: "2023-01-15T09:00:00Z"
                    - id: "corp_card_virtual_marketing"
                      holderName: "Marketing Campaign Q3"
                      associatedEmployeeId: "emp_marketing_01"
                      cardNumberMask: "5123********5678"
                      expirationDate: "2025-09-30"
                      status: "Active"
                      frozen: false
                      cardType: "virtual"
                      controls:
                        atmWithdrawals: false
                        contactlessPayments: false
                        onlineTransactions: true
                        internationalTransactions: false
                        monthlyLimit: 500.00
                        dailyLimit: 500.00
                        singleTransactionLimit: 200.00
                        merchantCategoryRestrictions: ["Advertising"]
                        vendorRestrictions: ["Facebook Ads", "Google Ads"]
                      spendingPolicyId: null
                      createdDate: "2024-07-01T10:00:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/cards/{cardId}/controls:
    put:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Update Granular Corporate Card Spending Controls"
      description: "Updates the sophisticated spending controls, limits, and policy overrides for a specific corporate card, enabling real-time adjustments for security and budget adherence."
      operationId: "updateCorporateCardControls"
      security:
        - oAuth2Auth: [write:corporate_cards]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
      requestBody:
        required: true
        description: "The updated spending controls and limits for the corporate card."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CorporateCardControls"
            examples:
              UpdateCardControls:
                summary: "Update card limits and international transactions"
                value:
                  monthlyLimit: 3000.00
                  dailyLimit: 750.00
                  internationalTransactions: true
                  merchantCategoryRestrictions: ["Software Subscriptions", "Conferences"]
      responses:
        "200":
          description: "The corporate card with its advanced controls updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
              examples:
                UpdatedCorporateCard:
                  summary: "Example of updated corporate card with new controls"
                  value:
                    id: "corp_card_xyz987654"
                    holderName: "Alex Johnson"
                    associatedEmployeeId: "emp_ajohnson_007"
                    cardNumberMask: "4111********1234"
                    expirationDate: "2028-12-31"
                    status: "Active"
                    frozen: false
                    cardType: "physical"
                    controls:
                      atmWithdrawals: true
                      contactlessPayments: true
                      onlineTransactions: true
                      internationalTransactions: true
                      monthlyLimit: 3000.00
                      dailyLimit: 750.00
                      singleTransactionLimit: 1000.00
                      merchantCategoryRestrictions: ["Software Subscriptions", "Conferences"]
                      vendorRestrictions: ["Amazon", "Uber"]
                    spendingPolicyId: "policy_travel_eu"
                    createdDate: "2023-01-15T09:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/cards/{cardId}/freeze:
    post:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Instantly Freeze or Unfreeze a Corporate Card"
      description: "Immediately changes the frozen status of a corporate card, preventing or allowing transactions in real-time, critical for security and expense management."
      operationId: "toggleCorporateCardFreeze"
      security:
        - oAuth2Auth: [write:corporate_cards]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - freeze
              properties:
                freeze:
                  type: boolean
                  description: "Set to `true` to freeze the card, `false` to unfreeze."
                  example: true
            examples:
              FreezeCard:
                summary: "Freeze a corporate card"
                value:
                  freeze: true
              UnfreezeCard:
                summary: "Unfreeze a corporate card"
                value:
                  freeze: false
      responses:
        "200":
          description: "The updated corporate card object reflecting the new frozen status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
              examples:
                CardFrozen:
                  summary: "Example of a frozen corporate card"
                  value:
                    id: "corp_card_xyz987654"
                    holderName: "Alex Johnson"
                    associatedEmployeeId: "emp_ajohnson_007"
                    cardNumberMask: "4111********1234"
                    expirationDate: "2028-12-31"
                    status: "Suspended"
                    frozen: true
                    cardType: "physical"
                    controls:
                      atmWithdrawals: true
                      contactlessPayments: true
                      onlineTransactions: true
                      internationalTransactions: false
                      monthlyLimit: 2500.00
                      dailyLimit: 500.00
                      singleTransactionLimit: 1000.00
                      merchantCategoryRestrictions: ["Restaurants", "Travel", "Office Supplies"]
                      vendorRestrictions: ["Amazon", "Uber"]
                    spendingPolicyId: "policy_travel_eu"
                    createdDate: "2023-01-15T09:00:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/cards/virtual:
    post:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Issue a New Virtual Corporate Card"
      description: "Creates and issues a new virtual corporate card with specified spending limits, merchant restrictions, and expiration dates, ideal for secure online purchases and temporary projects."
      operationId: "issueVirtualCorporateCard"
      security:
        - oAuth2Auth: [write:corporate_cards]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the new virtual card, including holder, limits, and purpose."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VirtualCardCreationRequest"
            examples:
              IssueMarketingCard:
                summary: "Issue a virtual card for marketing"
                value:
                  holderName: "Marketing Campaign Q4"
                  associatedEmployeeId: "emp_marketing_01"
                  purpose: "Online advertising for Q4 campaigns"
                  controls:
                    atmWithdrawals: false
                    contactlessPayments: false
                    onlineTransactions: true
                    internationalTransactions: false
                    monthlyLimit: 1000.00
                    dailyLimit: 500.00
                    singleTransactionLimit: 200.00
                    merchantCategoryRestrictions: ["Advertising"]
                    vendorRestrictions: ["Facebook Ads", "Google Ads"]
                  expirationDate: "2025-12-31"
      responses:
        "201":
          description: "Virtual corporate card issued successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
              examples:
                VirtualCardIssued:
                  summary: "Example of a newly issued virtual card"
                  value:
                    id: "corp_card_virtual_marketing_q4"
                    holderName: "Marketing Campaign Q4"
                    associatedEmployeeId: "emp_marketing_01"
                    cardNumberMask: "5123********5678"
                    expirationDate: "2025-12-31"
                    status: "Active"
                    frozen: false
                    cardType: "virtual"
                    controls:
                      atmWithdrawals: false
                      contactlessPayments: false
                      onlineTransactions: true
                      internationalTransactions: false
                      monthlyLimit: 1000.00
                      dailyLimit: 500.00
                      singleTransactionLimit: 200.00
                      merchantCategoryRestrictions: ["Advertising"]
                      vendorRestrictions: ["Facebook Ads", "Google Ads"]
                    spendingPolicyId: null
                    createdDate: "2024-07-22T16:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/cards/{cardId}/transactions:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
        - "Transactions & Insights"
      summary: "List Transactions for a Corporate Card"
      description: "Retrieves a paginated list of transactions made with a specific corporate card, including AI categorization and compliance flags."
      operationId: "getCorporateCardTransactions"
      security:
        - oAuth2Auth: [read:corporate_cards, read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
      responses:
        "200":
          description: "A paginated list of corporate card transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
              examples:
                CorporateCardTransactions:
                  summary: "Example transactions for a corporate card"
                  value:
                    limit: 2
                    offset: 0
                    total: 5
                    data:
                      - id: "corp_txn_google_ads_1"
                        accountId: "corp_card_virtual_marketing"
                        type: "expense"
                        category: "Advertising"
                        aiCategoryConfidence: 0.98
                        description: "Google Ads Payment"
                        merchantDetails:
                          name: "Google Ads"
                        amount: 150.00
                        currency: "USD"
                        date: "2024-07-10"
                        postedDate: "2024-07-11"
                        paymentChannel: "online"
                        disputeStatus: "none"
                      - id: "corp_txn_amazon_office"
                        accountId: "corp_card_xyz987654"
                        type: "expense"
                        category: "Office Supplies"
                        aiCategoryConfidence: 0.90
                        description: "Amazon.com"
                        merchantDetails:
                          name: "Amazon"
                        amount: 75.50
                        currency: "USD"
                        date: "2024-07-05"
                        postedDate: "2024-07-06"
                        paymentChannel: "online"
                        disputeStatus: "none"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/anomalies:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "List AI-Detected Financial Anomalies"
      description: "Retrieves a comprehensive list of AI-detected financial anomalies across transactions, payments, and corporate cards that require immediate review and potential action to mitigate risk and ensure compliance."
      operationId: "listFinancialAnomalies"
      security:
        - oAuth2Auth: [read:compliance]
        - apiKeyAuth: []
      parameters:
        - name: status
          in: query
          description: "Filter anomalies by their current review status."
          schema:
            type: string
            enum: [New, Under Review, Escalated, Dismissed, Resolved]
            default: New
            example: "New"
        - name: severity
          in: query
          description: "Filter anomalies by their AI-assessed severity level."
          schema:
            type: string
            enum: [Low, Medium, High, Critical]
            example: "Critical"
        - name: entityType
          in: query
          description: "Filter anomalies by the type of financial entity they are related to."
          schema:
            type: string
            enum: [PaymentOrder, Transaction, Counterparty, CorporateCard, Invoice]
            example: "Transaction"
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of AI-detected financial anomalies, prioritized by risk score."
          content:
            application/json:
              schema:
                type: object
                properties:
                  limit:
                    type: integer
                    example: 50
                    description: "The maximum number of items returned per page."
                  offset:
                    type: integer
                    example: 0
                    description: "The starting index of the list for pagination."
                  total:
                    type: integer
                    example: 120
                    description: "The total number of available items."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/FinancialAnomaly"
              examples:
                AnomalyList:
                  summary: "Example list of financial anomalies"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - id: "anom_risk-2024-07-21-D1E2F3"
                        description: "Unusual large transaction detected in an inactive account."
                        details: "Transaction of $15,000 to 'International Widgets Inc.' from account 'CHASE CHECKING 4567'. This account has been dormant for 6 months and typical transactions are under $500. High risk score due to dormancy and unusual amount/payee combination."
                        severity: "Critical"
                        status: "New"
                        entityType: "Transaction"
                        entityId: "txn_quantum-2024-07-21-A7B8C9"
                        timestamp: "2024-07-21T10:15:30Z"
                        riskScore: 95
                        aiConfidenceScore: 0.98
                        recommendedAction: "Immediately freeze associated corporate card and contact cardholder for verification."
                        relatedTransactions: ["txn_previous_small_txns"]
                      - id: "anom_risk-2024-07-22-E4F5G6"
                        description: "Multiple failed login attempts followed by successful login from new IP."
                        details: "Five failed login attempts from IP 192.0.2.10, immediately followed by a successful login from a new IP 203.0.113.20. Suggests possible credential stuffing attack."
                        severity: "High"
                        status: "Under Review"
                        entityType: "User"
                        entityId: "user-quantum-visionary-001"
                        timestamp: "2024-07-22T09:00:00Z"
                        riskScore: 88
                        aiConfidenceScore: 0.92
                        recommendedAction: "Request user to verify login via MFA, alert security team."
                        relatedTransactions: []
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/anomalies/{anomalyId}/status:
    put:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Update Anomaly Review Status"
      description: "Updates the review status of a specific financial anomaly, allowing compliance officers to mark it as dismissed, resolved, or escalate for further investigation after thorough AI-assisted and human review."
      operationId: "updateAnomalyStatus"
      security:
        - oAuth2Auth: [write:compliance]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AnomalyId"
      requestBody:
        required: true
        description: "Payload to update the review status of a financial anomaly."
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [Dismissed, Resolved, Under Review, Escalated]
                  description: "The new status for the financial anomaly."
                  example: "Resolved"
                resolutionNotes:
                  type: string
                  nullable: true
                  description: "Optional notes regarding the resolution or dismissal of the anomaly."
                  example: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."
            examples:
              ResolveAnomaly:
                summary: "Resolve an anomaly with notes"
                value:
                  status: "Resolved"
                  resolutionNotes: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."
      responses:
        "200":
          description: "The updated anomaly object with the new status and resolution notes."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialAnomaly"
              examples:
                AnomalyResolved:
                  summary: "Example of a resolved financial anomaly"
                  value:
                    id: "anom_risk-2024-07-21-D1E2F3"
                    description: "Unusual large transaction detected in an inactive account."
                    details: "Transaction of $15,000 to 'International Widgets Inc.' from account 'CHASE CHECKING 4567'. This account has been dormant for 6 months..."
                    severity: "Critical"
                    status: "Resolved"
                    entityType: "Transaction"
                    entityId: "txn_quantum-2024-07-21-A7B8C9"
                    timestamp: "2024-07-21T10:15:30Z"
                    riskScore: 95
                    aiConfidenceScore: 0.98
                    recommendedAction: "Immediately freeze associated corporate card and contact cardholder for verification."
                    relatedTransactions: ["txn_previous_small_txns"]
                    resolutionNotes: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/compliance/audits:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Request an AI-Driven Compliance Audit Report"
      description: "Initiates an AI-powered compliance audit for a specific period or scope, generating a comprehensive report detailing adherence to regulatory frameworks, internal policies, and flagging potential risks."
      operationId: "requestComplianceAudit"
      security:
        - oAuth2Auth: [write:compliance]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Parameters for the compliance audit, including scope and date range."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ComplianceAuditRequest"
            examples:
              RequestAMLPCICompliance:
                summary: "Request an AML and PCI-DSS compliance audit"
                value:
                  auditScope: "all_transactions"
                  startDate: "2024-01-01"
                  endDate: "2024-06-30"
                  regulatoryFrameworks: ["AML", "PCI-DSS"]
      responses:
        "202":
          description: "Compliance audit initiated. An audit ID is returned to check the status and retrieve the report."
          content:
            application/json:
              schema:
                type: object
                properties:
                  auditId:
                    type: string
                    example: "audit_corp_xyz789"
                    description: "Unique identifier for the initiated audit."
                  status:
                    type: string
                    enum: [initiated, processing, completed, failed]
                    example: "processing"
                    description: "Current status of the audit."
              examples:
                AuditInitiated:
                  summary: "Compliance audit initiated successfully"
                  value:
                    auditId: "audit_corp_xyz789"
                    status: "processing"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/compliance/audits/{auditId}/report:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Retrieve AI-Generated Compliance Audit Report"
      description: "Retrieves the full report generated by an AI-driven compliance audit."
      operationId: "getComplianceAuditReport"
      security:
        - oAuth2Auth: [read:compliance]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AuditId"
      responses:
        "200":
          description: "The comprehensive compliance audit report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ComplianceAuditReport"
              examples:
                AuditReport:
                  summary: "Example of a comprehensive compliance audit report"
                  value:
                    auditId: "audit_corp_xyz789"
                    status: "completed"
                    auditDate: "2024-07-22T19:00:00Z"
                    periodCovered:
                      startDate: "2024-01-01"
                      endDate: "2024-06-30"
                    overallComplianceScore: 92
                    summary: "Overall high compliance across all transaction types. Minor areas for improvement identified in expense reporting related to receipt documentation."
                    findings:
                      - type: "recommendation"
                        severity: "Low"
                        description: "Several small transactions lacked complete receipt documentation in the expense management system."
                        relatedEntities: ["txn_abc123", "txn_def456"]
                      - type: "observation"
                        severity: "Low"
                        description: "Automated sanction screening system shows 99.8% coverage, with 0.2% requiring manual review."
                    recommendedActions:
                      - id: "insight-receipt-compliance-004"
                        title: "Improve Receipt Submission Compliance"
                        description: "Implement automated reminders for employees to upload receipts for all transactions above $20."
                        category: "compliance"
                        severity: "low"
                        actionableRecommendation: "Configure expense system rules."
                        timestamp: "2024-07-22T19:05:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/sanction-screening:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Perform Real-time Sanction Screening"
      description: "Executes a real-time screening of an individual or entity against global sanction lists and watchlists."
      operationId: "performSanctionScreening"
      security:
        - oAuth2Auth: [read:compliance]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to perform a sanction screening."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SanctionScreeningRequest"
            examples:
              ScreenIndividual:
                summary: "Screen an individual"
                value:
                  name: "John Doe"
                  country: "US"
                  dateOfBirth: "1970-01-01"
                  entityType: "individual"
              ScreenCompany:
                summary: "Screen an organization"
                value:
                  name: "Global Widgets Corp."
                  country: "CH"
                  entityType: "organization"
      responses:
        "200":
          description: "Sanction screening results."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SanctionScreeningResponse"
              examples:
                ClearScreening:
                  summary: "Clear screening result"
                  value:
                    screeningId: "screen_xyz456"
                    matchFound: false
                    matchDetails: []
                    screeningTimestamp: "2024-07-22T19:30:00Z"
                    status: "clear"
                PotentialMatch:
                  summary: "Potential match found in screening"
                  value:
                    screeningId: "screen_abc789"
                    matchFound: true
                    matchDetails:
                      - listName: "OFAC SDN List"
                        matchedName: "John Doe A.K.A. J. D."
                        reason: "Possible alias match based on name and DOB."
                        score: 0.85
                    screeningTimestamp: "2024-07-22T19:35:00Z"
                    status: "potential_match"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /web3/wallets:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "List Connected Crypto Wallets"
      description: "Retrieves a list of all securely linked cryptocurrency wallets (e.g., MetaMask, Ledger integration), showing their addresses, associated networks, and verification status."
      operationId: "listCryptoWallets"
      security:
        - oAuth2Auth: [read:web3]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of connected cryptocurrency wallets."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CryptoWalletConnection"
              examples:
                WalletList:
                  summary: "Example list of connected crypto wallets"
                  value:
                    - id: "wallet_conn_eth_0xabc123"
                      walletProvider: "MetaMask"
                      walletAddress: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
                      blockchainNetwork: "Ethereum"
                      status: "connected"
                      lastSynced: "2024-07-22T13:00:00Z"
                      readAccessGranted: true
                      writeAccessGranted: false
                    - id: "wallet_conn_sol_0xdef456"
                      walletProvider: "Phantom"
                      walletAddress: "0x2A1B3C4D5E6F7A8B9C0D1E2F3A4B5C6D7E8F9A0B"
                      blockchainNetwork: "Solana"
                      status: "connected"
                      lastSynced: "2024-07-22T12:45:00Z"
                      readAccessGranted: true
                      writeAccessGranted: false
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "Connect a New Crypto Wallet"
      description: "Initiates the process to securely connect a new cryptocurrency wallet to the user's Demo Bank profile, typically involving a signed message or OAuth flow from the wallet provider."
      operationId: "connectCryptoWallet"
      security:
        - oAuth2Auth: [write:web3]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for connecting a new crypto wallet, including the wallet type and signature/proof."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConnectWalletRequest"
            examples:
              ConnectMetaMask:
                summary: "Connect a MetaMask wallet"
                value:
                  walletAddress: "0x123abc456def7890..."
                  walletProvider: "MetaMask"
                  signedMessage: "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                  blockchainNetwork: "Ethereum"
      responses:
        "201":
          description: "Wallet connection initiated or confirmed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoWalletConnection"
              examples:
                WalletConnected:
                  summary: "Example of a newly connected crypto wallet"
                  value:
                    id: "wallet_conn_eth_0x123abc"
                    walletProvider: "MetaMask"
                    walletAddress: "0x123abc456def7890123abc456def7890123abc456def"
                    blockchainNetwork: "Ethereum"
                    status: "connected"
                    lastSynced: "2024-07-22T20:00:00Z"
                    readAccessGranted: true
                    writeAccessGranted: false
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /web3/wallets/{walletId}/balances:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Get Crypto Asset Balances for a Wallet"
      description: "Retrieves the current balances of all recognized crypto assets within a specific connected wallet."
      operationId: "getCryptoWalletBalances"
      security:
        - oAuth2Auth: [read:web3]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/WalletId"
      responses:
        "200":
          description: "A list of crypto asset balances."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CryptoAssetBalance"
              examples:
                WalletBalances:
                  summary: "Example crypto asset balances"
                  value:
                    - assetSymbol: "ETH"
                      assetName: "Ethereum"
                      balance: 2.5
                      usdValue: 7500.00
                      contractAddress: "0x..."
                    - assetSymbol: "USDC"
                      assetName: "USD Coin"
                      balance: 1000.00
                      usdValue: 1000.00
                      contractAddress: "0x..."
                    - assetSymbol: "LINK"
                      assetName: "Chainlink"
                      balance: 50.0
                      usdValue: 700.00
                      contractAddress: "0x..."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/nfts:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Retrieve User's NFT Collection"
      description: "Fetches a comprehensive list of Non-Fungible Tokens (NFTs) owned by the user across all connected wallets and supported blockchain networks, including metadata and market values."
      operationId: "getUserNFTCollection"
      security:
        - oAuth2Auth: [read:web3]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of the user's NFT assets."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NFTAsset"
              examples:
                NFTCollection:
                  summary: "Example NFT collection"
                  value:
                    - id: "nft_bored_ape_yacht_club_1234"
                      collectionName: "Bored Ape Yacht Club"
                      name: "Bored Ape #1234"
                      description: "A unique digital collectible from the Bored Ape Yacht Club series."
                      imageUrl: "https://opensea.io/assets/ethereum/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d/1234"
                      blockchainNetwork: "Ethereum"
                      ownerAddress: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
                      contractAddress: "0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d"
                      tokenId: "1234"
                      lastSalePriceUSD: 150000.00
                      estimatedValueUSD: 160000.00
                      attributes:
                        - trait_type: "Background"
                          value: "Blue"
                        - trait_type: "Fur"
                          value: "Brown"
                    - id: "nft_cryptopunk_5678"
                      collectionName: "CryptoPunks"
                      name: "CryptoPunk #5678"
                      imageUrl: "https://larvalabs.com/cryptopunks/punk5678.png"
                      blockchainNetwork: "Ethereum"
                      ownerAddress: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
                      contractAddress: "0xb47e3cd837ddf8e4c57f05d70ab865de6e193bbb"
                      tokenId: "5678"
                      lastSalePriceUSD: 200000.00
                      estimatedValueUSD: 210000.00
                      attributes:
                        - trait_type: "Accessory"
                          value: "Headband"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/transactions/initiate:
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Initiate a Cryptocurrency Transfer"
      description: "Prepares and initiates a cryptocurrency transfer from a connected wallet to a specified recipient address. Requires user confirmation (e.g., via wallet signature)."
      operationId: "initiateCryptoTransfer"
      security:
        - oAuth2Auth: [write:web3]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to initiate a cryptocurrency transfer."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CryptoTransferRequest"
            examples:
              InitiateETHTransfer:
                summary: "Initiate an ETH transfer"
                value:
                  sourceWalletId: "wallet_conn_eth_0xabc123"
                  recipientAddress: "0xdef4567890abcdef1234567890abcdef1234567890"
                  amount: 0.1
                  assetSymbol: "ETH"
                  blockchainNetwork: "Ethereum"
                  gasPriceGwei: 50
                  memo: "Payment for services"
      responses:
        "202":
          description: "Crypto transfer initiated. Awaiting user signature/confirmation."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoTransferStatus"
              examples:
                TransferPendingSignature:
                  summary: "Crypto transfer initiated, pending signature"
                  value:
                    transferId: "crypto_txn_xyz789"
                    status: "pending_signature"
                    blockchainTxnHash: null
                    message: "Please confirm the transaction in your MetaMask wallet."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /payments/international/initiate:
    post:
      tags:
        - "Global Payments & FX"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Initiate an International Wire Transfer"
      description: "Facilitates the secure initiation of an international wire transfer to a beneficiary in another country and currency, leveraging optimal FX rates and tracking capabilities."
      operationId: "initiateInternationalPayment"
      security:
        - oAuth2Auth: [write:payments, write:corporate_payments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the international payment, including beneficiary, amount, currency, and bank details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InternationalPaymentRequest"
            examples:
              InitiateEURTransfer:
                summary: "Initiate an international transfer to Germany"
                value:
                  sourceAccountId: "acc_chase_checking_4567"
                  amount: 5000.00
                  sourceCurrency: "USD"
                  targetCurrency: "EUR"
                  beneficiary:
                    name: "Maria Schmidt"
                    address: "Hauptstrasse 1, 10115 Berlin, Germany"
                    bankName: "Deutsche Bank"
                    iban: "DE89370400440532013000"
                    swiftBic: "DEUTDEFF"
                  purpose: "Vendor payment for Q2 services."
                  fxRateLock: true
                  fxRateProvider: "proprietary_ai"
      responses:
        "202":
          description: "International payment initiated and is being processed. A payment ID is provided for tracking."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
              examples:
                PaymentInitiated:
                  summary: "International payment initiated successfully"
                  value:
                    paymentId: "int_pmt_xyz7890"
                    status: "in_progress"
                    sourceAmount: 5000.00
                    sourceCurrency: "USD"
                    targetAmount: 4500.00
                    targetCurrency: "EUR"
                    fxRateApplied: 0.90
                    estimatedCompletionTime: "2024-07-23T15:00:00Z"
                    trackingUrl: "https://demobank.com/payments/track/xyz7890"
                    feesApplied: 15.00
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /payments/fx/rates:
    get:
      tags:
        - "Global Payments & FX"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time & Predictive Foreign Exchange Rates"
      description: "Retrieves current and AI-predicted future foreign exchange rates for a specified currency pair, including bid/ask spreads and historical volatility data for informed decisions."
      operationId: "getFxRates"
      security:
        - oAuth2Auth: [read:fx_rates, read:analytics]
        - apiKeyAuth: []
      parameters:
        - name: "baseCurrency"
          in: "query"
          required: true
          description: "The base currency code (e.g., USD)."
          schema:
            type: string
            example: "USD"
        - name: "targetCurrency"
          in: "query"
          required: true
          description: "The target currency code (e.g., EUR)."
          schema:
            type: string
            example: "EUR"
        - name: "forecastDays"
          in: "query"
          description: "Number of days into the future to provide an AI-driven prediction."
          schema:
            type: integer
            minimum: 1
            maximum: 30
            default: 7
            example: 7
      responses:
        "200":
          description: "Real-time and predictive foreign exchange rates."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FxRateResponse"
              examples:
                FxRates:
                  summary: "Example FX rates with prediction"
                  value:
                    baseCurrency: "USD"
                    targetCurrency: "EUR"
                    currentRate:
                      bid: 0.9025
                      ask: 0.9035
                      mid: 0.9030
                      timestamp: "2024-07-22T13:30:00Z"
                    predictiveRates:
                      - date: "2024-07-29"
                        predictedMidRate: 0.9050
                        confidenceIntervalLower: 0.9010
                        confidenceIntervalUpper: 0.9090
                        aiModelConfidence: 0.88
                      - date: "2024-08-05"
                        predictedMidRate: 0.9065
                        confidenceIntervalLower: 0.9020
                        confidenceIntervalUpper: 0.9110
                        aiModelConfidence: 0.85
                    historicalVolatility:
                      past7Days: 0.005
                      past30Days: 0.012
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /payments/international/{paymentId}/status:
    get:
      tags:
        - "Global Payments & FX"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get Status of an International Payment"
      description: "Retrieves the current processing status and details of an initiated international payment."
      operationId: "getInternationalPaymentStatus"
      security:
        - oAuth2Auth: [read:payments, read:corporate_payments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PaymentId"
      responses:
        "200":
          description: "Current status of the international payment."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
              examples:
                PaymentStatusCompleted:
                  summary: "International payment status (completed)"
                  value:
                    paymentId: "int_pmt_xyz7890"
                    status: "completed"
                    sourceAmount: 5000.00
                    sourceCurrency: "USD"
                    targetAmount: 4500.00
                    targetCurrency: "EUR"
                    fxRateApplied: 0.90
                    estimatedCompletionTime: "2024-07-23T15:00:00Z"
                    trackingUrl: "https://demobank.com/payments/track/xyz7890"
                    feesApplied: 15.00
                PaymentStatusHeld:
                  summary: "International payment status (held for review)"
                  value:
                    paymentId: "int_pmt_abc1234"
                    status: "held_for_review"
                    sourceAmount: 10000.00
                    sourceCurrency: "USD"
                    targetAmount: 8800.00
                    targetCurrency: "GBP"
                    fxRateApplied: 0.88
                    estimatedCompletionTime: null
                    trackingUrl: null
                    feesApplied: 25.00
                    message: "Payment held for compliance review. Additional documentation may be requested."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /payments/fx/convert:
    post:
      tags:
        - "Global Payments & FX"
      summary: "Initiate a Currency Conversion"
      description: "Executes an instant currency conversion between two currencies, either from a balance or into a specified account."
      operationId: "initiateCurrencyConversion"
      security:
        - oAuth2Auth: [write:payments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to initiate a currency conversion."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CurrencyConversionRequest"
            examples:
              ConvertUSDToEUR:
                summary: "Convert 1000 USD to EUR"
                value:
                  sourceAccountId: "acc_chase_checking_4567"
                  targetAccountId: "acc_euro_savings_9876"
                  sourceAmount: 1000.00
                  sourceCurrency: "USD"
                  targetCurrency: "EUR"
                  fxRateLock: true
      responses:
        "200":
          description: "Currency conversion completed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CurrencyConversionResponse"
              examples:
                ConversionSuccess:
                  summary: "Successful currency conversion"
                  value:
                    conversionId: "fx_conv_abc123"
                    status: "completed"
                    sourceAmount: 1000.00
                    sourceCurrency: "USD"
                    targetAmount: 920.50
                    fxRateApplied: 0.9205
                    feesApplied: 5.00
                    conversionTimestamp: "2024-07-22T13:45:00Z"
                    transactionId: "txn_fx_conv_abc123-20240722"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /sustainability/carbon-footprint:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Retrieve Personal Carbon Footprint Report"
      description: "Generates a detailed report of the user's estimated carbon footprint based on transaction data, lifestyle choices, and AI-driven impact assessments, offering insights and reduction strategies."
      operationId: "getPersonalCarbonFootprint"
      security:
        - oAuth2Auth: [read:profile, read:transactions, read:sustainability]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A comprehensive personal carbon footprint report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonFootprintReport"
              examples:
                CarbonFootprintReportExample:
                  summary: "Example personal carbon footprint report"
                  value:
                    reportId: "cf_report_2024-Q2"
                    period: "April - June 2024"
                    totalCarbonFootprintKgCO2e: 1250.7
                    breakdownByCategory:
                      - category: "Transportation"
                        carbonFootprintKgCO2e: 450.2
                        percentage: 36.0
                      - category: "Food"
                        carbonFootprintKgCO2e: 300.5
                        percentage: 24.0
                      - category: "Housing"
                        carbonFootprintKgCO2e: 250.0
                        percentage: 20.0
                    aiInsights:
                      - id: "insight-transport-carbon-001"
                        title: "Reduce Commute Carbon"
                        description: "Your daily commute contributes significantly to your carbon footprint. Consider carpooling or public transport."
                        category: "sustainability"
                        severity: "medium"
                        actionableRecommendation: "Explore green commuting options."
                        timestamp: "2024-07-22T16:00:00Z"
                    offsetRecommendations:
                      - project: "Amazon Reforestation Project"
                        costPerTonUSD: 25.00
                        offsetAmountKgCO2e: 1250.7
                        totalCostUSD: 31.27
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /sustainability/investments/impact:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Investments & Portfolio Intelligence"
      summary: "Analyze ESG Impact of Investment Portfolio"
      description: "Provides an AI-driven analysis of the Environmental, Social, and Governance (ESG) impact of the user's entire investment portfolio, benchmarking against industry standards and suggesting more sustainable alternatives."
      operationId: "getInvestmentESGImpact"
      security:
        - oAuth2Auth: [read:accounts, read:investments, read:sustainability]
        - apiKeyAuth: []
      responses:
        "200":
          description: "An analysis of the ESG impact of the investment portfolio."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentESGImpact"
              examples:
                ESGImpactReport:
                  summary: "Example ESG impact analysis of an investment portfolio"
                  value:
                    portfolioId: "portfolio_equity_growth"
                    overallESGScore: 7.8
                    benchmarkESGScore: 6.5
                    breakdownByESGFactors:
                      environmentalScore: 7.0
                      socialScore: 8.5
                      governanceScore: 8.0
                    topESGHoldings:
                      - assetSymbol: "TSLA"
                        assetName: "Tesla Inc."
                        esgScore: 9.1
                      - assetSymbol: "MSFT"
                        assetName: "Microsoft Corp."
                        esgScore: 8.9
                    lowestESGHoldings:
                      - assetSymbol: "XOM"
                        assetName: "ExxonMobil Corp."
                        esgScore: 4.5
                      - assetSymbol: "BAC"
                        assetName: "Bank of America"
                        esgScore: 6.0
                    aiRecommendations:
                      - id: "insight-esg-diversify-002"
                        title: "Enhance ESG Diversification"
                        description: "Your portfolio has a strong ESG profile, but could be further improved by reducing exposure to companies with lower ESG scores in the energy sector."
                        category: "sustainability"
                        severity: "low"
                        actionableRecommendation: "Explore alternative energy ETFs or green bonds."
                        timestamp: "2024-07-22T16:15:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /sustainability/carbon-offsets:
    post:
      tags:
        - "Sustainability & ESG Impact"
      summary: "Purchase Carbon Offsets"
      description: "Allows users to purchase carbon offsets to neutralize their estimated carbon footprint, supporting environmental initiatives."
      operationId: "purchaseCarbonOffsets"
      security:
        - oAuth2Auth: [write:sustainability, write:payments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to purchase carbon offsets."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CarbonOffsetPurchaseRequest"
            examples:
              PurchaseOffsets:
                summary: "Purchase 500kg of carbon offsets"
                value:
                  amountKgCO2e: 500.0
                  paymentAccountId: "acc_chase_checking_4567"
                  offsetProject: "Verified Carbon Standard Project X"
      responses:
        "200":
          description: "Carbon offsets purchased successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonOffsetPurchaseResponse"
              examples:
                OffsetPurchased:
                  summary: "Carbon offsets purchased successfully"
                  value:
                    purchaseId: "co_purchase_xyz123"
                    amountOffsetKgCO2e: 500.0
                    totalCostUSD: 12.50
                    projectSupported: "Verified Carbon Standard Project X"
                    transactionId: "txn_offset_12345"
                    purchaseDate: "2024-07-22T14:00:00Z"
                    certificateUrl: "https://demobank.com/certificates/co_purchase_xyz123.pdf"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /lending/applications:
    post:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Submit a Loan Application with AI Underwriting"
      description: "Submits a new loan application, which is instantly processed and underwritten by our Quantum AI, providing rapid decisions and personalized loan offers based on real-time financial health data."
      operationId: "submitLoanApplication"
      security:
        - oAuth2Auth: [write:lending, read:profile, read:accounts, read:transactions, read:credit]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The loan application details, including desired amount, purpose, and term."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoanApplicationRequest"
            examples:
              SubmitPersonalLoan:
                summary: "Submit a personal loan application"
                value:
                  loanAmount: 10000.00
                  loanPurpose: "home_improvement"
                  repaymentTermMonths: 36
                  additionalNotes: "Funds needed to replace a broken HVAC system."
              SubmitLoanWithCoApplicant:
                summary: "Submit a loan with a co-applicant"
                value:
                  loanAmount: 25000.00
                  loanPurpose: "debt_consolidation"
                  repaymentTermMonths: 60
                  coApplicant:
                    name: "Jane Doe"
                    email: "jane.doe@example.com"
                    income: 75000.00
      responses:
        "202":
          description: "Loan application submitted. The AI is evaluating and will provide a decision shortly."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
              examples:
                ApplicationSubmitted:
                  summary: "Loan application submitted, in underwriting"
                  value:
                    applicationId: "loan_app_creditflow-123"
                    status: "underwriting"
                    loanAmountRequested: 10000.00
                    loanPurpose: "home_improvement"
                    applicationDate: "2024-07-22T15:00:00Z"
                    nextSteps: "Your application is currently under review by our AI. You will receive an update within minutes."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /lending/applications/{applicationId}:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Loan Application Status & Details"
      description: "Retrieves the current status and detailed information for a submitted loan application, including AI underwriting outcomes, approved terms, and next steps."
      operationId: "getLoanApplicationDetails"
      security:
        - oAuth2Auth: [read:lending]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ApplicationId"
      responses:
        "200":
          description: "Detailed status and terms of the loan application."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
              examples:
                ApplicationApproved:
                  summary: "Loan application approved with offer details"
                  value:
                    applicationId: "loan_app_creditflow-123"
                    status: "approved"
                    loanAmountRequested: 10000.00
                    loanPurpose: "home_improvement"
                    applicationDate: "2024-07-22T15:00:00Z"
                    aiUnderwritingResult:
                      decision: "approved"
                      reason: "Strong credit score and consistent income history."
                      recommendedInterestRate: 6.5
                      maxApprovedAmount: 12000.00
                      aiConfidence: 0.95
                    offerDetails:
                      offerId: "offer_pers_loan_001"
                      offerType: "personal_loan"
                      amount: 10000.00
                      interestRate: 6.5
                      repaymentTermMonths: 36
                      monthlyPayment: 306.45
                      originationFee: 150.00
                      totalRepayable: 11032.20
                      expirationDate: "2024-08-31"
                      isPreApproved: false
                      aiPersonalizationScore: 0.90
                    nextSteps: "Review your offer details and accept the loan to proceed with funding."
                ApplicationDeclined:
                  summary: "Loan application declined"
                  value:
                    applicationId: "loan_app_creditflow-456"
                    status: "declined"
                    loanAmountRequested: 5000.00
                    loanPurpose: "debt_consolidation"
                    applicationDate: "2024-07-22T15:30:00Z"
                    aiUnderwritingResult:
                      decision: "declined"
                      reason: "Insufficient income for requested loan amount and high existing debt-to-income ratio."
                      recommendedInterestRate: null
                      maxApprovedAmount: 0.00
                      aiConfidence: 0.98
                    nextSteps: "Consider reviewing our AI-generated credit improvement plan to enhance your financial standing for future applications."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /lending/offers/pre-approved:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Pre-Approved Loan Offers"
      description: "Retrieves a list of personalized, pre-approved loan offers generated by the AI based on the user's financial profile and credit health."
      operationId: "getPreApprovedLoanOffers"
      security:
        - oAuth2Auth: [read:lending, read:credit]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of pre-approved loan offers."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/LoanOffer"
              examples:
                PreApprovedOffers:
                  summary: "Example list of pre-approved loan offers"
                  value:
                    - offerId: "offer_pre_app_001"
                      offerType: "personal_loan"
                      amount: 15000.00
                      interestRate: 4.5
                      repaymentTermMonths: 60
                      monthlyPayment: 280.00
                      originationFee: 0.00
                      totalRepayable: 16800.00
                      expirationDate: "2024-08-31"
                      isPreApproved: true
                      aiPersonalizationScore: 0.95
                    - offerId: "offer_pre_app_002"
                      offerType: "credit_line"
                      amount: 5000.00
                      interestRate: 8.99
                      repaymentTermMonths: null
                      monthlyPayment: null
                      originationFee: 50.00
                      totalRepayable: null
                      expirationDate: "2024-09-15"
                      isPreApproved: true
                      aiPersonalizationScore: 0.88
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/webhooks:
    get:
      tags:
        - "Developer Tools & API Management"
      summary: "List Webhook Subscriptions"
      description: "Retrieves a list of all active webhook subscriptions for the authenticated developer application, detailing endpoint URLs, subscribed events, and current status."
      operationId: "listWebhookSubscriptions"
      security:
        - oAuth2Auth: [read:developer_tools]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of active webhook subscriptions."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/WebhookSubscription"
              examples:
                WebhookSubscriptions:
                  summary: "Example list of webhook subscriptions"
                  value:
                    - id: "whsub_devtool_finance_events"
                      callbackUrl: "https://my-app.com/webhooks/demobank-events"
                      events: ["transaction.created", "account.updated", "user.login_failed"]
                      status: "active"
                      lastTriggered: "2024-07-22T17:00:00Z"
                      failureCount: 0
                    - id: "whsub_alert_system"
                      callbackUrl: "https://alert-system.com/demobank-alerts"
                      events: ["security.critical_alert"]
                      status: "paused"
                      lastTriggered: "2024-07-20T08:00:00Z"
                      failureCount: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Developer Tools & API Management"
      summary: "Create a New Webhook Subscription"
      description: "Establishes a new webhook subscription, allowing a developer application to receive real-time notifications for specified events (e.g., new transaction, account update) via a provided callback URL."
      operationId: "createWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the new webhook subscription, including callback URL and desired event types."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionCreationRequest"
            examples:
              CreateTransactionWebhook:
                summary: "Create a webhook for transaction events"
                value:
                  callbackUrl: "https://my-analytics-app.com/webhooks/transactions"
                  events: ["transaction.created", "transaction.updated"]
                  secret: "my_custom_webhook_secret_123"
      responses:
        "201":
          description: "Webhook subscription created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
              examples:
                WebhookCreated:
                  summary: "Example of a newly created webhook subscription"
                  value:
                    id: "whsub_analytics_txns"
                    callbackUrl: "https://my-analytics-app.com/webhooks/transactions"
                    events: ["transaction.created", "transaction.updated"]
                    status: "active"
                    secret: null # Secret is not returned on GET, only generated once
                    lastTriggered: null
                    failureCount: 0
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/webhooks/{subscriptionId}:
    put:
      tags:
        - "Developer Tools & API Management"
      summary: "Update Webhook Subscription"
      description: "Modifies an existing webhook subscription, allowing changes to the callback URL, subscribed events, or activation status."
      operationId: "updateWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      requestBody:
        required: true
        description: "The updated webhook subscription details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionUpdateRequest"
            examples:
              UpdateWebhookStatus:
                summary: "Pause a webhook subscription"
                value:
                  status: "paused"
              UpdateWebhookURLAndEvents:
                summary: "Update URL and subscribed events"
                value:
                  callbackUrl: "https://my-new-app.com/webhooks/demobank-events"
                  events: ["transaction.created", "user.login_failed"]
      responses:
        "200":
          description: "Webhook subscription updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
              examples:
                WebhookUpdated:
                  summary: "Example of an updated webhook subscription"
                  value:
                    id: "whsub_devtool_finance_events"
                    callbackUrl: "https://my-new-app.com/webhooks/demobank-events"
                    events: ["transaction.created", "user.login_failed"]
                    status: "active"
                    secret: null
                    lastTriggered: "2024-07-22T17:00:00Z"
                    failureCount: 0
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Developer Tools & API Management"
      summary: "Delete Webhook Subscription"
      description: "Deletes an existing webhook subscription, stopping all future event notifications to the specified callback URL."
      operationId: "deleteWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      responses:
        "204":
          description: "Webhook subscription deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /developers/api-keys:
    get:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Developer API Keys"
      description: "Retrieves a list of API keys issued to the authenticated developer application."
      operationId: "listApiKeys"
      security:
        - oAuth2Auth: [read:developer_tools]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of API keys."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ApiKey"
              examples:
                ApiKeyList:
                  summary: "Example list of API keys"
                  value:
                    - id: "api_key_dev_app_01"
                      prefix: "db_pk_test_"
                      status: "active"
                      createdAt: "2024-01-01T10:00:00Z"
                      expiresAt: "2025-01-01T10:00:00Z"
                      scopes: ["read:accounts", "write:payments"]
                      lastUsed: "2024-07-22T17:15:00Z"
                    - id: "api_key_webhook_validator"
                      prefix: "db_sk_prod_"
                      status: "active"
                      createdAt: "2023-05-01T11:00:00Z"
                      expiresAt: null
                      scopes: ["webhook:events"]
                      lastUsed: "2024-07-22T17:30:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Create a New Developer API Key"
      description: "Generates a new API key for the developer application with specified scopes and an optional expiration."
      operationId: "createApiKey"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new developer API key."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ApiKeyCreationRequest"
            examples:
              CreateNewKey:
                summary: "Create a new API key with limited scopes"
                value:
                  name: "My Analytics Service Key"
                  scopes: ["read:accounts", "read:transactions"]
                  expiresInDays: 90
      responses:
        "201":
          description: "API key created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKey"
              examples:
                ApiKeyCreated:
                  summary: "Example of a newly created API key"
                  value:
                    id: "api_key_analytics_service"
                    prefix: "db_pk_test_"
                    status: "active"
                    createdAt: "2024-07-22T18:00:00Z"
                    expiresAt: "2024-10-20T18:00:00Z"
                    scopes: ["read:accounts", "read:transactions"]
                    lastUsed: null
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/api-keys/{keyId}:
    delete:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Revoke a Developer API Key"
      description: "Revokes an existing API key, disabling its access immediately."
      operationId: "revokeApiKey"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ApiKeyId"
      responses:
        "204":
          description: "API key revoked successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /identity/kyc/submit:
    post:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Submit KYC Documentation for Verification"
      description: "Submits Know Your Customer (KYC) documentation, such as identity proofs and address verification, for AI-accelerated compliance and identity verification, crucial for higher service tiers and regulatory adherence."
      operationId: "submitKYCDocuments"
      security:
        - oAuth2Auth: [write:identity]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The KYC document submission payload, potentially including base64 encoded images or links to secure document stores."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/KYCDocumentSubmission"
            examples:
              SubmitDriversLicense:
                summary: "Submit a driver's license for KYC"
                value:
                  documentType: "drivers_license"
                  documentFrontImage: "base64encoded_image_of_drivers_license_front"
                  documentBackImage: "base64encoded_image_of_drivers_license_back"
                  documentNumber: "ABC12345"
                  issueDate: "2020-01-01"
                  expirationDate: "2030-01-01"
                  countryOfIssue: "US"
      responses:
        "202":
          description: "KYC documentation submitted and undergoing AI-powered verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
              examples:
                KYCSubmitted:
                  summary: "KYC submission status: in review"
                  value:
                    userId: "user-quantum-visionary-001"
                    overallStatus: "in_review"
                    lastSubmissionDate: "2024-07-22T18:00:00Z"
                    requiredActions: []
                    verifiedTier: null
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /identity/kyc/status:
    get:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Get Current KYC Verification Status"
      description: "Retrieves the current status of the user's Know Your Customer (KYC) verification process."
      operationId: "getKYCStatus"
      security:
        - oAuth2Auth: [read:identity]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current KYC verification status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
              examples:
                KYCVerified:
                  summary: "KYC status: verified (Gold tier)"
                  value:
                    userId: "user-quantum-visionary-001"
                    overallStatus: "verified"
                    lastSubmissionDate: "2024-07-21T18:00:00Z"
                    rejectionReason: null
                    requiredActions: []
                    verifiedTier: "gold"
                KYCRejected:
                  summary: "KYC status: rejected"
                  value:
                    userId: "user-alice-001"
                    overallStatus: "rejected"
                    lastSubmissionDate: "2024-07-22T09:00:00Z"
                    rejectionReason: "Document image unclear."
                    requiredActions: ["Resubmit clearer ID image"]
                    verifiedTier: null
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/treasury/cash-flow/forecast:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get AI-Driven Corporate Cash Flow Forecast"
      description: "Retrieves an advanced AI-driven cash flow forecast for the organization, projecting liquidity, identifying potential surpluses or deficits, and providing recommendations for optimal treasury management."
      operationId: "getCorporateCashFlowForecast"
      security:
        - oAuth2Auth: [read:corporate_treasury, read:corporate_payments, read:compliance, read:analytics]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ForecastHorizonDays"
        - $ref: "#/components/parameters/IncludeScenarioAnalysis"
      responses:
        "200":
          description: "A comprehensive AI-driven cash flow forecast report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CashFlowForecast"
              examples:
                CashFlowForecastReport:
                  summary: "Example corporate cash flow forecast"
                  value:
                    forecastId: "cf_forecast_corp_Q3_2024"
                    period: "Q3 2024 (July - September)"
                    currency: "USD"
                    overallStatus: "positive_outlook"
                    projectedBalances:
                      - date: "2024-07-31"
                        projectedCash: 1500000.00
                        scenario: "most_likely"
                      - date: "2024-08-31"
                        projectedCash: 1750000.00
                        scenario: "most_likely"
                      - date: "2024-07-31"
                        projectedCash: 1400000.00
                        scenario: "worst_case"
                      - date: "2024-07-31"
                        projectedCash: 1600000.00
                        scenario: "best_case"
                    inflowForecast:
                      totalProjected: 3000000.00
                      bySource:
                        - source: "Client Payments"
                          amount: 2500000.00
                        - source: "Investment Returns"
                          amount: 500000.00
                    outflowForecast:
                      totalProjected: 2000000.00
                      byCategory:
                        - category: "Payroll"
                          amount: 1000000.00
                        - category: "Operating Expenses"
                          amount: 700000.00
                    liquidityRiskScore: 15
                    aiRecommendations:
                      - id: "insight-cash-optimization-001"
                        title: "Optimize Short-Term Investments"
                        description: "With a strong positive cash flow outlook, consider allocating surplus funds to short-term, low-risk investments to maximize returns."
                        category: "corporate_treasury"
                        severity: "low"
                        actionableRecommendation: "Consult with treasury manager to explore investment options."
                        timestamp: "2024-07-22T19:00:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/treasury/liquidity-positions:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time Corporate Liquidity Positions"
      description: "Provides a real-time overview of the organization's liquidity across all accounts, currencies, and short-term investments."
      operationId: "getCorporateLiquidityPositions"
      security:
        - oAuth2Auth: [read:corporate_treasury]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Real-time liquidity positions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LiquidityPositions"
              examples:
                LiquidityPositionsExample:
                  summary: "Example real-time corporate liquidity positions"
                  value:
                    snapshotTime: "2024-07-22T18:30:00Z"
                    totalLiquidAssets: 5200000.00
                    currencyBreakdown:
                      - currency: "USD"
                        amount: 4000000.00
                        percentage: 76.9
                      - currency: "EUR"
                        amount: 1000000.00
                        percentage: 19.2
                      - currency: "GBP"
                        amount: 200000.00
                        percentage: 3.9
                    accountTypeBreakdown:
                      - type: "Checking"
                        amount: 3500000.00
                      - type: "Savings"
                        amount: 500000.00
                      - type: "Money Market"
                        amount: 1200000.00
                    shortTermInvestments:
                      totalValue: 1200000.00
                      maturingNext30Days: 300000.00
                    aiLiquidityAssessment:
                      status: "optimal"
                      message: "Current liquidity is optimal and sufficient for all short-term obligations and planned expenditures. High flexibility for strategic investments."
                    aiRecommendations:
                      - id: "insight-investment-strategy-002"
                        title: "Review Mid-Term Investment Strategy"
                        description: "Given the robust liquidity, consider reviewing opportunities for mid-term strategic investments to enhance capital growth without compromising short-term operational needs."
                        category: "corporate_treasury"
                        severity: "low"
                        actionableRecommendation: "Schedule meeting with investment committee."
                        timestamp: "2024-07-22T18:40:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/risk/fraud/rules:
    get:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "List AI-Powered Fraud Detection Rules"
      description: "Retrieves a list of AI-powered fraud detection rules currently active for the organization, including their parameters, thresholds, and associated actions (e.g., flag, block, alert)."
      operationId: "listFraudDetectionRules"
      security:
        - oAuth2Auth: [read:compliance, read:corporate_treasury]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of fraud detection rules."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FraudRule"
              examples:
                FraudRuleList:
                  summary: "Example list of fraud detection rules"
                  value:
                    - id: "fraud_rule_high_value_inactive"
                      name: "High Value Transaction from Inactive Account"
                      description: "Flags transactions over a certain threshold from accounts that have been inactive for a specified period."
                      status: "active"
                      severity: "High"
                      criteria:
                        transactionAmountMin: 5000
                        accountInactivityDays: 90
                        transactionType: "debit"
                        countryOfOrigin: ["US", "CA"]
                      action:
                        type: "block"
                        details: "Block transaction and send critical alert to fraud team."
                      createdBy: "system:ai-risk-engine"
                      createdAt: "2024-05-01T10:00:00Z"
                      lastUpdated: "2024-07-20T11:30:00Z"
                    - id: "fraud_rule_suspicious_geo"
                      name: "Suspicious Geolocation Mismatch"
                      description: "Detects transactions originating from a geolocation significantly different from recent login activity without prior travel notification."
                      status: "active"
                      severity: "Critical"
                      criteria:
                        geographicDistanceKm: 5000
                        lastLoginDays: 7
                        noTravelNotification: true
                      action:
                        type: "alert"
                        details: "Send immediate MFA challenge to user and flag for review."
                      createdBy: "system:ai-risk-engine"
                      createdAt: "2024-06-10T09:00:00Z"
                      lastUpdated: "2024-07-01T10:00:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Create a New AI-Powered Fraud Detection Rule"
      description: "Creates a new custom AI-powered fraud detection rule, allowing organizations to define specific criteria, risk scores, and automated responses to evolving threat landscapes."
      operationId: "createFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The definition of the new fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleCreationRequest"
            examples:
              CreateSuspiciousPaymentRule:
                summary: "Create a rule for suspicious international payments"
                value:
                  name: "Suspicious International Payment Pattern"
                  description: "Detects multiple international payments to new beneficiaries in high-risk countries within a short timeframe."
                  status: "active"
                  severity: "Critical"
                  criteria:
                    paymentCountMin: 3
                    timeframeHours: 24
                    recipientNew: true
                    recipientCountryRiskLevel: ["High", "Very High"]
                  action:
                    type: "auto_review"
                    details: "Hold payment, notify sender for additional verification, and escalate to compliance."
      responses:
        "201":
          description: "Fraud detection rule created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
              examples:
                FraudRuleCreated:
                  summary: "Example of a newly created fraud detection rule"
                  value:
                    id: "fraud_rule_susp_int_pmt"
                    name: "Suspicious International Payment Pattern"
                    description: "Detects multiple international payments to new beneficiaries in high-risk countries within a short timeframe."
                    status: "active"
                    severity: "Critical"
                    criteria:
                      paymentCountMin: 3
                      timeframeHours: 24
                      recipientNew: true
                      recipientCountryRiskLevel: ["High", "Very High"]
                    action:
                      type: "auto_review"
                      details: "Hold payment, notify sender for additional verification, and escalate to compliance."
                    createdBy: "admin_user_id"
                    createdAt: "2024-07-22T20:00:00Z"
                    lastUpdated: "2024-07-22T20:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /corporate/risk/fraud/rules/{ruleId}:
    put:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Update an AI-Powered Fraud Detection Rule"
      description: "Updates an existing custom AI-powered fraud detection rule, modifying its criteria, actions, or status."
      operationId: "updateFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/RuleId"
      requestBody:
        required: true
        description: "The updated definition of the fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleUpdateRequest"
            examples:
              UpdateRuleThreshold:
                summary: "Update rule threshold and status"
                value:
                  status: "inactive"
                  criteria:
                    transactionAmountMin: 7500
                    accountInactivityDays: 60
                  action:
                    type: "flag"
                    details: "Flag for manual review only, do not block."
      responses:
        "200":
          description: "Fraud detection rule updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
              examples:
                FraudRuleUpdated:
                  summary: "Example of an updated fraud detection rule"
                  value:
                    id: "fraud_rule_high_value_inactive"
                    name: "High Value Transaction from Inactive Account"
                    description: "Flags transactions over a certain threshold from accounts that have been inactive for a specified period."
                    status: "inactive"
                    severity: "High"
                    criteria:
                      transactionAmountMin: 7500
                      accountInactivityDays: 60
                      transactionType: "debit"
                      countryOfOrigin: ["US", "CA"]
                    action:
                      type: "flag"
                      details: "Flag for manual review only, do not block."
                    createdBy: "system:ai-risk-engine"
                    createdAt: "2024-05-01T10:00:00Z"
                    lastUpdated: "2024-07-22T20:15:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Delete an AI-Powered Fraud Detection Rule"
      description: "Deletes a specific custom AI-powered fraud detection rule."
      operationId: "deleteFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/RuleId"
      responses:
        "204":
          description: "Fraud detection rule deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /goals:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "List All User Financial Goals"
      description: "Retrieves a list of all financial goals defined by the user, including their progress and associated AI plans."
      operationId: "listFinancialGoals"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A list of financial goals."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FinancialGoal"
              examples:
                FinancialGoalList:
                  summary: "Example list of financial goals"
                  value:
                    - id: "goal_retirement_2050"
                      name: "Retirement Fund by 2050"
                      type: "retirement"
                      targetAmount: 1000000.00
                      currentAmount: 350000.00
                      targetDate: "2050-12-31"
                      progressPercentage: 35.0
                      status: "on_track"
                      contributingAccounts: ["acc_chase_invest_ira_001", "acc_fidelity_401k_xyz"]
                      lastUpdated: "2024-07-22T19:00:00Z"
                      riskTolerance: "medium"
                    - id: "goal_home_purchase_2030"
                      name: "Down Payment for New Home"
                      type: "home_purchase"
                      targetAmount: 100000.00
                      currentAmount: 25000.00
                      targetDate: "2030-06-30"
                      progressPercentage: 25.0
                      status: "behind_schedule"
                      contributingAccounts: ["acc_savings_001"]
                      lastUpdated: "2024-07-22T19:00:00Z"
                      riskTolerance: "low"
    post:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Create a New Financial Goal"
      description: "Creates a new long-term financial goal, with optional AI plan generation."
      operationId: "createFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new financial goal."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalCreationRequest"
            examples:
              CreateVacationGoal:
                summary: "Create a dream vacation fund goal"
                value:
                  name: "Dream Vacation Fund"
                  type: "large_purchase"
                  targetAmount: 15000.00
                  targetDate: "2026-06-30"
                  initialContribution: 1000.00
                  generateAIPlan: true
                  riskTolerance: "medium"
      responses:
        "201":
          description: "Financial goal created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
              examples:
                GoalCreated:
                  summary: "Example of a newly created financial goal"
                  value:
                    id: "goal_dream_vacation_2026"
                    name: "Dream Vacation Fund"
                    type: "large_purchase"
                    targetAmount: 15000.00
                    currentAmount: 1000.00
                    targetDate: "2026-06-30"
                    progressPercentage: 6.67
                    status: "on_track"
                    aiStrategicPlan:
                      title: "Vacation Savings Plan"
                      summary: "This plan outlines monthly contributions needed to reach your dream vacation goal by the target date."
                      steps:
                        - title: "Set Up Monthly Auto-Transfer"
                          description: "Automate a monthly transfer of $583.33 from your checking to savings account."
                          timeline: "Immediately"
                          status: "pending"
                    contributingAccounts: []
                    lastUpdated: "2024-07-22T20:30:00Z"
                    riskTolerance: "medium"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /goals/{goalId}:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Get Detailed Financial Goal"
      description: "Retrieves detailed information for a specific financial goal, including its AI strategic plan and progress tracking."
      operationId: "getFinancialGoalDetails"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "200":
          description: "Detailed financial goal information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
              examples:
                GoalDetails:
                  summary: "Example of detailed financial goal"
                  value:
                    id: "goal_retirement_2050"
                    name: "Retirement Fund by 2050"
                    type: "retirement"
                    targetAmount: 1000000.00
                    currentAmount: 350000.00
                    targetDate: "2050-12-31"
                    progressPercentage: 35.0
                    status: "on_track"
                    aiStrategicPlan:
                      title: "Retirement Growth Strategy"
                      summary: "A comprehensive plan leveraging aggressive investments and regular contributions to reach your retirement target by 2050."
                      steps:
                        - title: "Increase 401k Contributions"
                          description: "Increase your 401k contribution by 2% of your salary annually."
                          timeline: "Ongoing"
                          status: "in_progress"
                        - title: "Diversify Investment Portfolio"
                          description: "Review your portfolio diversification to ensure optimal risk-adjusted returns."
                          timeline: "Quarterly"
                          status: "pending"
                    contributingAccounts: ["acc_chase_invest_ira_001", "acc_fidelity_401k_xyz"]
                    lastUpdated: "2024-07-22T20:45:00Z"
                    riskTolerance: "medium"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Update Financial Goal"
      description: "Updates parameters for an existing financial goal."
      operationId: "updateFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      requestBody:
        required: true
        description: "Request to update an existing financial goal."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalUpdateRequest"
            examples:
              UpdateRetirementGoal:
                summary: "Update retirement goal target and risk"
                value:
                  name: "Early Retirement by 2045"
                  targetAmount: 1200000.00
                  targetDate: "2045-12-31"
                  status: "ahead_of_schedule"
                  riskTolerance: "high"
                  regenerateAIPlan: true
      responses:
        "200":
          description: "Financial goal updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
              examples:
                GoalUpdated:
                  summary: "Example of an updated financial goal"
                  value:
                    id: "goal_retirement_2050"
                    name: "Early Retirement by 2045"
                    type: "retirement"
                    targetAmount: 1200000.00
                    currentAmount: 350000.00
                    targetDate: "2045-12-31"
                    progressPercentage: 29.17
                    status: "ahead_of_schedule"
                    aiStrategicPlan:
                      title: "Accelerated Retirement Growth Strategy"
                      summary: "Updated plan to achieve early retirement by 2045 with an increased target, leveraging higher risk tolerance and adjusted contributions."
                      steps:
                        - title: "Reallocate Portfolio to Higher Growth Assets"
                          description: "Adjust investment allocations to reflect the new 'high' risk tolerance."
                          timeline: "Immediately"
                          status: "pending"
                        - title: "Increase Monthly Investment"
                          description: "Automate an additional $500 monthly investment into your retirement accounts."
                          timeline: "Next 30 days"
                          status: "pending"
                    contributingAccounts: ["acc_chase_invest_ira_001", "acc_fidelity_401k_xyz"]
                    lastUpdated: "2024-07-22T21:00:00Z"
                    riskTolerance: "high"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Delete Financial Goal"
      description: "Deletes a specific financial goal."
      operationId: "deleteFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "204":
          description: "Financial goal deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /marketplace/products:
    get:
      tags:
        - "Marketplace (Plato AI)"
      summary: "Browse AI-Curated Marketplace Products"
      description: "Retrieves a list of personalized product recommendations from the Plato AI Marketplace."
      operationId: "browseMarketplaceProducts"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "category"
          in: "query"
          description: "Filter products by category."
          schema:
            type: string
            example: "Smart Home Devices"
      responses:
        "200":
          description: "A list of personalized product listings."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MarketplaceProduct"
              examples:
                MarketplaceProducts:
                  summary: "Example list of marketplace products"
                  value:
                    - id: "prod_smart_thermostat_001"
                      name: "Eco-Smart AI Thermostat"
                      description: "An AI-powered smart thermostat that learns your preferences to optimize energy savings and comfort."
                      category: "Smart Home Devices"
                      price: 249.99
                      currency: "USD"
                      imageUrl: "https://marketplace.demobank.com/images/thermostat.png"
                      vendor: "EcoSense Innovations"
                      aiRecommendationScore: 0.92
                      personalizationReason: "Identified interest in energy efficiency and smart home technologies based on transaction history and stated preferences."
                      estimatedImpactOnBudget:
                        monthlySavings: 25.00
                        paybackPeriodMonths: 10
                    - id: "prod_investment_ebook_002"
                      name: "Quantum Investing: A Beginner's Guide"
                      description: "An exclusive e-book detailing AI-driven investment strategies tailored for Demo Bank users."
                      category: "Financial Education"
                      price: 19.99
                      currency: "USD"
                      imageUrl: "https://marketplace.demobank.com/images/quantum_investing_ebook.png"
                      vendor: "Demo Bank Insights"
                      aiRecommendationScore: 0.88
                      personalizationReason: "User shows high engagement with investment features and learning resources."
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /marketplace/products/{productId}/simulate-purchase:
    post:
      tags:
        - "Marketplace (Plato AI)"
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Simulate Financial Impact of Product Purchase"
      description: "Uses Quantum Oracle AI to simulate the short-term and long-term financial impact of purchasing a specific marketplace product on the user's budget and cash flow."
      operationId: "simulateProductPurchaseImpact"
      security:
        - oAuth2Auth: [read:profile, read:accounts, read:budgets, interact:ai_oracle]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        required: true
        description: "Request to simulate product purchase impact."
        content:
          application/json:
            schema:
              type: object
              required:
                - purchaseOption
              properties:
                purchaseOption:
                  type: string
                  enum: [full_payment, financed_12_months, financed_24_months]
                  description: "The payment method to simulate."
                  example: "financed_12_months"
                targetAccountId:
                  type: string
                  nullable: true
                  description: "Optional: The account from which the purchase would be made. If omitted, AI will infer."
                  example: "acc_chase_checking_4567"
            examples:
              SimulateThermostatPurchase:
                summary: "Simulate purchase of thermostat with 12-month financing"
                value:
                  purchaseOption: "financed_12_months"
                  targetAccountId: "acc_chase_checking_4567"
      responses:
        "200":
          description: "Financial impact simulation results for the product purchase."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PurchaseImpactSimulation"
              examples:
                ThermostatImpact:
                  summary: "Simulation of thermostat purchase impact"
                  value:
                    productId: "prod_smart_thermostat_001"
                    purchaseOption: "financed_12_months"
                    simulationSummary: "Purchasing the Eco-Smart AI Thermostat with 12-month financing will result in a monthly payment of $20.83. However, estimated energy savings of $25/month mean a net positive impact on your budget within the first month. Your savings account is well-positioned for this expense."
                    keyImpacts:
                      - metric: "Monthly Cash Flow Change"
                        value: "$+4.17"
                        severity: "low"
                      - metric: "Budget Category Impact (Utilities)"
                        value: "Reduced by $25/month"
                        severity: "low"
                      - metric: "Overall Savings Account Balance"
                        value: "Minimal initial impact due to financing."
                        severity: "low"
                    aiRecommendations:
                      - id: "insight-smart-home-integration-005"
                        title: "Maximize Smart Home Efficiency"
                        description: "Consider integrating other smart home devices with your new thermostat for even greater energy savings and convenience."
                        category: "marketplace"
                        severity: "low"
                        actionableRecommendation: "Browse other smart home products in the marketplace."
                        timestamp: "2024-07-22T21:30:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /marketplace/products/{productId}/claim-offer:
    post:
      tags:
        - "Marketplace (Plato AI)"
      summary: "Claim an Exclusive Marketplace Offer"
      description: "Allows the user to claim an exclusive, personalized offer for a marketplace product, often involving a discount code or special terms that are then linked to their account."
      operationId: "claimMarketplaceOffer"
      security:
        - oAuth2Auth: [write:profile, write:marketplace]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        required: true
        description: "Request to claim an offer."
        content:
          application/json:
            schema:
              type: object
              properties:
                redemptionChannel:
                  type: string
                  enum: [email, in_app, external_link]
                  default: "in_app"
                  description: "Preferred channel for offer redemption details."
                  example: "email"
            examples:
              ClaimEbookOffer:
                summary: "Claim offer for the Quantum Investing ebook"
                value:
                  redemptionChannel: "in_app"
      responses:
        "200":
          description: "Offer claimed successfully. Redemption details provided."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClaimOfferResponse"
              examples:
                OfferClaimed:
                  summary: "Offer claimed, details provided"
                  value:
                    offerId: "offer_ebook_quantum_invest"
                    productId: "prod_investment_ebook_002"
                    status: "claimed"
                    redemptionCode: "DEMOBANKQM20"
                    redemptionLink: "https://marketplace.demobank.com/redeem?code=DEMOBANKQM20"
                    expirationDate: "2024-09-30T23:59:59Z"
                    message: "Congratulations! Your offer has been claimed. Use code DEMOBANKQM20 at checkout or click the redemption link."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "409":
          $ref: "#/components/responses/ConflictError"

components:
  schemas:
    # User and Identity Management
    UserRegistrationRequest:
      type: object
      required:
        - name
        - email
        - password
        - phone
      properties:
        name:
          type: string
          example: "John Doe"
          description: "Full name of the user."
        email:
          type: string
          format: email
          example: "john.doe@example.com"
          description: "Unique email address for the user."
        password:
          type: string
          format: password
          example: "StrongP@ssw0rd!"
          description: "Secure password for the user account."
        phone:
          type: string
          example: "+1-555-123-4567"
          description: "Phone number for SMS verification and communication."
        dateOfBirth:
          type: string
          format: date
          nullable: true
          example: "1990-01-01"
          description: "User's date of birth (optional for initial registration)."
        address:
          $ref: "#/components/schemas/Address"
          description: "User's residential address (optional for initial registration)."

    UserLoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: "user@demobank.com"
          description: "User's email address."
        password:
          type: string
          format: password
          example: "YourSecurePassword123"
          description: "User's password."
        mfaCode:
          type: string
          nullable: true
          example: "123456"
          description: "Multi-factor authentication code, if required."

    LoginResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: "JWT access token for authenticated API requests."
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
        refreshToken:
          type: string
          description: "Token used to obtain a new access token without re-authenticating."
          example: "some_long_refresh_token_string_for_renewal"
        expiresIn:
          type: integer
          description: "Lifetime of the access token in seconds."
          example: 3600
        tokenType:
          type: string
          description: "Type of the token, usually 'Bearer'."
          example: "Bearer"

    User:
      type: object
      required:
        - id
        - name
        - email
      properties:
        id:
          type: string
          format: uuid
          example: "user-demobank-001"
          description: "Unique identifier for the user."
        name:
          type: string
          example: "John Doe"
          description: "Full name of the user."
        email:
          type: string
          format: email
          example: "john.doe@example.com"
          description: "Unique email address of the user."
        phone:
          type: string
          nullable: true
          example: "+1-555-123-4567"
          description: "Phone number of the user."
        dateOfBirth:
          type: string
          format: date
          nullable: true
          example: "1990-01-01"
          description: "User's date of birth."
        address:
          $ref: "#/components/schemas/Address"
          description: "User's residential address."
        loyaltyTier:
          type: string
          enum: [Bronze, Silver, Gold, Platinum, Zenith Platinum]
          example: "Gold"
          description: "Current loyalty tier of the user."
        loyaltyPoints:
          type: integer
          minimum: 0
          example: 500
          description: "Total loyalty points accumulated by the user."
        gamificationLevel:
          type: integer
          minimum: 1
          example: 5
          description: "Current gamification level of the user."
        aiPersona:
          type: string
          example: "Prudent Planner"
          description: "AI-assigned financial persona based on user behavior and preferences."
        securityStatus:
          $ref: "#/components/schemas/UserSecurityStatus"
          description: "Current security status and settings for the user."
        preferences:
          $ref: "#/components/schemas/UserPreferences"
          description: "User's personalization and experience preferences."
        identityVerified:
          type: boolean
          example: true
          description: "Indicates if the user's identity has been fully verified (KYC/AML)."

    UserUpdateProfileRequest:
      type: object
      properties:
        name:
          type: string
          example: "John D. Analyst"
          description: "Updated full name of the user."
        phone:
          type: string
          example: "+1-555-999-0000"
          description: "Updated phone number of the user."
        address:
          $ref: "#/components/schemas/Address"
          description: "Updated residential address of the user."
        aiPersona:
          type: string
          example: "Aggressive Investor"
          description: "User's self-selected or AI-adjusted financial persona."

    UserSecurityStatus:
      type: object
      properties:
        twoFactorEnabled:
          type: boolean
          example: true
          description: "Indicates if two-factor authentication is enabled."
        biometricsEnrolled:
          type: boolean
          example: false
          description: "Indicates if biometric authentication is enrolled."
        lastLogin:
          type: string
          format: date-time
          example: "2024-07-22T08:00:00Z"
          description: "Timestamp of the user's last successful login."
        lastLoginIp:
          type: string
          format: ipv4
          example: "203.0.113.45"
          description: "IP address from which the last successful login occurred."

    UserPreferences:
      type: object
      properties:
        preferredLanguage:
          type: string
          example: "en-US"
          description: "User's preferred language for the interface."
        theme:
          type: string
          enum: [Light-Default, Dark-Quantum, Eco-Green, Minimalist]
          example: "Dark-Quantum"
          description: "User's selected UI theme."
        aiInteractionMode:
          type: string
          enum: [passive, balanced, proactive]
          example: "balanced"
          description: "How actively the AI should provide advice and suggestions."
        notificationChannels:
          $ref: "#/components/schemas/NotificationChannels"
          description: "Enabled notification channels."
        dataSharingConsent:
          type: boolean
          example: true
          description: "Consent for sharing anonymized data for AI improvements."
        transactionGrouping:
          type: string
          enum: [category, merchant, date, account]
          example: "category"
          description: "Default grouping preference for transaction lists."

    NotificationChannels:
      type: object
      properties:
        email:
          type: boolean
          example: true
          description: "Receive notifications via email."
        push:
          type: boolean
          example: true
          description: "Receive push notifications to connected devices."
        sms:
          type: boolean
          example: false
          description: "Receive notifications via SMS."
        inApp:
          type: boolean
          example: true
          description: "Receive notifications within the application."

    Address:
      type: object
      properties:
        street:
          type: string
          example: "100 Innovation Drive"
          description: "Street name and number."
        city:
          type: string
          example: "Quantumville"
          description: "City."
        state:
          type: string
          nullable: true
          example: "CA"
          description: "State or province (if applicable)."
        zip:
          type: string
          example: "90210"
          description: "Postal or ZIP code."
        country:
          type: string
          example: "USA"
          description: "Country."

    Device:
      type: object
      required:
        - id
        - type
        - os
        - model
        - lastActive
        - ipAddress
        - trustLevel
      properties:
        id:
          type: string
          example: "dev_mobile_ios_aabbcc"
          description: "Unique identifier for the device."
        type:
          type: string
          enum: [mobile, desktop, tablet, smart_watch]
          example: "mobile"
          description: "Type of device."
        os:
          type: string
          example: "iOS 17.5"
          description: "Operating system and version."
        model:
          type: string
          example: "iPhone 15 Pro Max"
          description: "Device model."
        lastActive:
          type: string
          format: date-time
          example: "2024-07-22T11:05:00Z"
          description: "Timestamp of last activity from this device."
        ipAddress:
          type: string
          format: ipv4
          example: "203.0.113.12"
          description: "Last known IP address of the device."
        trustLevel:
          type: string
          enum: [trusted, untrusted, pending_verification]
          example: "trusted"
          description: "Security trust level of the device."
        pushToken:
          type: string
          nullable: true
          description: "Push notification token for the device."
          example: "ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]"
        deviceName:
          type: string
          nullable: true
          example: "Alex's Work Phone"
          description: "User-defined name for the device."

    RegisterDeviceRequest:
      type: object
      required:
        - deviceType
        - os
        - model
      properties:
        deviceType:
          type: string
          enum: [mobile, desktop, tablet, smart_watch]
          example: "mobile"
          description: "Type of device being registered."
        os:
          type: string
          example: "Android 14"
          description: "Operating system and version of the device."
        model:
          type: string
          example: "Samsung Galaxy S24 Ultra"
          description: "Model of the device."
        biometricSignature:
          type: string
          nullable: true
          description: "Base64 encoded biometric signature for initial enrollment (if applicable)."
          example: "base64encoded_android_biometric_proof"
        deviceName:
          type: string
          nullable: true
          example: "Alex's Work Phone"
          description: "User-defined name for the device."
        pushToken:
          type: string
          nullable: true
          description: "Push notification token for the device."
          example: "ExponentPushToken[yzzzyzzzyzzzyzzz]"

    BiometricEnrollmentRequest:
      type: object
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          description: "Type of biometric data to enroll."
          example: "facial_recognition"
        biometricSignature:
          type: string
          description: "Base64 encoded biometric template or proof for enrollment."
          example: "base64encoded_facial_template_for_enrollment"
        deviceId:
          type: string
          description: "The ID of the device on which the biometric data is being enrolled."
          example: "dev_mobile_ios_aabbcc"
        deviceName:
          type: string
          nullable: true
          description: "Optional: A friendly name for the device enrolling biometrics."
          example: "My Primary iPhone"

    BiometricVerificationRequest:
      type: object
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          description: "Type of biometric data for verification."
          example: "fingerprint"
        biometricSignature:
          type: string
          description: "One-time, base64 encoded biometric proof for verification."
          example: "base64encoded_one_time_fingerprint_proof"
        deviceId:
          type: string
          description: "The ID of the device from which the biometric verification attempt is made."
          example: "dev_mobile_android_ddeeff"

    BiometricStatus:
      type: object
      required:
        - biometricsEnrolled
        - enrolledBiometrics
      properties:
        biometricsEnrolled:
          type: boolean
          description: "True if any biometric data is currently enrolled for the user."
          example: true
        enrolledBiometrics:
          type: array
          description: "List of currently enrolled biometric methods and their associated devices."
          items:
            type: object
            properties:
              type:
                type: string
                enum: [fingerprint, facial_recognition, voice_recognition]
                example: "facial_recognition"
              deviceId:
                type: string
                example: "dev_mobile_ios_aabbcc"
              enrollmentDate:
                type: string
                format: date-time
                example: "2024-07-22T17:00:00Z"
        lastUsed:
          type: string
          format: date-time
          nullable: true
          description: "Timestamp of the last successful biometric authentication."
          example: "2024-07-22T17:30:00Z"

    KYCDocumentSubmission:
      type: object
      required:
        - documentType
        - documentFrontImage
        - documentNumber
        - issueDate
        - expirationDate
        - countryOfIssue
      properties:
        documentType:
          type: string
          enum: [drivers_license, passport, national_id, utility_bill, bank_statement]
          description: "Type of KYC document being submitted."
          example: "drivers_license"
        documentFrontImage:
          type: string
          format: byte # base64 encoded image
          description: "Base64 encoded image of the front side of the document."
          example: "base64encoded_image_of_drivers_license_front"
        documentBackImage:
          type: string
          format: byte # base64 encoded image
          nullable: true
          description: "Base64 encoded image of the back side of the document (if applicable)."
          example: "base64encoded_image_of_drivers_license_back"
        documentNumber:
          type: string
          description: "The official document number."
          example: "ABC12345"
        issueDate:
          type: string
          format: date
          description: "Date the document was issued."
          example: "2020-01-01"
        expirationDate:
          type: string
          format: date
          description: "Date the document expires."
          example: "2030-01-01"
        countryOfIssue:
          type: string
          description: "The country that issued the document (ISO 3166-1 alpha-2 code)."
          example: "US"
        addressProofImage:
          type: string
          format: byte # base64 encoded image
          nullable: true
          description: "Base64 encoded image of an address proof (e.g., utility bill)."
          example: "base64encoded_utility_bill_image"
        liveSelfieImage:
          type: string
          format: byte
          nullable: true
          description: "Base64 encoded image of a live selfie for liveness detection."
          example: "base64encoded_live_selfie"

    KYCStatus:
      type: object
      required:
        - userId
        - overallStatus
        - lastSubmissionDate
      properties:
        userId:
          type: string
          format: uuid
          example: "user-quantum-visionary-001"
          description: "Unique identifier for the user."
        overallStatus:
          type: string
          enum: [not_started, in_review, verified, rejected, requires_action]
          example: "verified"
          description: "Overall status of the KYC verification process."
        lastSubmissionDate:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-21T18:00:00Z"
          description: "Timestamp of the last KYC document submission."
        rejectionReason:
          type: string
          nullable: true
          example: "Document image unclear."
          description: "Reason for rejection if the status is 'rejected'."
        requiredActions:
          type: array
          items:
            type: string
          example: ["Resubmit clearer ID image"]
          description: "List of actions required from the user to proceed with verification."
        verifiedTier:
          type: string
          nullable: true
          enum: [bronze, silver, gold, platinum]
          example: "gold"
          description: "The tier of verification achieved, granting access to different service levels."

    # Accounts & Balances
    LinkedAccount:
      type: object
      required:
        - id
        - name
        - institutionName
        - type
        - currency
        - currentBalance
        - lastUpdated
      properties:
        id:
          type: string
          example: "acc_chase_checking_4567"
          description: "Internal unique identifier for the linked account."
        externalId:
          type: string
          nullable: true
          example: "plaid_acc_abc123"
          description: "Identifier from the external financial institution or aggregator."
        name:
          type: string
          example: "Chase Checking"
          description: "User-friendly name of the account."
        institutionName:
          type: string
          example: "Chase Bank"
          description: "Name of the financial institution."
        mask:
          type: string
          example: "4567"
          description: "Masked account number (e.g., last 4 digits)."
        type:
          type: string
          enum: [depository, credit, loan, investment, mortgage, other]
          example: "depository"
          description: "High-level type of the account."
        subtype:
          type: string
          example: "checking"
          description: "Specific subtype of the account (e.g., checking, savings, IRA, 401k)."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "ISO 4217 currency code of the account."
        currentBalance:
          type: number
          format: float
          example: 1250.75
          description: "Current balance of the account."
        availableBalance:
          type: number
          format: float
          nullable: true
          example: 1200.00
          description: "Available balance (may differ from current due to pending transactions)."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T10:45:00Z"
          description: "Timestamp when the account balance was last synced/updated."
        isPrimary:
          type: boolean
          example: true
          description: "Indicates if this is the user's primary account for general operations."

    AccountDetail:
      allOf:
        - $ref: "#/components/schemas/LinkedAccount"
        - type: object
          properties:
            accountHolder:
              type: string
              example: "The Quantum Visionary"
              description: "Name of the account holder."
            interestRate:
              type: number
              format: float
              nullable: true
              example: 0.01
              description: "Annual interest rate for the account (if applicable)."
            openedDate:
              type: string
              format: date
              nullable: true
              example: "2020-03-01"
              description: "Date the account was opened."
            transactionsCount:
              type: integer
              minimum: 0
              example: 150
              description: "Total number of transactions in the account (last 12 months)."
            projectedCashFlow:
              $ref: "#/components/schemas/ProjectedCashFlow"
              description: "AI-driven projection of future cash flow for the account."
            balanceHistory:
              type: array
              items:
                type: object
                properties:
                  date: {type: string, format: date, example: "2024-07-21"}
                  balance: {type: number, format: float, example: 1230.50}
              description: "Historical daily balances for the account (e.g., last 30 days)."

    ProjectedCashFlow:
      type: object
      properties:
        days30:
          type: number
          format: float
          example: 500
          description: "Projected net cash flow for the next 30 days."
        days90:
          type: number
          format: float
          example: 1200
          description: "Projected net cash flow for the next 90 days."
        confidenceScore:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 85
          description: "AI's confidence score (0-100) for the accuracy of the projection."

    OverdraftSettings:
      type: object
      required:
        - accountId
        - enabled
        - feePreference
      properties:
        accountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The ID of the account these settings apply to."
        enabled:
          type: boolean
          example: true
          description: "Indicates if overdraft protection is enabled for this account."
        protectionLimit:
          type: number
          format: float
          nullable: true
          minimum: 0
          example: 500.00
          description: "The maximum amount the account can be overdrawn if protection is enabled."
        linkToSavings:
          type: boolean
          example: true
          description: "If true, attempts to draw from a linked savings account to cover overdrafts."
        linkedSavingsAccountId:
          type: string
          nullable: true
          example: "acc_chase_savings_1234"
          description: "The ID of the savings account linked for overdraft protection."
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me]
          example: "always_pay"
          description: "User preference for how overdrafts should be handled (e.g., always pay, decline if over limit)."

    OverdraftSettingsUpdateRequest:
      type: object
      properties:
        enabled:
          type: boolean
          example: false
          description: "Set to `true` to enable, `false` to disable overdraft protection."
        protectionLimit:
          type: number
          format: float
          nullable: true
          minimum: 0
          example: 750.00
          description: "The new maximum overdraft amount. Set to `null` if disabling protection."
        linkToSavings:
          type: boolean
          example: false
          description: "Set to `true` to link to savings, `false` to unlink."
        linkedSavingsAccountId:
          type: string
          nullable: true
          example: "acc_chase_savings_1234"
          description: "The ID of the savings account to link. Set to `null` if unlinking."
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me]
          example: "decline_if_over_limit"
          description: "New user preference for how overdrafts should be handled."

    LinkAccountRequest:
      type: object
      required:
        - institutionName
        - countryCode
      properties:
        institutionName:
          type: string
          example: "Bank of America"
          description: "The name of the external financial institution to link."
        countryCode:
          type: string
          description: "ISO 3166-1 alpha-2 country code of the institution."
          example: "US"
        provider:
          type: string
          nullable: true
          description: "Optional: Specify a financial data aggregation provider (e.g., 'Plaid', 'Finicity')."
          example: "Plaid"

    LinkAccountResponse:
      type: object
      required:
        - linkSessionId
        - authUri
        - status
      properties:
        linkSessionId:
          type: string
          example: "link_session_xyz789"
          description: "A unique ID for the initiated linking session."
        authUri:
          type: string
          format: uri
          example: "https://auth.plaid.com/oauth/initiate?client_id=...&redirect_uri=..."
          description: "The URI to which the user should be redirected to complete the external authentication flow."
        status:
          type: string
          enum: [pending_user_action, complete, failed]
          example: "pending_user_action"
          description: "Current status of the account linking process."
        message:
          type: string
          nullable: true
          example: "Please redirect user to the provided URI to complete authentication."
          description: "A descriptive message regarding the linking status."

    # Transactions & Insights
    Transaction:
      type: object
      required:
        - id
        - accountId
        - type
        - category
        - description
        - amount
        - currency
        - date
      properties:
        id:
          type: string
          example: "txn_quantum-2024-07-21-A7B8C9"
          description: "Unique identifier for the transaction."
        accountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The ID of the account this transaction belongs to."
        type:
          type: string
          enum: [income, expense, transfer, investment, refund, bill_payment]
          example: "expense"
          description: "Type of the transaction."
        category:
          type: string
          example: "Dining & Restaurants"
          description: "AI-assigned or user-defined category of the transaction (e.g., Groceries, Rent, Salary)."
        aiCategoryConfidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          nullable: true
          example: 0.92
          description: "AI's confidence score (0-1) for its category assignment."
        description:
          type: string
          example: "Coffee Shop - Quantum Cafe"
          description: "Detailed description of the transaction."
        merchantDetails:
          $ref: "#/components/schemas/MerchantDetails"
          nullable: true
          description: "Detailed information about the merchant."
        amount:
          type: number
          format: float
          example: 12.50
          description: "The transaction amount."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "ISO 4217 currency code of the transaction."
        date:
          type: string
          format: date
          example: "2024-07-21"
          description: "The date the transaction occurred (transaction date)."
        postedDate:
          type: string
          format: date
          nullable: true
          example: "2024-07-22"
          description: "The date the transaction was posted to the account (cleared date)."
        carbonFootprint:
          type: number
          format: float
          minimum: 0
          nullable: true
          example: 1.2
          description: "Estimated carbon footprint (in Kg CO2e) associated with the transaction."
        location:
          $ref: "#/components/schemas/Location"
          nullable: true
          description: "Geolocation details of the transaction, if available."
        paymentChannel:
          type: string
          enum: [in_store, online, atm, transfer, bill_payment, subscription]
          nullable: true
          example: "in_store"
          description: "Channel through which the payment was made."
        tags:
          type: array
          items:
            type: string
          nullable: true
          example: ["work_lunch"]
          description: "User-defined tags for the transaction."
        receiptUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/receipts/txn_1a2b3c4d5e.pdf"
          description: "URL to a digital receipt for the transaction."
        disputeStatus:
          type: string
          enum: [none, pending, under_review, resolved_in_favor_user, resolved_in_favor_merchant, rejected]
          example: "none"
          description: "Current status of any dispute related to this transaction."
        notes:
          type: string
          nullable: true
          example: "This was a special coffee for a client meeting."
          description: "Personal notes added by the user to the transaction."

    PaginatedTransactions:
      type: object
      properties:
        limit:
          type: integer
          example: 50
          description: "The maximum number of items returned per page."
        offset:
          type: integer
          example: 0
          description: "The starting index of the list for pagination."
        total:
          type: integer
          example: 100
          description: "The total number of available items."
        data:
          type: array
          items:
            $ref: "#/components/schemas/Transaction"
        nextOffset:
          type: integer
          nullable: true
          example: 50
          description: "The offset to use for the next page of results. Null if no more pages."

    MerchantDetails:
      type: object
      properties:
        name:
          type: string
          example: "Quantum Cafe"
          description: "Name of the merchant."
        logoUrl:
          type: string
          format: uri
          nullable: true
          example: "https://assets.demobank.com/merchants/quantum_cafe.png"
          description: "URL to the merchant's logo."
        website:
          type: string
          format: uri
          nullable: true
          example: "https://quantum.cafe"
          description: "Merchant's website URL."
        address:
          $ref: "#/components/schemas/Address"
          description: "Merchant's physical address."
        phoneNumber:
          type: string
          nullable: true
          example: "+1-555-000-1111"
          description: "Merchant's phone number."

    Location:
      type: object
      properties:
        latitude:
          type: number
          format: float
          example: 34.0522
          description: "Latitude coordinate."
        longitude:
          type: number
          format: float
          example: -118.2437
          description: "Longitude coordinate."
        city:
          type: string
          nullable: true
          example: "Los Angeles"
          description: "City name of the transaction location."
        state:
          type: string
          nullable: true
          example: "CA"
          description: "State or province of the transaction location."
        country:
          type: string
          nullable: true
          example: "USA"
          description: "Country of the transaction location."

    CategorizeTransactionRequest:
      type: object
      required:
        - category
      properties:
        category:
          type: string
          example: "Home > Groceries"
          description: "The new category for the transaction (can be hierarchical)."
        notes:
          type: string
          nullable: true
          example: "Bulk purchase for party"
          description: "Optional notes to add to the transaction."
        applyToFuture:
          type: boolean
          default: false
          example: true
          description: "If true, the AI should learn and apply this categorization to similar future transactions."

    DisputeRequest:
      type: object
      required:
        - reason
        - details
      properties:
        reason:
          type: string
          enum: [unauthorized, duplicate, wrong_amount, not_received, other]
          description: "Primary reason for the dispute."
          example: "unauthorized"
        details:
          type: string
          description: "Detailed explanation of the dispute."
          example: "I did not authorize this purchase. My card may have been compromised and I was traveling internationally on this date."
        supportingDocuments:
          type: array
          items:
            type: string
            format: uri
          nullable: true
          description: "URLs to supporting documents (e.g., receipts, travel tickets)."
          example: ["https://demobank.com/uploads/flight_ticket.png"]

    DisputeStatus:
      type: object
      required:
        - disputeId
        - status
        - lastUpdated
      properties:
        disputeId:
          type: string
          example: "dispute_txn_xyz123"
          description: "Unique identifier for the dispute."
        status:
          type: string
          enum: [pending, under_review, investigation, escalated, resolved_in_favor_user, resolved_in_favor_merchant, rejected]
          example: "pending"
          description: "Current status of the dispute."
        nextSteps:
          type: string
          nullable: true
          example: "Our AI-powered fraud team is reviewing your claim. You will be notified within 2-3 business days."
          description: "Guidance on what to expect next or actions required from the user."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T11:30:00Z"
          description: "Timestamp when the dispute status was last updated."
        resolutionDetails:
          type: string
          nullable: true
          description: "Details provided if the dispute has been resolved or rejected."

    RecurringTransaction:
      type: object
      required:
        - id
        - description
        - category
        - amount
        - currency
        - frequency
        - nextDueDate
        - status
      properties:
        id:
          type: string
          example: "rec_txn_netflix_001"
          description: "Unique identifier for the recurring transaction."
        description:
          type: string
          example: "Netflix Subscription"
          description: "Description of the recurring transaction."
        category:
          type: string
          example: "Entertainment"
          description: "Category of the recurring transaction."
        amount:
          type: number
          format: float
          example: 19.99
          description: "Amount of each recurring payment."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "Currency of the recurring transaction."
        frequency:
          type: string
          enum: [daily, weekly, bi_weekly, monthly, quarterly, semi_annually, annually]
          example: "monthly"
          description: "Frequency of the recurring transaction."
        nextDueDate:
          type: string
          format: date
          example: "2024-08-01"
          description: "Next scheduled payment date."
        lastPaidDate:
          type: string
          format: date
          nullable: true
          example: "2024-07-01"
          description: "Last date the transaction was paid."
        status:
          type: string
          enum: [active, paused, cancelled, completed]
          example: "active"
          description: "Current status of the recurring transaction."
        linkedAccountId:
          type: string
          nullable: true
          example: "acc_chase_checking_4567"
          description: "The account associated with this recurring transaction."
        aiConfidenceScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          nullable: true
          example: 0.95
          description: "AI's confidence score (0-1) for its detection or categorization of this recurring pattern."

    RecurringTransactionCreationRequest:
      type: object
      required:
        - description
        - category
        - amount
        - currency
        - frequency
        - startDate
      properties:
        description:
          type: string
          example: "New Gym Membership"
          description: "Description of the new recurring transaction."
        category:
          type: string
          example: "Health & Fitness"
          description: "Category of the new recurring transaction."
        amount:
          type: number
          format: float
          example: 55.50
          description: "Amount of each recurring payment."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "Currency of the recurring transaction."
        frequency:
          type: string
          enum: [daily, weekly, bi_weekly, monthly, quarterly, semi_annually, annually]
          example: "monthly"
          description: "Frequency of the recurring transaction."
        startDate:
          type: string
          format: date
          example: "2024-09-01"
          description: "The date the first payment is expected or scheduled."
        linkedAccountId:
          type: string
          nullable: true
          example: "acc_chase_checking_4567"
          description: "Optional: The account to associate with this recurring transaction."

    SpendingTrends:
      type: object
      required:
        - period
        - overallTrend
        - percentageChange
      properties:
        period:
          type: string
          example: "Last 3 Months"
          description: "The period over which the spending trend is analyzed."
        overallTrend:
          type: string
          enum: [increasing, decreasing, stable]
          example: "increasing"
          description: "Overall trend in spending."
        percentageChange:
          type: number
          format: float
          example: 5.2
          description: "Percentage change in spending over the period."
        topCategoriesByChange:
          type: array
          items:
            type: object
            properties:
              category: {type: string, example: "Dining & Restaurants"}
              percentageChange: {type: number, format: float, example: 15.0}
              absoluteChange: {type: number, format: float, example: 120.00}
          description: "Top categories with significant spending changes."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights and recommendations related to spending."
        forecastNextMonth:
          type: number
          format: float
          nullable: true
          example: 2850.00
          description: "AI's forecast for total spending in the next month."

    # Budgets & Financial Planning
    Budget:
      type: object
      required:
        - id
        - name
        - period
        - startDate
        - endDate
        - totalAmount
        - spentAmount
        - remainingAmount
        - status
      properties:
        id:
          type: string
          example: "budget_monthly_aug"
          description: "Unique identifier for the budget."
        name:
          type: string
          example: "August 2024 Household Budget"
          description: "Name of the budget."
        period:
          type: string
          enum: [weekly, bi_weekly, monthly, quarterly, annually, custom]
          example: "monthly"
          description: "Recurrence period of the budget."
        startDate:
          type: string
          format: date
          example: "2024-08-01"
          description: "Start date of the budget period."
        endDate:
          type: string
          format: date
          example: "2024-08-31"
          description: "End date of the budget period."
        totalAmount:
          type: number
          format: float
          example: 3000.00
          description: "Total allocated amount for the budget."
        spentAmount:
          type: number
          format: float
          example: 1200.50
          description: "Amount spent so far in the current budget period."
        remainingAmount:
          type: number
          format: float
          example: 1799.50
          description: "Remaining amount in the budget."
        categories:
          type: array
          items:
            $ref: "#/components/schemas/BudgetCategory"
          description: "Breakdown of the budget by categories."
        status:
          type: string
          enum: [active, completed, upcoming, archived]
          example: "active"
          description: "Current status of the budget."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          nullable: true
          example: 80
          description: "Percentage threshold at which an alert is triggered (e.g., 80% of budget spent)."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "AI-driven recommendations for budget optimization."

    BudgetCategory:
      type: object
      required:
        - name
        - allocated
      properties:
        name:
          type: string
          example: "Groceries"
          description: "Name of the budget category."
        allocated:
          type: number
          format: float
          example: 500.00
          description: "Amount allocated to this category."
        spent:
          type: number
          format: float
          example: 250.75
          description: "Amount spent in this category."
        remaining:
          type: number
          format: float
          example: 249.25
          description: "Remaining amount in this category."
        progressPercentage:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 50.15
          description: "Percentage of allocated amount spent."

    BudgetCreationRequest:
      type: object
      required:
        - name
        - period
        - startDate
        - endDate
        - totalAmount
      properties:
        name:
          type: string
          example: "September Living Expenses"
          description: "Name for the new budget."
        period:
          type: string
          enum: [weekly, bi_weekly, monthly, quarterly, annually, custom]
          example: "monthly"
          description: "Recurrence period of the budget."
        startDate:
          type: string
          format: date
          example: "2024-09-01"
          description: "Start date of the budget period."
        endDate:
          type: string
          format: date
          example: "2024-09-30"
          description: "End date of the budget period."
        totalAmount:
          type: number
          format: float
          example: 2800.00
          description: "Total allocated amount for the budget."
        categories:
          type: array
          items:
            type: object
            properties:
              name: {type: string, example: "Rent"}
              allocated: {type: number, format: float, example: 1500.00}
          description: "Initial breakdown of the budget by categories (can be partially defined for AI auto-population)."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          nullable: true
          example: 75
          description: "Percentage threshold at which an alert is triggered."
        aiAutoPopulate:
          type: boolean
          default: false
          example: true
          description: "If true, AI will automatically suggest and fill in budget categories and amounts based on spending history."

    BudgetUpdateRequest:
      type: object
      properties:
        name:
          type: string
          example: "September Household Budget"
          description: "Updated name of the budget."
        period:
          type: string
          enum: [weekly, bi_weekly, monthly, quarterly, annually, custom]
          example: "monthly"
          description: "Updated recurrence period of the budget."
        startDate:
          type: string
          format: date
          example: "2024-09-01"
          description: "Updated start date of the budget period."
        endDate:
          type: string
          format: date
          example: "2024-09-30"
          description: "Updated end date of the budget period."
        totalAmount:
          type: number
          format: float
          example: 3200.00
          description: "Updated total allocated amount for the budget."
        categories:
          type: array
          items:
            type: object
            properties:
              name: {type: string, example: "Rent"}
              allocated: {type: number, format: float, example: 1600.00}
          description: "Updated breakdown of the budget by categories. Existing categories not provided will remain unchanged."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          nullable: true
          example: 85
          description: "Updated percentage threshold for alerts."
        status:
          type: string
          enum: [active, completed, upcoming, archived]
          example: "active"
          description: "Updated status of the budget."

    # Investments & Portfolio Intelligence
    InvestmentPortfolio:
      type: object
      required:
        - id
        - name
        - type
        - currency
        - totalValue
        - lastUpdated
        - riskTolerance
      properties:
        id:
          type: string
          example: "portfolio_equity_growth"
          description: "Unique identifier for the investment portfolio."
        name:
          type: string
          example: "Aggressive Growth Portfolio"
          description: "User-friendly name of the portfolio."
        type:
          type: string
          enum: [equities, bonds, diversified, crypto, reit, commodities, other]
          example: "equities"
          description: "Primary asset type or strategy of the portfolio."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "Base currency of the portfolio."
        totalValue:
          type: number
          format: float
          example: 250000.00
          description: "Current total market value of the portfolio."
        unrealizedGainLoss:
          type: number
          format: float
          example: 25000.00
          description: "Total unrealized gain or loss for the portfolio."
        todayGainLoss:
          type: number
          format: float
          example: 500.00
          description: "Today's gain or loss for the portfolio."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T10:00:00Z"
          description: "Timestamp when the portfolio data was last synced/updated."
        riskTolerance:
          type: string
          enum: [conservative, moderate, balanced, aggressive, very_aggressive]
          example: "aggressive"
          description: "User's stated or AI-derived risk tolerance for this portfolio."
        holdings:
          type: array
          items:
            $ref: "#/components/schemas/InvestmentHolding"
          nullable: true
          description: "Detailed breakdown of assets held within the portfolio."
        aiPerformanceInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "AI-driven insights into portfolio performance and market outlook."
        aiRebalancingFrequency:
          type: string
          enum: [monthly, quarterly, semi_annually, annually, manual]
          nullable: true
          example: "quarterly"
          description: "Frequency at which the AI is configured to suggest or perform rebalancing for this portfolio."

    InvestmentHolding:
      type: object
      required:
        - symbol
        - name
        - quantity
        - averageCost
        - currentPrice
        - marketValue
        - percentageOfPortfolio
      properties:
        symbol:
          type: string
          example: "AAPL"
          description: "Ticker symbol of the asset."
        name:
          type: string
          example: "Apple Inc."
          description: "Full name of the asset."
        quantity:
          type: number
          format: float
          example: 100
          description: "Number of units held."
        averageCost:
          type: number
          format: float
          example: 150.00
          description: "Average cost per unit."
        currentPrice:
          type: number
          format: float
          example: 180.00
          description: "Current market price per unit."
        marketValue:
          type: number
          format: float
          example: 18000.00
          description: "Total market value of this holding."
        percentageOfPortfolio:
          type: number
          format: float
          example: 7.2
          description: "Percentage this holding represents of the total portfolio value."
        gainLoss:
          type: number
          format: float
          example: 3000.00
          description: "Total gain or loss for this holding."
        esgScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          nullable: true
          example: 8.5
          description: "ESG (Environmental, Social, Governance) score for the asset."

    InvestmentPortfolioCreationRequest:
      type: object
      required:
        - name
        - type
        - currency
        - initialInvestment
        - riskTolerance
      properties:
        name:
          type: string
          example: "My First Growth Portfolio"
          description: "Name for the new investment portfolio."
        type:
          type: string
          enum: [equities, bonds, diversified, crypto, reit, commodities, other]
          example: "diversified"
          description: "Primary asset type or strategy of the portfolio."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "Base currency of the portfolio."
        initialInvestment:
          type: number
          format: float
          example: 10000.00
          description: "Initial amount to invest in the portfolio."
        riskTolerance:
          type: string
          enum: [conservative, moderate, balanced, aggressive, very_aggressive]
          example: "medium"
          description: "User's risk tolerance for this portfolio."
        aiAutoAllocate:
          type: boolean
          default: false
          example: true
          description: "If true, AI will automatically suggest and execute initial asset allocation based on risk tolerance."
        linkedAccountId:
          type: string
          nullable: true
          example: "acc_chase_checking_4567"
          description: "Optional: The account from which initial funds should be drawn."

    InvestmentPortfolioUpdateRequest:
      type: object
      properties:
        name:
          type: string
          example: "My Updated Growth Portfolio"
          description: "New name for the investment portfolio."
        riskTolerance:
          type: string
          enum: [conservative, moderate, balanced, aggressive, very_aggressive]
          example: "medium"
          description: "Updated risk tolerance for this portfolio."
        aiRebalancingFrequency:
          type: string
          enum: [monthly, quarterly, semi_annually, annually, manual]
          example: "quarterly"
          description: "Updated frequency for AI-driven portfolio rebalancing."
        targetAllocation:
          type: object
          nullable: true
          description: "Optional: Target asset allocation percentages for rebalancing."
          properties:
            equities: {type: number, format: float, example: 0.6}
            bonds: {type: number, format: float, example: 0.3}
            cash: {type: number, format: float, example: 0.1}

    RebalanceRequest:
      type: object
      properties:
        targetRiskTolerance:
          type: string
          enum: [conservative, moderate, balanced, aggressive, very_aggressive]
          nullable: true
          description: "Optional: The desired risk tolerance for the rebalancing. If not provided, uses portfolio's current risk tolerance."
          example: "medium"
        dryRun:
          type: boolean
          default: true
          example: true
          description: "If true, the AI will only propose trades without executing them."
        confirmationRequired:
          type: boolean
          default: true
          example: true
          description: "If true, user confirmation is required before executing trades (even if dryRun is false)."

    RebalanceStatus:
      type: object
      required:
        - rebalanceId
        - portfolioId
        - status
        - statusMessage
      properties:
        rebalanceId:
          type: string
          example: "rebal_port_growth_123"
          description: "Unique identifier for the rebalancing operation."
        portfolioId:
          type: string
          example: "portfolio_equity_growth"
          description: "The ID of the portfolio being rebalanced."
        status:
          type: string
          enum: [analyzing, pending_confirmation, executing, completed, failed, cancelled]
          example: "analyzing"
          description: "Current status of the rebalancing operation."
        statusMessage:
          type: string
          example: "AI is analyzing optimal trade strategy to match target risk profile."
          description: "A descriptive message about the current status."
        proposedTrades:
          type: array
          items:
            type: object
            properties:
              action: {type: string, enum: [buy, sell], example: "buy"}
              symbol: {type: string, example: "GOOG"}
              quantity: {type: number, format: float, example: 10}
              estimatedCostRevenue: {type: number, format: float, example: 1500.00}
          nullable: true
          description: "Details of proposed trades if status is 'pending_confirmation' or 'executing'."
        estimatedImpact:
          type: string
          nullable: true
          example: "Projected 5% reduction in portfolio volatility."
          description: "AI's estimated impact of the rebalancing on portfolio metrics."
        confirmationRequired:
          type: boolean
          example: true
          description: "Indicates if user confirmation is needed to proceed with trades."
        confirmationExpiresAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T15:00:00Z"
          description: "Timestamp when pending confirmation will expire."

    ESGAssetSearchResult:
      type: object
      required:
        - assetSymbol
        - assetName
        - assetType
        - currentPrice
        - currency
        - overallESGScore
      properties:
        assetSymbol:
          type: string
          example: "TSLA"
          description: "Ticker symbol or identifier of the asset."
        assetName:
          type: string
          example: "Tesla Inc."
          description: "Full name of the asset."
        assetType:
          type: string
          enum: [stock, etf, mutual_fund, bond, crypto]
          example: "stock"
          description: "Type of investment asset."
        currentPrice:
          type: number
          format: float
          example: 250.75
          description: "Current market price of the asset."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "Currency of the asset's price."
        overallESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          description: "Overall Environmental, Social, and Governance (ESG) score."
        environmentalScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          nullable: true
          example: 9.5
          description: "Environmental component of the ESG score."
        socialScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          nullable: true
          example: 8.8
          description: "Social component of the ESG score."
        governanceScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          nullable: true
          example: 9.0
          description: "Governance component of the ESG score."
        esgRatingProvider:
          type: string
          nullable: true
          example: "MSCI"
          description: "Provider of the ESG rating data."
        esgControversies:
          type: array
          items:
            type: string
          nullable: true
          example: ["Labor Practices Controversy"]
          description: "List of known ESG-related controversies or negative events."
        aiESGInsight:
          type: string
          nullable: true
          example: "Tesla's high environmental score is driven by its focus on sustainable transportation, though social scores reflect recent labor concerns."
          description: "AI-generated insight summarizing the ESG profile."

    # AI Advisor (Quantum)
    AIChatRequest:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: "The user's natural language input to the AI Advisor."
          example: "Can you analyze my recent spending patterns and suggest areas for saving, focusing on my dining expenses?"
        sessionId:
          type: string
          nullable: true
          description: "Optional: The ID of an ongoing conversation session to maintain context."
          example: "session-quantum-xyz-789-alpha"
        functionResponse:
          type: object
          nullable: true
          description: "Optional: The output from a tool function that the AI previously requested to be executed by the client."
          properties:
            name:
              type: string
              description: "The name of the function that was called."
              example: "send_money"
            response:
              type: object
              description: "The JSON object containing the result of the function call."
              example:
                status: "success"
                transactionId: "pmt_654321"
                amountSent: 50
                recipient: "Alex"

    AIChatResponse:
      type: object
      properties:
        text:
          type: string
          description: "The AI Advisor's textual response."
          example: "I've completed a detailed analysis of your spending. It appears your dining expenses account for 35% of your total outflows this month, significantly higher than your target. Would you like me to identify specific areas for reduction or suggest alternative dining options?"
        sessionId:
          type: string
          description: "The ID of the current conversation session."
          example: "session-quantum-xyz-789-alpha"
        proactiveInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "AI-generated proactive insights or recommendations."
        functionCalls:
          type: array
          items:
            $ref: "#/components/schemas/AIFunctionCall"
          nullable: true
          description: "Requests for the client application to execute specific tool functions on behalf of the AI."
        followUpQuestions:
          type: array
          items:
            type: string
          nullable: true
          example: ["Would you like to see a breakdown by merchant?", "Should I adjust your dining budget?"]
          description: "Suggestions for next conversational turns or clarifications needed by the AI."

    AIInsight:
      type: object
      required:
        - id
        - title
        - description
        - category
        - severity
        - timestamp
      properties:
        id:
          type: string
          example: "insight-dining-overspend-002"
          description: "Unique identifier for the insight."
        title:
          type: string
          example: "High Dining Spend Alert"
          description: "Concise title of the insight."
        description:
          type: string
          example: "Your dining expenses this month are 35% higher than your average, potentially impacting your budget by $150."
          description: "Detailed description of the insight."
        category:
          type: string
          enum: [spending, saving, investing, budget, security, sustainability, corporate_treasury, marketplace, compliance, credit, lending]
          example: "spending"
          description: "Category of the insight."
        severity:
          type: string
          enum: [low, medium, high, critical]
          example: "medium"
          description: "Severity level of the insight."
        actionableRecommendation:
          type: string
          nullable: true
          example: "Consider utilizing the 'Budget Optimizer' tool to adjust your dining budget or explore meal prep options."
          description: "A concrete, actionable step the user can take."
        actionTrigger:
          type: string
          nullable: true
          example: "open_budget_optimizer_tool"
          description: "A programmatic identifier to trigger an action within the client application."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-22T15:00:00Z"
          description: "Timestamp when the insight was generated."

    AIFunctionCall:
      type: object
      required:
        - id
        - name
        - args
      properties:
        id:
          type: string
          description: "Unique identifier for this specific function call."
          example: "call_abc123"
        name:
          type: string
          description: "The name of the tool function to be called."
          example: "send_money"
        args:
          type: object
          description: "A JSON object containing the arguments for the function call."
          example:
            recipient: "Alex"
            currency: "USD"

    AITool:
      type: object
      required:
        - name
        - description
        - parameters
        - accessScope
      properties:
        name:
          type: string
          description: "The name of the tool function."
          example: "send_money"
        description:
          type: string
          description: "A description of what the tool does."
          example: "Sends money to a specified recipient from the user's primary checking account."
        parameters:
          type: object
          description: "An OpenAPI-compatible schema object for the tool's input parameters."
          example:
            type: "object"
            properties:
              amount:
                type: "number"
                description: "The amount of money to send."
              recipient:
                type: "string"
                description: "The name or ID of the recipient."
              currency:
                type: "string"
                description: "The currency of the transaction (e.g., USD, EUR)."
            required:
              - "amount"
              - "recipient"
              - "currency"
        accessScope:
          type: string
          description: "The OAuth2 scope required to execute this tool."
          example: "write:payments"

    ChatMessage:
      type: object
      required:
        - role
        - content
        - timestamp
      properties:
        role:
          type: string
          enum: [user, assistant, tool]
          description: "The role of the sender of the message."
          example: "user"
        content:
          type: string
          description: "The content of the message."
          example: "What is my current net worth?"
        timestamp:
          type: string
          format: date-time
          example: "2024-07-22T18:00:00Z"
          description: "The timestamp when the message was sent/generated."
        functionCall:
          $ref: "#/components/schemas/AIFunctionCall"
          nullable: true
          description: "If the role is 'assistant' and this is a tool call."
        functionResponse:
          type: object
          nullable: true
          description: "If the role is 'tool', the output of the function call."

    PaginatedChatMessages:
      type: object
      properties:
        limit:
          type: integer
          example: 50
          description: "The maximum number of items returned per page."
        offset:
          type: integer
          example: 0
          description: "The starting index of the list for pagination."
        total:
          type: integer
          example: 100
          description: "The total number of available items."
        data:
          type: array
          items:
            $ref: "#/components/schemas/ChatMessage"
        nextOffset:
          type: integer
          nullable: true
          example: 50
          description: "The offset to use for the next page of results. Null if no more pages."

    # Quantum Oracle (Predictive Simulation)
    SimulationRequest:
      type: object
      required:
        - prompt
      properties:
        prompt:
          type: string
          description: "Natural language description of the financial scenario to simulate."
          example: "What if I invest an additional $1,000 per month into my aggressive growth portfolio for the next 5 years?"
        parameters:
          type: object
          nullable: true
          description: "Structured parameters to guide the simulation, complementing the natural language prompt."
          example:
            durationYears: 5
            monthlyInvestmentAmount: 1000
            riskTolerance: "aggressive"

    SimulationResponse:
      type: object
      required:
        - simulationId
        - narrativeSummary
      properties:
        simulationId:
          type: string
          example: "sim_oracle-growth-2024-xyz"
          description: "Unique identifier for the completed simulation."
        narrativeSummary:
          type: string
          description: "A natural language summary of the simulation's findings and overall impact."
          example: "If you consistently invest an additional $1,000 per month into your aggressive growth portfolio over the next 5 years, the Quantum Oracle predicts your portfolio could grow by approximately 45-60%, significantly increasing your wealth. However, this comes with elevated risk during market downturns."
        keyImpacts:
          type: array
          items:
            type: object
            properties:
              metric: {type: string, example: "Projected Portfolio Value"}
              value: {type: string, example: "$120,000 - $140,000"}
              severity: {type: string, enum: [low, medium, high, critical], example: "high"}
          description: "Key financial metrics and their projected changes due to the simulation."
        recommendations:
          type: array
          items:
            type: object
            properties:
              title: {type: string, example: "Review Portfolio Diversification"}
              description: {type: string, example: "Given the aggressive nature of this strategy, the Oracle suggests reviewing your current portfolio diversification to mitigate concentration risk."}
              actionTrigger: {type: string, example: "open_portfolio_diversification_tool"}
          nullable: true
          description: "Actionable recommendations derived from the simulation results."
        riskAnalysis:
          type: object
          nullable: true
          properties:
            maxDrawdown: {type: number, format: float, example: 0.25, description: "Maximum potential percentage loss from peak to trough."}
            volatilityIndex: {type: number, format: float, example: 0.18, description: "AI-calculated volatility index for the simulated scenario."}
          description: "AI-driven risk assessment of the simulated scenario."

    AdvancedSimulationRequest:
      type: object
      required:
        - prompt
        - scenarios
      properties:
        prompt:
          type: string
          description: "Natural language description of the complex financial simulation."
          example: "Evaluate the long-term impact of a sudden job loss combined with a variable market downturn, analyzing worst-case and best-case recovery scenarios over a decade."
        scenarios:
          type: array
          minItems: 1
          items:
            type: object
            required:
              - name
              - durationYears
              - events
            properties:
              name:
                type: string
                example: "Job Loss & Mild Market Recovery"
                description: "Name for this specific scenario."
              durationYears:
                type: integer
                minimum: 1
                example: 10
                description: "The duration of the simulation in years."
              events:
                type: array
                items:
                  type: object
                  required:
                    - type
                    - details
                  properties:
                    type:
                      type: string
                      enum: [job_loss, market_downturn, major_expense, income_increase, large_investment, property_purchase, inheritance]
                      example: "job_loss"
                      description: "Type of event occurring in the scenario."
                    details:
                      type: object
                      description: "Specific parameters for the event type."
                      example:
                        durationMonths: 6
                        severanceAmount: 10000
                        unemploymentBenefits: 2000
              sensitivityAnalysisParams:
                type: array
                items:
                  type: object
                  required:
                    - paramName
                    - min
                    - max
                  properties:
                    paramName: {type: string, example: "marketRecoveryRate"}
                    min: {type: number, format: float, example: 0.03}
                    max: {type: number, format: float, example: 0.07}
                    step: {type: number, format: float, nullable: true, example: 0.01}
                nullable: true
                description: "Parameters for which sensitivity analysis should be performed within this scenario."

    AdvancedSimulationResponse:
      type: object
      required:
        - simulationId
        - overallSummary
        - scenarioResults
      properties:
        simulationId:
          type: string
          example: "sim_oracle-complex-macro-123"
          description: "Unique identifier for the advanced simulation."
        overallSummary:
          type: string
          description: "A high-level narrative summary of the key findings across all scenarios."
          example: "The advanced simulation reveals that a job loss scenario has a significant initial impact on liquidity, but recovery is highly dependent on market conditions and the duration of unemployment. Proactive savings and diversified investments are key mitigating factors."
        scenarioResults:
          type: array
          items:
            type: object
            required:
              - scenarioName
              - narrativeSummary
              - finalNetWorthProjected
            properties:
              scenarioName:
                type: string
                example: "Job Loss & Mild Market Recovery"
                description: "Name of the specific scenario simulated."
              narrativeSummary:
                type: string
                example: "In this scenario, initial liquidity challenges are observed, but a swift market recovery and prudent spending lead to recovery within 3 years."
                description: "Summary of results for this specific scenario."
              finalNetWorthProjected:
                type: number
                format: float
                example: 1250000
                description: "Projected net worth at the end of the simulation for this scenario."
              liquidityMetrics:
                type: object
                properties:
                  minCashBalance: {type: number, format: float, example: -5000}
                  recoveryTimeMonths: {type: integer, example: 36}
                description: "Key liquidity metrics for the scenario."
              sensitivityAnalysisGraphs:
                type: array
                items:
                  type: object
                  properties:
                    paramName: {type: string, example: "marketRecoveryRate"}
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          paramValue: {type: number, format: float, example: 0.03}
                          outcomeValue: {type: number, format: float, example: 1100000}
                description: "Data points for generating sensitivity analysis charts."
        strategicRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "Strategic, actionable recommendations derived from the complex simulation."

    SimulationSummary:
      type: object
      required:
        - simulationId
        - title
        - status
        - creationDate
        - lastUpdated
        - summary
      properties:
        simulationId:
          type: string
          example: "sim_oracle-growth-2024-xyz"
          description: "Unique identifier for the simulation."
        title:
          type: string
          example: "Investment Growth Scenario"
          description: "User-friendly title of the simulation."
        status:
          type: string
          enum: [processing, completed, failed]
          example: "completed"
          description: "Current status of the simulation."
        creationDate:
          type: string
          format: date-time
          example: "2024-07-20T10:00:00Z"
          description: "Timestamp when the simulation was created."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-20T10:15:00Z"
          description: "Timestamp when the simulation status or results were last updated."
        summary:
          type: string
          example: "Simulated impact of additional monthly investments over 5 years."
          description: "A brief summary of the simulation's purpose or key finding."

    # Quantum Weaver (Business Incubation)
    QuantumWeaverState:
      type: object
      required:
        - pitchId
        - stage
        - statusMessage
        - lastUpdated
      properties:
        pitchId:
          type: string
          example: "pitch_qw_synergychain-xyz"
          description: "Unique identifier for the business pitch."
        stage:
          type: string
          enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
          example: "initial_review"
          description: "Current stage of the business pitch within Quantum Weaver's incubation pipeline."
        statusMessage:
          type: string
          example: "Your business plan has been received and is undergoing initial review by Quantum Weaver."
          description: "A descriptive message about the current status of the pitch."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T20:00:00Z"
          description: "Timestamp when the pitch status was last updated."
        feedbackSummary:
          type: string
          nullable: true
          description: "A summary of AI-generated feedback or key findings from the current stage."
          example: "Initial analysis indicates a strong market fit, but further detail is required on customer acquisition costs and scaling strategy."
        questions:
          type: array
          items:
            type: object
            properties:
              id: {type: string, example: "q_qa-team-001"}
              question: {type: string, example: "Please elaborate on the specific technical challenges..."}
              category: {type: string, example: "technology"}
              isRequired: {type: boolean, example: true}
          nullable: true
          description: "A list of specific questions from Quantum Weaver requiring the entrepreneur's input."
        nextSteps:
          type: string
          nullable: true
          example: "Please monitor for AI-generated feedback and potential questions within the next 48 hours."
          description: "Guidance on what the entrepreneur should do next."
        estimatedFundingOffer:
          type: number
          format: float
          nullable: true
          example: 5000000
          description: "Estimated seed funding amount offered by Quantum Weaver (if applicable)."

    QuantumWeaverDetailedState:
      allOf:
        - $ref: "#/components/schemas/QuantumWeaverState"
        - type: object
          properties:
            aiFinancialModel:
              type: object
              nullable: true
              properties:
                revenueBreakdown: {type: object, example: {"Year 1": "2.5M", "Year 2": "7.8M", "Year 3": "15M"}}
                costStructureAnalysis: {type: object, example: {"Fixed Costs": "30%", "Variable Costs": "40%", "R&D": "15%"}}
                breakevenPoint: {type: string, example: "18 months"}
                capitalRequirements: {type: number, format: float, example: 4500000}
                sensitivityAnalysis:
                  type: array
                  items:
                    type: object
                    properties:
                      scenario: {type: string, example: "Aggressive Growth"}
                      projectedIRR: {type: number, format: float, example: 0.35}
                      terminalValue: {type: number, format: float, example: 50000000}
              description: "AI-generated financial model and analysis."
            aiMarketAnalysis:
              type: object
              nullable: true
              properties:
                targetMarketSize: {type: string, example: "$50 Billion (TAM)"}
                competitiveAdvantages: {type: array, items: {type: string}, example: ["Proprietary AI Algorithm", "First-mover advantage"]}
                growthOpportunities: {type: string, example: "Expansion into APAC region..."}
                riskFactors: {type: string, example: "Regulatory changes in AI governance..."}
              description: "AI-driven market opportunity analysis and competitive landscape."
            aiCoachingPlan:
              type: object
              nullable: true
              properties:
                title: {type: string, example: "Pre-Seed Fundraising Strategy"}
                summary: {type: string, example: "This plan outlines key strategic steps..."}
                steps:
                  type: array
                  items:
                    type: object
                    properties:
                      title: {type: string, example: "Refine Investor Presentation"}
                      description: {type: string, example: "Update your pitch deck..."}
                      timeline: {type: string, example: "1-2 weeks"}
                      status: {type: string, enum: [pending, in_progress, completed], example: "pending"}
                      resources:
                        type: array
                        items:
                          type: object
                          properties:
                            name: {type: string, example: "Pitch Deck Template"}
                            url: {type: string, format: uri, example: "https://demobank.com/resources/pitch-template.pptx"}
              description: "An AI-generated strategic coaching plan for the entrepreneur."
            investorMatchScore:
              type: number
              format: float
              minimum: 0
              maximum: 1
              nullable: true
              example: 0.88
              description: "AI's score on how well the pitch aligns with investor criteria."
            aiRiskAssessment:
              type: object
              nullable: true
              properties:
                technicalRisk: {type: string, example: "Medium (complex AI development, quantum compute dependencies)"}
                marketRisk: {type: string, example: "Low (established market, clear pain points, strong value prop)"}
                teamRisk: {type: string, example: "Low (experienced founding team with relevant domain expertise)"}
              description: "AI's assessment of various risk factors for the venture."

    QuantumWeaverFeedbackRequest:
      type: object
      properties:
        feedback:
          type: string
          nullable: true
          description: "General feedback or additional information provided by the entrepreneur."
          example: "Regarding the technical challenges, our team has allocated 3 months for R&D on quantum-resistant cryptography, mitigating the risk. We've also brought in Dr. Elena Petrova, a leading expert in secure multi-party computation."
        answers:
          type: array
          items:
            type: object
            required:
              - questionId
              - answer
            properties:
              questionId:
                type: string
                example: "q_qa-team-001"
                description: "The ID of the question being answered."
              answer:
                type: string
                example: "Our mitigation strategy includes dedicated R&D and new hires with specific expertise."
                description: "The entrepreneur's answer to the question."

    # AI Ad Studio (Veo 2.0)
    GenerateVideoRequest:
      type: object
      required:
        - prompt
        - style
        - lengthSeconds
        - aspectRatio
      properties:
        prompt:
          type: string
          description: "Textual description for the AI to generate the video content."
          example: "A captivating ad featuring a young entrepreneur using Demo Bank's AI tools to grow their startup. Focus on innovation and ease of use."
        style:
          type: string
          enum: [Realistic, Cinematic, Animated, Abstract, Minimalist]
          example: "Cinematic"
          description: "Artistic style preference for the video."
        lengthSeconds:
          type: integer
          minimum: 5
          maximum: 60
          example: 15
          description: "Desired length of the video in seconds."
        aspectRatio:
          type: string
          enum: ["16:9", "9:16", "1:1"]
          example: "16:9"
          description: "Desired aspect ratio of the video (e.g., for YouTube, Instagram Reels)."
        brandColors:
          type: array
          items:
            type: string
            format: hex-color
          nullable: true
          example: ["#0000FF", "#FFD700"]
          description: "Optional list of brand hex colors to influence the video's aesthetic."
        keywords:
          type: array
          items:
            type: string
          nullable: true
          example: ["fintech", "startup", "innovation", "easy banking"]
          description: "Additional keywords to guide AI content generation."

    AdvancedGenerateVideoRequest:
      allOf:
        - $ref: "#/components/schemas/GenerateVideoRequest"
        - type: object
          properties:
            voiceoverText:
              type: string
              nullable: true
              description: "Specific text for a generated voiceover."
              example: "Demo Bank: Your business, powered by intelligent finance."
            voiceoverStyle:
              type: string
              enum: [male_professional, female_friendly, neutral_calm]
              nullable: true
              example: "male_professional"
              description: "Style of the AI-generated voiceover."
            backgroundMusic:
              type: string
              enum: [upbeat, calm, dramatic, none]
              nullable: true
              example: "upbeat"
              description: "Desired background music style."
            audienceTarget:
              type: string
              enum: [general, young_adults, corporate, small_business, investors]
              nullable: true
              example: "corporate"
              description: "Target audience to optimize messaging and visuals."
            callToAction:
              type: object
              nullable: true
              properties:
                text: {type: string, example: "Learn more at DemoBank.com/business"}
                url: {type: string, format: uri, example: "https://demobank.com/business"}
                displayTimeSeconds: {type: integer, example: 5}
              description: "Details for an integrated call-to-action button or text overlay."
            brandAssets:
              type: array
              items:
                type: string
                format: uri
              nullable: true
              description: "URLs to brand assets (e.g., logos, specific imagery) to be incorporated."
              example: ["https://demobank.com/assets/corporate_logo.png"]

    VideoOperationStatus:
      type: object
      required:
        - operationId
        - status
        - progressPercentage
        - message
      properties:
        operationId:
          type: string
          example: "op-video-gen-12345-abcde"
          description: "Unique identifier for the video generation operation."
        status:
          type: string
          enum: [queued, generating, rendering, done, error]
          example: "rendering"
          description: "Current status of the video generation."
        progressPercentage:
          type: integer
          minimum: 0
          maximum: 100
          example: 75
          description: "Progress of the operation in percentage."
        message:
          type: string
          example: "Encoding final video with optimized codecs..."
          description: "A descriptive message about the current stage or any issues."
        videoUri:
          type: string
          format: uri
          nullable: true
          example: "https://demobank-cdn.com/generated-videos/final/1a2b3c4d.mp4?sig=eyJ..."
          description: "Temporary, signed URL to the generated video asset (available when status is 'done')."
        previewImageUri:
          type: string
          format: uri
          nullable: true
          example: "https://demobank-cdn.com/generated-videos/preview/1a2b3c4d.png"
          description: "Temporary, signed URL to a preview image/thumbnail of the video."
        errorMessage:
          type: string
          nullable: true
          example: "Failed to process prompt: 'Inappropriate content detected. Please adjust your request.'"
          description: "Detailed error message if the status is 'error'."
        createdAt:
          type: string
          format: date-time
          example: "2024-07-22T15:00:00Z"
          description: "Timestamp when the video generation request was created."
        completedAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T15:05:00Z"
          description: "Timestamp when the video generation was completed or failed."

    # Corporate Finance - Enterprise Cards
    CorporateCard:
      type: object
      required:
        - id
        - holderName
        - cardNumberMask
        - expirationDate
        - status
        - frozen
        - cardType
        - controls
        - createdDate
      properties:
        id:
          type: string
          example: "corp_card_xyz987654"
          description: "Unique identifier for the corporate card."
        holderName:
          type: string
          example: "Alex Johnson"
          description: "Name of the cardholder or purpose."
        associatedEmployeeId:
          type: string
          nullable: true
          example: "emp_ajohnson_007"
          description: "Employee ID associated with the card (if applicable)."
        cardNumberMask:
          type: string
          example: "4111********1234"
          description: "Masked card number for display purposes."
        expirationDate:
          type: string
          format: date
          example: "2028-12-31"
          description: "Expiration date of the card."
        status:
          type: string
          enum: [Active, Suspended, Cancelled, Expired]
          example: "Active"
          description: "Current status of the card."
        frozen:
          type: boolean
          example: false
          description: "True if the card is currently frozen, preventing transactions."
        cardType:
          type: string
          enum: [physical, virtual]
          example: "physical"
          description: "Type of the corporate card."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
          description: "Granular spending controls applied to this card."
        spendingPolicyId:
          type: string
          nullable: true
          example: "policy_travel_eu"
          description: "ID of the corporate spending policy this card adheres to (if any)."
        createdDate:
          type: string
          format: date-time
          example: "2023-01-15T09:00:00Z"
          description: "Date when the card was created/issued."

    CorporateCardControls:
      type: object
      properties:
        atmWithdrawals:
          type: boolean
          example: true
          description: "Allow ATM withdrawals."
        contactlessPayments:
          type: boolean
          example: true
          description: "Allow contactless payments."
        onlineTransactions:
          type: boolean
          example: true
          description: "Allow online transactions."
        internationalTransactions:
          type: boolean
          example: false
          description: "Allow international transactions."
        monthlyLimit:
          type: number
          format: float
          nullable: true
          minimum: 0
          example: 2500.00
          description: "Maximum spending limit per month."
        dailyLimit:
          type: number
          format: float
          nullable: true
          minimum: 0
          example: 500.00
          description: "Maximum spending limit per day."
        singleTransactionLimit:
          type: number
          format: float
          nullable: true
          minimum: 0
          example: 1000.00
          description: "Maximum amount for a single transaction."
        merchantCategoryRestrictions:
          type: array
          items:
            type: string
          nullable: true
          example: ["Restaurants", "Travel", "Office Supplies"]
          description: "List of allowed or disallowed merchant categories."
        vendorRestrictions:
          type: array
          items:
            type: string
          nullable: true
          example: ["Amazon", "Uber"]
          description: "List of specific allowed or disallowed vendors/merchants."

    VirtualCardCreationRequest:
      type: object
      required:
        - holderName
        - purpose
        - controls
        - expirationDate
      properties:
        holderName:
          type: string
          example: "Marketing Campaign Q4"
          description: "Name for the virtual card holder or its purpose."
        associatedEmployeeId:
          type: string
          nullable: true
          example: "emp_marketing_01"
          description: "Optional: Employee ID to associate with this virtual card."
        purpose:
          type: string
          example: "Online advertising for Q4 campaigns"
          description: "Brief description of the virtual card's intended use."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
          description: "Specific spending controls for this virtual card."
        expirationDate:
          type: string
          format: date
          example: "2025-12-31"
          description: "Expiration date for the virtual card."

    # Corporate Finance - Compliance & Risk & Fraud
    FinancialAnomaly:
      type: object
      required:
        - id
        - description
        - severity
        - status
        - entityType
        - entityId
        - timestamp
        - riskScore
        - aiConfidenceScore
      properties:
        id:
          type: string
          example: "anom_risk-2024-07-21-D1E2F3"
          description: "Unique identifier for the detected anomaly."
        description:
          type: string
          example: "Unusual large transaction detected in an inactive account."
          description: "A concise summary of the anomaly."
        details:
          type: string
          nullable: true
          example: "Transaction of $15,000 to 'International Widgets Inc.' from account 'CHASE CHECKING 4567'. This account has been dormant for 6 months and typical transactions are under $500. High risk score due to dormancy and unusual amount/payee combination."
          description: "Detailed description of the anomaly, including contributing factors."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "Critical"
          description: "AI-assessed severity level of the anomaly."
        status:
          type: string
          enum: [New, Under Review, Escalated, Dismissed, Resolved]
          example: "New"
          description: "Current review status of the anomaly."
        entityType:
          type: string
          enum: [PaymentOrder, Transaction, Counterparty, CorporateCard, Invoice, User, Account]
          example: "Transaction"
          description: "The type of financial entity or activity the anomaly relates to."
        entityId:
          type: string
          example: "txn_quantum-2024-07-21-A7B8C9"
          description: "The ID of the specific entity (e.g., transaction ID, user ID) related to the anomaly."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-21T10:15:30Z"
          description: "Timestamp when the anomaly was detected."
        riskScore:
          type: integer
          minimum: 0
          maximum: 100
          example: 95
          description: "AI-calculated risk score (0-100) for the anomaly."
        aiConfidenceScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          example: 0.98
          description: "AI's confidence score (0-1) in the anomaly detection."
        recommendedAction:
          type: string
          nullable: true
          example: "Immediately freeze associated corporate card and contact cardholder for verification."
          description: "AI-recommended immediate action to address the anomaly."
        relatedTransactions:
          type: array
          items:
            type: string
          nullable: true
          description: "List of IDs of other transactions potentially related to this anomaly."
        resolutionNotes:
          type: string
          nullable: true
          description: "Notes provided by an analyst or the AI upon resolving or dismissing the anomaly."
          example: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."

    ComplianceAuditRequest:
      type: object
      required:
        - auditScope
        - startDate
        - endDate
        - regulatoryFrameworks
      properties:
        auditScope:
          type: string
          enum: [all_transactions, corporate_cards, international_payments, user_onboarding, specific_accounts]
          description: "The scope of the compliance audit."
          example: "all_transactions"
        startDate:
          type: string
          format: date
          description: "Start date for the audit period (inclusive)."
          example: "2024-01-01"
        endDate:
          type: string
          format: date
          description: "End date for the audit period (inclusive)."
          example: "2024-06-30"
        regulatoryFrameworks:
          type: array
          items:
            type: string
            enum: [AML, KYC, PCI-DSS, GDPR, CCPA, SOX]
          minItems: 1
          description: "List of regulatory frameworks to audit against."
          example: ["AML", "PCI-DSS"]
        specificAccountIds:
          type: array
          items:
            type: string
          nullable: true
          description: "Optional: List of specific account IDs to include if `auditScope` is 'specific_accounts'."

    ComplianceAuditReport:
      type: object
      required:
        - auditId
        - status
        - auditDate
        - periodCovered
        - overallComplianceScore
        - summary
        - findings
        - recommendedActions
      properties:
        auditId:
          type: string
          example: "audit_corp_xyz789"
          description: "Unique identifier for the audit report."
        status:
          type: string
          enum: [processing, completed, failed]
          example: "completed"
          description: "Current status of the audit."
        auditDate:
          type: string
          format: date-time
          example: "2024-07-22T19:00:00Z"
          description: "Date and time when the audit report was generated."
        periodCovered:
          type: object
          properties:
            startDate: {type: string, format: date, example: "2024-01-01"}
            endDate: {type: string, format: date, example: "2024-06-30"}
          description: "The time period covered by the audit."
        overallComplianceScore:
          type: integer
          minimum: 0
          maximum: 100
          example: 92
          description: "Overall compliance score (0-100), indicating adherence to regulations."
        summary:
          type: string
          example: "Overall high compliance across all transaction types. Minor areas for improvement identified in expense reporting related to receipt documentation."
          description: "A summary of the audit findings."
        findings:
          type: array
          items:
            type: object
            properties:
              type: {type: string, enum: [violation, observation, recommendation], example: "recommendation"}
              severity: {type: string, enum: [Low, Medium, High, Critical], example: "Low"}
              description: {type: string, example: "Several small transactions lacked complete receipt documentation..."}
              regulatoryBreach: {type: string, nullable: true, example: "PCI-DSS 3.2.1 Requirement 3.4"}
              relatedEntities: {type: array, items: {type: string}, nullable: true, example: ["txn_abc123", "txn_def456"]}
          description: "Detailed findings, including violations, observations, and recommendations."
        recommendedActions:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated actionable recommendations to improve compliance."

    SanctionScreeningRequest:
      type: object
      required:
        - name
        - country
        - entityType
      properties:
        name:
          type: string
          description: "Full name of the individual or organization to screen."
          example: "John Doe"
        country:
          type: string
          description: "Country of residence or operation (ISO 3166-1 alpha-2 code)."
          example: "US"
        dateOfBirth:
          type: string
          format: date
          nullable: true
          description: "Date of birth for individual screening (YYYY-MM-DD)."
          example: "1970-01-01"
        entityType:
          type: string
          enum: [individual, organization]
          description: "The type of entity being screened."
          example: "individual"
        address:
          $ref: "#/components/schemas/Address"
          nullable: true
          description: "Full address for enhanced screening."

    SanctionScreeningResponse:
      type: object
      required:
        - screeningId
        - matchFound
        - screeningTimestamp
        - status
      properties:
        screeningId:
          type: string
          example: "screen_xyz456"
          description: "Unique identifier for this screening operation."
        matchFound:
          type: boolean
          description: "True if any potential matches were found, false otherwise."
          example: false
        matchDetails:
          type: array
          items:
            type: object
            properties:
              listName: {type: string, example: "OFAC SDN List"}
              matchedName: {type: string, example: "John Doe A.K.A. J. D."}
              reason: {type: string, example: "Possible alias match based on name and DOB."}
              score: {type: number, format: float, minimum: 0, maximum: 1, example: 0.85}
              additionalInfo: {type: object, nullable: true, description: "Additional data from the sanctions list entry."}
          nullable: true
          description: "Details of any potential matches found during screening."
        screeningTimestamp:
          type: string
          format: date-time
          example: "2024-07-22T19:30:00Z"
          description: "Timestamp when the screening was performed."
        status:
          type: string
          enum: [clear, potential_match, confirmed_match, error]
          example: "clear"
          description: "Overall status of the sanction screening."
        aiRiskScore:
          type: integer
          minimum: 0
          maximum: 100
          nullable: true
          example: 10
          description: "AI-calculated risk score (0-100) based on screening results."

    FraudRule:
      type: object
      required:
        - id
        - name
        - description
        - status
        - severity
        - criteria
        - action
        - createdBy
        - createdAt
        - lastUpdated
      properties:
        id:
          type: string
          example: "fraud_rule_high_value_inactive"
          description: "Unique identifier for the fraud rule."
        name:
          type: string
          example: "High Value Transaction from Inactive Account"
          description: "A descriptive name for the rule."
        description:
          type: string
          example: "Flags transactions over a certain threshold from accounts that have been inactive for a specified period."
          description: "Detailed description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          example: "active"
          description: "Current status of the rule."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "High"
          description: "Severity level associated with a detected anomaly by this rule."
        criteria:
          type: object
          description: "A dynamic object defining the conditions that trigger the rule."
          example:
            transactionAmountMin: 5000
            accountInactivityDays: 90
            transactionType: "debit"
            countryOfOrigin: ["US", "CA"]
        action:
          type: object
          required:
            - type
            - details
          properties:
            type:
              type: string
              enum: [flag, alert, block, auto_review, mfa_challenge]
              example: "block"
              description: "The automated action to take when the rule is triggered."
            details:
              type: string
              example: "Block transaction and send critical alert to fraud team."
              description: "Further details about the action."
        createdBy:
          type: string
          example: "system:ai-risk-engine"
          description: "Identifier of the creator (user or system)."
        createdAt:
          type: string
          format: date-time
          example: "2024-05-01T10:00:00Z"
          description: "Timestamp when the rule was created."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-20T11:30:00Z"
          description: "Timestamp when the rule was last updated."
        priority:
          type: integer
          minimum: 1
          example: 50
          description: "Priority level for rule evaluation (lower number means higher priority)."

    FraudRuleCreationRequest:
      type: object
      required:
        - name
        - description
        - status
        - severity
        - criteria
        - action
      properties:
        name:
          type: string
          example: "Suspicious International Payment Pattern"
          description: "A descriptive name for the new rule."
        description:
          type: string
          example: "Detects multiple international payments to new beneficiaries in high-risk countries within a short timeframe."
          description: "Detailed description of what the rule should detect."
        status:
          type: string
          enum: [active, inactive, draft]
          example: "active"
          description: "Initial status of the rule."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "Critical"
          description: "Severity level for anomalies detected by this rule."
        criteria:
          type: object
          description: "The dynamic object defining the conditions that trigger the rule."
          example:
            paymentCountMin: 3
            timeframeHours: 24
            recipientNew: true
            recipientCountryRiskLevel: ["High", "Very High"]
        action:
          type: object
          required:
            - type
            - details
          properties:
            type:
              type: string
              enum: [flag, alert, block, auto_review, mfa_challenge]
              example: "auto_review"
              description: "The automated action to take when the rule is triggered."
            details:
              type: string
              example: "Hold payment, notify sender for additional verification, and escalate to compliance."
              description: "Further details about the action."
        priority:
          type: integer
          minimum: 1
          nullable: true
          example: 60
          description: "Optional: Priority level for rule evaluation."

    FraudRuleUpdateRequest:
      type: object
      properties:
        name:
          type: string
          example: "Updated High Value Transaction Rule"
          description: "Updated name for the fraud rule."
        description:
          type: string
          example: "Revised: Flags transactions over a higher threshold from dormant accounts."
          description: "Updated description of the rule."
        status:
          type: string
          enum: [active, inactive, draft]
          example: "inactive"
          description: "Updated status of the rule."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "High"
          description: "Updated severity level."
        criteria:
          type: object
          description: "The updated dynamic object defining the conditions."
          example:
            transactionAmountMin: 7500
            accountInactivityDays: 60
          additionalProperties: true # Allow for partial updates
        action:
          type: object
          properties:
            type:
              type: string
              enum: [flag, alert, block, auto_review, mfa_challenge]
              example: "flag"
            details:
              type: string
              example: "Flag for manual review only, do not block."
          additionalProperties: true
        priority:
          type: integer
          minimum: 1
          nullable: true
          example: 55
          description: "Updated priority level for rule evaluation."

    # DeFi & Web3 Assets
    CryptoWalletConnection:
      type: object
      required:
        - id
        - walletProvider
        - walletAddress
        - blockchainNetwork
        - status
        - lastSynced
        - readAccessGranted
        - writeAccessGranted
      properties:
        id:
          type: string
          example: "wallet_conn_eth_0xabc123"
          description: "Unique identifier for this wallet connection."
        walletProvider:
          type: string
          example: "MetaMask"
          description: "The name of the wallet provider (e.g., MetaMask, Ledger, Phantom)."
        walletAddress:
          type: string
          example: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
          description: "The public address of the connected cryptocurrency wallet."
        blockchainNetwork:
          type: string
          enum: [Ethereum, Solana, Polygon, BinanceSmartChain, Arbitrum, Optimism, other]
          example: "Ethereum"
          description: "The primary blockchain network this wallet is connected to."
        status:
          type: string
          enum: [connected, disconnected, verification_pending, error]
          example: "connected"
          description: "Current status of the wallet connection."
        lastSynced:
          type: string
          format: date-time
          example: "2024-07-22T13:00:00Z"
          description: "Timestamp of the last successful synchronization of wallet data."
        readAccessGranted:
          type: boolean
          example: true
          description: "Indicates if Demo Bank has permission to read balances and transaction history."
        writeAccessGranted:
          type: boolean
          example: false
          description: "Indicates if Demo Bank has permission to initiate transactions requiring user confirmation."

    ConnectWalletRequest:
      type: object
      required:
        - walletAddress
        - walletProvider
        - signedMessage
        - blockchainNetwork
      properties:
        walletAddress:
          type: string
          example: "0x123abc456def7890..."
          description: "The public address of the cryptocurrency wallet."
        walletProvider:
          type: string
          example: "MetaMask"
          description: "The name of the wallet provider."
        signedMessage:
          type: string
          description: "A message signed by the wallet to prove ownership (e.g., EIP-191)."
          example: "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
        blockchainNetwork:
          type: string
          enum: [Ethereum, Solana, Polygon, BinanceSmartChain, Arbitrum, Optimism, other]
          example: "Ethereum"
          description: "The primary blockchain network of the wallet."
        grantWriteAccess:
          type: boolean
          default: false
          description: "Set to true if write access (transaction initiation) is desired (requires further permissions)."

    CryptoAssetBalance:
      type: object
      required:
        - assetSymbol
        - assetName
        - balance
        - usdValue
      properties:
        assetSymbol:
          type: string
          example: "ETH"
          description: "Ticker symbol of the cryptocurrency (e.g., ETH, BTC, USDC)."
        assetName:
          type: string
          example: "Ethereum"
          description: "Full name of the cryptocurrency."
        balance:
          type: number
          format: float
          example: 2.5
          description: "The current balance of the asset in the wallet."
        usdValue:
          type: number
          format: float
          example: 7500.00
          description: "The equivalent value of the balance in USD."
        contractAddress:
          type: string
          nullable: true
          example: "0x..."
          description: "The contract address for ERC-20 tokens (if applicable)."
        blockchainNetwork:
          type: string
          enum: [Ethereum, Solana, Polygon, BinanceSmartChain, Arbitrum, Optimism, other]
          example: "Ethereum"
          description: "The blockchain network where this asset resides."

    NFTAsset:
      type: object
      required:
        - id
        - collectionName
        - name
        - imageUrl
        - blockchainNetwork
        - ownerAddress
        - contractAddress
        - tokenId
      properties:
        id:
          type: string
          example: "nft_bored_ape_yacht_club_1234"
          description: "Unique identifier for the NFT (often a combination of contract and token ID)."
        collectionName:
          type: string
          example: "Bored Ape Yacht Club"
          description: "Name of the NFT collection."
        name:
          type: string
          example: "Bored Ape #1234"
          description: "Name of the specific NFT."
        description:
          type: string
          nullable: true
          example: "A unique digital collectible from the Bored Ape Yacht Club series."
          description: "Description of the NFT."
        imageUrl:
          type: string
          format: uri
          example: "https://opensea.io/assets/ethereum/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d/1234"
          description: "URL to the NFT's image."
        blockchainNetwork:
          type: string
          enum: [Ethereum, Solana, Polygon, other]
          example: "Ethereum"
          description: "The blockchain network on which the NFT exists."
        ownerAddress:
          type: string
          example: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
          description: "The blockchain address of the current owner."
        contractAddress:
          type: string
          example: "0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d"
          description: "The smart contract address of the NFT collection."
        tokenId:
          type: string
          example: "1234"
          description: "The unique token ID within the collection."
        lastSalePriceUSD:
          type: number
          format: float
          nullable: true
          example: 150000.00
          description: "Last known sale price of this specific NFT in USD."
        estimatedValueUSD:
          type: number
          format: float
          nullable: true
          example: 160000.00
          description: "AI-estimated current market value of the NFT in USD."
        attributes:
          type: array
          items:
            type: object
            properties:
              trait_type: {type: string, example: "Background"}
              value: {type: string, example: "Blue"}
          nullable: true
          description: "List of traits and attributes of the NFT."

    CryptoTransferRequest:
      type: object
      required:
        - sourceWalletId
        - recipientAddress
        - amount
        - assetSymbol
        - blockchainNetwork
      properties:
        sourceWalletId:
          type: string
          example: "wallet_conn_eth_0xabc123"
          description: "The ID of the connected wallet from which to transfer."
        recipientAddress:
          type: string
          example: "0xdef4567890abcdef1234567890abcdef1234567890"
          description: "The recipient's cryptocurrency address."
        amount:
          type: number
          format: float
          minimum: 0
          example: 0.1
          description: "The amount of cryptocurrency to transfer."
        assetSymbol:
          type: string
          example: "ETH"
          description: "The ticker symbol of the asset to transfer (e.g., ETH, BTC, USDC)."
        blockchainNetwork:
          type: string
          enum: [Ethereum, Solana, Polygon, BinanceSmartChain, Arbitrum, Optimism, other]
          example: "Ethereum"
          description: "The blockchain network on which the transaction will occur."
        gasPriceGwei:
          type: number
          format: float
          minimum: 0
          nullable: true
          example: 50
          description: "Optional: Gas price in Gwei for Ethereum-based transactions."
        memo:
          type: string
          nullable: true
          description: "Optional: A memo or note for the transaction (supported by some networks/assets)."
          example: "Payment for services"

    CryptoTransferStatus:
      type: object
      required:
        - transferId
        - status
      properties:
        transferId:
          type: string
          example: "crypto_txn_xyz789"
          description: "Unique identifier for the initiated transfer."
        status:
          type: string
          enum: [pending_signature, pending_broadcast, in_progress, completed, failed, cancelled]
          example: "pending_signature"
          description: "Current status of the cryptocurrency transfer."
        blockchainTxnHash:
          type: string
          nullable: true
          example: "0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"
          description: "The transaction hash on the blockchain (if available)."
        message:
          type: string
          nullable: true
          example: "Please confirm the transaction in your MetaMask wallet."
          description: "A descriptive message regarding the transfer status or next steps."
        completedAt:
          type: string
          format: date-time
          nullable: true
          description: "Timestamp when the transfer was completed (if successful)."
          example: "2024-07-22T20:10:00Z"

    # Global Payments & Foreign Exchange
    InternationalPaymentRequest:
      type: object
      required:
        - sourceAccountId
        - amount
        - sourceCurrency
        - targetCurrency
        - beneficiary
        - purpose
      properties:
        sourceAccountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The ID of the local account from which funds will be sent."
        amount:
          type: number
          format: float
          minimum: 0
          example: 5000.00
          description: "The amount to send in the source currency."
        sourceCurrency:
          type: string
          format: currency-code
          example: "USD"
          description: "The currency of the source account."
        targetCurrency:
          type: string
          format: currency-code
          example: "EUR"
          description: "The desired currency for the beneficiary."
        beneficiary:
          type: object
          required:
            - name
            - address
            - bankName
            - iban
            - swiftBic
          properties:
            name: {type: string, example: "Maria Schmidt"}
            address: {type: string, example: "Hauptstrasse 1, 10115 Berlin, Germany"}
            bankName: {type: string, example: "Deutsche Bank"}
            iban: {type: string, example: "DE89370400440532013000"}
            swiftBic: {type: string, example: "DEUTDEFF"}
          description: "Details of the international beneficiary."
        purpose:
          type: string
          example: "Vendor payment for Q2 services."
          description: "Purpose of the payment (e.g., invoice payment, family support)."
        fxRateLock:
          type: boolean
          default: false
          example: true
          description: "If true, attempts to lock the quoted FX rate for the transaction."
        fxRateProvider:
          type: string
          enum: [proprietary_ai, external_partner, market_rate]
          default: "proprietary_ai"
          example: "proprietary_ai"
          description: "The desired provider for the foreign exchange rate."
        referenceNumber:
          type: string
          nullable: true
          description: "Optional reference number for the payment (e.g., invoice number)."
          example: "INV-2024-00123"

    InternationalPaymentStatus:
      type: object
      required:
        - paymentId
        - status
        - sourceAmount
        - sourceCurrency
        - targetAmount
        - targetCurrency
        - fxRateApplied
        - feesApplied
      properties:
        paymentId:
          type: string
          example: "int_pmt_xyz7890"
          description: "Unique identifier for the international payment."
        status:
          type: string
          enum: [in_progress, held_for_review, completed, failed, cancelled]
          example: "in_progress"
          description: "Current status of the international payment."
        sourceAmount:
          type: number
          format: float
          example: 5000.00
          description: "Amount sent from the source account."
        sourceCurrency:
          type: string
          format: currency-code
          example: "USD"
          description: "Currency of the source amount."
        targetAmount:
          type: number
          format: float
          nullable: true
          example: 4500.00
          description: "Amount received by the beneficiary in target currency (may be estimated)."
        targetCurrency:
          type: string
          format: currency-code
          example: "EUR"
          description: "Currency of the target amount."
        fxRateApplied:
          type: number
          format: float
          example: 0.90
          description: "The foreign exchange rate applied (target_currency / source_currency)."
        estimatedCompletionTime:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-23T15:00:00Z"
          description: "Estimated time when the payment will be completed."
        trackingUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/payments/track/xyz7890"
          description: "URL to track the payment's progress."
        feesApplied:
          type: number
          format: float
          example: 15.00
          description: "Total fees applied to the payment."
        message:
          type: string
          nullable: true
          description: "Additional message regarding payment status (e.g., reason for hold)."
          example: "Payment held for compliance review. Additional documentation may be requested."

    FxRateResponse:
      type: object
      required:
        - baseCurrency
        - targetCurrency
        - currentRate
      properties:
        baseCurrency:
          type: string
          format: currency-code
          example: "USD"
          description: "The base currency for the rate."
        targetCurrency:
          type: string
          format: currency-code
          example: "EUR"
          description: "The target currency for the rate."
        currentRate:
          type: object
          properties:
            bid: {type: number, format: float, example: 0.9025}
            ask: {type: number, format: float, example: 0.9035}
            mid: {type: number, format: float, example: 0.9030}
            timestamp: {type: string, format: date-time, example: "2024-07-22T13:30:00Z"}
          description: "Current real-time foreign exchange rates."
        predictiveRates:
          type: array
          items:
            type: object
            properties:
              date: {type: string, format: date, example: "2024-07-29"}
              predictedMidRate: {type: number, format: float, example: 0.9050}
              confidenceIntervalLower: {type: number, format: float, example: 0.9010}
              confidenceIntervalUpper: {type: number, format: float, example: 0.9090}
              aiModelConfidence: {type: number, format: float, minimum: 0, maximum: 1, example: 0.88}
          description: "AI-predicted foreign exchange rates for future dates with confidence intervals."
        historicalVolatility:
          type: object
          properties:
            past7Days: {type: number, format: float, example: 0.005}
            past30Days: {type: number, format: float, example: 0.012}
          description: "Historical volatility metrics for the currency pair."

    CurrencyConversionRequest:
      type: object
      required:
        - sourceAccountId
        - sourceAmount
        - sourceCurrency
        - targetCurrency
      properties:
        sourceAccountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The ID of the account from which to deduct the source amount."
        targetAccountId:
          type: string
          nullable: true
          example: "acc_euro_savings_9876"
          description: "Optional: The ID of the account to credit with the converted target amount. If omitted, converted funds remain as a floating balance or are deposited into a primary account."
        sourceAmount:
          type: number
          format: float
          minimum: 0
          example: 1000.00
          description: "The amount to convert from the source currency."
        sourceCurrency:
          type: string
          format: currency-code
          example: "USD"
          description: "The currency to convert from."
        targetCurrency:
          type: string
          format: currency-code
          example: "EUR"
          description: "The currency to convert to."
        fxRateLock:
          type: boolean
          default: false
          example: true
          description: "If true, attempts to lock the quoted FX rate for the conversion."
        fxRateProvider:
          type: string
          enum: [proprietary_ai, external_partner, market_rate]
          default: "proprietary_ai"
          example: "proprietary_ai"
          description: "The desired provider for the foreign exchange rate."

    CurrencyConversionResponse:
      type: object
      required:
        - conversionId
        - status
        - sourceAmount
        - sourceCurrency
        - targetAmount
        - fxRateApplied
        - feesApplied
        - conversionTimestamp
      properties:
        conversionId:
          type: string
          example: "fx_conv_abc123"
          description: "Unique identifier for the currency conversion."
        status:
          type: string
          enum: [completed, failed, cancelled]
          example: "completed"
          description: "Status of the currency conversion."
        sourceAmount:
          type: number
          format: float
          example: 1000.00
          description: "Amount converted from the source currency."
        sourceCurrency:
          type: string
          format: currency-code
          example: "USD"
          description: "Currency of the source amount."
        targetAmount:
          type: number
          format: float
          example: 920.50
          description: "Amount received in the target currency."
        fxRateApplied:
          type: number
          format: float
          example: 0.9205
          description: "The foreign exchange rate applied (target_currency / source_currency)."
        feesApplied:
          type: number
          format: float
          example: 5.00
          description: "Total fees applied to the conversion."
        conversionTimestamp:
          type: string
          format: date-time
          example: "2024-07-22T13:45:00Z"
          description: "Timestamp when the conversion was completed."
        transactionId:
          type: string
          nullable: true
          example: "txn_fx_conv_abc123-20240722"
          description: "Associated transaction ID in the user's account history."

    # Sustainability & ESG Impact
    CarbonFootprintReport:
      type: object
      required:
        - reportId
        - period
        - totalCarbonFootprintKgCO2e
        - breakdownByCategory
        - aiInsights
      properties:
        reportId:
          type: string
          example: "cf_report_2024-Q2"
          description: "Unique identifier for the carbon footprint report."
        period:
          type: string
          example: "April - June 2024"
          description: "The reporting period for the carbon footprint."
        totalCarbonFootprintKgCO2e:
          type: number
          format: float
          minimum: 0
          example: 1250.7
          description: "Total estimated carbon footprint in kilograms of CO2 equivalent."
        breakdownByCategory:
          type: array
          items:
            type: object
            properties:
              category: {type: string, example: "Transportation"}
              carbonFootprintKgCO2e: {type: number, format: float, example: 450.2}
              percentage: {type: number, format: float, example: 36.0}
          description: "Breakdown of the carbon footprint by spending category."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights and recommendations for reducing carbon footprint."
        offsetRecommendations:
          type: array
          items:
            type: object
            properties:
              project: {type: string, example: "Amazon Reforestation Project"}
              costPerTonUSD: {type: number, format: float, example: 25.00}
              offsetAmountKgCO2e: {type: number, format: float, example: 1250.7}
              totalCostUSD: {type: number, format: float, example: 31.27}
          nullable: true
          description: "Recommendations for carbon offset projects."

    InvestmentESGImpact:
      type: object
      required:
        - portfolioId
        - overallESGScore
        - benchmarkESGScore
        - breakdownByESGFactors
        - topESGHoldings
        - lowestESGHoldings
        - aiRecommendations
      properties:
        portfolioId:
          type: string
          example: "portfolio_equity_growth"
          description: "The ID of the investment portfolio analyzed."
        overallESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          example: 7.8
          description: "Overall aggregated ESG score for the entire portfolio."
        benchmarkESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          example: 6.5
          description: "Average ESG score for a comparable market benchmark."
        breakdownByESGFactors:
          type: object
          properties:
            environmentalScore: {type: number, format: float, minimum: 0, maximum: 10, example: 7.0}
            socialScore: {type: number, format: float, minimum: 0, maximum: 10, example: 8.5}
            governanceScore: {type: number, format: float, minimum: 0, maximum: 10, example: 8.0}
          description: "Breakdown of the portfolio's ESG score into environmental, social, and governance components."
        topESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol: {type: string, example: "TSLA"}
              assetName: {type: string, example: "Tesla Inc."}
              esgScore: {type: number, format: float, example: 9.1}
          description: "List of top holdings by their individual ESG score."
        lowestESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol: {type: string, example: "XOM"}
              assetName: {type: string, example: "ExxonMobil Corp."}
              esgScore: {type: number, format: float, example: 4.5}
          description: "List of lowest-scoring holdings by their individual ESG score."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven recommendations to improve the ESG profile of the portfolio."

    CarbonOffsetPurchaseRequest:
      type: object
      required:
        - amountKgCO2e
        - paymentAccountId
        - offsetProject
      properties:
        amountKgCO2e:
          type: number
          format: float
          minimum: 1
          example: 500.0
          description: "The amount of carbon (in Kg CO2e) to offset."
        paymentAccountId:
          type: string
          description: "The ID of the user's account to debit for the purchase."
          example: "acc_chase_checking_4567"
        offsetProject:
          type: string
          nullable: true
          description: "Optional: Name or ID of a preferred carbon offset project. If null, AI will select an optimal project."
          example: "Verified Carbon Standard Project X"
        recurring:
          type: boolean
          default: false
          example: true
          description: "If true, sets up a recurring carbon offset purchase."

    CarbonOffsetPurchaseResponse:
      type: object
      required:
        - purchaseId
        - amountOffsetKgCO2e
        - totalCostUSD
        - projectSupported
        - purchaseDate
      properties:
        purchaseId:
          type: string
          example: "co_purchase_xyz123"
          description: "Unique identifier for the carbon offset purchase."
        amountOffsetKgCO2e:
          type: number
          format: float
          example: 500.0
          description: "The amount of carbon (in Kg CO2e) that was offset."
        totalCostUSD:
          type: number
          format: float
          example: 12.50
          description: "Total cost of the carbon offset purchase in USD."
        projectSupported:
          type: string
          example: "Verified Carbon Standard Project X"
          description: "The name of the carbon offset project supported."
        transactionId:
          type: string
          nullable: true
          example: "txn_offset_12345"
          description: "The ID of the corresponding financial transaction for the purchase."
        purchaseDate:
          type: string
          format: date-time
          example: "2024-07-22T14:00:00Z"
          description: "Date and time of the carbon offset purchase."
        certificateUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/certificates/co_purchase_xyz123.pdf"
          description: "URL to the official carbon offset certificate."

    # AI-Powered Lending & Credit Solutions
    LoanApplicationRequest:
      type: object
      required:
        - loanAmount
        - loanPurpose
        - repaymentTermMonths
      properties:
        loanAmount:
          type: number
          format: float
          minimum: 100
          example: 10000.00
          description: "The desired loan amount."
        loanPurpose:
          type: string
          enum: [debt_consolidation, home_improvement, medical_expenses, education, business_startup, other]
          example: "home_improvement"
          description: "The purpose of the loan."
        repaymentTermMonths:
          type: integer
          minimum: 6
          example: 36
          description: "Desired repayment term in months."
        additionalNotes:
          type: string
          nullable: true
          example: "Funds needed to replace a broken HVAC system."
          description: "Any additional information for the underwriting process."
        coApplicant:
          type: object
          nullable: true
          properties:
            name: {type: string, example: "Jane Doe"}
            email: {type: string, format: email, example: "jane.doe@example.com"}
            income: {type: number, format: float, example: 75000.00}
            creditScore: {type: integer, minimum: 300, maximum: 850, nullable: true, example: 720}
          description: "Optional details for a co-applicant."
        collateralDetails:
          type: object
          nullable: true
          properties:
            type: {type: string, example: "real_estate"}
            value: {type: number, format: float, example: 250000.00}
            description: {type: string, example: "Primary residence at 123 Main St."}
          description: "Optional details about collateral for secured loans."

    LoanApplicationStatus:
      type: object
      required:
        - applicationId
        - status
        - loanAmountRequested
        - loanPurpose
        - applicationDate
        - nextSteps
      properties:
        applicationId:
          type: string
          example: "loan_app_creditflow-123"
          description: "Unique identifier for the loan application."
        status:
          type: string
          enum: [pending, underwriting, approved, declined, withdrawn, funded]
          example: "underwriting"
          description: "Current status of the loan application."
        loanAmountRequested:
          type: number
          format: float
          example: 10000.00
          description: "The amount originally requested in the application."
        loanPurpose:
          type: string
          example: "home_improvement"
          description: "The stated purpose of the loan."
        applicationDate:
          type: string
          format: date-time
          example: "2024-07-22T15:00:00Z"
          description: "Date and time the application was submitted."
        aiUnderwritingResult:
          type: object
          nullable: true
          properties:
            decision: {type: string, enum: [approved, declined, referred], example: "approved"}
            reason: {type: string, example: "Strong credit score and consistent income history."}
            recommendedInterestRate: {type: number, format: float, nullable: true, example: 6.5}
            maxApprovedAmount: {type: number, format: float, nullable: true, example: 12000.00}
            aiConfidence: {type: number, format: float, minimum: 0, maximum: 1, example: 0.95}
          description: "Outcome and details from the AI underwriting process."
        offerDetails:
          $ref: "#/components/schemas/LoanOffer"
          nullable: true
          description: "Details of the loan offer if the application is approved."
        nextSteps:
          type: string
          example: "Your application is currently under review by our AI. You will receive an update within minutes."
          description: "Guidance on what the user should do next."
        declineReasonDetails:
          type: array
          items:
            type: string
          nullable: true
          description: "Specific reasons for loan decline, adhering to regulatory requirements."

    LoanOffer:
      type: object
      required:
        - offerId
        - offerType
        - amount
        - interestRate
        - expirationDate
        - isPreApproved
      properties:
        offerId:
          type: string
          example: "offer_pers_loan_001"
          description: "Unique identifier for the loan offer."
        offerType:
          type: string
          enum: [personal_loan, credit_line, mortgage, auto_loan, microloan]
          example: "personal_loan"
          description: "Type of loan offered."
        amount:
          type: number
          format: float
          example: 10000.00
          description: "The principal amount of the loan offered."
        interestRate:
          type: number
          format: float
          example: 6.5
          description: "Annual interest rate offered."
        repaymentTermMonths:
          type: integer
          nullable: true
          example: 36
          description: "Repayment term in months (if applicable)."
        monthlyPayment:
          type: number
          format: float
          nullable: true
          example: 306.45
          description: "Estimated monthly payment (if applicable)."
        originationFee:
          type: number
          format: float
          nullable: true
          example: 150.00
          description: "Any one-time origination fee."
        totalRepayable:
          type: number
          format: float
          nullable: true
          example: 11032.20
          description: "Total amount repayable over the life of the loan."
        expirationDate:
          type: string
          format: date
          example: "2024-08-31"
          description: "Date the offer expires."
        isPreApproved:
          type: boolean
          example: false
          description: "True if this is a pre-approved offer, false if from an application."
        aiPersonalizationScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          nullable: true
          example: 0.90
          description: "AI's score for how well this offer matches the user's financial profile and needs."

    # Developer Tools & API Management
    WebhookSubscription:
      type: object
      required:
        - id
        - callbackUrl
        - events
        - status
        - failureCount
      properties:
        id:
          type: string
          example: "whsub_devtool_finance_events"
          description: "Unique identifier for the webhook subscription."
        callbackUrl:
          type: string
          format: uri
          example: "https://my-app.com/webhooks/demobank-events"
          description: "The URL to which webhook events are sent."
        events:
          type: array
          items:
            type: string
            example: "transaction.created"
          description: "List of event types subscribed to (e.g., 'transaction.created', 'account.updated')."
        status:
          type: string
          enum: [active, paused, suspended]
          example: "active"
          description: "Current status of the subscription."
        lastTriggered:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T17:00:00Z"
          description: "Timestamp of the last successful webhook delivery."
        failureCount:
          type: integer
          minimum: 0
          example: 0
          description: "Consecutive failure count for webhook deliveries (resets on success)."
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T10:00:00Z"
          description: "Timestamp when the subscription was created."

    WebhookSubscriptionCreationRequest:
      type: object
      required:
        - callbackUrl
        - events
      properties:
        callbackUrl:
          type: string
          format: uri
          example: "https://my-analytics-app.com/webhooks/transactions"
          description: "The URL to which webhook events should be sent."
        events:
          type: array
          items:
            type: string
            example: "transaction.created"
          description: "List of event types to subscribe to."
        secret:
          type: string
          nullable: true
          description: "Optional: A secret string used to sign webhook payloads, verifying origin."
          example: "my_custom_webhook_secret_123"

    WebhookSubscriptionUpdateRequest:
      type: object
      properties:
        callbackUrl:
          type: string
          format: uri
          example: "https://my-new-app.com/webhooks/demobank-events"
          description: "The updated URL for webhook deliveries."
        events:
          type: array
          items:
            type: string
            example: "transaction.updated"
          description: "The new list of event types to subscribe to. Overwrites existing list."
        status:
          type: string
          enum: [active, paused]
          example: "paused"
          description: "Updated status of the subscription."
        secret:
          type: string
          nullable: true
          description: "Optional: A new secret string to update or set for webhook payload signing."
          example: "my_new_webhook_secret_456"

    ApiKey:
      type: object
      required:
        - id
        - prefix
        - status
        - createdAt
        - scopes
      properties:
        id:
          type: string
          example: "api_key_dev_app_01"
          description: "Unique identifier for the API key."
        prefix:
          type: string
          example: "db_pk_test_"
          description: "The visible prefix of the API key (the full key is secret and not exposed)."
        status:
          type: string
          enum: [active, revoked, expired]
          example: "active"
          description: "Current status of the API key."
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T10:00:00Z"
          description: "Timestamp when the API key was created."
        expiresAt:
          type: string
          format: date-time
          nullable: true
          example: "2025-01-01T10:00:00Z"
          description: "Timestamp when the API key will expire, if set."
        scopes:
          type: array
          items:
            type: string
          description: "List of OAuth2 scopes associated with this API key."
          example: ["read:accounts", "write:payments"]
        lastUsed:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T17:15:00Z"
          description: "Timestamp of the last successful use of this API key."
        name:
          type: string
          nullable: true
          description: "A friendly name given to the API key for identification."
          example: "My Analytics Service Key"

    ApiKeyCreationRequest:
      type: object
      required:
        - name
        - scopes
      properties:
        name:
          type: string
          example: "My Analytics Service Key"
          description: "A friendly name for the new API key."
        scopes:
          type: array
          items:
            type: string
          description: "List of OAuth2 scopes that this API key should have access to."
          example: ["read:accounts", "read:transactions"]
        expiresInDays:
          type: integer
          minimum: 1
          nullable: true
          example: 90
          description: "Optional: Number of days until the API key expires. If null, it does not expire."

    # Treasury & Liquidity Management
    CashFlowForecast:
      type: object
      required:
        - forecastId
        - period
        - currency
        - overallStatus
        - projectedBalances
        - inflowForecast
        - outflowForecast
        - liquidityRiskScore
        - aiRecommendations
      properties:
        forecastId:
          type: string
          example: "cf_forecast_corp_Q3_2024"
          description: "Unique identifier for the cash flow forecast."
        period:
          type: string
          example: "Q3 2024 (July - September)"
          description: "The forecast period (e.g., 'Next 30 Days', 'Q3 2024')."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "The primary currency of the forecast."
        overallStatus:
          type: string
          enum: [positive_outlook, neutral, negative_outlook, critical_risk]
          example: "positive_outlook"
          description: "Overall assessment of the corporate cash flow outlook."
        projectedBalances:
          type: array
          items:
            type: object
            properties:
              date: {type: string, format: date, example: "2024-07-31"}
              projectedCash: {type: number, format: float, example: 1500000.00}
              scenario: {type: string, enum: [most_likely, best_case, worst_case], example: "most_likely"}
          description: "Projected cash balances at key dates, potentially across different scenarios."
        inflowForecast:
          type: object
          properties:
            totalProjected: {type: number, format: float, example: 3000000.00}
            bySource:
              type: array
              items:
                type: object
                properties:
                  source: {type: string, example: "Client Payments"}
                  amount: {type: number, format: float, example: 2500000.00}
          description: "Forecasted cash inflows categorized by source."
        outflowForecast:
          type: object
          properties:
            totalProjected: {type: number, format: float, example: 2000000.00}
            byCategory:
              type: array
              items:
                type: object
                properties:
                  category: {type: string, example: "Payroll"}
                  amount: {type: number, format: float, example: 1000000.00}
          description: "Forecasted cash outflows categorized by spending category."
        liquidityRiskScore:
          type: integer
          minimum: 0
          maximum: 100
          example: 15
          description: "AI-calculated score (0-100) indicating the risk of liquidity shortfalls."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven actionable recommendations for treasury optimization."

    LiquidityPositions:
      type: object
      required:
        - snapshotTime
        - totalLiquidAssets
        - currencyBreakdown
        - accountTypeBreakdown
        - aiLiquidityAssessment
        - aiRecommendations
      properties:
        snapshotTime:
          type: string
          format: date-time
          example: "2024-07-22T18:30:00Z"
          description: "Timestamp of the liquidity snapshot."
        totalLiquidAssets:
          type: number
          format: float
          example: 5200000.00
          description: "Total value of all liquid assets (cash, short-term investments)."
        currencyBreakdown:
          type: array
          items:
            type: object
            properties:
              currency: {type: string, example: "USD"}
              amount: {type: number, format: float, example: 4000000.00}
              percentage: {type: number, format: float, example: 76.9}
          description: "Breakdown of liquid assets by currency."
        accountTypeBreakdown:
          type: array
          items:
            type: object
            properties:
              type: {type: string, example: "Checking"}
              amount: {type: number, format: float, example: 3500000.00}
          description: "Breakdown of liquid assets by account type."
        shortTermInvestments:
          type: object
          properties:
            totalValue: {type: number, format: float, example: 1200000.00}
            maturingNext30Days: {type: number, format: float, example: 300000.00}
          nullable: true
          description: "Summary of short-term investment holdings."
        aiLiquidityAssessment:
          type: object
          properties:
            status: {type: string, enum: [optimal, sufficient, tight, critical], example: "optimal"}
            message: {type: string, example: "Current liquidity is optimal and sufficient for all short-term obligations..."}
          description: "AI's overall assessment of current liquidity."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven recommendations for liquidity management."

    # Financial Goals & Strategic Planning
    FinancialGoal:
      type: object
      required:
        - id
        - name
        - type
        - targetAmount
        - currentAmount
        - targetDate
        - progressPercentage
        - status
        - lastUpdated
        - riskTolerance
      properties:
        id:
          type: string
          example: "goal_retirement_2050"
          description: "Unique identifier for the financial goal."
        name:
          type: string
          example: "Retirement Fund by 2050"
          description: "Name of the financial goal."
        type:
          type: string
          enum: [retirement, home_purchase, education, large_purchase, debt_reduction, wealth_creation, other]
          example: "retirement"
          description: "Type of financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          example: 1000000.00
          description: "The target amount for the goal."
        currentAmount:
          type: number
          format: float
          minimum: 0
          example: 350000.00
          description: "Current amount accumulated towards the goal."
        targetDate:
          type: string
          format: date
          example: "2050-12-31"
          description: "Target completion date for the goal."
        progressPercentage:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 35.0
          description: "Percentage of the target amount achieved."
        status:
          type: string
          enum: [on_track, ahead_of_schedule, behind_schedule, completed, cancelled]
          example: "on_track"
          description: "Current status of the goal's progress."
        aiStrategicPlan:
          type: object
          nullable: true
          properties:
            title: {type: string, example: "Retirement Growth Strategy"}
            summary: {type: string, example: "A comprehensive plan leveraging aggressive investments..."}
            steps:
              type: array
              items:
                type: object
                properties:
                  title: {type: string, example: "Increase 401k Contributions"}
                  description: {type: string, example: "Increase your 401k contribution by 2% of your salary annually."}
                  timeline: {type: string, example: "Ongoing"}
                  status: {type: string, enum: [pending, in_progress, completed], example: "in_progress"}
                  priority: {type: string, enum: [low, medium, high], example: "high"}
                  targetAmount: {type: number, format: float, nullable: true, example: 5000.00}
                  linkedActionId: {type: string, nullable: true, description: "ID of a related action (e.g., auto-transfer setup)."}
          description: "AI-generated strategic plan with actionable steps to achieve the goal."
        contributingAccounts:
          type: array
          items:
            type: string
          nullable: true
          description: "List of account IDs contributing to this goal."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T19:00:00Z"
          description: "Timestamp when the goal status or associated plan was last updated."
        riskTolerance:
          type: string
          enum: [conservative, moderate, balanced, aggressive, very_aggressive]
          example: "medium"
          description: "Risk tolerance associated with investments for this goal."

    GoalCreationRequest:
      type: object
      required:
        - name
        - type
        - targetAmount
        - targetDate
      properties:
        name:
          type: string
          example: "Dream Vacation Fund"
          description: "Name for the new financial goal."
        type:
          type: string
          enum: [retirement, home_purchase, education, large_purchase, debt_reduction, wealth_creation, other]
          example: "large_purchase"
          description: "Type of financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          example: 15000.00
          description: "The target amount for the goal."
        targetDate:
          type: string
          format: date
          example: "2026-06-30"
          description: "Target completion date for the goal."
        initialContribution:
          type: number
          format: float
          minimum: 0
          default: 0
          example: 1000.00
          description: "Optional: Initial amount to contribute to the goal."
        linkedAccountId:
          type: string
          nullable: true
          description: "Optional: The account ID from which the initial contribution should be made."
        generateAIPlan:
          type: boolean
          default: false
          example: true
          description: "If true, AI will automatically generate a strategic plan for this goal."
        riskTolerance:
          type: string
          enum: [conservative, moderate, balanced, aggressive, very_aggressive]
          example: "medium"
          description: "Risk tolerance for the investments associated with this goal."

    GoalUpdateRequest:
      type: object
      properties:
        name:
          type: string
          example: "Early Retirement by 2045"
          description: "Updated name of the financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          example: 1200000.00
          description: "Updated target amount for the goal."
        targetDate:
          type: string
          format: date
          example: "2045-12-31"
          description: "Updated target completion date for the goal."
        status:
          type: string
          enum: [on_track, ahead_of_schedule, behind_schedule, completed, cancelled]
          example: "ahead_of_schedule"
          description: "Updated status of the goal's progress."
        riskTolerance:
          type: string
          enum: [conservative, moderate, balanced, aggressive, very_aggressive]
          example: "high"
          description: "Updated risk tolerance for the investments associated with this goal."
        regenerateAIPlan:
          type: boolean
          default: false
          example: true
          description: "If true, the AI will regenerate the strategic plan based on updated parameters."

    # Marketplace (Plato AI)
    MarketplaceProduct:
      type: object
      required:
        - id
        - name
        - description
        - category
        - price
        - currency
        - imageUrl
        - vendor
        - aiRecommendationScore
        - personalizationReason
      properties:
        id:
          type: string
          example: "prod_smart_thermostat_001"
          description: "Unique identifier for the marketplace product."
        name:
          type: string
          example: "Eco-Smart AI Thermostat"
          description: "Name of the product."
        description:
          type: string
          example: "An AI-powered smart thermostat that learns your preferences to optimize energy savings and comfort."
          description: "Detailed description of the product."
        category:
          type: string
          example: "Smart Home Devices"
          description: "Category of the product."
        price:
          type: number
          format: float
          minimum: 0
          example: 249.99
          description: "Price of the product."
        currency:
          type: string
          format: currency-code
          example: "USD"
          description: "Currency of the product price."
        imageUrl:
          type: string
          format: uri
          example: "https://marketplace.demobank.com/images/thermostat.png"
          description: "URL to the product's image."
        vendor:
          type: string
          example: "EcoSense Innovations"
          description: "Name of the product vendor or manufacturer."
        productUrl:
          type: string
          format: uri
          nullable: true
          example: "https://ecosenseinnovations.com/thermostat"
          description: "Direct URL to the product page."
        aiRecommendationScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          example: 0.92
          description: "AI's personalized recommendation score for the user (0-1)."
        personalizationReason:
          type: string
          example: "Identified interest in energy efficiency and smart home technologies based on transaction history and stated preferences."
          description: "AI-generated explanation for why this product is recommended."
        estimatedImpactOnBudget:
          type: object
          nullable: true
          properties:
            monthlySavings: {type: number, format: float, example: 25.00}
            paybackPeriodMonths: {type: integer, example: 10}
          description: "AI's estimated financial impact if the user purchases this product."
        exclusiveOffer:
          type: object
          properties:
            description: {type: string, example: "10% off for Demo Bank Platinum members."}
            discountPercentage: {type: number, format: float, example: 10.0}
            expiresAt: {type: string, format: date-time, example: "2024-09-30T23:59:59Z"}
          nullable: true
          description: "Details of any exclusive offer available for this product."

    PurchaseImpactSimulation:
      type: object
      required:
        - productId
        - purchaseOption
        - simulationSummary
        - keyImpacts
        - aiRecommendations
      properties:
        productId:
          type: string
          example: "prod_smart_thermostat_001"
          description: "The ID of the product for which the simulation was run."
        purchaseOption:
          type: string
          enum: [full_payment, financed_12_months, financed_24_months]
          example: "financed_12_months"
          description: "The purchase option that was simulated."
        simulationSummary:
          type: string
          example: "Purchasing the Eco-Smart AI Thermostat with 12-month financing will result in a monthly payment of $20.83. However, estimated energy savings of $25/month mean a net positive impact on your budget within the first month. Your savings account is well-positioned for this expense."
          description: "A natural language summary of the simulation results."
        keyImpacts:
          type: array
          items:
            type: object
            properties:
              metric: {type: string, example: "Monthly Cash Flow Change"}
              value: {type: string, example: "$+4.17"}
              severity: {type: string, enum: [low, medium, high], example: "low"}
          description: "Key financial metrics and their projected impact."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven recommendations based on the simulation results."

    ClaimOfferResponse:
      type: object
      required:
        - offerId
        - productId
        - status
        - message
      properties:
        offerId:
          type: string
          example: "offer_ebook_quantum_invest"
          description: "Unique identifier for the claimed offer."
        productId:
          type: string
          example: "prod_investment_ebook_002"
          description: "The ID of the product the offer applies to."
        status:
          type: string
          enum: [claimed, redeemed, expired]
          example: "claimed"
          description: "Current status of the offer."
        redemptionCode:
          type: string
          nullable: true
          example: "DEMOBANKQM20"
          description: "A code to be used for redemption (if applicable)."
        redemptionLink:
          type: string
          format: uri
          nullable: true
          example: "https://marketplace.demobank.com/redeem?code=DEMOBANKQM20"
          description: "A direct link for redeeming the offer (if applicable)."
        expirationDate:
          type: string
          format: date-time
          nullable: true
          example: "2024-09-30T23:59:59Z"
          description: "The date and time when the offer expires."
        message:
          type: string
          example: "Congratulations! Your offer has been claimed. Use code DEMOBANKQM20 at checkout or click the redemption link."
          description: "A descriptive message for the user about the claimed offer."

  parameters:
    AccountId:
      name: "accountId"
      in: "path"
      required: true
      description: "The unique identifier of the financial account."
      schema:
        type: string
        example: "acc_chase_checking_4567"
    TransactionId:
      name: "transactionId"
      in: "path"
      required: true
      description: "The unique identifier of the transaction."
      schema:
        type: string
        example: "txn_quantum-2024-07-21-A7B8C9"
    BudgetId:
      name: "budgetId"
      in: "path"
      required: true
      description: "The unique identifier of the budget."
      schema:
        type: string
        example: "budget_monthly_aug"
    PortfolioId:
      name: "portfolioId"
      in: "path"
      required: true
      description: "The unique identifier of the investment portfolio."
      schema:
        type: string
        example: "portfolio_equity_growth"
    DeviceId:
      name: "deviceId"
      in: "path"
      required: true
      description: "The unique identifier of the connected device."
      schema:
        type: string
        example: "dev_mobile_ios_aabbcc"
    OperationId:
      name: "operationId"
      in: "path"
      required: true
      description: "The unique identifier for an asynchronous operation (e.g., video generation)."
      schema:
        type: string
        example: "op-video-gen-12345-abcde"
    CardId:
      name: "cardId"
      in: "path"
      required: true
      description: "The unique identifier of the corporate card."
      schema:
        type: string
        example: "corp_card_xyz987654"
    AnomalyId:
      name: "anomalyId"
      in: "path"
      required: true
      description: "The unique identifier of the financial anomaly."
      schema:
        type: string
        example: "anom_risk-2024-07-21-D1E2F3"
    AuditId:
      name: "auditId"
      in: "path"
      required: true
      description: "The unique identifier of the compliance audit."
      schema:
        type: string
        example: "audit_corp_xyz789"
    WalletId:
      name: "walletId"
      in: "path"
      required: true
      description: "The unique identifier of the crypto wallet connection."
      schema:
        type: string
        example: "wallet_conn_eth_0xabc123"
    PaymentId:
      name: "paymentId"
      in: "path"
      required: true
      description: "The unique identifier of the payment."
      schema:
        type: string
        example: "int_pmt_xyz7890"
    ForecastHorizonDays:
      name: "forecastHorizonDays"
      in: "query"
      description: "Number of days into the future for the cash flow forecast."
      schema:
        type: integer
        minimum: 7
        maximum: 365
        default: 90
        example: 90
    IncludeScenarioAnalysis:
      name: "includeScenarioAnalysis"
      in: "query"
      description: "If true, the forecast will include best-case and worst-case scenarios."
      schema:
        type: boolean
        default: false
        example: true
    SubscriptionId:
      name: "subscriptionId"
      in: "path"
      required: true
      description: "The unique identifier of the webhook subscription."
      schema:
        type: string
        example: "whsub_devtool_finance_events"
    ApiKeyId:
      name: "keyId"
      in: "path"
      required: true
      description: "The unique identifier of the API key."
      schema:
        type: string
        example: "api_key_dev_app_01"
    ApplicationId:
      name: "applicationId"
      in: "path"
      required: true
      description: "The unique identifier of the loan application."
      schema:
        type: string
        example: "loan_app_creditflow-123"
    RuleId:
      name: "ruleId"
      in: "path"
      required: true
      description: "The unique identifier of the fraud detection rule."
      schema:
        type: string
        example: "fraud_rule_high_value_inactive"
    GoalId:
      name: "goalId"
      in: "path"
      required: true
      description: "The unique identifier of the financial goal."
      schema:
        type: string
        example: "goal_retirement_2050"
    ProductId:
      name: "productId"
      in: "path"
      required: true
      description: "The unique identifier of the marketplace product."
      schema:
        type: string
        example: "prod_smart_thermostat_001"
    PitchId:
      name: "pitchId"
      in: "path"
      required: true
      description: "The unique identifier of the business pitch."
      schema:
        type: string
        example: "pitch_qw_synergychain-xyz"
    Limit:
      name: "limit"
      in: "query"
      description: "Maximum number of items to return."
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 50
        example: 50
    Offset:
      name: "offset"
      in: "query"
      description: "Number of items to skip before starting to collect the result set."
      schema:
        type: integer
        minimum: 0
        default: 0
        example: 0
    StartDate:
      name: "startDate"
      in: "query"
      description: "Filter results from this date (inclusive, YYYY-MM-DD)."
      schema:
        type: string
        format: date
        example: "2024-01-01"
    EndDate:
      name: "endDate"
      in: "query"
      description: "Filter results up to this date (inclusive, YYYY-MM-DD)."
      schema:
        type: string
        format: date
        example: "2024-12-31"

  securitySchemes:
    oAuth2Auth:
      type: oauth2
      description: "OAuth 2.0 with Authorization Code Flow for user authentication."
      flows:
        authorizationCode:
          authorizationUrl: "https://auth.demobank.com/oauth/authorize"
          tokenUrl: "https://auth.demobank.com/oauth/token"
          scopes:
            read:profile: "Read comprehensive user profile data."
            write:profile: "Modify basic user profile information and preferences."
            read:accounts: "Access linked financial account details and balances."
            write:accounts: "Modify account settings or initiate linking processes."
            read:transactions: "Read transaction history and insights."
            write:transactions: "Categorize transactions, add notes, or initiate disputes."
            write:payments: "Initiate payments and transfers (requires MFA/biometric confirmation)."
            interact:ai_advisor: "Send messages to and receive responses from the AI Advisor."
            interact:ai_oracle: "Submit scenarios to and retrieve results from the Predictive Simulation AI."
            read:weaver: "Read business pitch status and AI feedback."
            write:weaver: "Submit new business pitches and provide feedback/answers."
            read:ad_studio: "Read generated ad statuses and retrieve assets."
            write:ad_studio: "Initiate video ad generation requests."
            read:corporate_cards: "Read corporate card details and spending controls."
            write:corporate_cards: "Modify corporate card controls, freeze/unfreeze cards, or issue new virtual cards."
            read:corporate_payments: "Access corporate payment orders and treasury data."
            write:corporate_payments: "Initiate corporate payments and manage treasury operations."
            read:compliance: "Access compliance cases, risk alerts, and audit reports."
            write:compliance: "Update compliance case statuses, create fraud rules, or request audits."
            read:rewards: "Access user loyalty points, tiers, and gamification status."
            write:rewards: "Redeem rewards or update gamification preferences (rarely direct)."
            read:analytics: "Access advanced AI-driven analytics and forecasting data."
            write:analytics: "Configure custom analytics dashboards or reports."
            read:web3: "Access linked crypto wallet balances and NFT collections."
            write:web3: "Initiate crypto transfers (requires user confirmation)."
            read:sustainability: "Access personal/portfolio carbon footprint and ESG impact data."
            write:sustainability: "Purchase carbon offsets or configure ESG investment preferences."
            read:lending: "Access loan application status, offers, and credit health data."
            write:lending: "Submit loan applications or accept offers."
            read:developer_tools: "Access webhook subscriptions and API key details."
            write:developer_tools: "Manage webhook subscriptions and API keys."
            read:identity: "Access digital identity status and verifiable credentials."
            write:identity: "Submit KYC documents or manage verifiable credentials."
            read:corporate_treasury: "Access corporate cash flow forecasts and liquidity positions."
            write:corporate_treasury: "Execute treasury actions based on AI recommendations."
            read:fx_rates: "Access real-time and predictive foreign exchange rates."
            write:marketplace: "Claim marketplace offers or configure product preferences."

    apiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "API Key authentication for server-to-server and authorized application requests. Use a JWT signed with your developer API key."

    biometricAuth:
      type: http
      scheme: bearer
      bearerFormat: BiometricSignature
      description: "Biometric authentication for sensitive operations, where the bearer token is a one-time cryptographic signature generated by the user's enrolled biometric (e.g., Face ID, fingerprint)."

  responses:
    BadRequestError:
      description: "Bad Request: The request was malformed or invalid."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            InvalidInput:
              summary: "Invalid input provided"
              value:
                code: "INVALID_INPUT"
                message: "One or more fields in the request body are invalid."
                details:
                  - field: "email"
                    error: "Invalid email format."
                  - field: "password"
                    error: "Password must be at least 8 characters long and include a number and special character."
                timestamp: "2024-07-22T08:00:00Z"
    UnauthorizedError:
      description: "Unauthorized: Authentication required or invalid credentials provided."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            MissingToken:
              summary: "Missing authentication token"
              value:
                code: "MISSING_AUTHENTICATION_TOKEN"
                message: "Authentication token is missing or invalid."
                timestamp: "2024-07-22T08:00:00Z"
            InvalidToken:
              summary: "Invalid authentication token"
              value:
                code: "INVALID_AUTHENTICATION_TOKEN"
                message: "The provided authentication token is expired or invalid."
                timestamp: "2024-07-22T08:00:00Z"
    ForbiddenError:
      description: "Forbidden: The authenticated user does not have the necessary permissions."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            InsufficientScope:
              summary: "Insufficient OAuth scope"
              value:
                code: "INSUFFICIENT_SCOPE"
                message: "The provided access token does not have the required scopes to perform this action."
                requiredScope: "write:profile"
                timestamp: "2024-07-22T08:00:00Z"
    NotFoundError:
      description: "Not Found: The requested resource was not found."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            ResourceNotFound:
              summary: "Resource not found"
              value:
                code: "RESOURCE_NOT_FOUND"
                message: "The requested resource could not be found."
                timestamp: "2024-07-22T08:00:00Z"
    ConflictError:
      description: "Conflict: The request could not be completed due to a conflict with the current state of the resource."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            EmailAlreadyExists:
              summary: "Email already registered"
              value:
                code: "EMAIL_ALREADY_REGISTERED"
                message: "A user with this email address already exists."
                timestamp: "2024-07-22T08:00:00Z"
    TooManyRequestsError:
      description: "Too Many Requests: Rate limit exceeded or too many requests in a given amount of time."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            RateLimitExceeded:
              summary: "Rate limit exceeded"
              value:
                code: "RATE_LIMIT_EXCEEDED"
                message: "You have exceeded your request rate limit. Please try again after some time."
                retryAfterSeconds: 60
                timestamp: "2024-07-22T08:00:00Z"

  schemas:
    Error:
      type: object
      required:
        - code
        - message
        - timestamp
      properties:
        code:
          type: string
          example: "INVALID_INPUT"
          description: "A unique error code identifying the type of error."
        message:
          type: string
          example: "One or more fields in the request body are invalid."
          description: "A human-readable message describing the error."
        details:
          type: array
          items:
            type: object
            properties:
              field: {type: string, example: "email"}
              error: {type: string, example: "Invalid email format."}
          nullable: true
          description: "Optional: Specific details about validation errors or other issues."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-22T08:00:00Z"
          description: "The time at which the error occurred."
        retryAfterSeconds:
          type: integer
          nullable: true
          description: "Optional: Number of seconds to wait before retrying the request (for rate limiting)."
