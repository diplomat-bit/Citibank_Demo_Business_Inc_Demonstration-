openapi: 3.1.0
info:
  version: '1.0'
  title: " James Burvel O'Callaghan III API: The Quantum Core - Publisher Edition"
  description: |
    Welcome to the **Quantum Core 3.0**, the pinnacle of financial technology, meticulously engineered to power the  experience. This is far more than a mere set of endpoints; it is the living, breathing neural network of a next-generation financial ecosystem, poised to redefine digital banking for a global audience.
    
    Our API is a testament to the philosophy that finance should be an intelligent, predictive, and intensely personal dialogue—a dynamic, self-optimizing collaboration between users, visionary developers, and our proprietary Artificial General Intelligence, **Quantum**. We provide unparalleled programmatic access to the sophisticated tools and vast data reservoirs that fuel our platform, spanning from hyper-personalized wealth management to AI-driven corporate finance automation, decentralized asset orchestration, and pioneering business incubation.
    
    This comprehensive specification unveils the secure and high-performance protocols to connect with and command the core functionalities of . Empower yourself to architect and deploy the future of finance, with an infrastructure designed for exponential scalability, impenetrable security, real-time intelligence, and seamless global integration. As your most ambitious visions crystallize, our platform's unparalleled capabilities will not just meet them—they will amplify them. This is finance, reimagined, limitless, and brought to life by AI.
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/JOCALL3_1/jamesburvelocallaghaniiiapi/1.0

tags:
  - name: "Users & Identity Management"
    description: "Comprehensive management of user profiles, advanced biometric authentication, multi-factor security, and digital identity verification (KYC/AML)."
  - name: "Accounts & Balances"
    description: "Real-time interaction with all linked financial accounts, including comprehensive balance sheets, predictive cash flow, and intelligent overdraft management."
  - name: "Transactions & Insights"
    description: "Access, intelligent categorization, real-time analysis, and AI-driven insights into transaction data, including advanced dispute resolution and trend detection."
  - name: "Budgets & Financial Planning"
    description: "AI-powered creation and dynamic management of user spending budgets, real-time progress tracking, and proactive alert systems."
  - name: "Investments & Portfolio Intelligence"
    description: "Sophisticated management of investment portfolios, AI-driven asset discovery, ESG impact analysis, predictive growth simulations, and automated rebalancing strategies."
  - name: "AI Advisor (Quantum)"
    description: "Engage with our state-of-the-art conversational AI, Quantum, for deeply personalized financial insights, proactive advice, and autonomous task execution via a rich tool ecosystem."
  - name: "Quantum Weaver (Business Incubation)"
    description: "The AI-driven seed funding and incubation platform. Submit, refine, and track business plans, receive AI-generated feedback, and secure investment capital."
  - name: "Quantum Oracle (Predictive Simulation)"
    description: "Unleash the power of 'what-if' scenario modeling. Run complex, multi-variable financial simulations with AI-powered foresight to understand future impacts and optimize strategies."
  - name: "AI Ad Studio (Veo 2.0)"
    description: "Programmatically generate high-fidelity, commercially viable video content from text prompts, leveraging cutting-edge generative AI models for targeted marketing campaigns."
  - name: "Personalization & Experience Design"
    description: "Endpoints for hyper-personalizing the user experience, including AI-generated themes, bespoke digital card designs, and adaptive interface elements."
  - name: "Financial Goals & Strategic Planning"
    description: "Define, manage, and accelerate progress towards long-term financial goals with AI-generated strategic plans, real-time progress tracking, and adaptive adjustments."
  - name: "Marketplace (Plato AI)"
    description: "Access a dynamic, AI-curated marketplace offering hyper-personalized product recommendations, simulate purchase impacts, and discover exclusive partner offers."
  - name: "Decentralized Finance (DeFi) & Web3 Assets"
    description: "Seamless integration with digital assets, cryptocurrencies, NFTs, and DeFi protocols. Connect wallets, execute on-chain transactions, and manage your Web3 portfolio."
  - name: "Corporate Finance - Enterprise Cards"
    description: "Sophisticated management of corporate card programs, granular spending controls, virtual card issuance, and intelligent compliance monitoring."
  - name: "Corporate Finance - Global Payments & Treasury"
    description: "Streamlined management of payment orders, automated invoice processing, multi-currency transactions, international transfers, and AI-driven treasury optimization."
  - name: "Corporate Finance - Compliance & Risk"
    description: "Advanced access to compliance cases, AI-powered financial anomaly detection, real-time risk assessments, and automated sanction screening for enterprise clients."
  - name: "Rewards & Gamification Engine"
    description: "Interact with the user's loyalty points, elite tiers, achievements, and dynamic gamification status within the  ecosystem."
  - name: "Credit Health & AI Underwriting"
    description: "Comprehensive access to credit scores, detailed history, AI-generated improvement plans, and personalized lending offers with instant underwriting."
  - name: "Notifications & Proactive Alerts"
    description: "Retrieve, manage, and configure highly personalized user notifications across multiple channels, including AI-driven proactive alerts and critical security advisories."
  - name: "Security & Open Banking Ecosystem"
    description: "Manage advanced security settings, monitor login activity, control third-party application connections, and oversee API key access for external integrations."
  - name: "Real-time Analytics & Predictive Intelligence"
    description: "Unlocking advanced, AI-driven analytics dashboards, predictive financial forecasting, and custom report generation for both personal and corporate users."
  - name: "Global Payments & Foreign Exchange"
    description: "Facilitate secure, multi-currency transactions and international transfers with real-time and predictive foreign exchange rate analysis."
  - name: "Sustainability & ESG Impact"
    description: "Measure, track, and improve personal and corporate environmental, social, and governance (ESG) impact, including carbon footprint analysis and green investment opportunities."
  - name: "AI-Powered Lending & Credit Solutions"
    description: "Streamlined application for microloans and traditional credit products, featuring instant AI underwriting, personalized repayment schedules, and dynamic pre-approval offers."
  - name: "Developer Tools & API Management"
    description: "Tools for developers to integrate deeply with , including webhook management, API key lifecycle, event logging, and SDK access."
  - name: "Digital Identity & Verifiable Credentials"
    description: "Securely manage and verify digital identities, submit KYC documentation, and issue or receive verifiable digital credentials for seamless trust across platforms."
  - name: "Treasury & Liquidity Management"
    description: "Advanced corporate treasury functions, including AI-driven cash flow forecasting, liquidity optimization, investment strategy, and asset-liability management."
  - name: "Enterprise Risk & Fraud Prevention"
    description: "Define custom AI-powered fraud detection rules, monitor enterprise-wide risk alerts, leverage transactional risk scoring, and manage security incidents proactively."
security: # Global security applied to all operations unless overridden
  - oAuth2Auth:
      - read:profile
      - write:profile
      - read:accounts
      - write:accounts
      - read:transactions
      - write:transactions
      - write:payments
      - interact:ai_advisor
      - interact:ai_oracle
      - read:weaver
      - write:weaver
      - read:ad_studio
      - write:ad_studio
      - read:corporate_cards
      - write:corporate_cards
      - read:corporate_payments
      - write:corporate_payments
      - read:compliance
      - write:compliance
      - read:rewards
      - write:rewards
      - read:analytics
      - write:analytics
      - read:web3
      - write:web3
      - read:sustainability
      - write:sustainability
      - read:lending
      - write:lending
      - read:developer_tools
      - write:developer_tools
      - read:identity
      - write:identity
      - read:corporate_treasury
      - write:corporate_treasury
      - read:fx_rates
      - read:investments
      - write:investments
      - read:personalization
      - write:personalization
  - apiKeyAuth: []

paths:
  /users/register:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Register a New User Account"
      description: "Registers a new user account with , initiating the onboarding process. Requires basic user details."
      operationId: "registerUser"
      security:
        - {} # No specific security for public registration
      requestBody:
        required: true
        description: "User registration details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegistrationRequest"
            examples:
              RegistrationSuccess:
                summary: "Example successful registration"
                value:
                  name: "Alice Wonderland"
                  email: "alice.w@example.com"
                  password: "SecureP@ssw0rd2024!"
                  phone: "+1-555-987-6543"
      responses:
        "201":
          description: "User registered successfully. Awaits email/MFA verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                UserCreated:
                  summary: "Example of a newly registered user profile"
                  value:
                    id: "user-alice-001"
                    name: "Alice Wonderland"
                    email: "alice.w@example.com"
                    phone: "+1-555-987-6543"
                    dateOfBirth: "1990-05-10"
                    address:
                      street: "123 Magic Lane"
                      city: "Fantasyland"
                      state: "CA"
                      zip: "90210"
                      country: "USA"
                    loyaltyTier: "Bronze"
                    loyaltyPoints: 0
                    gamificationLevel: 1
                    aiPersona: "Conservative Saver"
                    securityStatus:
                      twoFactorEnabled: false
                      biometricsEnrolled: false
                      lastLogin: "2024-07-22T08:00:00Z"
                      lastLoginIp: "203.0.113.10"
                    preferences:
                      preferredLanguage: "en-US"
                      theme: "Light-Default"
                      aiInteractionMode: "balanced"
                      notificationChannels:
                        email: true
                        push: true
                        sms: false
                        inApp: true
                      dataSharingConsent: true
                      transactionGrouping: "category"
                    identityVerified: false
        "400":
          $ref: "#/components/responses/BadRequestError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/login:
    post:
      tags:
        - "Users & Identity Management"
      summary: "User Login and Session Creation"
      description: "Authenticates a user and creates a secure session, returning access tokens. May require MFA depending on user settings."
      operationId: "userLogin"
      security:
        - {} # No specific security for public login
      requestBody:
        required: true
        description: "User login credentials."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLoginRequest"
            examples:
              StandardLogin:
                summary: "Standard login with email and password"
                value:
                  email: "quantum.visionary@demobank.com"
                  password: "YourSecurePassword123"
              MFALogin:
                summary: "Login with MFA code"
                value:
                  email: "quantum.visionary@demobank.com"
                  password: "YourSecurePassword123"
                  mfaCode: "123456"
      responses:
        "200":
          description: "Login successful, returns authentication tokens."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"
              examples:
                Success:
                  summary: "Successful login response"
                  value:
                    accessToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
                    refreshToken: "some_long_refresh_token_string_for_renewal"
                    expiresIn: 3600
                    tokenType: "Bearer"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          description: "MFA required or account locked."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                MFARequired:
                  summary: "MFA required error"
                  value:
                    code: "MFA_REQUIRED"
                    message: "Multi-factor authentication is required. Please provide your MFA code."
                    timestamp: "2024-07-22T08:05:00Z"

  /users/password-reset/initiate:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Initiate Password Reset"
      description: "Starts the password reset flow by sending a verification code or link to the user's registered email or phone."
      operationId: "initiatePasswordReset"
      security:
        - {} # No specific security for public password reset initiation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
              properties:
                identifier:
                  type: string
                  format: email
                  example: "user@example.com"
                  description: "User's email or phone number for verification."
            examples:
              EmailReset:
                summary: "Initiate reset via email"
                value:
                  identifier: "reset.user@example.com"
      responses:
        "200":
          description: "Password reset initiated. Check your email/phone for verification."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Verification code sent to your registered email/phone."
        "404":
          $ref: "#/components/responses/NotFoundError"

  /users/password-reset/confirm:
    post:
      tags:
        - "Users & Identity Management"
      summary: "Confirm Password Reset"
      description: "Confirms the password reset using the received verification code and sets a new password."
      operationId: "confirmPasswordReset"
      security:
        - {} # No specific security for public password reset confirmation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifier
                - verificationCode
                - newPassword
              properties:
                identifier:
                  type: string
                  format: email
                  example: "user@example.com"
                  description: "User's email or phone number used for verification."
                verificationCode:
                  type: string
                  example: "123456"
                  description: "The verification code received via email or SMS."
                newPassword:
                  type: string
                  format: password
                  example: "SecureP@ssw0rd2024!"
                  description: "The new password for the user account."
            examples:
              ConfirmReset:
                summary: "Confirm password reset with code"
                value:
                  identifier: "reset.user@example.com"
                  verificationCode: "654321"
                  newPassword: "MyNewStrongPassword@789"
      responses:
        "200":
          description: "Password reset successfully."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Password updated successfully."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          description: "Invalid or expired verification code."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                InvalidCode:
                  summary: "Invalid verification code error"
                  value:
                    code: "INVALID_VERIFICATION_CODE"
                    message: "The provided verification code is invalid or has expired."
                    timestamp: "2024-07-22T08:10:00Z"

  /users/me:
    get:
      tags:
        - "Users & Identity Management"
      summary: "Retrieve Comprehensive Current User Profile"
      description: "Fetches the complete and dynamically updated profile information for the currently authenticated user, encompassing personal details, security status, gamification level, loyalty points, and linked identity attributes."
      operationId: "getCurrentUserEnhancedProfile"
      security:
        - oAuth2Auth: [read:profile, read:security, read:rewards, read:identity]
        - apiKeyAuth: []
      responses:
        "200":
          description: "The user's complete, enriched profile information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                SuccessfulRetrieval:
                  summary: "Example of a fully detailed user profile"
                  value:
                    id: "user-quantum-visionary-001"
                    name: "The Quantum Visionary"
                    email: "quantum.visionary@demobank.com"
                    phone: "+1-555-123-4567"
                    dateOfBirth: "1980-01-15"
                    address:
                      street: "100 Innovation Drive"
                      city: "Quantumville"
                      state: "CA"
                      zip: "90210"
                      country: "USA"
                    loyaltyTier: "Zenith Platinum"
                    loyaltyPoints: 12500
                    gamificationLevel: 7
                    aiPersona: "Prudent Planner"
                    securityStatus:
                      twoFactorEnabled: true
                      biometricsEnrolled: true
                      lastLogin: "2024-07-22T08:00:00Z"
                      lastLoginIp: "203.0.113.45"
                    preferences:
                      preferredLanguage: "en-US"
                      theme: "Dark-Quantum"
                      aiInteractionMode: "balanced"
                      notificationChannels:
                        email: true
                        push: true
                        sms: false
                        inApp: true
                      dataSharingConsent: true
                      transactionGrouping: "category"
                    identityVerified: true
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    put:
      tags:
        - "Users & Identity Management"
      summary: "Update Current User Profile"
      description: "Updates selected fields of the currently authenticated user's profile information."
      operationId: "updateCurrentUserProfile"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Updated user profile details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserUpdateProfileRequest"
            examples:
              UpdateNameAndPhone:
                summary: "Update user's name and phone number"
                value:
                  name: "Quantum Visionary Pro"
                  phone: "+1-555-999-0000"
              UpdateAddress:
                summary: "Update user's address"
                value:
                  address:
                    street: "200 Innovation Parkway"
                    city: "Quantum Heights"
                    state: "NY"
                    zip: "10001"
                    country: "USA"
      responses:
        "200":
          description: "User profile updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                SuccessfulUpdate:
                  summary: "Example of updated user profile"
                  value:
                    id: "user-quantum-visionary-001"
                    name: "Quantum Visionary Pro"
                    email: "quantum.visionary@demobank.com"
                    phone: "+1-555-999-0000"
                    dateOfBirth: "1980-01-15"
                    address:
                      street: "100 Innovation Drive"
                      city: "Quantumville"
                      state: "CA"
                      zip: "90210"
                      country: "USA"
                    loyaltyTier: "Zenith Platinum"
                    loyaltyPoints: 12500
                    gamificationLevel: 7
                    aiPersona: "Prudent Planner"
                    securityStatus:
                      twoFactorEnabled: true
                      biometricsEnrolled: true
                      lastLogin: "2024-07-22T08:00:00Z"
                      lastLoginIp: "203.0.113.45"
                    preferences:
                      preferredLanguage: "en-US"
                      theme: "Dark-Quantum"
                      aiInteractionMode: "balanced"
                      notificationChannels:
                        email: true
                        push: true
                        sms: false
                        inApp: true
                      dataSharingConsent: true
                      transactionGrouping: "category"
                    identityVerified: true
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/preferences:
    get:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Get User Personalization Preferences"
      description: "Retrieves the user's deep personalization preferences, including AI customization settings, notification channel priorities, thematic choices, and data sharing consents."
      operationId: "getUserPreferences"
      security:
        - oAuth2Auth: [read:profile, read:personalization]
        - apiKeyAuth: []
      responses:
        "200":
          description: "The user's personalized preferences."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
              examples:
                DefaultPreferences:
                  summary: "Example of default user preferences"
                  value:
                    preferredLanguage: "en-US"
                    theme: "Light-Default"
                    aiInteractionMode: "balanced"
                    notificationChannels:
                      email: true
                      push: true
                      sms: false
                      inApp: true
                    dataSharingConsent: true
                    transactionGrouping: "category"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags:
        - "Users & Identity Management"
        - "Personalization & Experience Design"
      summary: "Update User Personalization Preferences"
      description: "Updates the user's deep personalization preferences, allowing dynamic control over AI behavior, notification delivery, thematic choices, and data privacy settings."
      operationId: "updateUserPreferences"
      security:
        - oAuth2Auth: [write:profile, write:personalization]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The updated user preference payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserPreferences"
            examples:
              UpdateThemeAndAI:
                summary: "Update theme and AI interaction mode"
                value:
                  theme: "Dark-Quantum"
                  aiInteractionMode: "proactive"
      responses:
        "200":
          description: "User preferences updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPreferences"
              examples:
                UpdatedPreferences:
                  summary: "Example of updated user preferences"
                  value:
                    preferredLanguage: "en-US"
                    theme: "Dark-Quantum"
                    aiInteractionMode: "proactive"
                    notificationChannels:
                      email: true
                      push: true
                      sms: false
                      inApp: true
                    dataSharingConsent: true
                    transactionGrouping: "category"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/devices:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Connected Devices"
      description: "Retrieves a list of all devices linked to the user's account, including mobile phones, tablets, and desktops, indicating their last active status and security posture."
      operationId: "listConnectedDevices"
      security:
        - oAuth2Auth: [read:profile, read:security]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of connected devices."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Device"
              examples:
                DeviceList:
                  summary: "Example list of connected devices"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "dev_mobile_ios_aabbcc"
                        type: "mobile"
                        os: "iOS 17.5"
                        model: "iPhone 15 Pro Max"
                        lastActive: "2024-07-22T11:05:00Z"
                        ipAddress: "203.0.113.12"
                        trustLevel: "trusted"
                        pushToken: "ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]"
                      - id: "dev_desktop_win_123456"
                        type: "desktop"
                        os: "Windows 11"
                        model: "Dell XPS 15"
                        lastActive: "2024-07-22T10:00:00Z"
                        ipAddress: "203.0.113.15"
                        trustLevel: "trusted"
                    nextOffset: 2
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Register a New Device"
      description: "Registers a new device for secure access and multi-factor authentication, associating it with the user's profile. This typically initiates a biometric or MFA enrollment flow."
      operationId: "registerDevice"
      security:
        - oAuth2Auth: [write:profile, write:security]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the device to be registered."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterDeviceRequest"
            examples:
              RegisterMobile:
                summary: "Register a new mobile device"
                value:
                  deviceType: "mobile"
                  os: "Android 14"
                  model: "Samsung Galaxy S24 Ultra"
                  biometricSignature: "base64encoded_android_biometric_proof"
                  deviceName: "Alex's Work Phone"
      responses:
        "201":
          description: "Device registered successfully, awaiting final verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Device"
              examples:
                DeviceRegistered:
                  summary: "Example of a newly registered device"
                  value:
                    id: "dev_mobile_android_ddeeff"
                    type: "mobile"
                    os: "Android 14"
                    model: "Samsung Galaxy S24 Ultra"
                    lastActive: "2024-07-22T12:00:00Z"
                    ipAddress: "203.0.113.18"
                    trustLevel: "pending_verification"
                    pushToken: "ExponentPushToken[yzzzyzzzyzzzyzzz]"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/devices/{deviceId}:
    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister a Device"
      description: "Removes a specific device from the user's linked devices, revoking its access and requiring re-registration for future use. Useful for lost or compromised devices."
      operationId: "deregisterDevice"
      security:
        - oAuth2Auth: [write:profile, write:security]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/DeviceId"
      responses:
        "204":
          description: "Device deregistered successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /users/me/biometrics/enroll:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Enroll Biometric Data for Authentication"
      description: "Initiates the enrollment process for biometric authentication (e.g., fingerprint, facial scan) to enable secure and convenient access to sensitive features. Requires a biometric signature for initial proof."
      operationId: "enrollBiometrics"
      security:
        - oAuth2Auth: [write:security]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Biometric enrollment request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricEnrollmentRequest"
            examples:
              EnrollFaceID:
                summary: "Enroll Facial Recognition (Face ID)"
                value:
                  biometricType: "facial_recognition"
                  biometricSignature: "base64encoded_facial_template_for_enrollment"
                  deviceId: "dev_mobile_ios_aabbcc"
                  deviceName: "My Primary iPhone"
      responses:
        "201":
          description: "Biometric enrollment initiated/successful."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
              examples:
                EnrollmentSuccess:
                  summary: "Example successful biometric enrollment status"
                  value:
                    biometricsEnrolled: true
                    enrolledBiometrics:
                      - type: "facial_recognition"
                        deviceId: "dev_mobile_ios_aabbcc"
                        enrollmentDate: "2024-07-22T17:00:00Z"
                    lastUsed: "2024-07-22T17:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /users/me/biometrics/verify:
    post:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Verify Biometric Data for Sensitive Operations"
      description: "Performs real-time biometric verification to authorize sensitive actions or access protected resources, using a one-time biometric signature."
      operationId: "verifyBiometrics"
      security:
        - biometricAuth: [] # Uses biometricAuth here explicitly
      requestBody:
        required: true
        description: "Biometric verification request payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BiometricVerificationRequest"
            examples:
              VerifyFingerprint:
                summary: "Verify with fingerprint"
                value:
                  biometricType: "fingerprint"
                  biometricSignature: "base64encoded_one_time_fingerprint_proof"
                  deviceId: "dev_mobile_android_ddeeff"
      responses:
        "200":
          description: "Biometric verification successful."
          content:
            application/json:
              schema:
                type: object
                properties:
                  verificationStatus:
                    type: string
                    enum: [success, failed]
                    example: "success"
                    description: "Status of the biometric verification."
                  message:
                    type: string
                    example: "Biometric authentication successful."
                    description: "A descriptive message for the verification result."
              examples:
                VerificationSuccess:
                  summary: "Successful biometric verification"
                  value:
                    verificationStatus: "success"
                    message: "Biometric authentication successful."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /users/me/biometrics:
    get:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Get Biometric Enrollment Status"
      description: "Retrieves the current status of biometric enrollments for the authenticated user."
      operationId: "getBiometricStatus"
      security:
        - oAuth2Auth: [read:security, read:profile]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current biometric enrollment status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BiometricStatus"
              examples:
                BiometricStatusExample:
                  summary: "Example biometric status for a user"
                  value:
                    biometricsEnrolled: true
                    enrolledBiometrics:
                      - type: "facial_recognition"
                        deviceId: "dev_mobile_ios_aabbcc"
                        enrollmentDate: "2024-07-22T17:00:00Z"
                      - type: "fingerprint"
                        deviceId: "dev_mobile_android_ddeeff"
                        enrollmentDate: "2024-06-15T09:30:00Z"
                    lastUsed: "2024-07-22T17:30:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags:
        - "Users & Identity Management"
        - "Security & Open Banking Ecosystem"
      summary: "Deregister All Biometric Data"
      description: "Removes all enrolled biometric data associated with the user's account for security reasons."
      operationId: "deregisterAllBiometrics"
      security:
        - oAuth2Auth: [write:security]
        - apiKeyAuth: []
      responses:
        "204":
          description: "All biometric data deregistered successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /accounts/me:
    get:
      tags:
        - "Accounts & Balances"
      summary: "List Linked Financial Accounts"
      description: "Fetches a comprehensive, real-time list of all external financial accounts linked to the user's  profile, including consolidated balances and institutional details."
      operationId: "listLinkedAccounts"
      security:
        - oAuth2Auth: [read:accounts]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated, detailed list of linked financial accounts."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/LinkedAccount"
              examples:
                AccountList:
                  summary: "Example list of linked accounts"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "acc_chase_checking_4567"
                        externalId: "plaid_acc_abc123"
                        name: "Chase Checking"
                        institutionName: "Chase Bank"
                        mask: "4567"
                        type: "depository"
                        subtype: "checking"
                        currency: "USD"
                        currentBalance: 1250.75
                        availableBalance: 1200.00
                        lastUpdated: "2024-07-22T10:45:00Z"
                      - id: "acc_fidelity_ira_1234"
                        externalId: "plaid_acc_def456"
                        name: "Fidelity IRA"
                        institutionName: "Fidelity Investments"
                        mask: "1234"
                        type: "investment"
                        subtype: "ira"
                        currency: "USD"
                        currentBalance: 150000.50
                        availableBalance: 149000.00
                        lastUpdated: "2024-07-22T10:45:00Z"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /accounts/{accountId}/details:
    get:
      tags:
        - "Accounts & Balances"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Detailed Account Analytics & Forecasts"
      description: "Retrieves comprehensive analytics for a specific financial account, including historical balance trends, projected cash flow, and AI-driven insights into spending patterns."
      operationId: "getAccountDetailsAndAnalytics"
      security:
        - oAuth2Auth: [read:accounts, read:analytics]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Detailed account information with analytics and forecasts."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountDetail"
              examples:
                AccountDetails:
                  summary: "Detailed account information with cash flow forecast"
                  value:
                    id: "acc_chase_checking_4567"
                    externalId: "plaid_acc_abc123"
                    name: "Chase Checking"
                    institutionName: "Chase Bank"
                    mask: "4567"
                    type: "depository"
                    subtype: "checking"
                    currency: "USD"
                    currentBalance: 1250.75
                    availableBalance: 1200.00
                    lastUpdated: "2024-07-22T10:45:00Z"
                    accountHolder: "The Quantum Visionary"
                    interestRate: 0.01
                    openedDate: "2020-03-01"
                    transactionsCount: 150
                    projectedCashFlow:
                      days30: 500
                      days90: 1200
                      confidenceScore: 85
                    balanceHistory:
                      - date: "2024-07-21"
                        balance: 1230.50
                      - date: "2024-07-20"
                        balance: 1500.00
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/transactions/pending:
    get:
      tags:
        - "Accounts & Balances"
        - "Transactions & Insights"
      summary: "Get Pending Transactions for an Account"
      description: "Retrieves a list of pending transactions that have not yet cleared for a specific financial account."
      operationId: "getPendingAccountTransactions"
      security:
        - oAuth2Auth: [read:accounts, read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of pending transactions."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Transaction"
              examples:
                PendingTransactions:
                  summary: "Example list of pending transactions"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "txn_pending-123"
                        accountId: "acc_chase_checking_4567"
                        type: "expense"
                        category: "Shopping"
                        aiCategoryConfidence: 0.85
                        description: "Amazon.com"
                        amount: 75.20
                        currency: "USD"
                        date: "2024-07-22"
                        carbonFootprint: 0.5
                        paymentChannel: "online"
                        disputeStatus: "none"
                      - id: "txn_pending-456"
                        accountId: "acc_chase_checking_4567"
                        type: "expense"
                        category: "Utilities"
                        aiCategoryConfidence: 0.90
                        description: "Electric Bill"
                        amount: 110.00
                        currency: "USD"
                        date: "2024-07-22"
                        carbonFootprint: 2.0
                        paymentChannel: "bill_payment"
                        disputeStatus: "none"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/statements:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Retrieve Account Statements"
      description: "Fetches digital statements for a specific account, allowing filtering by date range and format."
      operationId: "getAccountStatements"
      security:
        - oAuth2Auth: [read:accounts]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
        - name: "year"
          in: "query"
          required: true
          description: "Year for the statement."
          schema:
            type: integer
            example: 2024
        - name: "month"
          in: "query"
          required: true
          description: "Month for the statement (1-12)."
          schema:
            type: integer
            minimum: 1
            maximum: 12
            example: 7
        - name: "format"
          in: "query"
          description: "Desired format for the statement. Use 'application/json' Accept header for download links."
          schema:
            type: string
            enum: [pdf, csv]
            default: pdf
            example: "pdf"
      responses:
        "200":
          description: "Account statement metadata with download links, or direct download in requested format."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StatementDownloadInfo"
              examples:
                StatementMetadata:
                  summary: "Example statement metadata with download links"
                  value:
                    statementId: "stmt_acc123_202407"
                    accountId: "acc_chase_checking_4567"
                    period: "July 2024"
                    downloadUrls:
                      pdf: "https://demobank.com/statements/acc123_202407.pdf?sig=..."
                      csv: "https://demobank.com/statements/acc123_202407.csv?sig=..."
            application/pdf:
              schema:
                type: string
                format: binary
              examples:
                PdfStatement:
                  summary: "Direct download of PDF statement"
                  value: "binary content of PDF"
            text/csv:
              schema:
                type: string
                format: binary
              examples:
                CsvStatement:
                  summary: "Direct download of CSV statement"
                  value: "Date,Description,Amount\n2024-07-01,Salary,5000.00\n2024-07-02,Coffee,4.50"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/{accountId}/overdraft-settings:
    get:
      tags:
        - "Accounts & Balances"
      summary: "Get Overdraft Protection Settings"
      description: "Retrieves the current overdraft protection settings for a specific account."
      operationId: "getOverdraftSettings"
      security:
        - oAuth2Auth: [read:accounts]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      responses:
        "200":
          description: "Overdraft settings for the account."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
              examples:
                OverdraftSettingsExample:
                  summary: "Example overdraft settings"
                  value:
                    accountId: "acc_chase_checking_4567"
                    enabled: true
                    protectionLimit: 500.00
                    linkToSavings: true
                    linkedSavingsAccountId: "acc_chase_savings_1234"
                    feePreference: "always_pay"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Accounts & Balances"
      summary: "Update Overdraft Protection Settings"
      description: "Updates the overdraft protection settings for a specific account, enabling or disabling protection and configuring preferences."
      operationId: "updateOverdraftSettings"
      security:
        - oAuth2Auth: [write:accounts]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountId"
      requestBody:
        required: true
        description: "Request to update overdraft protection settings."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OverdraftSettingsUpdateRequest"
            examples:
              UpdateOverdraft:
                summary: "Update overdraft settings request"
                value:
                  enabled: false
                  linkToSavings: false
                  feePreference: "decline_if_over_limit"
      responses:
        "200":
          description: "Overdraft settings updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OverdraftSettings"
              examples:
                UpdatedOverdraftSettings:
                  summary: "Example updated overdraft settings"
                  value:
                    accountId: "acc_chase_checking_4567"
                    enabled: false
                    protectionLimit: null
                    linkToSavings: null
                    linkedSavingsAccountId: null
                    feePreference: "decline_if_over_limit"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /accounts/link:
    post:
      tags:
        - "Accounts & Balances"
        - "Security & Open Banking Ecosystem"
      summary: "Initiate Linking a New External Institution"
      description: "Begins the secure process of linking a new external financial institution (e.g., another bank, investment platform) to the user's  profile, typically involving a third-party tokenized flow."
      operationId: "initiateAccountLinking"
      security:
        - oAuth2Auth: [write:accounts]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Parameters for initiating the linking process, such as institution name or specific provider."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LinkAccountRequest"
            examples:
              LinkPlaidAccount:
                summary: "Initiate linking via Plaid-like provider"
                value:
                  institutionName: "Bank of America"
                  countryCode: "US"
      responses:
        "200":
          description: "Account linking initiated. Provides a URI for the user to complete the connection securely."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LinkAccountResponse"
              examples:
                LinkInitiated:
                  summary: "Successful account linking initiation"
                  value:
                    linkSessionId: "link_session_xyz789"
                    authUri: "https://auth.plaid.com/oauth/initiate?client_id=...&redirect_uri=..."
                    status: "pending_user_action"
                    message: "Please redirect user to the provided URI to complete authentication."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List & Filter Transactions with Advanced Options"
      description: "Retrieves a paginated list of the user's transactions, with extensive options for filtering by type, category, date range, amount, and intelligent AI-driven sorting and search capabilities."
      operationId: "listTransactionsEnhanced"
      security:
        - oAuth2Auth: [read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "type"
          in: "query"
          description: "Filter transactions by type (e.g., income, expense, transfer)."
          schema:
            type: string
            enum: [income, expense, transfer, investment, refund, bill_payment]
            example: "expense"
        - name: "category"
          in: "query"
          description: "Filter transactions by their AI-assigned or user-defined category."
          schema:
            type: string
            example: "Groceries"
        - name: "startDate"
          in: "query"
          description: "Retrieve transactions from this date (inclusive)."
          schema:
            type: string
            format: date
            example: "2024-01-01"
        - name: "endDate"
          in: "query"
          description: "Retrieve transactions up to this date (inclusive)."
          schema:
            type: string
            format: date
            example: "2024-12-31"
        - name: "minAmount"
          in: "query"
          description: "Filter for transactions with an amount greater than or equal to this value."
          schema:
            type: number
            format: float
            minimum: 0
            example: 20.00
        - name: "maxAmount"
          in: "query"
          description: "Filter for transactions with an amount less than or equal to this value."
          schema:
            type: number
            format: float
            minimum: 0
            example: 100.00
        - name: "searchQuery"
          in: "query"
          description: "Free-text search across transaction descriptions, merchants, and notes."
          schema:
            type: string
            example: "Starbucks"
      responses:
        "200":
          description: "A paginated, intelligently filtered list of transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
              examples:
                FilteredTransactions:
                  summary: "Example of filtered and paginated transactions"
                  value:
                    limit: 2
                    offset: 0
                    total: 5
                    data:
                      - id: "txn_quantum-2024-07-21-A7B8C9"
                        accountId: "acc_chase_checking_4567"
                        type: "expense"
                        category: "Dining & Restaurants"
                        aiCategoryConfidence: 0.92
                        description: "Coffee Shop - Quantum Cafe"
                        merchantDetails:
                          name: "Quantum Cafe"
                          logoUrl: "https://assets.demobank.com/merchants/quantum_cafe.png"
                          website: "https://quantum.cafe"
                          address:
                            city: "Quantumville"
                            state: "CA"
                            zip: "90210"
                        amount: 12.50
                        currency: "USD"
                        date: "2024-07-21"
                        postedDate: "2024-07-22"
                        carbonFootprint: 1.2
                        paymentChannel: "in_store"
                        tags: ["work_lunch"]
                        disputeStatus: "none"
                      - id: "txn_quantum-2024-07-20-B1C2D3"
                        accountId: "acc_chase_checking_4567"
                        type: "expense"
                        category: "Groceries"
                        aiCategoryConfidence: 0.95
                        description: "Whole Foods Market"
                        merchantDetails:
                          name: "Whole Foods Market"
                          logoUrl: "https://assets.demobank.com/merchants/whole_foods.png"
                          website: "https://wholefoodsmarket.com"
                          address:
                            city: "Quantumville"
                            state: "CA"
                            zip: "90210"
                        amount: 85.30
                        currency: "USD"
                        date: "2024-07-20"
                        postedDate: "2024-07-20"
                        carbonFootprint: 5.5
                        paymentChannel: "in_store"
                        tags: ["weekly_shop"]
                        disputeStatus: "none"
                    nextOffset: 2
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}:
    get:
      tags:
        - "Transactions & Insights"
      summary: "Get Detailed Transaction by ID"
      description: "Retrieves granular information for a single transaction by its unique ID, including AI categorization confidence, merchant details, and associated carbon footprint."
      operationId: "getTransactionByIdDetailed"
      security:
        - oAuth2Auth: [read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      responses:
        "200":
          description: "The requested transaction details with enhanced data."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                SingleTransaction:
                  summary: "Example of a single detailed transaction"
                  value:
                    id: "txn_quantum-2024-07-21-A7B8C9"
                    accountId: "acc_chase_checking_4567"
                    type: "expense"
                    category: "Dining & Restaurants"
                    aiCategoryConfidence: 0.92
                    description: "Coffee Shop - Quantum Cafe"
                    merchantDetails:
                      name: "Quantum Cafe"
                      logoUrl: "https://assets.demobank.com/merchants/quantum_cafe.png"
                      website: "https://quantum.cafe"
                      address:
                        city: "Quantumville"
                        state: "CA"
                        zip: "90210"
                    amount: 12.50
                    currency: "USD"
                    date: "2024-07-21"
                    postedDate: "2024-07-22"
                    carbonFootprint: 1.2
                    location:
                      latitude: 34.0522
                      longitude: -118.2437
                      city: "Los Angeles"
                    paymentChannel: "in_store"
                    tags: ["work_lunch"]
                    receiptUrl: "https://demobank.com/receipts/txn_1a2b3c4d5e.pdf"
                    disputeStatus: "none"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}/categorize:
    put:
      tags:
        - "Transactions & Insights"
      summary: "Manually Categorize or Recategorize a Transaction"
      description: "Allows the user to override or refine the AI's categorization for a transaction, improving future AI accuracy and personal financial reporting."
      operationId: "categorizeTransaction"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "The new category for the transaction, along with optional notes."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CategorizeTransactionRequest"
            examples:
              RecategorizeGrocery:
                summary: "Recategorize a grocery transaction"
                value:
                  category: "Home > Groceries"
                  notes: "Bulk purchase for party"
                  applyToFuture: true
      responses:
        "200":
          description: "Transaction category updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                UpdatedCategory:
                  summary: "Example of transaction with updated category"
                  value:
                    id: "txn_quantum-2024-07-21-A7B8C9"
                    accountId: "acc_chase_checking_4567"
                    type: "expense"
                    category: "Home > Groceries"
                    aiCategoryConfidence: 0.98 # Higher due to user correction
                    description: "Coffee Shop - Quantum Cafe"
                    amount: 12.50
                    currency: "USD"
                    date: "2024-07-21"
                    postedDate: "2024-07-22"
                    carbonFootprint: 1.2
                    paymentChannel: "in_store"
                    tags: ["work_lunch"]
                    disputeStatus: "none"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /transactions/{transactionId}/dispute:
    post:
      tags:
        - "Transactions & Insights"
      summary: "Initiate a Transaction Dispute"
      description: "Begins the process of disputing a specific transaction, providing details and supporting documentation for review by our compliance team and AI."
      operationId: "initiateTransactionDispute"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "Details regarding the transaction dispute."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DisputeRequest"
            examples:
              DisputeUnauthorized:
                summary: "Dispute an unauthorized transaction"
                value:
                  reason: "unauthorized"
                  details: "I did not authorize this purchase. My card may have been compromised and I was traveling internationally on this date."
                  supportingDocuments: ["https://demobank.com/uploads/flight_ticket.png"]
      responses:
        "202":
          description: "Transaction dispute initiated. Status will be available via the transaction details."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DisputeStatus"
              examples:
                DisputeInitiated:
                  summary: "Transaction dispute initiated successfully"
                  value:
                    disputeId: "dispute_txn_xyz123"
                    status: "pending"
                    nextSteps: "Our AI-powered fraud team is reviewing your claim. You will be notified within 2-3 business days."
                    lastUpdated: "2024-07-22T11:30:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /transactions/recurring:
    get:
      tags:
        - "Transactions & Insights"
      summary: "List Recurring Transactions"
      description: "Retrieves a list of all detected or user-defined recurring transactions, useful for budget tracking and subscription management."
      operationId: "listRecurringTransactions"
      security:
        - oAuth2Auth: [read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of recurring transactions."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/RecurringTransaction"
              examples:
                RecurringTxnList:
                  summary: "Example list of recurring transactions"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "rec_txn_netflix_001"
                        description: "Netflix Subscription"
                        category: "Entertainment"
                        amount: 19.99
                        currency: "USD"
                        frequency: "monthly"
                        nextDueDate: "2024-08-01"
                        lastPaidDate: "2024-07-01"
                        status: "active"
                        linkedAccountId: "acc_chase_checking_4567"
                        aiConfidenceScore: 0.95
                      - id: "rec_txn_gym_002"
                        description: "Gym Membership"
                        category: "Health & Fitness"
                        amount: 49.00
                        currency: "USD"
                        frequency: "monthly"
                        nextDueDate: "2024-08-15"
                        lastPaidDate: "2024-07-15"
                        status: "active"
                        linkedAccountId: "acc_chase_checking_4567"
                        aiConfidenceScore: 0.99
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Transactions & Insights"
      summary: "Create a New Recurring Transaction"
      description: "Defines a new recurring transaction pattern for future tracking and budgeting."
      operationId: "createRecurringTransaction"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new recurring transaction pattern."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RecurringTransactionCreationRequest"
            examples:
              CreateGymMembership:
                summary: "Create new gym membership recurring transaction"
                value:
                  description: "New Gym Membership"
                  category: "Health & Fitness"
                  amount: 55.50
                  currency: "USD"
                  frequency: "monthly"
                  startDate: "2024-09-01"
                  linkedAccountId: "acc_chase_checking_4567"
      responses:
        "201":
          description: "Recurring transaction created."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecurringTransaction"
              examples:
                RecurringTxnCreated:
                  summary: "Example of a newly created recurring transaction"
                  value:
                    id: "rec_txn_new_gym_003"
                    description: "New Gym Membership"
                    category: "Health & Fitness"
                    amount: 55.50
                    currency: "USD"
                    frequency: "monthly"
                    nextDueDate: "2024-09-01"
                    lastPaidDate: null
                    status: "active"
                    linkedAccountId: "acc_chase_checking_4567"
                    aiConfidenceScore: 0.80
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /transactions/{transactionId}/notes:
    put:
      tags:
        - "Transactions & Insights"
      summary: "Add/Update Notes for a Transaction"
      description: "Allows the user to add or update personal notes for a specific transaction."
      operationId: "updateTransactionNotes"
      security:
        - oAuth2Auth: [write:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/TransactionId"
      requestBody:
        required: true
        description: "Payload to add/update notes for a transaction."
        content:
          application/json:
            schema:
              type: object
              required:
                - notes
              properties:
                notes:
                  type: string
                  example: "Bought new books for my AI course."
                  description: "The personal notes to add or update for the transaction."
            examples:
              UpdateNotes:
                summary: "Add notes to a transaction"
                value:
                  notes: "This was a special coffee for a client meeting."
      responses:
        "200":
          description: "Transaction notes updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                NotesUpdated:
                  summary: "Example of transaction with updated notes"
                  value:
                    id: "txn_quantum-2024-07-21-A7B8C9"
                    accountId: "acc_chase_checking_4567"
                    type: "expense"
                    category: "Dining & Restaurants"
                    aiCategoryConfidence: 0.92
                    description: "Coffee Shop - Quantum Cafe"
                    amount: 12.50
                    currency: "USD"
                    date: "2024-07-21"
                    postedDate: "2024-07-22"
                    carbonFootprint: 1.2
                    paymentChannel: "in_store"
                    tags: ["work_lunch"]
                    receiptUrl: "https://demobank.com/receipts/txn_1a2b3c4d5e.pdf"
                    disputeStatus: "none"
                    notes: "This was a special coffee for a client meeting."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /transactions/insights/spending-trends:
    get:
      tags:
        - "Transactions & Insights"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get AI-Driven Spending Trends"
      description: "Retrieves AI-generated insights into user spending trends over time, identifying patterns and anomalies."
      operationId: "getSpendingTrends"
      security:
        - oAuth2Auth: [read:transactions, read:analytics]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Spending trends analysis."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SpendingTrends"
              examples:
                SpendingTrendsExample:
                  summary: "Example spending trends analysis"
                  value:
                    period: "Last 3 Months"
                    overallTrend: "increasing"
                    percentageChange: 5.2
                    topCategoriesByChange:
                      - category: "Dining & Restaurants"
                        percentageChange: 15.0
                        absoluteChange: 120.00
                      - category: "Groceries"
                        percentageChange: 8.0
                        absoluteChange: 50.00
                    aiInsights:
                      - id: "insight-spending-alert-001"
                        title: "High Dining Spend Alert"
                        description: "Your dining expenses this month are 35% higher than your average, potentially impacting your budget by $150."
                        category: "spending"
                        severity: "medium"
                        actionableRecommendation: "Consider utilizing the 'Budget Optimizer' tool to adjust your dining budget or explore meal prep options."
                        timestamp: "2024-07-22T11:45:00Z"
                    forecastNextMonth: 2850.00
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "List All User Budgets"
      description: "Retrieves a list of all active and historical budgets for the authenticated user."
      operationId: "listBudgets"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of user budgets."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Budget"
              examples:
                BudgetList:
                  summary: "Example list of user budgets"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "budget_monthly_aug"
                        name: "August 2024 Household Budget"
                        period: "monthly"
                        startDate: "2024-08-01"
                        endDate: "2024-08-31"
                        totalAmount: 3000.00
                        spentAmount: 1200.50
                        remainingAmount: 1799.50
                        categories:
                          - name: "Groceries"
                            allocated: 500.00
                            spent: 250.75
                            remaining: 249.25
                          - name: "Utilities"
                            allocated: 150.00
                            spent: 110.00
                            remaining: 40.00
                        status: "active"
                        alertThreshold: 80
                      - id: "budget_vacation_2025"
                        name: "2025 Europe Trip"
                        period: "yearly"
                        startDate: "2024-01-01"
                        endDate: "2025-12-31"
                        totalAmount: 5000.00
                        spentAmount: 1500.00
                        remainingAmount: 3500.00
                        categories:
                          - name: "Flights"
                            allocated: 2000.00
                            spent: 800.00
                            remaining: 1200.00
                        status: "active"
                        alertThreshold: 90
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Budgets & Financial Planning"
      summary: "Create a New Budget"
      description: "Creates a new financial budget for the user, with optional AI auto-population of categories and amounts."
      operationId: "createBudget"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new budget."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetCreationRequest"
            examples:
              CreateMonthlyBudget:
                summary: "Create a new monthly budget"
                value:
                  name: "September Living Expenses"
                  period: "monthly"
                  startDate: "2024-09-01"
                  endDate: "2024-09-30"
                  totalAmount: 2800.00
                  categories:
                    - name: "Rent"
                      allocated: 1500.00
                    - name: "Groceries"
                      allocated: 400.00
                  alertThreshold: 75
                  aiAutoPopulate: true
      responses:
        "201":
          description: "Budget created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
              examples:
                BudgetCreated:
                  summary: "Example of a newly created budget"
                  value:
                    id: "budget_monthly_sep"
                    name: "September Living Expenses"
                    period: "monthly"
                    startDate: "2024-09-01"
                    endDate: "2024-09-30"
                    totalAmount: 2800.00
                    spentAmount: 0.00
                    remainingAmount: 2800.00
                    categories:
                      - name: "Rent"
                        allocated: 1500.00
                        spent: 0.00
                        remaining: 1500.00
                      - name: "Groceries"
                        allocated: 400.00
                        spent: 0.00
                        remaining: 400.00
                      - name: "Utilities"
                        allocated: 150.00
                        spent: 0.00
                        remaining: 150.00 # Auto-populated by AI
                    status: "active"
                    alertThreshold: 75
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /budgets/{budgetId}:
    get:
      tags:
        - "Budgets & Financial Planning"
      summary: "Get Detailed Budget Information"
      description: "Retrieves detailed information for a specific budget, including current spending, remaining amounts, and AI recommendations."
      operationId: "getBudgetDetails"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "200":
          description: "Detailed budget information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
              examples:
                BudgetDetails:
                  summary: "Detailed budget information"
                  value:
                    id: "budget_monthly_aug"
                    name: "August 2024 Household Budget"
                    period: "monthly"
                    startDate: "2024-08-01"
                    endDate: "2024-08-31"
                    totalAmount: 3000.00
                    spentAmount: 1200.50
                    remainingAmount: 1799.50
                    categories:
                      - name: "Groceries"
                        allocated: 500.00
                        spent: 250.75
                        remaining: 249.25
                      - name: "Utilities"
                        allocated: 150.00
                        spent: 110.00
                        remaining: 40.00
                      - name: "Dining & Restaurants"
                        allocated: 300.00
                        spent: 350.00
                        remaining: -50.00
                    status: "active"
                    alertThreshold: 80
                    aiRecommendations:
                      - id: "insight-budget-overspend-001"
                        title: "Dining Budget Exceeded"
                        description: "You've exceeded your dining budget by $50. Consider reallocating funds or reducing future dining expenses."
                        category: "budget"
                        severity: "medium"
                        actionableRecommendation: "Adjust your 'Dining & Restaurants' category or use the 'Budget Optimizer' tool."
                        timestamp: "2024-07-22T13:00:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Budgets & Financial Planning"
      summary: "Update an Existing Budget"
      description: "Updates the parameters of an existing budget, such as total amount, dates, or categories."
      operationId: "updateBudget"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      requestBody:
        required: true
        description: "Request to update an existing budget."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BudgetUpdateRequest"
            examples:
              UpdateBudgetAmount:
                summary: "Increase total budget amount"
                value:
                  totalAmount: 3200.00
                  alertThreshold: 85
      responses:
        "200":
          description: "Budget updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Budget"
              examples:
                BudgetUpdated:
                  summary: "Example of an updated budget"
                  value:
                    id: "budget_monthly_aug"
                    name: "August 2024 Household Budget"
                    period: "monthly"
                    startDate: "2024-08-01"
                    endDate: "2024-08-31"
                    totalAmount: 3200.00
                    spentAmount: 1200.50
                    remainingAmount: 1999.50
                    categories:
                      - name: "Groceries"
                        allocated: 500.00
                        spent: 250.75
                        remaining: 249.25
                    status: "active"
                    alertThreshold: 85
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Budgets & Financial Planning"
      summary: "Delete a Budget"
      description: "Deletes a specific budget from the user's profile."
      operationId: "deleteBudget"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/BudgetId"
      responses:
        "204":
          description: "Budget deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "List All Investment Portfolios"
      description: "Retrieves a summary of all investment portfolios linked to the user's account."
      operationId: "listInvestmentPortfolios"
      security:
        - oAuth2Auth: [read:investments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of investment portfolios."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioList:
                  summary: "Example list of investment portfolios"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "portfolio_equity_growth"
                        name: "Aggressive Growth Portfolio"
                        type: "equities"
                        currency: "USD"
                        totalValue: 250000.00
                        unrealizedGainLoss: 25000.00
                        todayGainLoss: 500.00
                        lastUpdated: "2024-07-22T10:00:00Z"
                        riskTolerance: "aggressive"
                      - id: "portfolio_retirement_bond"
                        name: "Retirement Bond Portfolio"
                        type: "bonds"
                        currency: "USD"
                        totalValue: 180000.00
                        unrealizedGainLoss: 5000.00
                        todayGainLoss: 100.00
                        lastUpdated: "2024-07-22T10:00:00Z"
                        riskTolerance: "low"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Create a New Investment Portfolio"
      description: "Creates a new investment portfolio, with options for initial asset allocation."
      operationId: "createInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new investment portfolio."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioCreationRequest"
            examples:
              CreateNewPortfolio:
                summary: "Create a new diversified portfolio"
                value:
                  name: "My First Growth Portfolio"
                  type: "diversified"
                  currency: "USD"
                  initialInvestment: 10000.00
                  riskTolerance: "medium"
                  aiAutoAllocate: true
                  linkedAccountId: "acc_chase_checking_4567"
      responses:
        "201":
          description: "Investment portfolio created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioCreated:
                  summary: "Example of a newly created investment portfolio"
                  value:
                    id: "portfolio_new_growth_001"
                    name: "My First Growth Portfolio"
                    type: "diversified"
                    currency: "USD"
                    totalValue: 10000.00
                    unrealizedGainLoss: 0.00
                    todayGainLoss: 0.00
                    lastUpdated: "2024-07-22T14:00:00Z"
                    riskTolerance: "medium"
                    holdings:
                      - symbol: "SPY"
                        name: "S&P 500 ETF"
                        quantity: 10
                        averageCost: 450.00
                        currentPrice: 450.00
                        marketValue: 4500.00
                        percentageOfPortfolio: 45.0
                        esgScore: 7.5
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /investments/portfolios/{portfolioId}:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Get Detailed Investment Portfolio"
      description: "Retrieves detailed information for a specific investment portfolio, including holdings, performance, and AI insights."
      operationId: "getInvestmentPortfolioDetails"
      security:
        - oAuth2Auth: [read:investments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      responses:
        "200":
          description: "Detailed investment portfolio information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioDetails:
                  summary: "Example of detailed investment portfolio"
                  value:
                    id: "portfolio_equity_growth"
                    name: "Aggressive Growth Portfolio"
                    type: "equities"
                    currency: "USD"
                    totalValue: 250000.00
                    unrealizedGainLoss: 25000.00
                    todayGainLoss: 500.00
                    lastUpdated: "2024-07-22T10:00:00Z"
                    riskTolerance: "aggressive"
                    aiPerformanceInsights:
                      - id: "insight-market-outlook-001"
                        title: "Strong Tech Sector Performance"
                        description: "The AI predicts continued strong performance in the tech sector, which currently forms a significant portion of your portfolio."
                        category: "investing"
                        severity: "low"
                        timestamp: "2024-07-22T14:15:00Z"
                    holdings:
                      - symbol: "AAPL"
                        name: "Apple Inc."
                        quantity: 100
                        averageCost: 150.00
                        currentPrice: 180.00
                        marketValue: 18000.00
                        percentageOfPortfolio: 7.2
                        esgScore: 8.5
                      - symbol: "MSFT"
                        name: "Microsoft Corp."
                        quantity: 50
                        averageCost: 300.00
                        currentPrice: 320.00
                        marketValue: 16000.00
                        percentageOfPortfolio: 6.4
                        esgScore: 8.9
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Update Investment Portfolio Details"
      description: "Updates high-level details of an investment portfolio, such as name or risk tolerance."
      operationId: "updateInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        description: "Request to update high-level details of an investment portfolio."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvestmentPortfolioUpdateRequest"
            examples:
              UpdatePortfolioRisk:
                summary: "Update portfolio risk tolerance"
                value:
                  riskTolerance: "medium"
                  aiRebalancingFrequency: "quarterly"
      responses:
        "200":
          description: "Investment portfolio updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentPortfolio"
              examples:
                PortfolioUpdated:
                  summary: "Example of an updated investment portfolio"
                  value:
                    id: "portfolio_equity_growth"
                    name: "Aggressive Growth Portfolio"
                    type: "equities"
                    currency: "USD"
                    totalValue: 250000.00
                    unrealizedGainLoss: 25000.00
                    todayGainLoss: 500.00
                    lastUpdated: "2024-07-22T14:30:00Z"
                    riskTolerance: "medium"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/portfolios/{portfolioId}/rebalance:
    post:
      tags:
        - "Investments & Portfolio Intelligence"
      summary: "Initiate AI-Driven Portfolio Rebalancing"
      description: "Triggers an AI-driven rebalancing process for a specific investment portfolio based on a target risk tolerance or strategy."
      operationId: "rebalanceInvestmentPortfolio"
      security:
        - oAuth2Auth: [write:investments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PortfolioId"
      requestBody:
        required: true
        description: "Request to initiate an AI-driven portfolio rebalancing."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RebalanceRequest"
            examples:
              InitiateRebalance:
                summary: "Initiate a rebalance for medium risk"
                value:
                  targetRiskTolerance: "medium"
                  dryRun: true
                  confirmationRequired: true
      responses:
        "202":
          description: "Portfolio rebalancing initiated. Details will be provided asynchronously."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RebalanceStatus"
              examples:
                RebalanceInitiated:
                  summary: "Rebalance initiated successfully"
                  value:
                    rebalanceId: "rebal_port_growth_123"
                    portfolioId: "portfolio_equity_growth"
                    status: "analyzing"
                    statusMessage: "AI is analyzing optimal trade strategy to match target risk profile."
                    proposedTrades: null
                    estimatedImpact: "Projected 5% reduction in portfolio volatility."
                    confirmationRequired: true
                    confirmationExpiresAt: "2024-07-22T15:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /investments/assets/search:
    get:
      tags:
        - "Investments & Portfolio Intelligence"
        - "Sustainability & ESG Impact"
      summary: "Search for Investment Assets with ESG Scores"
      description: "Searches for available investment assets (stocks, ETFs, mutual funds) and returns their ESG impact scores."
      operationId: "searchESGAssets"
      security:
        - oAuth2Auth: [read:investments, read:sustainability]
        - apiKeyAuth: []
      parameters:
        - name: "query"
          in: "query"
          required: true
          description: "Search query for asset name or symbol."
          schema:
            type: string
            example: "Tesla"
        - name: "minESGScore"
          in: "query"
          description: "Minimum desired ESG score (0-10)."
          schema:
            type: number
            format: float
            minimum: 0
            maximum: 10
            example: 7.0
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of investment assets with ESG data."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/ESGAssetSearchResult"
              examples:
                ESGSearchResults:
                  summary: "Example ESG asset search results"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - assetSymbol: "TSLA"
                        assetName: "Tesla Inc."
                        assetType: "stock"
                        currentPrice: 250.75
                        currency: "USD"
                        overallESGScore: 9.1
                        environmentalScore: 9.5
                        socialScore: 8.8
                        governanceScore: 9.0
                        esgRatingProvider: "MSCI"
                        esgControversies: ["Labor Practices Controversy"]
                        aiESGInsight: "Tesla's high environmental score is driven by its focus on sustainable transportation, though social scores reflect recent labor concerns."
                      - assetSymbol: "Vanguard Total Stock Market ETF"
                        assetName: "Vanguard Total Stock Market ETF"
                        assetType: "etf"
                        currentPrice: 200.00
                        currency: "USD"
                        overallESGScore: 7.8
                        environmentalScore: 7.5
                        socialScore: 8.0
                        governanceScore: 8.0
                        esgRatingProvider: "Sustainalytics"
                        esgControversies: []
                        aiESGInsight: "A broadly diversified ETF with a solid overall ESG profile, reflecting average market performance in sustainability."
                    nextOffset: 2
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat:
    post:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Send a Message to the Quantum AI Advisor"
      description: "Initiates or continues a sophisticated conversation with Quantum, the AI Advisor. Quantum can provide advanced financial insights, execute complex tasks via an expanding suite of intelligent tools, and learn from user interactions to offer hyper-personalized guidance."
      operationId: "chatWithQuantumAdvanced"
      security:
        - oAuth2Auth: [interact:ai_advisor]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The rich message payload for the AI, including textual input and potential tool function outputs."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AIChatRequest"
            examples:
              AskAboutSpending:
                summary: "Ask about spending patterns"
                value:
                  message: "Can you analyze my recent spending patterns and suggest areas for saving, focusing on my dining expenses?"
                  sessionId: "session-quantum-xyz-789-alpha"
              ToolResponse:
                summary: "Providing tool output to AI"
                value:
                  sessionId: "session-quantum-xyz-789-alpha"
                  functionResponse:
                    name: "send_money"
                    response:
                      status: "success"
                      transactionId: "pmt_654321"
                      amountSent: 50
                      recipient: "Alex"
      responses:
        "200":
          description: "The AI Advisor's comprehensive response, which may include text, proactive recommendations, and declarative tool calls for execution."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIChatResponse"
              examples:
                AIInsightResponse:
                  summary: "AI response with spending insights"
                  value:
                    text: "I've completed a detailed analysis of your spending. It appears your dining expenses account for 35% of your total outflows this month, significantly higher than your target. Would you like me to identify specific areas for reduction or suggest alternative dining options?"
                    sessionId: "session-quantum-xyz-789-alpha"
                    proactiveInsights:
                      - id: "insight-dining-overspend-002"
                        title: "High Dining Spend Alert"
                        description: "Your dining expenses this month are 35% higher than your average, potentially impacting your budget by $150."
                        category: "spending"
                        severity: "medium"
                        actionableRecommendation: "Consider utilizing the 'Budget Optimizer' tool to adjust your dining budget or explore meal prep options."
                        timestamp: "2024-07-22T15:00:00Z"
                AIToolCallResponse:
                  summary: "AI requesting to send money"
                  value:
                    text: "I can help with that. What amount would you like to send to Alex?"
                    sessionId: "session-quantum-xyz-789-beta"
                    functionCalls:
                      - id: "call_abc123"
                        name: "send_money"
                        args:
                          recipient: "Alex"
                          currency: "USD"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "The Quantum AI Advisor service is temporarily overloaded or unavailable. Please try again shortly."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                ServiceUnavailable:
                  summary: "AI service overloaded"
                  value:
                    code: "AI_SERVICE_UNAVAILABLE"
                    message: "The Quantum AI Advisor service is temporarily overloaded. Please try again in a few minutes."
                    timestamp: "2024-07-22T15:05:00Z"

  /ai/advisor/tools:
    get:
      tags:
        - "AI Advisor (Quantum)"
        - "Developer Tools & API Management"
      summary: "List Available AI Tools for Quantum"
      description: "Retrieves a dynamic manifest of all integrated AI tools that Quantum can invoke and execute, providing details on their capabilities, parameters, and access requirements."
      operationId: "listQuantumAITools"
      security:
        - oAuth2Auth: [read:ai_advisor]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of available AI tools."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/AITool"
              examples:
                ToolList:
                  summary: "Example list of AI tools"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - name: "send_money"
                        description: "Sends money to a specified recipient from the user's primary checking account."
                        parameters:
                          type: "object"
                          properties:
                            amount:
                              type: "number"
                              description: "The amount of money to send."
                            recipient:
                              type: "string"
                              description: "The name or ID of the recipient."
                            currency:
                              type: "string"
                              description: "The currency of the transaction (e.g., USD, EUR)."
                          required:
                            - "amount"
                            - "recipient"
                            - "currency"
                        accessScope: "write:payments"
                      - name: "get_account_balance"
                        description: "Retrieves the current balance of a specified financial account."
                        parameters:
                          type: "object"
                          properties:
                            accountId:
                              type: "string"
                              description: "The ID of the account."
                          required:
                            - "accountId"
                        accessScope: "read:accounts"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/advisor/chat/history:
    get:
      tags:
        - "AI Advisor (Quantum)"
      summary: "Retrieve AI Advisor Conversation History"
      description: "Fetches the full conversation history with the Quantum AI Advisor for a given session or user."
      operationId: "getQuantumChatHistory"
      security:
        - oAuth2Auth: [read:ai_advisor]
        - apiKeyAuth: []
      parameters:
        - name: "sessionId"
          in: "query"
          nullable: true
          description: "Optional: Filter history by a specific session ID. If omitted, recent conversations will be returned."
          schema:
            type: string
            example: "session-quantum-xyz-789-alpha"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "Paginated list of chat messages."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedChatMessages"
              examples:
                ChatHistory:
                  summary: "Example chat history for a session"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - role: "user"
                        content: "What is my current net worth?"
                        timestamp: "2024-07-22T18:00:00Z"
                      - role: "assistant"
                        content: "Based on your linked accounts and investments, your estimated net worth is $450,000. Would you like a detailed breakdown?"
                        timestamp: "2024-07-22T18:01:00Z"
                      - role: "user"
                        content: "Yes, please provide a breakdown."
                        timestamp: "2024-07-22T18:02:00Z"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulate:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run a 'What-If' Financial Simulation (Standard)"
      description: "Submits a hypothetical scenario to the Quantum Oracle AI for standard financial impact analysis. The AI simulates the effect on the user's current financial state and provides a summary."
      operationId: "simulateWithQuantumOracle"
      security:
        - oAuth2Auth: [interact:ai_oracle]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to run a standard 'what-if' financial simulation."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SimulationRequest"
            examples:
              InvestmentSimulation:
                summary: "Simulate additional investment"
                value:
                  prompt: "What if I invest an additional $1,000 per month into my aggressive growth portfolio for the next 5 years?"
                  parameters:
                    durationYears: 5
                    monthlyInvestmentAmount: 1000
                    riskTolerance: "aggressive"
      responses:
        "200":
          description: "The simulation was successful. The response contains a detailed impact analysis and actionable recommendations."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulationResponse"
              examples:
                SimulationResult:
                  summary: "Example of a successful simulation result"
                  value:
                    simulationId: "sim_oracle-growth-2024-xyz"
                    narrativeSummary: "If you consistently invest an additional $1,000 per month into your aggressive growth portfolio over the next 5 years, the Quantum Oracle predicts your portfolio could grow by approximately 45-60%, significantly increasing your wealth. However, this comes with elevated risk during market downturns."
                    keyImpacts:
                      - metric: "Projected Portfolio Value"
                        value: "$120,000 - $140,000"
                        severity: "high"
                      - metric: "Overall Net Worth Increase"
                        value: "$60,000 - $70,000"
                        severity: "high"
                    recommendations:
                      - title: "Review Portfolio Diversification"
                        description: "Given the aggressive nature of this strategy, the Oracle suggests reviewing your current portfolio diversification to mitigate concentration risk."
                        actionTrigger: "open_portfolio_diversification_tool"
                    riskAnalysis:
                      maxDrawdown: 0.25
                      volatilityIndex: 0.18
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "503":
          description: "AI simulation service is temporarily unavailable due to high demand or maintenance."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                ServiceUnavailable:
                  summary: "AI service unavailable"
                  value:
                    code: "SIMULATION_SERVICE_UNAVAILABLE"
                    message: "AI simulation service is temporarily unavailable due to high demand. Please try again shortly."
                    timestamp: "2024-07-22T16:00:00Z"

  /ai/oracle/simulate/advanced:
    post:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Run an Advanced Multi-Variable Financial Simulation"
      description: "Engages the Quantum Oracle for highly complex, multi-variable simulations, allowing precise control over numerous financial parameters, market conditions, and personal events to generate deep, predictive insights and sensitivity analysis."
      operationId: "simulateWithQuantumOracleAdvanced"
      security:
        - oAuth2Auth: [interact:ai_oracle]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "An advanced request payload detailing the complex scenario and parameters for the AI simulation."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedSimulationRequest"
            examples:
              ComplexJobLossSimulation:
                summary: "Simulate job loss with market recovery"
                value:
                  prompt: "Evaluate the long-term impact of a sudden job loss combined with a variable market downturn, analyzing worst-case and best-case recovery scenarios over a decade."
                  scenarios:
                    - name: "Job Loss & Mild Market Recovery"
                      events:
                        - type: "job_loss"
                          details:
                            durationMonths: 6
                            severanceAmount: 10000
                            unemploymentBenefits: 2000
                        - type: "market_downturn"
                          details:
                            impactPercentage: 0.15
                            recoveryYears: 3
                      durationYears: 10
                      sensitivityAnalysisParams:
                        - paramName: "marketRecoveryRate"
                          min: 0.03
                          max: 0.07
                          step: 0.01
      responses:
        "200":
          description: "Advanced simulation completed successfully, returning granular impact analysis, sensitivity curves, and optimized strategies."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AdvancedSimulationResponse"
              examples:
                AdvancedSimulationResult:
                  summary: "Example of a complex advanced simulation result"
                  value:
                    simulationId: "sim_oracle-complex-macro-123"
                    overallSummary: "The advanced simulation reveals that a job loss scenario has a significant initial impact on liquidity, but recovery is highly dependent on market conditions and the duration of unemployment. Proactive savings and diversified investments are key mitigating factors."
                    scenarioResults:
                      - scenarioName: "Job Loss & Mild Market Recovery"
                        narrativeSummary: "In this scenario, initial liquidity challenges are observed, but a swift market recovery and prudent spending lead to recovery within 3 years."
                        finalNetWorthProjected: 1250000
                        liquidityMetrics:
                          minCashBalance: -5000
                          recoveryTimeMonths: 36
                        sensitivityAnalysisGraphs:
                          - paramName: "marketRecoveryRate"
                            data:
                              - paramValue: 0.03
                                outcomeValue: 1100000
                              - paramValue: 0.05
                                outcomeValue: 1250000
                              - paramValue: 0.07
                                outcomeValue: 1400000
                    strategicRecommendations:
                      - id: "insight-emergency-fund-003"
                        title: "Strengthen Emergency Fund"
                        description: "Maintain an emergency fund equivalent to 6-12 months of living expenses to buffer against unexpected job loss."
                        category: "saving"
                        severity: "high"
                        timestamp: "2024-07-22T16:30:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "503":
          description: "AI simulation service is experiencing extended processing times or is unavailable for complex requests."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                LongProcessing:
                  summary: "AI service long processing time"
                  value:
                    code: "SIMULATION_LONG_PROCESSING"
                    message: "AI simulation service is experiencing extended processing times for complex requests. Please allow more time."
                    timestamp: "2024-07-22T16:45:00Z"

  /ai/oracle/simulations:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "List All User Simulations"
      description: "Retrieves a list of all financial simulations previously run by the user, including their status and summaries."
      operationId: "listUserSimulations"
      security:
        - oAuth2Auth: [read:ai_oracle]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of financial simulations."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/SimulationSummary"
              examples:
                SimulationSummaries:
                  summary: "Example list of simulation summaries"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - simulationId: "sim_oracle-growth-2024-xyz"
                        title: "Investment Growth Scenario"
                        status: "completed"
                        creationDate: "2024-07-20T10:00:00Z"
                        lastUpdated: "2024-07-20T10:15:00Z"
                        summary: "Simulated impact of additional monthly investments over 5 years."
                      - simulationId: "sim_oracle-complex-macro-123"
                        title: "Job Loss & Market Downturn Impact"
                        status: "completed"
                        creationDate: "2024-07-18T14:30:00Z"
                        lastUpdated: "2024-07-18T14:45:00Z"
                        summary: "Evaluated long-term impact of job loss with variable market conditions."
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/oracle/simulations/{simulationId}:
    get:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Get Detailed Simulation Results"
      description: "Retrieves the full, detailed results of a specific financial simulation by its ID."
      operationId: "getSimulationResults"
      security:
        - oAuth2Auth: [read:ai_oracle]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "200":
          description: "Detailed simulation results."
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/SimulationResponse"
                  - $ref: "#/components/schemas/AdvancedSimulationResponse"
              examples:
                DetailedSimulationResult:
                  summary: "Example of detailed simulation result (Standard)"
                  value:
                    simulationId: "sim_oracle-growth-2024-xyz"
                    narrativeSummary: "If you consistently invest an additional $1,000 per month into your aggressive growth portfolio over the next 5 years, the Quantum Oracle predicts your portfolio could grow by approximately 45-60%..."
                    keyImpacts:
                      - metric: "Projected Portfolio Value"
                        value: "$120,000 - $140,000"
                        severity: "high"
                    recommendations:
                      - title: "Review Portfolio Diversification"
                        description: "Given the aggressive nature of this strategy, the Oracle suggests reviewing your current portfolio diversification to mitigate concentration risk."
                    riskAnalysis:
                      maxDrawdown: 0.25
                      volatilityIndex: 0.18
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Delete a Financial Simulation"
      description: "Deletes a previously run financial simulation and its results."
      operationId: "deleteSimulation"
      security:
        - oAuth2Auth: [write:ai_oracle]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SimulationId"
      responses:
        "204":
          description: "Simulation deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitch:
    post:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit a High-Potential Business Plan to Quantum Weaver"
      description: "Submits a detailed business plan to the Quantum Weaver AI for rigorous analysis, market validation, and seed funding consideration. This initiates the AI-driven incubation journey, aiming to transform innovative ideas into commercially successful ventures."
      operationId: "pitchToQuantumWeaver"
      security:
        - oAuth2Auth: [write:weaver]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The comprehensive business plan document, including executive summary, market analysis, financial projections, and team overview."
        content:
          application/json:
            schema:
              type: object
              required:
                - businessPlan
                - foundingTeam
                - marketOpportunity
                - financialProjections
              properties:
                businessPlan:
                  type: string
                  description: "The user's detailed narrative business plan (e.g., executive summary, vision, strategy)."
                  example: "Our venture, 'SynergyChain AI,' aims to revolutionize global supply chain transparency and efficiency using a decentralized AI ledger. We leverage quantum-inspired algorithms to predict disruptions and optimize logistics, targeting multinational corporations..."
                foundingTeam:
                  type: array
                  description: "Key profiles and expertise of the founding team members."
                  items:
                    type: object
                    properties:
                      name: {type: string, example: "Dr. Anya Sharma", description: "Name of the team member."}
                      role: {type: string, example: "CEO, Lead AI Architect", description: "Role of the team member."}
                      experience: {type: string, example: "20+ years in AI/ML, ex-Google X", description: "Relevant experience."}
                marketOpportunity:
                  type: string
                  description: "Detailed analysis of the target market, problem statement, and proposed solution's unique value proposition."
                  example: "The global supply chain market faces $1.5T in annual losses due to inefficiencies and lack of real-time data. SynergyChain AI offers a 30% reduction in lead times and a 15% cut in operational costs..."
                financialProjections:
                  type: object
                  description: "Key financial metrics and projections for the next 3-5 years."
                  properties:
                    seedRoundAmount: {type: number, format: float, example: 5000000, description: "Requested seed funding in USD."}
                    valuationPreMoney: {type: number, format: float, example: 20000000, description: "Pre-money valuation in USD."}
                    projectionYears: {type: integer, example: 3, description: "Number of years for financial projections."}
                    revenueForecast:
                      type: array
                      items: {type: number, format: float, example: 1000000, description: "Annual revenue forecast in USD."}
                    profitabilityEstimate: {type: string, example: "Achieve profitability within 24 months.", description: "Estimated time to profitability."}
            examples:
              SubmitBusinessPlan:
                summary: "Submit a business plan for review"
                value:
                  businessPlan: "Quantum-AI powered financial advisor platform leveraging neural networks for predictive analytics and hyper-personalized advice..."
                  foundingTeam:
                    - name: "Dr. Eleanor Vance"
                      role: "CEO & Lead AI Scientist"
                      experience: "15+ years in AI/ML, PhD in Quantum Computing, ex-Google Brain"
                    - name: "Marcus Thorne"
                      role: "COO & Finance Expert"
                      experience: "20+ years in Fintech, ex-Goldman Sachs"
                  marketOpportunity: "The booming digital finance market coupled with demand for truly personalized, AI-driven financial guidance presents a multi-billion dollar opportunity. Our unique quantum-AI approach provides unparalleled accuracy and foresight."
                  financialProjections:
                    seedRoundAmount: 2500000
                    valuationPreMoney: 10000000
                    projectionYears: 3
                    revenueForecast: [500000, 2000000, 6000000]
                    profitabilityEstimate: "Achieve profitability within 18 months."
      responses:
        "202":
          description: "The business plan was successfully ingested and is undergoing initial AI analysis. A unique pitch ID is provided for tracking progress."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
              examples:
                PitchSubmitted:
                  summary: "Successful pitch submission"
                  value:
                    pitchId: "pitch_qw_synergychain-xyz"
                    stage: "initial_review"
                    statusMessage: "Your business plan has been received and is undergoing initial review by Quantum Weaver."
                    lastUpdated: "2024-07-22T20:00:00Z"
                    nextSteps: "Please monitor for AI-generated feedback and potential questions within the next 48 hours."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /ai/incubator/pitch/{pitchId}/details:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Get Detailed AI Analysis & Feedback for a Business Pitch"
      description: "Retrieves the granular AI-driven analysis, strategic feedback, market validation results, and any outstanding questions from Quantum Weaver for a specific business pitch."
      operationId: "getQuantumWeaverPitchDetails"
      security:
        - oAuth2Auth: [read:weaver]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PitchId"
      responses:
        "200":
          description: "Comprehensive details of the pitch's current state, AI feedback, and next steps."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverDetailedState"
              examples:
                DetailedPitchState:
                  summary: "Detailed AI analysis and feedback for a business pitch"
                  value:
                    pitchId: "pitch_qw_synergychain-xyz"
                    stage: "feedback_required"
                    statusMessage: "Quantum Weaver has completed its initial analysis. Please review the feedback and answer the outstanding questions."
                    lastUpdated: "2024-07-22T21:00:00Z"
                    feedbackSummary: "Initial analysis indicates a strong market fit, but further detail is required on customer acquisition costs and scaling strategy."
                    questions:
                      - id: "q_qa-team-001"
                        question: "Please elaborate on the specific technical challenges you anticipate in deploying your quantum-inspired algorithms at scale, and how your team plans to mitigate these."
                        category: "technology"
                        isRequired: true
                      - id: "q_qa-market-002"
                        question: "Provide more granular projections for customer acquisition cost (CAC) for the first 12 months."
                        category: "market"
                        isRequired: true
                    nextSteps: "Please address the outstanding questions in the 'questions' array and resubmit feedback."
                    estimatedFundingOffer: 5000000
                    aiFinancialModel:
                      revenueBreakdown: {"Year 1": "2.5M", "Year 2": "7.8M", "Year 3": "15M"}
                      costStructureAnalysis: {"Fixed Costs": "30%", "Variable Costs": "40%", "R&D": "15%"}
                      breakevenPoint: "18 months"
                      capitalRequirements: 4500000
                      sensitivityAnalysis:
                        - scenario: "Aggressive Growth"
                          projectedIRR: 0.35
                          terminalValue: 50000000
                        - scenario: "Moderate Growth"
                          projectedIRR: 0.20
                          terminalValue: 30000000
                    aiMarketAnalysis:
                      targetMarketSize: "$50 Billion (TAM)"
                      competitiveAdvantages: ["Proprietary AI Algorithm", "First-mover advantage in quantum-AI finance"]
                      growthOpportunities: "Expansion into APAC region, new product lines (e.g., corporate treasury solutions)."
                      riskFactors: "Regulatory changes in AI governance, talent acquisition challenges."
                    aiCoachingPlan:
                      title: "Pre-Seed Fundraising Strategy"
                      summary: "This plan outlines key strategic steps to optimize your pitch deck, identify target investors, and prepare for due diligence to secure pre-seed funding."
                      steps:
                        - title: "Refine Investor Presentation"
                          description: "Update your pitch deck to incorporate recent market validation data and clearly articulate the competitive differentiation of SynergyChain AI, guided by feedback from Quantum Weaver."
                          timeline: "1-2 weeks"
                          status: "pending"
                          resources:
                            - name: "Pitch Deck Template"
                              url: "https://demobank.com/resources/pitch-template.pptx"
                        - title: "Market Research Deep Dive"
                          description: "Conduct further detailed market research to validate customer acquisition cost assumptions for enterprise clients."
                          timeline: "2 weeks"
                          status: "pending"
                    investorMatchScore: 0.88
                    aiRiskAssessment:
                      technicalRisk: "Medium (complex AI development, quantum compute dependencies)"
                      marketRisk: "Low (established market, clear pain points, strong value prop)"
                      teamRisk: "Low (experienced founding team with relevant domain expertise)"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/incubator/pitches:
    get:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "List All User Business Pitches"
      description: "Retrieves a summary list of all business pitches submitted by the authenticated user to Quantum Weaver."
      operationId: "listUserBusinessPitches"
      security:
        - oAuth2Auth: [read:weaver]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "status"
          in: "query"
          description: "Filter pitches by their current stage."
          schema:
            type: string
            enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
            example: "feedback_required"
      responses:
        "200":
          description: "A paginated list of business pitches."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/QuantumWeaverState"
              examples:
                PitchSummaries:
                  summary: "Example list of business pitches"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - pitchId: "pitch_qw_synergychain-xyz"
                        stage: "feedback_required"
                        statusMessage: "Quantum Weaver has completed its initial analysis. Please review the feedback and answer the outstanding questions."
                        lastUpdated: "2024-07-22T21:00:00Z"
                        feedbackSummary: "Initial analysis indicates a strong market fit, but further detail is required on customer acquisition costs and scaling strategy."
                        questions:
                          - id: "q_qa-team-001"
                            question: "Please elaborate on technical challenges."
                            category: "technology"
                            isRequired: true
                        nextSteps: "Please address the outstanding questions."
                      - pitchId: "pitch_qw_fintech-ai-app"
                        stage: "approved_for_funding"
                        statusMessage: "Congratulations! Your pitch has been approved for seed funding."
                        lastUpdated: "2024-07-15T10:00:00Z"
                        estimatedFundingOffer: 1000000
                        nextSteps: "Contact our investment team to finalize terms."
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /ai/incubator/pitch/{pitchId}/feedback:
    put:
      tags:
        - "Quantum Weaver (Business Incubation)"
      summary: "Submit Feedback or Answers to AI Questions for a Business Pitch"
      description: "Allows the entrepreneur to respond to specific questions or provide additional details requested by Quantum Weaver, moving the pitch forward in the incubation process."
      operationId: "submitQuantumWeaverFeedback"
      security:
        - oAuth2Auth: [write:weaver]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PitchId"
      requestBody:
        required: true
        description: "Payload containing answers to AI questions or general feedback."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuantumWeaverFeedbackRequest"
            examples:
              SubmitFeedback:
                summary: "Submit answers to AI questions"
                value:
                  feedback: "Regarding the technical challenges, our team has allocated 3 months for R&D on quantum-resistant cryptography, mitigating the risk. We've also brought in Dr. Elena Petrova, a leading expert in secure multi-party computation."
                  answers:
                    - questionId: "q_qa-team-001"
                      answer: "Our mitigation strategy includes dedicated R&D and new hires with specific expertise."
                    - questionId: "q_qa-market-002"
                      answer: "Our CAC projections are based on pilot program results showing $500 per enterprise client with a conversion rate of 10% from trials."
      responses:
        "200":
          description: "Feedback submitted successfully. Pitch status updated."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuantumWeaverState"
              examples:
                FeedbackSubmittedState:
                  summary: "Pitch state after successful feedback submission"
                  value:
                    pitchId: "pitch_qw_synergychain-xyz"
                    stage: "ai_analysis"
                    statusMessage: "Thank you for your feedback. Quantum Weaver is now re-evaluating your pitch based on the new information."
                    lastUpdated: "2024-07-22T22:00:00Z"
                    feedbackSummary: "Updated technical and market details provided."
                    questions: []
                    nextSteps: "The AI will provide updated analysis and next steps shortly."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /ai/ads/generate:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate a Standard Video Ad with Veo 2.0"
      description: "Submits a request to generate a high-quality video ad using the advanced Veo 2.0 generative AI model. This is an asynchronous operation, suitable for standard ad content creation."
      operationId: "generateVideoAd"
      security:
        - oAuth2Auth: [write:ad_studio]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to generate a standard video ad using Veo 2.0."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GenerateVideoRequest"
            examples:
              GenerateStandardAd:
                summary: "Generate a 15-second cinematic ad"
                value:
                  prompt: "A captivating ad featuring a young entrepreneur using 's AI tools to grow their startup. Focus on innovation and ease of use."
                  style: "Cinematic"
                  lengthSeconds: 15
                  aspectRatio: "16:9"
                  brandColors: ["#0000FF", "#FFD700"]
      responses:
        "202":
          description: "Video generation initiated. The response contains an operation ID to poll for status updates and retrieve the final asset."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                    example: "op-video-gen-12345-abcde"
                    description: "The unique identifier for the video generation operation."
                  estimatedCompletionTimeSeconds:
                    type: integer
                    description: "Estimated time until video generation is complete."
                    example: 300
              examples:
                AdGenerationInitiated:
                  summary: "Video generation initiated successfully"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    estimatedCompletionTimeSeconds: 300
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /ai/ads/generate/advanced:
    post:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Generate an Advanced Video Ad with Granular Controls"
      description: "Submits a highly customized request to generate a video ad, allowing fine-grained control over artistic style, aspect ratio, voiceover, background music, target audience, and call-to-action elements for professional-grade productions."
      operationId: "generateAdvancedVideoAd"
      security:
        - oAuth2Auth: [write:ad_studio]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Payload for advanced video ad generation with comprehensive customization options."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AdvancedGenerateVideoRequest"
            examples:
              GenerateAdvancedAd:
                summary: "Generate an advanced ad with voiceover and CTA"
                value:
                  prompt: "A professional ad showcasing 's corporate finance solutions, targeting business owners. Highlight security and efficiency."
                  style: "Minimalist"
                  lengthSeconds: 30
                  aspectRatio: "16:9"
                  voiceoverText: ": Your business, powered by intelligent finance."
                  voiceoverStyle: "male_professional"
                  audienceTarget: "corporate"
                  callToAction:
                    text: "Learn more at DemoBank.com/business"
                    url: "https://demobank.com/business"
                    displayTimeSeconds: 5
                  brandAssets: ["https://demobank.com/assets/corporate_logo.png"]
      responses:
        "202":
          description: "Advanced video generation initiated. An operation ID is provided for polling status and fetching the final asset."
          content:
            application/json:
              schema:
                type: object
                properties:
                  operationId:
                    type: string
                    example: "op-adv-video-gen-xyz789-fghjk"
                    description: "The unique identifier for the advanced video generation operation."
                  estimatedCompletionTimeSeconds:
                    type: integer
                    description: "Estimated time until advanced video generation is complete. May be longer than standard generation."
                    example: 900
              examples:
                AdvancedAdGenerationInitiated:
                  summary: "Advanced video generation initiated successfully"
                  value:
                    operationId: "op-adv-video-gen-xyz789-fghjk"
                    estimatedCompletionTimeSeconds: 900
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "429":
          $ref: "#/components/responses/TooManyRequestsError"

  /ai/ads/operations/{operationId}:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "Get Video Generation Status & Retrieve Asset"
      description: "Polls the real-time status of an asynchronous video generation operation. Once complete ('done'), the response includes a temporary, signed URL to access and download the generated video asset."
      operationId: "getVideoGenerationStatusAndAsset"
      security:
        - oAuth2Auth: [read:ad_studio]
        - apiKeyAuth: []
      parameters:
        - name: "operationId"
          in: "path"
          required: true
          description: "The unique identifier for the video generation operation."
          schema:
            type: string
            example: "op-video-gen-12345-abcde"
      responses:
        "200":
          description: "The current status of the video generation job. If 'done', the response includes the video URI and metadata."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VideoOperationStatus"
              examples:
                InProgress:
                  summary: "Video generation in progress"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    status: "rendering"
                    progressPercentage: 75
                    message: "Encoding final video with optimized codecs..."
                Completed:
                  summary: "Video generation completed"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    status: "done"
                    progressPercentage: 100
                    message: "Video generation successfully completed."
                    videoUri: "https://demobank-cdn.com/generated-videos/final/1a2b3c4d.mp4?sig=eyJ..."
                    previewImageUri: "https://demobank-cdn.com/generated-videos/preview/1a2b3c4d.png"
                Failed:
                  summary: "Video generation failed"
                  value:
                    operationId: "op-video-gen-12345-abcde"
                    status: "error"
                    progressPercentage: 50
                    message: "An error occurred during video generation."
                    errorMessage: "Failed to process prompt: 'Inappropriate content detected. Please adjust your request.'"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /ai/ads:
    get:
      tags:
        - "AI Ad Studio (Veo 2.0)"
      summary: "List All Generated Video Ads"
      description: "Retrieves a list of all video advertisements previously generated by the user in the AI Ad Studio."
      operationId: "listGeneratedVideoAds"
      security:
        - oAuth2Auth: [read:ad_studio]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "status"
          in: "query"
          description: "Filter ads by their generation status."
          schema:
            type: string
            enum: [queued, generating, done, error]
            example: "done"
      responses:
        "200":
          description: "A paginated list of generated video ads."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/VideoOperationStatus"
              examples:
                GeneratedAdsList:
                  summary: "Example list of generated video ads"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - operationId: "op-video-gen-12345-abcde"
                        status: "done"
                        progressPercentage: 100
                        message: "Video generation successfully completed."
                        videoUri: "https://demobank-cdn.com/generated-videos/final/1a2b3c4d.mp4?sig=eyJ..."
                        previewImageUri: "https://demobank-cdn.com/generated-videos/preview/1a2b3c4d.png"
                      - operationId: "op-adv-video-gen-xyz789-fghjk"
                        status: "done"
                        progressPercentage: 100
                        message: "Advanced video generation completed."
                        videoUri: "https://demobank-cdn.com/generated-videos/final/adv_1a2b3c4d.mp4?sig=eyJ..."
                        previewImageUri: "https://demobank-cdn.com/generated-videos/preview/adv_1a2b3c4d.png"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /corporate/cards:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "List All Corporate Enterprise Cards"
      description: "Retrieves a comprehensive list of all physical and virtual corporate cards associated with the user's organization, including their status, assigned holder, and current spending controls."
      operationId: "listCorporateCardsDetailed"
      security:
        - oAuth2Auth: [read:corporate_cards]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated, detailed list of all corporate enterprise cards."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/CorporateCard"
              examples:
                CorporateCardList:
                  summary: "Example list of corporate cards"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "corp_card_xyz987654"
                        holderName: "Alex Johnson"
                        associatedEmployeeId: "emp_ajohnson_007"
                        cardNumberMask: "4111********1234"
                        expirationDate: "2028-12-31"
                        status: "Active"
                        frozen: false
                        cardType: "physical"
                        controls:
                          atmWithdrawals: true
                          contactlessPayments: true
                          onlineTransactions: true
                          internationalTransactions: false
                          monthlyLimit: 2500.00
                          dailyLimit: 500.00
                          singleTransactionLimit: 1000.00
                          merchantCategoryRestrictions: ["Restaurants", "Travel", "Office Supplies"]
                          vendorRestrictions: ["Amazon", "Uber"]
                        spendingPolicyId: "policy_travel_eu"
                        createdDate: "2023-01-15T09:00:00Z"
                        currency: "USD"
                      - id: "corp_card_virtual_marketing"
                        holderName: "Marketing Campaign Q3"
                        associatedEmployeeId: "emp_marketing_01"
                        cardNumberMask: "5123********5678"
                        expirationDate: "2025-09-30"
                        status: "Active"
                        frozen: false
                        cardType: "virtual"
                        controls:
                          atmWithdrawals: false
                          contactlessPayments: false
                          onlineTransactions: true
                          internationalTransactions: false
                          monthlyLimit: 500.00
                          dailyLimit: 500.00
                          singleTransactionLimit: 200.00
                          merchantCategoryRestrictions: ["Advertising"]
                          vendorRestrictions: ["Facebook Ads", "Google Ads"]
                        spendingPolicyId: null
                        createdDate: "2024-07-01T10:00:00Z"
                        currency: "USD"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/cards/{cardId}/controls:
    put:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Update Granular Corporate Card Spending Controls"
      description: "Updates the sophisticated spending controls, limits, and policy overrides for a specific corporate card, enabling real-time adjustments for security and budget adherence."
      operationId: "updateCorporateCardControls"
      security:
        - oAuth2Auth: [write:corporate_cards]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
      requestBody:
        required: true
        description: "The updated spending controls and limits for the corporate card."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CorporateCardControls"
            examples:
              UpdateCardControls:
                summary: "Update card limits and international transactions"
                value:
                  monthlyLimit: 3000.00
                  dailyLimit: 750.00
                  internationalTransactions: true
                  merchantCategoryRestrictions: ["Software Subscriptions", "Conferences"]
      responses:
        "200":
          description: "The corporate card with its advanced controls updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
              examples:
                UpdatedCorporateCard:
                  summary: "Example of updated corporate card with new controls"
                  value:
                    id: "corp_card_xyz987654"
                    holderName: "Alex Johnson"
                    associatedEmployeeId: "emp_ajohnson_007"
                    cardNumberMask: "4111********1234"
                    expirationDate: "2028-12-31"
                    status: "Active"
                    frozen: false
                    cardType: "physical"
                    controls:
                      atmWithdrawals: true
                      contactlessPayments: true
                      onlineTransactions: true
                      internationalTransactions: true
                      monthlyLimit: 3000.00
                      dailyLimit: 750.00
                      singleTransactionLimit: 1000.00
                      merchantCategoryRestrictions: ["Software Subscriptions", "Conferences"]
                      vendorRestrictions: ["Amazon", "Uber"]
                    spendingPolicyId: "policy_travel_eu"
                    createdDate: "2023-01-15T09:00:00Z"
                    currency: "USD"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/cards/{cardId}/freeze:
    post:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Instantly Freeze or Unfreeze a Corporate Card"
      description: "Immediately changes the frozen status of a corporate card, preventing or allowing transactions in real-time, critical for security and expense management."
      operationId: "toggleCorporateCardFreeze"
      security:
        - oAuth2Auth: [write:corporate_cards]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - freeze
              properties:
                freeze:
                  type: boolean
                  description: "Set to `true` to freeze the card, `false` to unfreeze."
                  example: true
            examples:
              FreezeCard:
                summary: "Freeze a corporate card"
                value:
                  freeze: true
              UnfreezeCard:
                summary: "Unfreeze a corporate card"
                value:
                  freeze: false
      responses:
        "200":
          description: "The updated corporate card object reflecting the new frozen status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
              examples:
                CardFrozen:
                  summary: "Example of a frozen corporate card"
                  value:
                    id: "corp_card_xyz987654"
                    holderName: "Alex Johnson"
                    associatedEmployeeId: "emp_ajohnson_007"
                    cardNumberMask: "4111********1234"
                    expirationDate: "2028-12-31"
                    status: "Suspended"
                    frozen: true
                    cardType: "physical"
                    controls:
                      atmWithdrawals: true
                      contactlessPayments: true
                      onlineTransactions: true
                      internationalTransactions: false
                      monthlyLimit: 2500.00
                      dailyLimit: 500.00
                      singleTransactionLimit: 1000.00
                      merchantCategoryRestrictions: ["Restaurants", "Travel", "Office Supplies"]
                      vendorRestrictions: ["Amazon", "Uber"]
                    spendingPolicyId: "policy_travel_eu"
                    createdDate: "2023-01-15T09:00:00Z"
                    currency: "USD"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/cards/virtual:
    post:
      tags:
        - "Corporate Finance - Enterprise Cards"
      summary: "Issue a New Virtual Corporate Card"
      description: "Creates and issues a new virtual corporate card with specified spending limits, merchant restrictions, and expiration dates, ideal for secure online purchases and temporary projects."
      operationId: "issueVirtualCorporateCard"
      security:
        - oAuth2Auth: [write:corporate_cards]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the new virtual card, including holder, limits, and purpose."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VirtualCardCreationRequest"
            examples:
              IssueMarketingCard:
                summary: "Issue a virtual card for marketing"
                value:
                  holderName: "Marketing Campaign Q4"
                  associatedEmployeeId: "emp_marketing_01"
                  purpose: "Online advertising for Q4 campaigns"
                  controls:
                    atmWithdrawals: false
                    contactlessPayments: false
                    onlineTransactions: true
                    internationalTransactions: false
                    monthlyLimit: 1000.00
                    dailyLimit: 500.00
                    singleTransactionLimit: 200.00
                    merchantCategoryRestrictions: ["Advertising"]
                    vendorRestrictions: ["Facebook Ads", "Google Ads"]
                  expirationDate: "2025-12-31"
      responses:
        "201":
          description: "Virtual corporate card issued successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorporateCard"
              examples:
                VirtualCardIssued:
                  summary: "Example of a newly issued virtual card"
                  value:
                    id: "corp_card_virtual_marketing_q4"
                    holderName: "Marketing Campaign Q4"
                    associatedEmployeeId: "emp_marketing_01"
                    cardNumberMask: "5123********5678"
                    expirationDate: "2025-12-31"
                    status: "Active"
                    frozen: false
                    cardType: "virtual"
                    controls:
                      atmWithdrawals: false
                      contactlessPayments: false
                      onlineTransactions: true
                      internationalTransactions: false
                      monthlyLimit: 1000.00
                      dailyLimit: 500.00
                      singleTransactionLimit: 200.00
                      merchantCategoryRestrictions: ["Advertising"]
                      vendorRestrictions: ["Facebook Ads", "Google Ads"]
                    spendingPolicyId: null
                    createdDate: "2024-07-22T16:00:00Z"
                    currency: "USD"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/cards/{cardId}/transactions:
    get:
      tags:
        - "Corporate Finance - Enterprise Cards"
        - "Transactions & Insights"
      summary: "List Transactions for a Corporate Card"
      description: "Retrieves a paginated list of transactions made with a specific corporate card, including AI categorization and compliance flags."
      operationId: "getCorporateCardTransactions"
      security:
        - oAuth2Auth: [read:corporate_cards, read:transactions]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/CardId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
      responses:
        "200":
          description: "A paginated list of corporate card transactions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedTransactions"
              examples:
                CorporateCardTransactions:
                  summary: "Example transactions for a corporate card"
                  value:
                    limit: 2
                    offset: 0
                    total: 5
                    data:
                      - id: "corp_txn_google_ads_1"
                        accountId: "corp_card_virtual_marketing"
                        type: "expense"
                        category: "Advertising"
                        aiCategoryConfidence: 0.98
                        description: "Google Ads Payment"
                        merchantDetails:
                          name: "Google Ads"
                        amount: 150.00
                        currency: "USD"
                        date: "2024-07-10"
                        postedDate: "2024-07-11"
                        paymentChannel: "online"
                        disputeStatus: "none"
                      - id: "corp_txn_amazon_office"
                        accountId: "corp_card_xyz987654"
                        type: "expense"
                        category: "Office Supplies"
                        aiCategoryConfidence: 0.90
                        description: "Amazon.com"
                        merchantDetails:
                          name: "Amazon"
                        amount: 75.50
                        currency: "USD"
                        date: "2024-07-05"
                        postedDate: "2024-07-06"
                        paymentChannel: "online"
                        disputeStatus: "none"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/anomalies:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "List AI-Detected Financial Anomalies"
      description: "Retrieves a comprehensive list of AI-detected financial anomalies across transactions, payments, and corporate cards that require immediate review and potential action to mitigate risk and ensure compliance."
      operationId: "listFinancialAnomalies"
      security:
        - oAuth2Auth: [read:compliance]
        - apiKeyAuth: []
      parameters:
        - name: status
          in: query
          description: "Filter anomalies by their current review status."
          schema:
            type: string
            enum: [New, Under Review, Escalated, Dismissed, Resolved]
            default: New
            example: "New"
        - name: severity
          in: query
          description: "Filter anomalies by their AI-assessed severity level."
          schema:
            type: string
            enum: [Low, Medium, High, Critical]
            example: "Critical"
        - name: entityType
          in: query
          description: "Filter anomalies by the type of financial entity they are related to."
          schema:
            type: string
            enum: [PaymentOrder, Transaction, Counterparty, CorporateCard, Invoice]
            example: "Transaction"
        - $ref: "#/components/parameters/StartDate"
        - $ref: "#/components/parameters/EndDate"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of AI-detected financial anomalies, prioritized by risk score."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/FinancialAnomaly"
              examples:
                AnomalyList:
                  summary: "Example list of financial anomalies"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - id: "anom_risk-2024-07-21-D1E2F3"
                        description: "Unusual large transaction detected in an inactive account."
                        details: "Transaction of $15,000 to 'International Widgets Inc.' from account 'CHASE CHECKING 4567'. This account has been dormant for 6 months and typical transactions are under $500. High risk score due to dormancy and unusual amount/payee combination."
                        severity: "Critical"
                        status: "New"
                        entityType: "Transaction"
                        entityId: "txn_quantum-2024-07-21-A7B8C9"
                        timestamp: "2024-07-21T10:15:30Z"
                        riskScore: 95
                        aiConfidenceScore: 0.98
                        recommendedAction: "Immediately freeze associated corporate card and contact cardholder for verification."
                        relatedTransactions: ["txn_previous_small_txns"]
                      - id: "anom_risk-2024-07-22-E4F5G6"
                        description: "Multiple failed login attempts followed by successful login from new IP."
                        details: "Five failed login attempts from IP 192.0.2.10, immediately followed by a successful login from a new IP 203.0.113.20. Suggests possible credential stuffing attack."
                        severity: "High"
                        status: "Under Review"
                        entityType: "User"
                        entityId: "user-quantum-visionary-001"
                        timestamp: "2024-07-22T09:00:00Z"
                        riskScore: 88
                        aiConfidenceScore: 0.92
                        recommendedAction: "Request user to verify login via MFA, alert security team."
                        relatedTransactions: []
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/anomalies/{anomalyId}/status:
    put:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Update Anomaly Review Status"
      description: "Updates the review status of a specific financial anomaly, allowing compliance officers to mark it as dismissed, resolved, or escalate for further investigation after thorough AI-assisted and human review."
      operationId: "updateAnomalyStatus"
      security:
        - oAuth2Auth: [write:compliance]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AnomalyId"
      requestBody:
        required: true
        description: "Payload to update the review status of a financial anomaly."
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [Dismissed, Resolved, Under Review, Escalated]
                  description: "The new status for the financial anomaly."
                  example: "Resolved"
                resolutionNotes:
                  type: string
                  nullable: true
                  description: "Optional notes regarding the resolution or dismissal of the anomaly."
                  example: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."
            examples:
              ResolveAnomaly:
                summary: "Resolve an anomaly with notes"
                value:
                  status: "Resolved"
                  resolutionNotes: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."
      responses:
        "200":
          description: "The updated anomaly object with the new status and resolution notes."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialAnomaly"
              examples:
                AnomalyResolved:
                  summary: "Example of a resolved financial anomaly"
                  value:
                    id: "anom_risk-2024-07-21-D1E2F3"
                    description: "Unusual large transaction detected in an inactive account."
                    details: "Transaction of $15,000 to 'International Widgets Inc.' from account 'CHASE CHECKING 4567'. This account has been dormant for 6 months..."
                    severity: "Critical"
                    status: "Resolved"
                    entityType: "Transaction"
                    entityId: "txn_quantum-2024-07-21-A7B8C9"
                    timestamp: "2024-07-21T10:15:30Z"
                    riskScore: 95
                    aiConfidenceScore: 0.98
                    recommendedAction: "Immediately freeze associated corporate card and contact cardholder for verification."
                    relatedTransactions: ["txn_previous_small_txns"]
                    resolutionNotes: "Confirmed legitimate transaction after contacting vendor. Marked as resolved."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/compliance/audits:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Request an AI-Driven Compliance Audit Report"
      description: "Initiates an AI-powered compliance audit for a specific period or scope, generating a comprehensive report detailing adherence to regulatory frameworks, internal policies, and flagging potential risks."
      operationId: "requestComplianceAudit"
      security:
        - oAuth2Auth: [write:compliance]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Parameters for the compliance audit, including scope and date range."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ComplianceAuditRequest"
            examples:
              RequestAMLPCICompliance:
                summary: "Request an AML and PCI-DSS compliance audit"
                value:
                  auditScope: "all_transactions"
                  startDate: "2024-01-01"
                  endDate: "2024-06-30"
                  regulatoryFrameworks: ["AML", "PCI-DSS"]
      responses:
        "202":
          description: "Compliance audit initiated. An audit ID is returned to check the status and retrieve the report."
          content:
            application/json:
              schema:
                type: object
                properties:
                  auditId:
                    type: string
                    example: "audit_corp_xyz789"
                    description: "Unique identifier for the initiated audit."
                  status:
                    type: string
                    enum: [initiated, processing, completed, failed]
                    example: "processing"
                    description: "Current status of the audit."
              examples:
                AuditInitiated:
                  summary: "Compliance audit initiated successfully"
                  value:
                    auditId: "audit_corp_xyz789"
                    status: "processing"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/compliance/audits/{auditId}/report:
    get:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Retrieve AI-Generated Compliance Audit Report"
      description: "Retrieves the full report generated by an AI-driven compliance audit."
      operationId: "getComplianceAuditReport"
      security:
        - oAuth2Auth: [read:compliance]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/AuditId"
      responses:
        "200":
          description: "The comprehensive compliance audit report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ComplianceAuditReport"
              examples:
                AuditReport:
                  summary: "Example of a comprehensive compliance audit report"
                  value:
                    auditId: "audit_corp_xyz789"
                    status: "completed"
                    auditDate: "2024-07-22T19:00:00Z"
                    periodCovered:
                      startDate: "2024-01-01"
                      endDate: "2024-06-30"
                    overallComplianceScore: 92
                    summary: "Overall high compliance across all transaction types. Minor areas for improvement identified in expense reporting related to receipt documentation."
                    findings:
                      - type: "recommendation"
                        severity: "Low"
                        description: "Several small transactions lacked complete receipt documentation in the expense management system."
                        relatedEntities: ["txn_abc123", "txn_def456"]
                      - type: "observation"
                        severity: "Low"
                        description: "Automated sanction screening system shows 99.8% coverage, with 0.2% requiring manual review."
                    recommendedActions:
                      - id: "insight-receipt-compliance-004"
                        title: "Improve Receipt Submission Compliance"
                        description: "Implement automated reminders for employees to upload receipts for all transactions above $20."
                        category: "compliance"
                        severity: "low"
                        actionableRecommendation: "Configure expense system rules."
                        timestamp: "2024-07-22T19:05:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /corporate/sanction-screening:
    post:
      tags:
        - "Corporate Finance - Compliance & Risk"
        - "Enterprise Risk & Fraud Prevention"
      summary: "Perform Real-time Sanction Screening"
      description: "Executes a real-time screening of an individual or entity against global sanction lists and watchlists."
      operationId: "performSanctionScreening"
      security:
        - oAuth2Auth: [read:compliance]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to perform a sanction screening."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SanctionScreeningRequest"
            examples:
              ScreenIndividual:
                summary: "Screen an individual"
                value:
                  name: "John Doe"
                  country: "US"
                  dateOfBirth: "1970-01-01"
                  entityType: "individual"
              ScreenCompany:
                summary: "Screen an organization"
                value:
                  name: "Global Widgets Corp."
                  country: "CH"
                  entityType: "organization"
      responses:
        "200":
          description: "Sanction screening results."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SanctionScreeningResponse"
              examples:
                ClearScreening:
                  summary: "Clear screening result"
                  value:
                    screeningId: "screen_xyz456"
                    matchFound: false
                    matchDetails: []
                    screeningTimestamp: "2024-07-22T19:30:00Z"
                    status: "clear"
                PotentialMatch:
                  summary: "Potential match found in screening"
                  value:
                    screeningId: "screen_abc789"
                    matchFound: true
                    matchDetails:
                      - listName: "OFAC SDN List"
                        matchedName: "John Doe A.K.A. J. D."
                        reason: "Possible alias match based on name and DOB."
                        score: 0.85
                    screeningTimestamp: "2024-07-22T19:35:00Z"
                    status: "potential_match"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /web3/wallets:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "List Connected Crypto Wallets"
      description: "Retrieves a list of all securely linked cryptocurrency wallets (e.g., MetaMask, Ledger integration), showing their addresses, associated networks, and verification status."
      operationId: "listCryptoWallets"
      security:
        - oAuth2Auth: [read:web3]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of connected cryptocurrency wallets."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/CryptoWalletConnection"
              examples:
                WalletList:
                  summary: "Example list of connected crypto wallets"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "wallet_conn_eth_0xabc123"
                        walletProvider: "MetaMask"
                        walletAddress: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
                        blockchainNetwork: "Ethereum"
                        status: "connected"
                        lastSynced: "2024-07-22T13:00:00Z"
                        readAccessGranted: true
                        writeAccessGranted: false
                      - id: "wallet_conn_sol_0xdef456"
                        walletProvider: "Phantom"
                        walletAddress: "0x2A1B3C4D5E6F7A8B9C0D1E2F3A4B5C6D7E8F9A0B"
                        blockchainNetwork: "Solana"
                        status: "connected"
                        lastSynced: "2024-07-22T12:45:00Z"
                        readAccessGranted: true
                        writeAccessGranted: false
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
        - "Users & Identity Management"
      summary: "Connect a New Crypto Wallet"
      description: "Initiates the process to securely connect a new cryptocurrency wallet to the user's  profile, typically involving a signed message or OAuth flow from the wallet provider."
      operationId: "connectCryptoWallet"
      security:
        - oAuth2Auth: [write:web3]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for connecting a new crypto wallet, including the wallet type and signature/proof."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConnectWalletRequest"
            examples:
              ConnectMetaMask:
                summary: "Connect a MetaMask wallet"
                value:
                  walletAddress: "0x123abc456def7890..."
                  walletProvider: "MetaMask"
                  signedMessage: "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                  blockchainNetwork: "Ethereum"
      responses:
        "201":
          description: "Wallet connection initiated or confirmed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoWalletConnection"
              examples:
                WalletConnected:
                  summary: "Example of a newly connected crypto wallet"
                  value:
                    id: "wallet_conn_eth_0x123abc"
                    walletProvider: "MetaMask"
                    walletAddress: "0x123abc456def7890123abc456def7890123abc456def"
                    blockchainNetwork: "Ethereum"
                    status: "connected"
                    lastSynced: "2024-07-22T20:00:00Z"
                    readAccessGranted: true
                    writeAccessGranted: false
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /web3/wallets/{walletId}/balances:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Get Crypto Asset Balances for a Wallet"
      description: "Retrieves the current balances of all recognized crypto assets within a specific connected wallet."
      operationId: "getCryptoWalletBalances"
      security:
        - oAuth2Auth: [read:web3]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/WalletId"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of crypto asset balances."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/CryptoAssetBalance"
              examples:
                WalletBalances:
                  summary: "Example crypto asset balances"
                  value:
                    limit: 3
                    offset: 0
                    total: 3
                    data:
                      - assetSymbol: "ETH"
                        assetName: "Ethereum"
                        balance: 2.5
                        usdValue: 7500.00
                        contractAddress: "0x..."
                      - assetSymbol: "USDC"
                        assetName: "USD Coin"
                        balance: 1000.00
                        usdValue: 1000.00
                        contractAddress: "0x..."
                      - assetSymbol: "LINK"
                        assetName: "Chainlink"
                        balance: 50.0
                        usdValue: 700.00
                        contractAddress: "0x..."
                    nextOffset: 3
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/nfts:
    get:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Retrieve User's NFT Collection"
      description: "Fetches a comprehensive list of Non-Fungible Tokens (NFTs) owned by the user across all connected wallets and supported blockchain networks, including metadata and market values."
      operationId: "getUserNFTCollection"
      security:
        - oAuth2Auth: [read:web3]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of the user's NFT assets."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/NFTAsset"
              examples:
                NFTCollection:
                  summary: "Example NFT collection"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "nft_bored_ape_yacht_club_1234"
                        collectionName: "Bored Ape Yacht Club"
                        name: "Bored Ape #1234"
                        description: "A unique digital collectible from the Bored Ape Yacht Club series."
                        imageUrl: "https://opensea.io/assets/ethereum/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d/1234"
                        blockchainNetwork: "Ethereum"
                        ownerAddress: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
                        contractAddress: "0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d"
                        tokenId: "1234"
                        lastSalePriceUSD: 150000.00
                        estimatedValueUSD: 160000.00
                        attributes:
                          - trait_type: "Background"
                            value: "Blue"
                          - trait_type: "Fur"
                            value: "Brown"
                      - id: "nft_cryptopunk_5678"
                        collectionName: "CryptoPunks"
                        name: "CryptoPunk #5678"
                        imageUrl: "https://larvalabs.com/cryptopunks/punk5678.png"
                        blockchainNetwork: "Ethereum"
                        ownerAddress: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
                        contractAddress: "0xb47e3cd837ddf8e4c57f05d70ab865de6e193bbb"
                        tokenId: "5678"
                        lastSalePriceUSD: 200000.00
                        estimatedValueUSD: 210000.00
                        attributes:
                          - trait_type: "Accessory"
                            value: "Headband"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /web3/transactions/initiate:
    post:
      tags:
        - "Decentralized Finance (DeFi) & Web3 Assets"
      summary: "Initiate a Cryptocurrency Transfer"
      description: "Prepares and initiates a cryptocurrency transfer from a connected wallet to a specified recipient address. Requires user confirmation (e.g., via wallet signature)."
      operationId: "initiateCryptoTransfer"
      security:
        - oAuth2Auth: [write:web3]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to initiate a cryptocurrency transfer."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CryptoTransferRequest"
            examples:
              InitiateETHTransfer:
                summary: "Initiate an ETH transfer"
                value:
                  sourceWalletId: "wallet_conn_eth_0xabc123"
                  recipientAddress: "0xdef4567890abcdef1234567890abcdef1234567890"
                  amount: 0.1
                  assetSymbol: "ETH"
                  blockchainNetwork: "Ethereum"
                  gasPriceGwei: 50
                  memo: "Payment for services"
      responses:
        "202":
          description: "Crypto transfer initiated. Awaiting user signature/confirmation."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CryptoTransferStatus"
              examples:
                TransferPendingSignature:
                  summary: "Crypto transfer initiated, pending signature"
                  value:
                    transferId: "crypto_txn_xyz789"
                    status: "pending_signature"
                    blockchainTxnHash: null
                    message: "Please confirm the transaction in your MetaMask wallet."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /payments/international/initiate:
    post:
      tags:
        - "Global Payments & FX"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Initiate an International Wire Transfer"
      description: "Facilitates the secure initiation of an international wire transfer to a beneficiary in another country and currency, leveraging optimal FX rates and tracking capabilities."
      operationId: "initiateInternationalPayment"
      security:
        - oAuth2Auth: [write:payments, write:corporate_payments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the international payment, including beneficiary, amount, currency, and bank details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InternationalPaymentRequest"
            examples:
              InitiateEURTransfer:
                summary: "Initiate an international transfer to Germany"
                value:
                  sourceAccountId: "acc_chase_checking_4567"
                  amount: 5000.00
                  sourceCurrency: "USD"
                  targetCurrency: "EUR"
                  beneficiary:
                    name: "Maria Schmidt"
                    address: "Hauptstrasse 1, 10115 Berlin, Germany"
                    bankName: "Deutsche Bank"
                    iban: "DE89370400440532013000"
                    swiftBic: "DEUTDEFF"
                  purpose: "Vendor payment for Q2 services."
                  fxRateLock: true
                  fxRateProvider: "proprietary_ai"
      responses:
        "202":
          description: "International payment initiated and is being processed. A payment ID is provided for tracking."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
              examples:
                PaymentInitiated:
                  summary: "International payment initiated successfully"
                  value:
                    paymentId: "int_pmt_xyz7890"
                    status: "in_progress"
                    sourceAmount: 5000.00
                    sourceCurrency: "USD"
                    targetAmount: 4500.00
                    targetCurrency: "EUR"
                    fxRateApplied: 0.90
                    estimatedCompletionTime: "2024-07-23T15:00:00Z"
                    trackingUrl: "https://demobank.com/payments/track/xyz7890"
                    feesApplied: 15.00
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /payments/fx/rates:
    get:
      tags:
        - "Global Payments & FX"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time & Predictive Foreign Exchange Rates"
      description: "Retrieves current and AI-predicted future foreign exchange rates for a specified currency pair, including bid/ask spreads and historical volatility data for informed decisions."
      operationId: "getFxRates"
      security:
        - oAuth2Auth: [read:fx_rates, read:analytics]
        - apiKeyAuth: []
      parameters:
        - name: "baseCurrency"
          in: "query"
          required: true
          description: "The base currency code (e.g., USD)."
          schema:
            type: string
            pattern: '^[A-Z]{3}$'
            example: "USD"
        - name: "targetCurrency"
          in: "query"
          required: true
          description: "The target currency code (e.g., EUR)."
          schema:
            type: string
            pattern: '^[A-Z]{3}$'
            example: "EUR"
        - name: "forecastDays"
          in: "query"
          description: "Number of days into the future to provide an AI-driven prediction."
          schema:
            type: integer
            minimum: 1
            maximum: 30
            default: 7
            example: 7
      responses:
        "200":
          description: "Real-time and predictive foreign exchange rates."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FxRateResponse"
              examples:
                FxRates:
                  summary: "Example FX rates with prediction"
                  value:
                    baseCurrency: "USD"
                    targetCurrency: "EUR"
                    currentRate:
                      bid: 0.9025
                      ask: 0.9035
                      mid: 0.9030
                      timestamp: "2024-07-22T13:30:00Z"
                    predictiveRates:
                      - date: "2024-07-29"
                        predictedMidRate: 0.9050
                        confidenceIntervalLower: 0.9010
                        confidenceIntervalUpper: 0.9090
                        aiModelConfidence: 0.88
                      - date: "2024-08-05"
                        predictedMidRate: 0.9065
                        confidenceIntervalLower: 0.9020
                        confidenceIntervalUpper: 0.9110
                        aiModelConfidence: 0.85
                    historicalVolatility:
                      past7Days: 0.005
                      past30Days: 0.012
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /payments/international/{paymentId}/status:
    get:
      tags:
        - "Global Payments & FX"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get Status of an International Payment"
      description: "Retrieves the current processing status and details of an initiated international payment."
      operationId: "getInternationalPaymentStatus"
      security:
        - oAuth2Auth: [read:payments, read:corporate_payments]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/PaymentId"
      responses:
        "200":
          description: "Current status of the international payment."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternationalPaymentStatus"
              examples:
                PaymentStatusCompleted:
                  summary: "International payment status (completed)"
                  value:
                    paymentId: "int_pmt_xyz7890"
                    status: "completed"
                    sourceAmount: 5000.00
                    sourceCurrency: "USD"
                    targetAmount: 4500.00
                    targetCurrency: "EUR"
                    fxRateApplied: 0.90
                    estimatedCompletionTime: "2024-07-23T15:00:00Z"
                    trackingUrl: "https://demobank.com/payments/track/xyz7890"
                    feesApplied: 15.00
                PaymentStatusHeld:
                  summary: "International payment status (held for review)"
                  value:
                    paymentId: "int_pmt_abc1234"
                    status: "held_for_review"
                    sourceAmount: 10000.00
                    sourceCurrency: "USD"
                    targetAmount: 8800.00
                    targetCurrency: "GBP"
                    fxRateApplied: 0.88
                    estimatedCompletionTime: null
                    trackingUrl: null
                    feesApplied: 25.00
                    message: "Payment held for compliance review. Additional documentation may be requested."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /payments/fx/convert:
    post:
      tags:
        - "Global Payments & FX"
      summary: "Initiate a Currency Conversion"
      description: "Executes an instant currency conversion between two currencies, either from a balance or into a specified account."
      operationId: "initiateCurrencyConversion"
      security:
        - oAuth2Auth: [write:payments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to initiate a currency conversion."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CurrencyConversionRequest"
            examples:
              ConvertUSDToEUR:
                summary: "Convert 1000 USD to EUR"
                value:
                  sourceAccountId: "acc_chase_checking_4567"
                  targetAccountId: "acc_euro_savings_9876"
                  sourceAmount: 1000.00
                  sourceCurrency: "USD"
                  targetCurrency: "EUR"
                  fxRateLock: true
      responses:
        "200":
          description: "Currency conversion completed successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CurrencyConversionResponse"
              examples:
                ConversionSuccess:
                  summary: "Successful currency conversion"
                  value:
                    conversionId: "fx_conv_abc123"
                    status: "completed"
                    sourceAmount: 1000.00
                    sourceCurrency: "USD"
                    targetAmount: 920.50
                    fxRateApplied: 0.9205
                    feesApplied: 5.00
                    conversionTimestamp: "2024-07-22T13:45:00Z"
                    transactionId: "txn_fx_conv_abc123-20240722"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /sustainability/carbon-footprint:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Retrieve Personal Carbon Footprint Report"
      description: "Generates a detailed report of the user's estimated carbon footprint based on transaction data, lifestyle choices, and AI-driven impact assessments, offering insights and reduction strategies."
      operationId: "getPersonalCarbonFootprint"
      security:
        - oAuth2Auth: [read:profile, read:transactions, read:sustainability]
        - apiKeyAuth: []
      responses:
        "200":
          description: "A comprehensive personal carbon footprint report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonFootprintReport"
              examples:
                CarbonFootprintReportExample:
                  summary: "Example personal carbon footprint report"
                  value:
                    reportId: "cf_report_2024-Q2"
                    period: "April - June 2024"
                    totalCarbonFootprintKgCO2e: 1250.7
                    breakdownByCategory:
                      - category: "Transportation"
                        carbonFootprintKgCO2e: 450.2
                        percentage: 36.0
                      - category: "Food"
                        carbonFootprintKgCO2e: 300.5
                        percentage: 24.0
                      - category: "Housing"
                        carbonFootprintKgCO2e: 250.0
                        percentage: 20.0
                    aiInsights:
                      - id: "insight-transport-carbon-001"
                        title: "Reduce Commute Carbon"
                        description: "Your daily commute contributes significantly to your carbon footprint. Consider carpooling or public transport."
                        category: "sustainability"
                        severity: "medium"
                        actionableRecommendation: "Explore green commuting options."
                        timestamp: "2024-07-22T16:00:00Z"
                    offsetRecommendations:
                      - project: "Amazon Reforestation Project"
                        costPerTonUSD: 25.00
                        offsetAmountKgCO2e: 1250.7
                        totalCostUSD: 31.27
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /sustainability/investments/impact:
    get:
      tags:
        - "Sustainability & ESG Impact"
        - "Investments & Portfolio Intelligence"
      summary: "Analyze ESG Impact of Investment Portfolio"
      description: "Provides an AI-driven analysis of the Environmental, Social, and Governance (ESG) impact of the user's entire investment portfolio, benchmarking against industry standards and suggesting more sustainable alternatives."
      operationId: "getInvestmentESGImpact"
      security:
        - oAuth2Auth: [read:accounts, read:investments, read:sustainability]
        - apiKeyAuth: []
      responses:
        "200":
          description: "An analysis of the ESG impact of the investment portfolio."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvestmentESGImpact"
              examples:
                ESGImpactReport:
                  summary: "Example ESG impact analysis of an investment portfolio"
                  value:
                    portfolioId: "portfolio_equity_growth"
                    overallESGScore: 7.8
                    benchmarkESGScore: 6.5
                    breakdownByESGFactors:
                      environmentalScore: 7.0
                      socialScore: 8.5
                      governanceScore: 8.0
                    topESGHoldings:
                      - assetSymbol: "TSLA"
                        assetName: "Tesla Inc."
                        esgScore: 9.1
                      - assetSymbol: "MSFT"
                        assetName: "Microsoft Corp."
                        esgScore: 8.9
                    lowestESGHoldings:
                      - assetSymbol: "XOM"
                        assetName: "ExxonMobil Corp."
                        esgScore: 4.5
                      - assetSymbol: "BAC"
                        assetName: "Bank of America"
                        esgScore: 6.0
                    aiRecommendations:
                      - id: "insight-esg-diversify-002"
                        title: "Enhance ESG Diversification"
                        description: "Your portfolio has a strong ESG profile, but could be further improved by reducing exposure to companies with lower ESG scores in the energy sector."
                        category: "sustainability"
                        severity: "low"
                        actionableRecommendation: "Explore alternative energy ETFs or green bonds."
                        timestamp: "2024-07-22T16:15:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /sustainability/carbon-offsets:
    post:
      tags:
        - "Sustainability & ESG Impact"
      summary: "Purchase Carbon Offsets"
      description: "Allows users to purchase carbon offsets to neutralize their estimated carbon footprint, supporting environmental initiatives."
      operationId: "purchaseCarbonOffsets"
      security:
        - oAuth2Auth: [write:sustainability, write:payments]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to purchase carbon offsets."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CarbonOffsetPurchaseRequest"
            examples:
              PurchaseOffsets:
                summary: "Purchase 500kg of carbon offsets"
                value:
                  amountKgCO2e: 500.0
                  paymentAccountId: "acc_chase_checking_4567"
                  offsetProject: "Verified Carbon Standard Project X"
      responses:
        "200":
          description: "Carbon offsets purchased successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarbonOffsetPurchaseResponse"
              examples:
                OffsetPurchased:
                  summary: "Carbon offsets purchased successfully"
                  value:
                    purchaseId: "co_purchase_xyz123"
                    amountOffsetKgCO2e: 500.0
                    totalCostUSD: 12.50
                    projectSupported: "Verified Carbon Standard Project X"
                    transactionId: "txn_offset_12345"
                    purchaseDate: "2024-07-22T14:00:00Z"
                    certificateUrl: "https://demobank.com/certificates/co_purchase_xyz123.pdf"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /lending/applications:
    post:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Submit a Loan Application with AI Underwriting"
      description: "Submits a new loan application, which is instantly processed and underwritten by our Quantum AI, providing rapid decisions and personalized loan offers based on real-time financial health data."
      operationId: "submitLoanApplication"
      security:
        - oAuth2Auth: [write:lending, read:profile, read:accounts, read:transactions, read:credit]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The loan application details, including desired amount, purpose, and term."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoanApplicationRequest"
            examples:
              SubmitPersonalLoan:
                summary: "Submit a personal loan application"
                value:
                  loanAmount: 10000.00
                  loanPurpose: "home_improvement"
                  repaymentTermMonths: 36
                  additionalNotes: "Funds needed to replace a broken HVAC system."
              SubmitLoanWithCoApplicant:
                summary: "Submit a loan with a co-applicant"
                value:
                  loanAmount: 25000.00
                  loanPurpose: "debt_consolidation"
                  repaymentTermMonths: 60
                  coApplicant:
                    name: "Jane Doe"
                    email: "jane.doe@example.com"
                    income: 75000.00
      responses:
        "202":
          description: "Loan application submitted. The AI is evaluating and will provide a decision shortly."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
              examples:
                ApplicationSubmitted:
                  summary: "Loan application submitted, in underwriting"
                  value:
                    applicationId: "loan_app_creditflow-123"
                    status: "underwriting"
                    loanAmountRequested: 10000.00
                    loanPurpose: "home_improvement"
                    applicationDate: "2024-07-22T15:00:00Z"
                    nextSteps: "Your application is currently under review by our AI. You will receive an update within minutes."
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /lending/applications/{applicationId}:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Loan Application Status & Details"
      description: "Retrieves the current status and detailed information for a submitted loan application, including AI underwriting outcomes, approved terms, and next steps."
      operationId: "getLoanApplicationDetails"
      security:
        - oAuth2Auth: [read:lending]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ApplicationId"
      responses:
        "200":
          description: "Detailed status and terms of the loan application."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoanApplicationStatus"
              examples:
                ApplicationApproved:
                  summary: "Loan application approved with offer details"
                  value:
                    applicationId: "loan_app_creditflow-123"
                    status: "approved"
                    loanAmountRequested: 10000.00
                    loanPurpose: "home_improvement"
                    applicationDate: "2024-07-22T15:00:00Z"
                    aiUnderwritingResult:
                      decision: "approved"
                      reason: "Strong credit score and consistent income history."
                      recommendedInterestRate: 6.5
                      maxApprovedAmount: 12000.00
                      aiConfidence: 0.95
                    offerDetails:
                      offerId: "offer_pers_loan_001"
                      offerType: "personal_loan"
                      amount: 10000.00
                      interestRate: 6.5
                      repaymentTermMonths: 36
                      monthlyPayment: 306.45
                      originationFee: 150.00
                      totalRepayable: 11032.20
                      expirationDate: "2024-08-31"
                      isPreApproved: false
                      aiPersonalizationScore: 0.90
                    nextSteps: "Review your offer details and accept the loan to proceed with funding."
                ApplicationDeclined:
                  summary: "Loan application declined"
                  value:
                    applicationId: "loan_app_creditflow-456"
                    status: "declined"
                    loanAmountRequested: 5000.00
                    loanPurpose: "debt_consolidation"
                    applicationDate: "2024-07-22T15:30:00Z"
                    aiUnderwritingResult:
                      decision: "declined"
                      reason: "Insufficient income for requested loan amount and high existing debt-to-income ratio."
                      recommendedInterestRate: null
                      maxApprovedAmount: 0.00
                      aiConfidence: 0.98
                    nextSteps: "Consider reviewing our AI-generated credit improvement plan to enhance your financial standing for future applications."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /lending/offers/pre-approved:
    get:
      tags:
        - "AI-Powered Lending & Credit Solutions"
        - "Credit Health & AI Underwriting"
      summary: "Get Pre-Approved Loan Offers"
      description: "Retrieves a list of personalized, pre-approved loan offers generated by the AI based on the user's financial profile and credit health."
      operationId: "getPreApprovedLoanOffers"
      security:
        - oAuth2Auth: [read:lending, read:credit]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of pre-approved loan offers."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/LoanOffer"
              examples:
                PreApprovedOffers:
                  summary: "Example list of pre-approved loan offers"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - offerId: "offer_pre_app_001"
                        offerType: "personal_loan"
                        amount: 15000.00
                        interestRate: 4.5
                        repaymentTermMonths: 60
                        monthlyPayment: 280.00
                        originationFee: 0.00
                        totalRepayable: 16800.00
                        expirationDate: "2024-08-31"
                        isPreApproved: true
                        aiPersonalizationScore: 0.95
                      - offerId: "offer_pre_app_002"
                        offerType: "credit_line"
                        amount: 5000.00
                        interestRate: 8.99
                        repaymentTermMonths: null
                        monthlyPayment: null
                        originationFee: 50.00
                        totalRepayable: null
                        expirationDate: "2024-09-15"
                        isPreApproved: true
                        aiPersonalizationScore: 0.88
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/webhooks:
    get:
      tags:
        - "Developer Tools & API Management"
      summary: "List Webhook Subscriptions"
      description: "Retrieves a list of all active webhook subscriptions for the authenticated developer application, detailing endpoint URLs, subscribed events, and current status."
      operationId: "listWebhookSubscriptions"
      security:
        - oAuth2Auth: [read:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of active webhook subscriptions."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/WebhookSubscription"
              examples:
                WebhookSubscriptions:
                  summary: "Example list of webhook subscriptions"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "whsub_devtool_finance_events"
                        callbackUrl: "https://my-app.com/webhooks/demobank-events"
                        events: ["transaction.created", "account.updated", "user.login_failed"]
                        status: "active"
                        lastTriggered: "2024-07-22T17:00:00Z"
                        failureCount: 0
                      - id: "whsub_alert_system"
                        callbackUrl: "https://alert-system.com/demobank-alerts"
                        events: ["security.critical_alert"]
                        status: "paused"
                        lastTriggered: "2024-07-20T08:00:00Z"
                        failureCount: 2
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Developer Tools & API Management"
      summary: "Create a New Webhook Subscription"
      description: "Establishes a new webhook subscription, allowing a developer application to receive real-time notifications for specified events (e.g., new transaction, account update) via a provided callback URL."
      operationId: "createWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Details for the new webhook subscription, including callback URL and desired event types."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionCreationRequest"
            examples:
              CreateTransactionWebhook:
                summary: "Create a webhook for transaction events"
                value:
                  callbackUrl: "https://my-analytics-app.com/webhooks/transactions"
                  events: ["transaction.created", "transaction.updated"]
                  secret: "my_custom_webhook_secret_123"
      responses:
        "201":
          description: "Webhook subscription created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
              examples:
                WebhookCreated:
                  summary: "Example of a newly created webhook subscription"
                  value:
                    id: "whsub_analytics_txns"
                    callbackUrl: "https://my-analytics-app.com/webhooks/transactions"
                    events: ["transaction.created", "transaction.updated"]
                    status: "active"
                    secret: null # Secret is not returned on GET, only generated once
                    lastTriggered: null
                    failureCount: 0
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/webhooks/{subscriptionId}:
    put:
      tags:
        - "Developer Tools & API Management"
      summary: "Update Webhook Subscription"
      description: "Modifies an existing webhook subscription, allowing changes to the callback URL, subscribed events, or activation status."
      operationId: "updateWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      requestBody:
        required: true
        description: "The updated webhook subscription details."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookSubscriptionUpdateRequest"
            examples:
              UpdateWebhookStatus:
                summary: "Pause a webhook subscription"
                value:
                  status: "paused"
              UpdateWebhookURLAndEvents:
                summary: "Update URL and subscribed events"
                value:
                  callbackUrl: "https://my-new-app.com/webhooks/demobank-events"
                  events: ["transaction.created", "user.login_failed"]
      responses:
        "200":
          description: "Webhook subscription updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
              examples:
                WebhookUpdated:
                  summary: "Example of an updated webhook subscription"
                  value:
                    id: "whsub_devtool_finance_events"
                    callbackUrl: "https://my-new-app.com/webhooks/demobank-events"
                    events: ["transaction.created", "user.login_failed"]
                    status: "active"
                    secret: null
                    lastTriggered: "2024-07-22T17:00:00Z"
                    failureCount: 0
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Developer Tools & API Management"
      summary: "Delete Webhook Subscription"
      description: "Deletes an existing webhook subscription, stopping all future event notifications to the specified callback URL."
      operationId: "deleteWebhookSubscription"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/SubscriptionId"
      responses:
        "204":
          description: "Webhook subscription deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /developers/api-keys:
    get:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "List Developer API Keys"
      description: "Retrieves a list of API keys issued to the authenticated developer application."
      operationId: "listApiKeys"
      security:
        - oAuth2Auth: [read:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of API keys."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/ApiKey"
              examples:
                ApiKeyList:
                  summary: "Example list of API keys"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "api_key_dev_app_01"
                        prefix: "db_pk_test_"
                        status: "active"
                        createdAt: "2024-01-01T10:00:00Z"
                        expiresAt: "2025-01-01T10:00:00Z"
                        scopes: ["read:accounts", "write:payments"]
                        lastUsed: "2024-07-22T17:15:00Z"
                      - id: "api_key_webhook_validator"
                        prefix: "db_sk_prod_"
                        status: "active"
                        createdAt: "2023-05-01T11:00:00Z"
                        expiresAt: null
                        scopes: ["webhook:events"]
                        lastUsed: "2024-07-22T17:30:00Z"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Create a New Developer API Key"
      description: "Generates a new API key for the developer application with specified scopes and an optional expiration."
      operationId: "createApiKey"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new developer API key."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ApiKeyCreationRequest"
            examples:
              CreateNewKey:
                summary: "Create a new API key with limited scopes"
                value:
                  name: "My Analytics Service Key"
                  scopes: ["read:accounts", "read:transactions"]
                  expiresInDays: 90
      responses:
        "201":
          description: "API key created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiKey"
              examples:
                ApiKeyCreated:
                  summary: "Example of a newly created API key"
                  value:
                    id: "api_key_analytics_service"
                    prefix: "db_pk_test_"
                    status: "active"
                    createdAt: "2024-07-22T18:00:00Z"
                    expiresAt: "2024-10-20T18:00:00Z"
                    scopes: ["read:accounts", "read:transactions"]
                    lastUsed: null
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /developers/api-keys/{keyId}:
    delete:
      tags:
        - "Developer Tools & API Management"
        - "Security & Open Banking Ecosystem"
      summary: "Revoke a Developer API Key"
      description: "Revokes an existing API key, disabling its access immediately."
      operationId: "revokeApiKey"
      security:
        - oAuth2Auth: [write:developer_tools]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ApiKeyId"
      responses:
        "204":
          description: "API key revoked successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /identity/kyc/submit:
    post:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Submit KYC Documentation for Verification"
      description: "Submits Know Your Customer (KYC) documentation, such as identity proofs and address verification, for AI-accelerated compliance and identity verification, crucial for higher service tiers and regulatory adherence."
      operationId: "submitKYCDocuments"
      security:
        - oAuth2Auth: [write:identity]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The KYC document submission payload, potentially including base64 encoded images or links to secure document stores."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/KYCDocumentSubmission"
            examples:
              SubmitDriversLicense:
                summary: "Submit a driver's license for KYC"
                value:
                  documentType: "drivers_license"
                  documentFrontImage: "base64encoded_image_of_drivers_license_front"
                  documentBackImage: "base64encoded_image_of_drivers_license_back"
                  documentNumber: "ABC12345"
                  issueDate: "2020-01-01"
                  expirationDate: "2030-01-01"
                  countryOfIssue: "US"
      responses:
        "202":
          description: "KYC documentation submitted and undergoing AI-powered verification."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
              examples:
                KYCSubmitted:
                  summary: "KYC submission status: in review"
                  value:
                    userId: "user-quantum-visionary-001"
                    overallStatus: "in_review"
                    lastSubmissionDate: "2024-07-22T18:00:00Z"
                    requiredActions: []
                    verifiedTier: null
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /identity/kyc/status:
    get:
      tags:
        - "Digital Identity & Verifiable Credentials"
        - "Users & Identity Management"
      summary: "Get Current KYC Verification Status"
      description: "Retrieves the current status of the user's Know Your Customer (KYC) verification process."
      operationId: "getKYCStatus"
      security:
        - oAuth2Auth: [read:identity]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current KYC verification status."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KYCStatus"
              examples:
                KYCVerified:
                  summary: "KYC status: verified (Gold tier)"
                  value:
                    userId: "user-quantum-visionary-001"
                    overallStatus: "verified"
                    lastSubmissionDate: "2024-07-21T18:00:00Z"
                    rejectionReason: null
                    requiredActions: []
                    verifiedTier: "gold"
                KYCRejected:
                  summary: "KYC status: rejected"
                  value:
                    userId: "user-alice-001"
                    overallStatus: "rejected"
                    lastSubmissionDate: "2024-07-22T09:00:00Z"
                    rejectionReason: "Document image unclear."
                    requiredActions: ["Resubmit clearer ID image"]
                    verifiedTier: null
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/treasury/cash-flow/forecast:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
        - "Corporate Finance - Global Payments & Treasury"
      summary: "Get AI-Driven Corporate Cash Flow Forecast"
      description: "Retrieves an advanced AI-driven cash flow forecast for the organization, projecting liquidity, identifying potential surpluses or deficits, and providing recommendations for optimal treasury management."
      operationId: "getCorporateCashFlowForecast"
      security:
        - oAuth2Auth: [read:corporate_treasury, read:corporate_payments, read:compliance, read:analytics]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ForecastHorizonDays"
        - $ref: "#/components/parameters/IncludeScenarioAnalysis"
      responses:
        "200":
          description: "A comprehensive AI-driven cash flow forecast report."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CashFlowForecast"
              examples:
                CashFlowForecastReport:
                  summary: "Example corporate cash flow forecast"
                  value:
                    forecastId: "cf_forecast_corp_Q3_2024"
                    period: "Q3 2024 (July - September)"
                    currency: "USD"
                    overallStatus: "positive_outlook"
                    projectedBalances:
                      - date: "2024-07-31"
                        projectedCash: 1500000.00
                        scenario: "most_likely"
                      - date: "2024-08-31"
                        projectedCash: 1750000.00
                        scenario: "most_likely"
                      - date: "2024-07-31"
                        projectedCash: 1400000.00
                        scenario: "worst_case"
                      - date: "2024-07-31"
                        projectedCash: 1600000.00
                        scenario: "best_case"
                    inflowForecast:
                      totalProjected: 3000000.00
                      bySource:
                        - source: "Client Payments"
                          amount: 2500000.00
                        - source: "Investment Returns"
                          amount: 500000.00
                    outflowForecast:
                      totalProjected: 2000000.00
                      byCategory:
                        - category: "Payroll"
                          amount: 1000000.00
                        - category: "Operating Expenses"
                          amount: 700000.00
                    liquidityRiskScore: 15
                    aiRecommendations:
                      - id: "insight-cash-optimization-001"
                        title: "Optimize Short-Term Investments"
                        description: "With a strong positive cash flow outlook, consider allocating surplus funds to short-term, low-risk investments to maximize returns."
                        category: "corporate_treasury"
                        severity: "low"
                        actionableRecommendation: "Consult with treasury manager to explore investment options."
                        timestamp: "2024-07-22T19:00:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/treasury/liquidity-positions:
    get:
      tags:
        - "Treasury & Liquidity Management"
        - "Real-time Analytics & Predictive Intelligence"
      summary: "Get Real-time Corporate Liquidity Positions"
      description: "Provides a real-time overview of the organization's liquidity across all accounts, currencies, and short-term investments."
      operationId: "getCorporateLiquidityPositions"
      security:
        - oAuth2Auth: [read:corporate_treasury]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Real-time liquidity positions."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LiquidityPositions"
              examples:
                LiquidityPositionsExample:
                  summary: "Example real-time corporate liquidity positions"
                  value:
                    snapshotTime: "2024-07-22T18:30:00Z"
                    totalLiquidAssets: 5200000.00
                    currencyBreakdown:
                      - currency: "USD"
                        amount: 4000000.00
                        percentage: 76.9
                      - currency: "EUR"
                        amount: 1000000.00
                        percentage: 19.2
                      - currency: "GBP"
                        amount: 200000.00
                        percentage: 3.9
                    accountTypeBreakdown:
                      - type: "Checking"
                        amount: 3500000.00
                      - type: "Savings"
                        amount: 500000.00
                      - type: "Money Market"
                        amount: 1200000.00
                    shortTermInvestments:
                      totalValue: 1200000.00
                      maturingNext30Days: 300000.00
                    aiLiquidityAssessment:
                      status: "optimal"
                      message: "Current liquidity is optimal and sufficient for all short-term obligations and planned expenditures. High flexibility for strategic investments."
                    aiRecommendations:
                      - id: "insight-investment-strategy-002"
                        title: "Review Mid-Term Investment Strategy"
                        description: "Given the robust liquidity, consider reviewing opportunities for mid-term strategic investments to enhance capital growth without compromising short-term operational needs."
                        category: "corporate_treasury"
                        severity: "low"
                        actionableRecommendation: "Schedule meeting with investment committee."
                        timestamp: "2024-07-22T18:40:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /corporate/risk/fraud/rules:
    get:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "List AI-Powered Fraud Detection Rules"
      description: "Retrieves a list of AI-powered fraud detection rules currently active for the organization, including their parameters, thresholds, and associated actions (e.g., flag, block, alert)."
      operationId: "listFraudDetectionRules"
      security:
        - oAuth2Auth: [read:compliance, read:corporate_treasury]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of fraud detection rules."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/FraudRule"
              examples:
                FraudRuleList:
                  summary: "Example list of fraud detection rules"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "fraud_rule_high_value_inactive"
                        name: "High Value Transaction from Inactive Account"
                        description: "Flags transactions over a certain threshold from accounts that have been inactive for a specified period."
                        status: "active"
                        severity: "High"
                        criteria:
                          transactionAmountMin: 5000
                          accountInactivityDays: 90
                          transactionType: "debit"
                          countryOfOrigin: ["US", "CA"]
                        action:
                          type: "block"
                          details: "Block transaction and send critical alert to fraud team."
                        createdBy: "system:ai-risk-engine"
                        createdAt: "2024-05-01T10:00:00Z"
                        lastUpdated: "2024-07-20T11:30:00Z"
                      - id: "fraud_rule_suspicious_geo"
                        name: "Suspicious Geolocation Mismatch"
                        description: "Detects transactions originating from a geolocation significantly different from recent login activity without prior travel notification."
                        status: "active"
                        severity: "Critical"
                        criteria:
                          geographicDistanceKm: 5000
                          lastLoginDays: 7
                          noTravelNotification: true
                        action:
                          type: "alert"
                          details: "Send immediate MFA challenge to user and flag for review."
                        createdBy: "system:ai-risk-engine"
                        createdAt: "2024-06-10T09:00:00Z"
                        lastUpdated: "2024-07-01T10:00:00Z"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Create a New AI-Powered Fraud Detection Rule"
      description: "Creates a new custom AI-powered fraud detection rule, allowing organizations to define specific criteria, risk scores, and automated responses to evolving threat landscapes."
      operationId: "createFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The definition of the new fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleCreationRequest"
            examples:
              CreateSuspiciousPaymentRule:
                summary: "Create a rule for suspicious international payments"
                value:
                  name: "Suspicious International Payment Pattern"
                  description: "Detects multiple international payments to new beneficiaries in high-risk countries within a short timeframe."
                  status: "active"
                  severity: "Critical"
                  criteria:
                    paymentCountMin: 3
                    timeframeHours: 24
                    recipientNew: true
                    recipientCountryRiskLevel: ["High", "Very High"]
                  action:
                    type: "auto_review"
                    details: "Hold payment, notify sender for additional verification, and escalate to compliance."
      responses:
        "201":
          description: "Fraud detection rule created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
              examples:
                FraudRuleCreated:
                  summary: "Example of a newly created fraud detection rule"
                  value:
                    id: "fraud_rule_susp_int_pmt"
                    name: "Suspicious International Payment Pattern"
                    description: "Detects multiple international payments to new beneficiaries in high-risk countries within a short timeframe."
                    status: "active"
                    severity: "Critical"
                    criteria:
                      paymentCountMin: 3
                      timeframeHours: 24
                      recipientNew: true
                      recipientCountryRiskLevel: ["High", "Very High"]
                    action:
                      type: "auto_review"
                      details: "Hold payment, notify sender for additional verification, and escalate to compliance."
                    createdBy: "admin_user_id"
                    createdAt: "2024-07-22T20:00:00Z"
                    lastUpdated: "2024-07-22T20:00:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "409":
          $ref: "#/components/responses/ConflictError"

  /corporate/risk/fraud/rules/{ruleId}:
    put:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Update an AI-Powered Fraud Detection Rule"
      description: "Updates an existing custom AI-powered fraud detection rule, modifying its criteria, actions, or status."
      operationId: "updateFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/RuleId"
      requestBody:
        required: true
        description: "The updated definition of the fraud detection rule."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FraudRuleUpdateRequest"
            examples:
              UpdateRuleThreshold:
                summary: "Update rule threshold and status"
                value:
                  status: "inactive"
                  criteria:
                    transactionAmountMin: 7500
                    accountInactivityDays: 60
                  action:
                    type: "flag"
                    details: "Flag for manual review only, do not block."
      responses:
        "200":
          description: "Fraud detection rule updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FraudRule"
              examples:
                FraudRuleUpdated:
                  summary: "Example of an updated fraud detection rule"
                  value:
                    id: "fraud_rule_high_value_inactive"
                    name: "High Value Transaction from Inactive Account"
                    description: "Flags transactions over a certain threshold from accounts that have been inactive for a specified period."
                    status: "inactive"
                    severity: "High"
                    criteria:
                      transactionAmountMin: 7500
                      accountInactivityDays: 60
                      transactionType: "debit"
                      countryOfOrigin: ["US", "CA"]
                    action:
                      type: "flag"
                      details: "Flag for manual review only, do not block."
                    createdBy: "system:ai-risk-engine"
                    createdAt: "2024-05-01T10:00:00Z"
                    lastUpdated: "2024-07-22T20:15:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Enterprise Risk & Fraud Prevention"
        - "Corporate Finance - Compliance & Risk"
      summary: "Delete an AI-Powered Fraud Detection Rule"
      description: "Deletes a specific custom AI-powered fraud detection rule."
      operationId: "deleteFraudDetectionRule"
      security:
        - oAuth2Auth: [write:compliance, write:corporate_treasury]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/RuleId"
      responses:
        "204":
          description: "Fraud detection rule deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /goals:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "List All User Financial Goals"
      description: "Retrieves a list of all financial goals defined by the user, including their progress and associated AI plans."
      operationId: "listFinancialGoals"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
      responses:
        "200":
          description: "A paginated list of financial goals."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/FinancialGoal"
              examples:
                FinancialGoalList:
                  summary: "Example list of financial goals"
                  value:
                    limit: 2
                    offset: 0
                    total: 2
                    data:
                      - id: "goal_retirement_2050"
                        name: "Retirement Fund by 2050"
                        type: "retirement"
                        targetAmount: 1000000.00
                        currentAmount: 350000.00
                        targetDate: "2050-12-31"
                        progressPercentage: 35.0
                        status: "on_track"
                        contributingAccounts: ["acc_chase_invest_ira_001", "acc_fidelity_401k_xyz"]
                        lastUpdated: "2024-07-22T19:00:00Z"
                        riskTolerance: "medium"
                      - id: "goal_home_purchase_2030"
                        name: "Down Payment for New Home"
                        type: "home_purchase"
                        targetAmount: 100000.00
                        currentAmount: 25000.00
                        targetDate: "2030-06-30"
                        progressPercentage: 25.0
                        status: "behind_schedule"
                        contributingAccounts: ["acc_savings_001"]
                        lastUpdated: "2024-07-22T19:00:00Z"
                        riskTolerance: "low"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Create a New Financial Goal"
      description: "Creates a new long-term financial goal, with optional AI plan generation."
      operationId: "createFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "Request to create a new financial goal."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalCreationRequest"
            examples:
              CreateVacationGoal:
                summary: "Create a dream vacation fund goal"
                value:
                  name: "Dream Vacation Fund"
                  type: "large_purchase"
                  targetAmount: 15000.00
                  targetDate: "2026-06-30"
                  initialContribution: 1000.00
                  generateAIPlan: true
                  riskTolerance: "medium"
      responses:
        "201":
          description: "Financial goal created successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
              examples:
                GoalCreated:
                  summary: "Example of a newly created financial goal"
                  value:
                    id: "goal_vacation_fund_001"
                    name: "Dream Vacation Fund"
                    type: "large_purchase"
                    targetAmount: 15000.00
                    currentAmount: 1000.00
                    targetDate: "2026-06-30"
                    progressPercentage: 6.67
                    status: "on_track"
                    contributingAccounts: []
                    lastUpdated: "2024-07-22T19:30:00Z"
                    riskTolerance: "medium"
                    aiStrategicPlan:
                      planId: "plan_vacation_001"
                      summary: "AI recommends saving $583 per month and investing in a moderate growth portfolio to achieve your vacation goal by the target date."
                      steps:
                        - title: "Automate Monthly Savings"
                          description: "Set up a recurring transfer of $583 from your checking to your dedicated vacation savings account."
                          status: "pending"
                        - title: "Review Investment Options"
                          description: "Explore moderate-risk investment options within your linked brokerage account to accelerate growth."
                          status: "pending"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /goals/{goalId}:
    get:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Get Detailed Financial Goal"
      description: "Retrieves detailed information for a specific financial goal, including current progress, AI strategic plan, and related insights."
      operationId: "getFinancialGoalDetails"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "200":
          description: "Detailed financial goal information."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
              examples:
                GoalDetails:
                  summary: "Example of a detailed financial goal"
                  value:
                    id: "goal_retirement_2050"
                    name: "Retirement Fund by 2050"
                    type: "retirement"
                    targetAmount: 1000000.00
                    currentAmount: 350000.00
                    targetDate: "2050-12-31"
                    progressPercentage: 35.0
                    status: "on_track"
                    contributingAccounts: ["acc_chase_invest_ira_001", "acc_fidelity_401k_xyz"]
                    lastUpdated: "2024-07-22T19:00:00Z"
                    riskTolerance: "medium"
                    aiStrategicPlan:
                      planId: "plan_retirement_2050"
                      summary: "The AI projects you are on track to reach your retirement goal, but recommends increasing annual contributions by 5% to account for potential market volatility."
                      steps:
                        - title: "Increase 401k Contributions"
                          description: "Adjust your 401k contributions to 12% of your salary by year-end."
                          status: "in_progress"
                        - title: "Review Portfolio Asset Allocation"
                          description: "Ensure your investment portfolio remains diversified according to your medium risk tolerance."
                          status: "pending"
                    aiInsights:
                      - id: "insight-retirement-track-001"
                        title: "Retirement Goal On Track"
                        description: "Your retirement savings are progressing as expected, but a slight increase in contributions would provide a larger buffer against market fluctuations."
                        category: "financial_goals"
                        severity: "low"
                        actionableRecommendation: "Adjust savings plan via the 'Quantum Planner'."
                        timestamp: "2024-07-22T19:35:00Z"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    put:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Update an Existing Financial Goal"
      description: "Updates the parameters of an existing financial goal, such as target amount, date, or contributing accounts. This may trigger an AI plan recalculation."
      operationId: "updateFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      requestBody:
        required: true
        description: "Request to update an existing financial goal."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoalUpdateRequest"
            examples:
              UpdateTargetAmount:
                summary: "Increase retirement target amount"
                value:
                  targetAmount: 1200000.00
                  generateAIPlan: true
              UpdateTargetDate:
                summary: "Adjust home purchase target date"
                value:
                  targetDate: "2029-12-31"
                  riskTolerance: "conservative"
      responses:
        "200":
          description: "Financial goal updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinancialGoal"
              examples:
                GoalUpdated:
                  summary: "Example of an updated financial goal"
                  value:
                    id: "goal_retirement_2050"
                    name: "Retirement Fund by 2050"
                    type: "retirement"
                    targetAmount: 1200000.00
                    currentAmount: 350000.00
                    targetDate: "2050-12-31"
                    progressPercentage: 29.17
                    status: "behind_schedule"
                    contributingAccounts: ["acc_chase_invest_ira_001", "acc_fidelity_401k_xyz"]
                    lastUpdated: "2024-07-22T19:45:00Z"
                    riskTolerance: "medium"
                    aiStrategicPlan:
                      planId: "plan_retirement_2050_recalc"
                      summary: "Due to the increased target, the AI recommends a more aggressive savings rate or adjusting investment strategy."
                      steps:
                        - title: "Increase 401k Contributions"
                          description: "Adjust your 401k contributions to 15% of your salary immediately."
                          status: "pending"
                        - title: "Evaluate Higher-Growth Investments"
                          description: "Review opportunities for higher-growth investments if your risk tolerance allows."
                          status: "pending"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
    delete:
      tags:
        - "Financial Goals & Strategic Planning"
      summary: "Delete a Financial Goal"
      description: "Deletes a specific financial goal from the user's profile."
      operationId: "deleteFinancialGoal"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/GoalId"
      responses:
        "204":
          description: "Financial goal deleted successfully."
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /notifications/me:
    get:
      tags:
        - "Notifications & Proactive Alerts"
        - "Personalization & Experience Design"
      summary: "List User Notifications"
      description: "Retrieves a paginated list of personalized notifications and proactive AI alerts for the authenticated user, allowing filtering by status and severity."
      operationId: "listUserNotifications"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "status"
          in: "query"
          description: "Filter notifications by their read status."
          schema:
            type: string
            enum: [read, unread]
            example: "unread"
        - name: "severity"
          in: "query"
          description: "Filter notifications by AI-assigned severity level."
          schema:
            type: string
            enum: [low, medium, high, critical]
            example: "high"
      responses:
        "200":
          description: "A paginated list of user notifications."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Notification"
              examples:
                NotificationList:
                  summary: "Example list of user notifications"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - id: "notif_security_alert_001"
                        type: "security"
                        title: "Suspicious Login Detected"
                        message: "A login attempt was made from an unrecognized device/location. Please review your recent activity."
                        severity: "critical"
                        timestamp: "2024-07-22T20:00:00Z"
                        read: false
                        actionableLink: "/users/me/security-log"
                        aiInsightId: null
                      - id: "notif_budget_alert_002"
                        type: "financial_insight"
                        title: "Dining Budget Near Limit"
                        message: "You've spent 85% of your dining budget for the month. Consider adjusting your spending."
                        severity: "medium"
                        timestamp: "2024-07-22T15:30:00Z"
                        read: false
                        actionableLink: "/budgets/monthly_aug"
                        aiInsightId: "insight-dining-overspend-002"
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /notifications/{notificationId}/mark-read:
    post:
      tags:
        - "Notifications & Proactive Alerts"
      summary: "Mark a Notification as Read"
      description: "Marks a specific user notification as read."
      operationId: "markNotificationAsRead"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/NotificationId"
      responses:
        "200":
          description: "Notification marked as read successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notification"
              examples:
                MarkedAsRead:
                  summary: "Example notification marked as read"
                  value:
                    id: "notif_budget_alert_002"
                    type: "financial_insight"
                    title: "Dining Budget Near Limit"
                    message: "You've spent 85% of your dining budget for the month. Consider adjusting your spending."
                    severity: "medium"
                    timestamp: "2024-07-22T15:30:00Z"
                    read: true
                    actionableLink: "/budgets/monthly_aug"
                    aiInsightId: "insight-dining-overspend-002"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /notifications/settings:
    get:
      tags:
        - "Notifications & Proactive Alerts"
        - "Personalization & Experience Design"
      summary: "Get User Notification Settings"
      description: "Retrieves the user's granular notification preferences across different channels (email, push, SMS, in-app) and event types."
      operationId: "getNotificationSettings"
      security:
        - oAuth2Auth: [read:profile]
        - apiKeyAuth: []
      responses:
        "200":
          description: "Current user notification settings."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationSettings"
              examples:
                DefaultNotificationSettings:
                  summary: "Example default notification settings"
                  value:
                    channelPreferences:
                      email: true
                      push: true
                      sms: false
                      inApp: true
                    eventPreferences:
                      transactionAlerts: true
                      budgetAlerts: true
                      securityAlerts: true
                      aiInsights: true
                      promotionalOffers: false
                    quietHours:
                      enabled: false
                      startTime: "23:00"
                      endTime: "07:00"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags:
        - "Notifications & Proactive Alerts"
        - "Personalization & Experience Design"
      summary: "Update User Notification Settings"
      description: "Updates the user's notification preferences, allowing control over channels, event types, and quiet hours."
      operationId: "updateNotificationSettings"
      security:
        - oAuth2Auth: [write:profile]
        - apiKeyAuth: []
      requestBody:
        required: true
        description: "The updated notification settings payload."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationSettingsUpdateRequest"
            examples:
              UpdatePreferences:
                summary: "Enable SMS for security alerts and quiet hours"
                value:
                  channelPreferences:
                    sms: true
                  eventPreferences:
                    securityAlerts: true
                  quietHours:
                    enabled: true
                    startTime: "22:00"
                    endTime: "08:00"
      responses:
        "200":
          description: "Notification settings updated successfully."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationSettings"
              examples:
                UpdatedNotificationSettings:
                  summary: "Example of updated notification settings"
                  value:
                    channelPreferences:
                      email: true
                      push: true
                      sms: true
                      inApp: true
                    eventPreferences:
                      transactionAlerts: true
                      budgetAlerts: true
                      securityAlerts: true
                      aiInsights: true
                      promotionalOffers: false
                    quietHours:
                      enabled: true
                      startTime: "22:00"
                      endTime: "08:00"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"

  /marketplace/products:
    get:
      tags:
        - "Marketplace (Plato AI)"
        - "Personalization & Experience Design"
      summary: "List AI-Curated Marketplace Products"
      description: "Retrieves a personalized, AI-curated list of products and services from the Plato AI marketplace, tailored to the user's financial profile, goals, and spending patterns. Includes options for filtering and advanced search."
      operationId: "listMarketplaceProducts"
      security:
        - oAuth2Auth: [read:profile, read:marketplace, read:analytics]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - name: "category"
          in: "query"
          description: "Filter products by category (e.g., loans, insurance, credit_cards, investments)."
          schema:
            type: string
            enum: [loans, insurance, credit_cards, investments, budgeting_tools, smart_home, travel, education]
            example: "insurance"
        - name: "minRating"
          in: "query"
          description: "Minimum user rating for products (0-5)."
          schema:
            type: number
            format: float
            minimum: 0
            maximum: 5
            example: 4.0
        - name: "aiPersonalizationLevel"
          in: "query"
          description: "Filter by AI personalization level (e.g., low, medium, high). 'High' means highly relevant to user's specific needs."
          schema:
            type: string
            enum: [low, medium, high]
            example: "high"
      responses:
        "200":
          description: "A paginated list of AI-curated marketplace products."
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/PaginatedList"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/MarketplaceProduct"
              examples:
                ProductList:
                  summary: "Example list of AI-curated marketplace products"
                  value:
                    limit: 2
                    offset: 0
                    total: 3
                    data:
                      - id: "prod_home_insurance_quantum"
                        name: "Quantum Home Protector Insurance"
                        provider: "Quantum Insurance Co."
                        category: "insurance"
                        description: "AI-powered home insurance with dynamic pricing and risk assessment. Highly personalized for your property."
                        price: "Starting at $50/month"
                        rating: 4.8
                        imageUrl: "https://demobank.com/images/home_insurance.png"
                        aiPersonalizationScore: 0.95
                        aiRecommendationReason: "Based on your property value and location, this product offers superior coverage and savings compared to market average."
                        offerDetails:
                          type: "discount"
                          value: "10% off first year premiums for users."
                      - id: "prod_green_investment_etf"
                        name: "EcoWealth Green Energy ETF"
                        provider: "Ethical Investments Ltd."
                        category: "investments"
                        description: "An ETF focused on renewable energy and sustainable technologies. Aligns with your ESG preferences."
                        price: "NAV $25.50"
                        rating: 4.5
                        imageUrl: "https://demobank.com/images/green_etf.png"
                        aiPersonalizationScore: 0.90
                        aiRecommendationReason: "Matches your stated interest in sustainable investments and high ESG impact scores."
                        offerDetails: null
                    nextOffset: 2
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /marketplace/products/{productId}/impact-simulate:
    post:
      tags:
        - "Marketplace (Plato AI)"
        - "Quantum Oracle (Predictive Simulation)"
      summary: "Simulate Financial Impact of a Marketplace Product"
      description: "Uses the Quantum Oracle to simulate the long-term financial impact of purchasing or subscribing to a specific marketplace product, such as a loan, investment, or insurance policy, on the user's overall financial health and goals."
      operationId: "simulateMarketplaceProductImpact"
      security:
        - oAuth2Auth: [read:marketplace, interact:ai_oracle, read:profile]
        - apiKeyAuth: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        required: true
        description: "Parameters for simulating the product's impact, such as desired purchase amount or term."
        content:
          application/json:
            schema:
              type: object
              properties:
                simulationParameters:
                  type: object
                  description: "Dynamic parameters specific to the product type (e.g., loan amount, investment term)."
                  example:
                    loanAmount: 20000
                    repaymentTermMonths: 48
            examples:
              SimulateLoanImpact:
                summary: "Simulate impact of a personal loan"
                value:
                  simulationParameters:
                    loanAmount: 20000
                    repaymentTermMonths: 48
      responses:
        "200":
          description: "Detailed simulation of the product's financial impact."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductImpactSimulation"
              examples:
                LoanImpactSimulation:
                  summary: "Example simulation of a personal loan's impact"
                  value:
                    productId: "prod_personal_loan_001"
                    simulationId: "sim_prod_loan_123"
                    narrativeSummary: "Taking a $20,000 personal loan for 48 months at an interest rate of 7.5% would result in a monthly payment of approximately $483. This will increase your monthly expenses but consolidate existing higher-interest debts, leading to projected savings over the long term."
                    keyImpacts:
                      - metric: "Monthly Cash Flow Impact"
                        value: "-$483.00"
                        severity: "medium"
                      - metric: "Total Interest Paid"
                        value: "$3,184.00"
                        severity: "low"
                      - metric: "Debt-to-Income Ratio Change"
                        value: "+5%"
                        severity: "medium"
                    aiRecommendations:
                      - title: "Automate Loan Payments"
                        description: "Set up automatic payments to avoid late fees and manage your new monthly outflow effectively."
                        actionTrigger: "setup_autopay"
                    projectedAmortizationSchedule:
                      - month: 1
                        payment: 483.00
                        interest: 125.00
                        principal: 358.00
                        remainingBalance: 19642.00
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /marketplace/offers/{offerId}/redeem:
    post:
      tags:
        - "Marketplace (Plato AI)"
      summary: "Redeem an Exclusive Marketplace Offer"
      description: "Redeems a personalized, exclusive offer from the Plato AI marketplace, often resulting in a discount, special rate, or credit to the user's account."
      operationId: "redeemMarketplaceOffer"
      security:
        - oAuth2Auth: [write:marketplace, write:payments]
        - apiKeyAuth: []
      parameters:
        - name: "offerId"
          in: "path"
          required: true
          description: "The unique identifier of the offer to redeem."
          schema:
            type: string
            example: "offer_home_ins_promo_1"
      requestBody:
        description: "Optional: additional details required for redemption, such as a payment account for a discounted service."
        content:
          application/json:
            schema:
              type: object
              properties:
                paymentAccountId:
                  type: string
                  description: "Optional: The ID of the account to use for any associated payment or credit."
                  example: "acc_chase_checking_4567"
            examples:
              RedeemHomeInsurance:
                summary: "Redeem home insurance discount"
                value:
                  paymentAccountId: "acc_chase_checking_4567"
      responses:
        "200":
          description: "Offer redeemed successfully. Details of the redemption are provided."
          content:
            application/json:
              schema:
                type: object
                properties:
                  redemptionId:
                    type: string
                    example: "redeem_xyz456"
                    description: "Unique ID for this redemption."
                  offerId:
                    type: string
                    example: "offer_home_ins_promo_1"
                    description: "The ID of the redeemed offer."
                  status:
                    type: string
                    enum: [success, pending, failed]
                    example: "success"
                    description: "Status of the redemption."
                  message:
                    type: string
                    example: "Your 10% discount on Quantum Home Protector has been applied."
                    description: "A descriptive message about the redemption."
                  associatedTransactionId:
                    type: string
                    nullable: true
                    example: "txn_discount_123"
                    description: "If applicable, the ID of any associated transaction (e.g., a credit or initial payment)."
                  redemptionDate:
                    type: string
                    format: date-time
                    example: "2024-07-22T20:30:00Z"
              examples:
                RedemptionSuccess:
                  summary: "Successful offer redemption"
                  value:
                    redemptionId: "redeem_xyz456"
                    offerId: "offer_home_ins_promo_1"
                    status: "success"
                    message: "Your 10% discount on Quantum Home Protector has been applied. You will see the reduced premium on your next bill."
                    associatedTransactionId: null
                    redemptionDate: "2024-07-22T20:30:00Z"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "409":
          $ref: "#/components/responses/ConflictError" # e.g., offer already redeemed or expired

components:
  securitySchemes:
    oAuth2Auth:
      type: oauth2
      description: "OAuth 2.0 flow for user authorization."
      flows:
        authorizationCode:
          authorizationUrl: "https://auth.demobank.com/oauth/authorize"
          tokenUrl: "https://auth.demobank.com/oauth/token"
          scopes:
            read:profile: "Read user's personal profile and preferences."
            write:profile: "Update user's personal profile and preferences."
            read:accounts: "Read all linked financial accounts and balances."
            write:accounts: "Manage and update linked financial accounts."
            read:transactions: "Read transaction history and details."
            write:transactions: "Categorize, tag, and dispute transactions."
            write:payments: "Initiate and manage payments (e.g., transfers, bill pay)."
            interact:ai_advisor: "Interact with the Quantum AI Advisor for insights and actions."
            interact:ai_oracle: "Run predictive simulations with the Quantum Oracle."
            read:weaver: "Read business pitch status and AI feedback from Quantum Weaver."
            write:weaver: "Submit and update business pitches to Quantum Weaver."
            read:ad_studio: "Read status and retrieve assets from AI Ad Studio (Veo 2.0)."
            write:ad_studio: "Generate new video ads with AI Ad Studio (Veo 2.0)."
            read:corporate_cards: "Read corporate enterprise card details and transactions."
            write:corporate_cards: "Manage corporate enterprise cards (e.g., limits, freeze, issue virtual)."
            read:corporate_payments: "Read corporate payment orders and treasury activities."
            write:corporate_payments: "Initiate and manage corporate global payments."
            read:compliance: "Read compliance cases, risk alerts, and audit reports for corporate clients."
            write:compliance: "Update compliance cases, fraud rules, and initiate audits for corporate clients."
            read:rewards: "Read user loyalty points, tiers, and gamification status."
            write:rewards: "Manage loyalty program elements (e.g., redeem points)."
            read:analytics: "Read AI-driven analytics and predictive intelligence reports."
            write:analytics: "Configure analytics dashboards and custom reports."
            read:web3: "Read linked crypto wallets, asset balances, and NFT collections."
            write:web3: "Connect/disconnect crypto wallets, initiate blockchain transactions."
            read:sustainability: "Read carbon footprint reports and ESG investment impact."
            write:sustainability: "Purchase carbon offsets, configure ESG preferences."
            read:lending: "Read loan application status and pre-approved offers."
            write:lending: "Submit loan applications, accept loan offers."
            read:developer_tools: "Read API key and webhook subscription details."
            write:developer_tools: "Manage API keys and webhook subscriptions."
            read:identity: "Read digital identity status and verifiable credentials."
            write:identity: "Submit KYC documents, manage verifiable credentials."
            read:corporate_treasury: "Read corporate cash flow forecasts and liquidity positions."
            write:corporate_treasury: "Configure treasury optimization strategies."
            read:fx_rates: "Read real-time and predictive foreign exchange rates."
            read:investments: "Read investment portfolios, holdings, and performance."
            write:investments: "Manage investment portfolios, initiate rebalancing."
            read:personalization: "Read user personalization and experience design settings."
            write:personalization: "Update user personalization settings."
    apiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: "API Key for server-to-server authentication or public access where OAuth is not applicable. Must be passed in the `X-API-Key` header."
    biometricAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "Biometric authentication token for sensitive operations, usually short-lived and tied to a specific device and biometric scan."

  parameters:
    Limit:
      name: limit
      in: query
      description: "Maximum number of items to return in a single page."
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 10
      example: 20
    Offset:
      name: offset
      in: query
      description: "Number of items to skip before starting to collect the result set."
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
      example: 0
    AccountId:
      name: accountId
      in: path
      description: "Unique identifier for the financial account."
      required: true
      schema:
        type: string
        example: "acc_chase_checking_4567"
    TransactionId:
      name: transactionId
      in: path
      description: "Unique identifier for the transaction."
      required: true
      schema:
        type: string
        example: "txn_quantum-2024-07-21-A7B8C9"
    BudgetId:
      name: budgetId
      in: path
      description: "Unique identifier for the budget."
      required: true
      schema:
        type: string
        example: "budget_monthly_aug"
    PortfolioId:
      name: portfolioId
      in: path
      description: "Unique identifier for the investment portfolio."
      required: true
      schema:
        type: string
        example: "portfolio_equity_growth"
    DeviceId:
      name: deviceId
      in: path
      description: "Unique identifier for the connected device."
      required: true
      schema:
        type: string
        example: "dev_mobile_ios_aabbcc"
    SimulationId:
      name: simulationId
      in: path
      description: "Unique identifier for the financial simulation."
      required: true
      schema:
        type: string
        example: "sim_oracle-growth-2024-xyz"
    PitchId:
      name: pitchId
      in: path
      description: "Unique identifier for the business pitch."
      required: true
      schema:
        type: string
        example: "pitch_qw_synergychain-xyz"
    CardId:
      name: cardId
      in: path
      description: "Unique identifier for the corporate card."
      required: true
      schema:
        type: string
        example: "corp_card_xyz987654"
    AnomalyId:
      name: anomalyId
      in: path
      description: "Unique identifier for the financial anomaly."
      required: true
      schema:
        type: string
        example: "anom_risk-2024-07-21-D1E2F3"
    AuditId:
      name: auditId
      in: path
      description: "Unique identifier for the compliance audit."
      required: true
      schema:
        type: string
        example: "audit_corp_xyz789"
    WalletId:
      name: walletId
      in: path
      description: "Unique identifier for the crypto wallet connection."
      required: true
      schema:
        type: string
        example: "wallet_conn_eth_0xabc123"
    PaymentId:
      name: paymentId
      in: path
      description: "Unique identifier for the international payment."
      required: true
      schema:
        type: string
        example: "int_pmt_xyz7890"
    ForecastHorizonDays:
      name: forecastHorizonDays
      in: query
      description: "The number of days into the future for which to generate the cash flow forecast (e.g., 30, 90, 180)."
      required: false
      schema:
        type: integer
        minimum: 7
        maximum: 365
        default: 90
      example: 90
    IncludeScenarioAnalysis:
      name: includeScenarioAnalysis
      in: query
      description: "If true, the forecast will include best-case and worst-case scenario analysis alongside the most likely projection."
      required: false
      schema:
        type: boolean
        default: false
      example: true
    RuleId:
      name: ruleId
      in: path
      description: "Unique identifier for the fraud detection rule."
      required: true
      schema:
        type: string
        example: "fraud_rule_high_value_inactive"
    GoalId:
      name: goalId
      in: path
      description: "Unique identifier for the financial goal."
      required: true
      schema:
        type: string
        example: "goal_retirement_2050"
    NotificationId:
      name: notificationId
      in: path
      description: "Unique identifier for the notification."
      required: true
      schema:
        type: string
        example: "notif_budget_alert_002"
    ProductId:
      name: productId
      in: path
      description: "Unique identifier for the marketplace product."
      required: true
      schema:
        type: string
        example: "prod_home_insurance_quantum"
    ApplicationId:
      name: applicationId
      in: path
      description: "Unique identifier for the loan application."
      required: true
      schema:
        type: string
        example: "loan_app_creditflow-123"
    SubscriptionId:
      name: subscriptionId
      in: path
      description: "Unique identifier for the webhook subscription."
      required: true
      schema:
        type: string
        example: "whsub_devtool_finance_events"
    ApiKeyId:
      name: keyId
      in: path
      description: "Unique identifier for the API key."
      required: true
      schema:
        type: string
        example: "api_key_dev_app_01"
    StartDate:
      name: startDate
      in: query
      description: "Start date for filtering results (inclusive, YYYY-MM-DD)."
      schema:
        type: string
        format: date
        example: "2024-01-01"
    EndDate:
      name: endDate
      in: query
      description: "End date for filtering results (inclusive, YYYY-MM-DD)."
      schema:
        type: string
        format: date
        example: "2024-12-31"

  responses:
    BadRequestError:
      description: "Invalid request payload or parameters."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            InvalidInput:
              summary: "Common bad request error"
              value:
                code: "INVALID_INPUT"
                message: "The provided input data is invalid. Please check the request body."
                timestamp: "2024-07-22T08:00:00Z"
    UnauthorizedError:
      description: "Authentication failed or token is missing/invalid."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            AuthFailed:
              summary: "Invalid or missing authentication credentials"
              value:
                code: "UNAUTHENTICATED"
                message: "Authentication failed: Invalid or missing access token."
                timestamp: "2024-07-22T08:00:00Z"
    ForbiddenError:
      description: "The authenticated user does not have the necessary permissions to access this resource or perform this action."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            PermissionDenied:
              summary: "Insufficient permissions"
              value:
                code: "PERMISSION_DENIED"
                message: "You do not have the required permissions to perform this action."
                timestamp: "2024-07-22T08:00:00Z"
    NotFoundError:
      description: "The requested resource was not found."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            ResourceNotFound:
              summary: "Resource not found error"
              value:
                code: "NOT_FOUND"
                message: "The requested resource could not be found."
                timestamp: "2024-07-22T08:00:00Z"
    ConflictError:
      description: "The request could not be completed due to a conflict with the current state of the resource (e.g., duplicate entry, expired state)."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            ResourceConflict:
              summary: "Conflict due to existing resource"
              value:
                code: "RESOURCE_CONFLICT"
                message: "A resource with this identifier already exists or the operation conflicts with an existing state."
                timestamp: "2024-07-22T08:00:00Z"
    TooManyRequestsError:
      description: "Rate limit exceeded. Too many requests have been sent in a given amount of time."
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          examples:
            RateLimitExceeded:
              summary: "Rate limit exceeded error"
              value:
                code: "RATE_LIMIT_EXCEEDED"
                message: "You have exceeded the API rate limit. Please try again later."
                timestamp: "2024-07-22T08:00:00Z"

  schemas:
    PaginatedList:
      type: object
      properties:
        limit:
          type: integer
          description: "The maximum number of items returned in the current page."
          example: 10
        offset:
          type: integer
          description: "The number of items skipped before the current page."
          example: 0
        total:
          type: integer
          description: "The total number of items available across all pages."
          example: 100
        nextOffset:
          type: integer
          nullable: true
          description: "The offset for the next page of results, if available. Null if no more pages."
          example: 10
      required:
        - limit
        - offset
        - total

    Error:
      type: object
      required:
        - code
        - message
        - timestamp
      properties:
        code:
          type: string
          description: "A unique error code for programmatic handling."
          example: "INVALID_CREDENTIALS"
        message:
          type: string
          description: "A human-readable explanation of the error."
          example: "Invalid email or password."
        details:
          type: object
          nullable: true
          description: "Optional, structured details about the error, such as validation errors."
          example:
            fields:
              email: "Must be a valid email format."
        timestamp:
          type: string
          format: date-time
          description: "The time the error occurred."
          example: "2024-07-22T08:00:00Z"

    Address:
      type: object
      properties:
        street:
          type: string
          example: "123 Main St"
        city:
          type: string
          example: "Anytown"
        state:
          type: string
          example: "CA"
        zip:
          type: string
          example: "90210"
        country:
          type: string
          example: "USA"

    UserPreferences:
      type: object
      description: "User's personalized preferences for the platform."
      properties:
        preferredLanguage:
          type: string
          example: "en-US"
          description: "Preferred language for the user interface."
        theme:
          type: string
          example: "Dark-Quantum"
          description: "Preferred UI theme (e.g., Light-Default, Dark-Quantum)."
        aiInteractionMode:
          type: string
          enum: [proactive, balanced, on_demand]
          example: "balanced"
          description: "How the user prefers to interact with AI (proactive advice, balanced, or only on demand)."
        notificationChannels:
          type: object
          properties:
            email:
              type: boolean
              example: true
            push:
              type: boolean
              example: true
            sms:
              type: boolean
              example: false
            inApp:
              type: boolean
              example: true
          description: "Preferred channels for receiving notifications."
        dataSharingConsent:
          type: boolean
          example: true
          description: "Consent status for sharing anonymized data for AI improvement and personalized offers."
        transactionGrouping:
          type: string
          enum: [category, merchant, date, account]
          example: "category"
          description: "Default grouping preference for transaction lists."

    SecurityStatus:
      type: object
      description: "Security-related status for the user account."
      properties:
        twoFactorEnabled:
          type: boolean
          example: true
          description: "Indicates if two-factor authentication (2FA) is enabled."
        biometricsEnrolled:
          type: boolean
          example: true
          description: "Indicates if biometric authentication is enrolled."
        lastLogin:
          type: string
          format: date-time
          example: "2024-07-22T08:00:00Z"
          description: "Timestamp of the last successful login."
        lastLoginIp:
          type: string
          format: ipv4
          example: "203.0.113.45"
          description: "IP address of the last successful login."

    User:
      type: object
      required:
        - id
        - name
        - email
        - identityVerified
      properties:
        id:
          type: string
          format: uuid
          example: "user-quantum-visionary-001"
          description: "Unique identifier for the user."
        name:
          type: string
          example: "The Quantum Visionary"
          description: "Full name of the user."
        email:
          type: string
          format: email
          example: "quantum.visionary@demobank.com"
          description: "Primary email address of the user."
        phone:
          type: string
          nullable: true
          example: "+1-555-123-4567"
          description: "Primary phone number of the user."
        dateOfBirth:
          type: string
          format: date
          nullable: true
          example: "1980-01-15"
          description: "Date of birth of the user (YYYY-MM-DD)."
        address:
          $ref: "#/components/schemas/Address"
        loyaltyTier:
          type: string
          example: "Zenith Platinum"
          description: "Current loyalty program tier."
        loyaltyPoints:
          type: integer
          example: 12500
          description: "Current balance of loyalty points."
        gamificationLevel:
          type: integer
          example: 7
          description: "Current gamification level."
        aiPersona:
          type: string
          example: "Prudent Planner"
          description: "AI-identified financial persona for tailored advice."
        securityStatus:
          $ref: "#/components/schemas/SecurityStatus"
        preferences:
          $ref: "#/components/schemas/UserPreferences"
        identityVerified:
          type: boolean
          example: true
          description: "Indicates if the user's identity has been verified (e.g., via KYC)."

    UserRegistrationRequest:
      type: object
      required:
        - name
        - email
        - password
      properties:
        name:
          type: string
          example: "Alice Wonderland"
          description: "Full name of the user."
        email:
          type: string
          format: email
          example: "alice.w@example.com"
          description: "Email address for registration and login."
        password:
          type: string
          format: password
          example: "SecureP@ssw0rd2024!"
          description: "User's chosen password."
        phone:
          type: string
          nullable: true
          example: "+1-555-987-6543"
          description: "Optional phone number for MFA or recovery."
        dateOfBirth:
          type: string
          format: date
          nullable: true
          example: "1990-05-10"
          description: "Optional date of birth (YYYY-MM-DD)."
        address:
          $ref: "#/components/schemas/Address"
          description: "Optional initial address details."

    UserLoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: "quantum.visionary@demobank.com"
          description: "User's email address."
        password:
          type: string
          format: password
          example: "YourSecurePassword123"
          description: "User's password."
        mfaCode:
          type: string
          nullable: true
          example: "123456"
          description: "Optional: Multi-factor authentication code, if required."

    LoginResponse:
      type: object
      required:
        - accessToken
        - refreshToken
        - expiresIn
        - tokenType
      properties:
        accessToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          description: "JWT access token to authenticate subsequent API requests."
        refreshToken:
          type: string
          example: "some_long_refresh_token_string_for_renewal"
          description: "Token used to obtain new access tokens without re-authenticating."
        expiresIn:
          type: integer
          example: 3600
          description: "Lifetime of the access token in seconds."
        tokenType:
          type: string
          example: "Bearer"
          description: "Type of the access token."

    UserUpdateProfileRequest:
      type: object
      description: "Fields that can be updated in a user's profile."
      properties:
        name:
          type: string
          example: "Quantum Visionary Pro"
          description: "Updated full name of the user."
        phone:
          type: string
          nullable: true
          example: "+1-555-999-0000"
          description: "Updated primary phone number of the user."
        address:
          $ref: "#/components/schemas/Address"
          description: "Updated address details."
        preferences:
          $ref: "#/components/schemas/UserPreferences"
          description: "Updated personalization preferences."

    Device:
      type: object
      description: "Information about a connected device."
      required:
        - id
        - type
        - os
        - model
        - lastActive
        - ipAddress
        - trustLevel
      properties:
        id:
          type: string
          format: uuid
          example: "dev_mobile_ios_aabbcc"
          description: "Unique identifier for the device."
        type:
          type: string
          enum: [mobile, desktop, tablet, smart_watch]
          example: "mobile"
          description: "Type of the device."
        os:
          type: string
          example: "iOS 17.5"
          description: "Operating system of the device."
        model:
          type: string
          example: "iPhone 15 Pro Max"
          description: "Model of the device."
        deviceName:
          type: string
          nullable: true
          example: "My Primary iPhone"
          description: "User-assigned name for the device."
        lastActive:
          type: string
          format: date-time
          example: "2024-07-22T11:05:00Z"
          description: "Timestamp of the last activity from this device."
        ipAddress:
          type: string
          format: ipv4
          example: "203.0.113.12"
          description: "Last known IP address of the device."
        trustLevel:
          type: string
          enum: [trusted, pending_verification, untrusted, blocked]
          example: "trusted"
          description: "Security trust level of the device."
        pushToken:
          type: string
          nullable: true
          example: "ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]"
          description: "Push notification token for the device."

    RegisterDeviceRequest:
      type: object
      required:
        - deviceType
        - os
        - model
      properties:
        deviceType:
          type: string
          enum: [mobile, desktop, tablet, smart_watch]
          example: "mobile"
          description: "Type of the device being registered."
        os:
          type: string
          example: "Android 14"
          description: "Operating system of the device."
        model:
          type: string
          example: "Samsung Galaxy S24 Ultra"
          description: "Model of the device."
        biometricSignature:
          type: string
          nullable: true
          description: "Optional: Base64 encoded biometric signature for initial enrollment (e.g., for Passkey registration)."
        deviceName:
          type: string
          nullable: true
          example: "Alex's Work Phone"
          description: "Optional: A friendly name for the device."
        pushToken:
          type: string
          nullable: true
          example: "ExponentPushToken[yzzzyzzzyzzzyzzz]"
          description: "Optional: Push notification token for the device."

    BiometricEnrollmentRequest:
      type: object
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          example: "facial_recognition"
          description: "The type of biometric data being enrolled."
        biometricSignature:
          type: string
          description: "Base64 encoded representation of the biometric template or proof."
        deviceId:
          type: string
          example: "dev_mobile_ios_aabbcc"
          description: "The ID of the device on which the biometric is being enrolled."
        deviceName:
          type: string
          nullable: true
          example: "My Primary iPhone"
          description: "Optional: A friendly name for the device, if not already linked."

    BiometricVerificationRequest:
      type: object
      required:
        - biometricType
        - biometricSignature
        - deviceId
      properties:
        biometricType:
          type: string
          enum: [fingerprint, facial_recognition, voice_recognition]
          example: "fingerprint"
          description: "The type of biometric data being verified."
        biometricSignature:
          type: string
          description: "Base64 encoded representation of the one-time biometric proof for verification."
        deviceId:
          type: string
          example: "dev_mobile_android_ddeeff"
          description: "The ID of the device initiating the biometric verification."

    BiometricStatus:
      type: object
      description: "Current biometric enrollment status for a user."
      required:
        - biometricsEnrolled
        - enrolledBiometrics
      properties:
        biometricsEnrolled:
          type: boolean
          example: true
          description: "Overall status indicating if any biometrics are enrolled."
        enrolledBiometrics:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum: [fingerprint, facial_recognition, voice_recognition]
                example: "facial_recognition"
              deviceId:
                type: string
                example: "dev_mobile_ios_aabbcc"
              enrollmentDate:
                type: string
                format: date-time
                example: "2024-07-22T17:00:00Z"
          description: "List of specific biometric types and devices enrolled."
        lastUsed:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T17:30:00Z"
          description: "Timestamp of the last successful biometric authentication."

    LinkedAccount:
      type: object
      description: "Summary information for a linked financial account."
      required:
        - id
        - name
        - institutionName
        - type
        - currency
        - currentBalance
        - lastUpdated
      properties:
        id:
          type: string
          format: uuid
          example: "acc_chase_checking_4567"
          description: "Unique identifier for the linked account within ."
        externalId:
          type: string
          nullable: true
          example: "plaid_acc_abc123"
          description: "Optional: Identifier from the external data provider (e.g., Plaid)."
        name:
          type: string
          example: "Chase Checking"
          description: "Display name of the account."
        institutionName:
          type: string
          example: "Chase Bank"
          description: "Name of the financial institution where the account is held."
        mask:
          type: string
          nullable: true
          example: "4567"
          description: "Masked account number (e.g., last 4 digits)."
        type:
          type: string
          enum: [depository, credit, loan, investment, other]
          example: "depository"
          description: "General type of the account."
        subtype:
          type: string
          nullable: true
          example: "checking"
          description: "Specific subtype of the account (e.g., checking, savings, IRA, 401k)."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "ISO 4217 currency code of the account."
        currentBalance:
          type: number
          format: float
          example: 1250.75
          description: "Current balance of the account."
        availableBalance:
          type: number
          format: float
          nullable: true
          example: 1200.00
          description: "Available balance (after pending transactions) of the account."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T10:45:00Z"
          description: "Timestamp when the account balance was last synced."

    AccountDetail:
      allOf:
        - $ref: "#/components/schemas/LinkedAccount"
        - type: object
          properties:
            accountHolder:
              type: string
              example: "The Quantum Visionary"
              description: "Name of the primary holder for this account."
            interestRate:
              type: number
              format: float
              nullable: true
              example: 0.01
              description: "Annual interest rate (if applicable)."
            openedDate:
              type: string
              format: date
              nullable: true
              example: "2020-03-01"
              description: "Date the account was opened."
            transactionsCount:
              type: integer
              example: 150
              description: "Total number of transactions in this account."
            projectedCashFlow:
              type: object
              properties:
                days30:
                  type: number
                  format: float
                  example: 500.00
                  description: "Projected cash flow for the next 30 days."
                days90:
                  type: number
                  format: float
                  example: 1200.00
                  description: "Projected cash flow for the next 90 days."
                confidenceScore:
                  type: integer
                  minimum: 0
                  maximum: 100
                  example: 85
                  description: "AI confidence score for the cash flow projection (0-100)."
            balanceHistory:
              type: array
              items:
                type: object
                properties:
                  date:
                    type: string
                    format: date
                    example: "2024-07-21"
                  balance:
                    type: number
                    format: float
                    example: 1230.50
              description: "Historical daily balance data."
    MerchantDetails:
      type: object
      description: "Detailed information about a merchant associated with a transaction."
      properties:
        name:
          type: string
          example: "Quantum Cafe"
          description: "Official name of the merchant."
        logoUrl:
          type: string
          format: uri
          nullable: true
          example: "https://assets.demobank.com/merchants/quantum_cafe.png"
          description: "URL to the merchant's logo."
        website:
          type: string
          format: uri
          nullable: true
          example: "https://quantum.cafe"
          description: "Merchant's website URL."
        address:
          $ref: "#/components/schemas/Address"
          description: "Physical address of the merchant."
        phone:
          type: string
          nullable: true
          example: "+1-555-000-1111"
          description: "Merchant's phone number."
    TransactionLocation:
      type: object
      description: "Geographic location details for a transaction."
      properties:
        latitude:
          type: number
          format: float
          example: 34.0522
          description: "Latitude coordinate of the transaction."
        longitude:
          type: number
          format: float
          example: -118.2437
          description: "Longitude coordinate of the transaction."
        city:
          type: string
          nullable: true
          example: "Los Angeles"
          description: "City where the transaction occurred."
        state:
          type: string
          nullable: true
          example: "CA"
          description: "State where the transaction occurred."
        zip:
          type: string
          nullable: true
          example: "90012"
          description: "Zip code where the transaction occurred."

    Transaction:
      type: object
      required:
        - id
        - accountId
        - type
        - category
        - description
        - amount
        - currency
        - date
      properties:
        id:
          type: string
          format: uuid
          example: "txn_quantum-2024-07-21-A7B8C9"
          description: "Unique identifier for the transaction."
        accountId:
          type: string
          format: uuid
          example: "acc_chase_checking_4567"
          description: "ID of the account from which the transaction occurred."
        type:
          type: string
          enum: [income, expense, transfer, investment, refund, bill_payment]
          example: "expense"
          description: "Type of the transaction."
        category:
          type: string
          example: "Dining & Restaurants"
          description: "AI-assigned or user-defined category of the transaction (e.g., 'Groceries', 'Utilities')."
        aiCategoryConfidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          nullable: true
          example: 0.92
          description: "AI confidence score for the assigned category (0-1)."
        description:
          type: string
          example: "Coffee Shop - Quantum Cafe"
          description: "Detailed description of the transaction."
        merchantDetails:
          $ref: "#/components/schemas/MerchantDetails"
        amount:
          type: number
          format: float
          example: 12.50
          description: "Amount of the transaction."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "ISO 4217 currency code of the transaction."
        date:
          type: string
          format: date
          example: "2024-07-21"
          description: "Date the transaction occurred (local date)."
        postedDate:
          type: string
          format: date
          nullable: true
          example: "2024-07-22"
          description: "Date the transaction was posted to the account (local date)."
        carbonFootprint:
          type: number
          format: float
          nullable: true
          example: 1.2
          description: "Estimated carbon footprint in kg CO2e for this transaction, derived by AI."
        location:
          $ref: "#/components/schemas/TransactionLocation"
        paymentChannel:
          type: string
          enum: [in_store, online, mobile, ATM, bill_payment, transfer, other]
          nullable: true
          example: "in_store"
          description: "Channel through which the payment was made."
        tags:
          type: array
          items:
            type: string
          nullable: true
          example: ["work_lunch", "reimbursable"]
          description: "User-defined tags for the transaction."
        receiptUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/receipts/txn_1a2b3c4d5e.pdf"
          description: "URL to a digital receipt for the transaction."
        disputeStatus:
          type: string
          enum: [none, pending, under_review, resolved, rejected]
          example: "none"
          description: "Current dispute status of the transaction."
        notes:
          type: string
          nullable: true
          example: "This was a special coffee for a client meeting."
          description: "Personal notes added by the user to the transaction."

    PaginatedTransactions:
      allOf:
        - $ref: "#/components/schemas/PaginatedList"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Transaction"

    CategorizeTransactionRequest:
      type: object
      required:
        - category
      properties:
        category:
          type: string
          example: "Home > Groceries"
          description: "The new category for the transaction. Can be hierarchical."
        notes:
          type: string
          nullable: true
          example: "Bulk purchase for party"
          description: "Optional notes to add to the transaction."
        applyToFuture:
          type: boolean
          default: false
          example: true
          description: "If true, the AI will learn from this correction and try to apply it to similar future transactions."

    DisputeRequest:
      type: object
      required:
        - reason
        - details
      properties:
        reason:
          type: string
          enum: [unauthorized, duplicate_charge, incorrect_amount, product_service_issue, other]
          example: "unauthorized"
          description: "The primary reason for disputing the transaction."
        details:
          type: string
          example: "I did not authorize this purchase. My card may have been compromised and I was traveling internationally on this date."
          description: "Detailed explanation of the dispute."
        supportingDocuments:
          type: array
          items:
            type: string
            format: uri
          nullable: true
          description: "URLs to supporting documents (e.g., receipts, communication)."

    DisputeStatus:
      type: object
      required:
        - disputeId
        - status
        - nextSteps
        - lastUpdated
      properties:
        disputeId:
          type: string
          format: uuid
          example: "dispute_txn_xyz123"
          description: "Unique identifier for the dispute case."
        status:
          type: string
          enum: [pending, under_review, requires_more_info, resolved, rejected]
          example: "pending"
          description: "Current status of the dispute."
        nextSteps:
          type: string
          example: "Our AI-powered fraud team is reviewing your claim. You will be notified within 2-3 business days."
          description: "Guidance on what to expect next in the dispute process."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T11:30:00Z"
          description: "Timestamp when the dispute status was last updated."

    RecurringTransaction:
      type: object
      description: "Details of a detected or user-defined recurring transaction."
      required:
        - id
        - description
        - category
        - amount
        - currency
        - frequency
        - status
      properties:
        id:
          type: string
          format: uuid
          example: "rec_txn_netflix_001"
          description: "Unique identifier for the recurring transaction."
        description:
          type: string
          example: "Netflix Subscription"
          description: "Description of the recurring transaction."
        category:
          type: string
          example: "Entertainment"
          description: "Category of the recurring transaction."
        amount:
          type: number
          format: float
          example: 19.99
          description: "Amount of the recurring transaction."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "ISO 4217 currency code."
        frequency:
          type: string
          enum: [daily, weekly, bi_weekly, monthly, quarterly, semi_annually, annually]
          example: "monthly"
          description: "Frequency of the recurring transaction."
        nextDueDate:
          type: string
          format: date
          nullable: true
          example: "2024-08-01"
          description: "Next scheduled due date for the transaction."
        lastPaidDate:
          type: string
          format: date
          nullable: true
          example: "2024-07-01"
          description: "Date of the last payment for this recurring transaction."
        status:
          type: string
          enum: [active, inactive, cancelled, paused]
          example: "active"
          description: "Current status of the recurring transaction."
        linkedAccountId:
          type: string
          format: uuid
          nullable: true
          example: "acc_chase_checking_4567"
          description: "ID of the account typically used for this recurring transaction."
        aiConfidenceScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          nullable: true
          example: 0.95
          description: "AI confidence score that this is a recurring transaction (0-1)."

    RecurringTransactionCreationRequest:
      type: object
      required:
        - description
        - category
        - amount
        - currency
        - frequency
        - startDate
        - linkedAccountId
      properties:
        description:
          type: string
          example: "New Gym Membership"
          description: "Description of the recurring transaction."
        category:
          type: string
          example: "Health & Fitness"
          description: "Category of the recurring transaction."
        amount:
          type: number
          format: float
          example: 55.50
          description: "Amount of the recurring transaction."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "ISO 4217 currency code."
        frequency:
          type: string
          enum: [daily, weekly, bi_weekly, monthly, quarterly, semi_annually, annually]
          example: "monthly"
          description: "Frequency of the recurring transaction."
        startDate:
          type: string
          format: date
          example: "2024-09-01"
          description: "The date when this recurring transaction is expected to start."
        linkedAccountId:
          type: string
          format: uuid
          example: "acc_chase_checking_4567"
          description: "ID of the account to associate with this recurring transaction."

    AIInsight:
      type: object
      description: "An AI-generated insight, alert, or recommendation."
      required:
        - id
        - title
        - description
        - category
        - severity
        - timestamp
      properties:
        id:
          type: string
          format: uuid
          example: "insight-spending-alert-001"
          description: "Unique identifier for the AI insight."
        title:
          type: string
          example: "High Dining Spend Alert"
          description: "A concise title for the insight."
        description:
          type: string
          example: "Your dining expenses this month are 35% higher than your average, potentially impacting your budget by $150."
          description: "Detailed explanation of the insight."
        category:
          type: string
          enum: [spending, saving, investing, budgeting, security, financial_goals, sustainability, corporate_treasury, compliance, other]
          example: "spending"
          description: "Category of the insight (e.g., spending, saving, investing)."
        severity:
          type: string
          enum: [low, medium, high, critical]
          example: "medium"
          description: "AI-assessed severity or importance of the insight."
        actionableRecommendation:
          type: string
          nullable: true
          example: "Consider utilizing the 'Budget Optimizer' tool to adjust your dining budget or explore meal prep options."
          description: "Optional: A concrete action the user can take based on the insight."
        actionTrigger:
          type: string
          nullable: true
          description: "Optional: A programmatic trigger or deep link to initiate the recommended action."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-22T11:45:00Z"
          description: "Timestamp when the insight was generated."

    SpendingTrends:
      type: object
      required:
        - period
        - overallTrend
        - percentageChange
        - topCategoriesByChange
        - aiInsights
        - forecastNextMonth
      properties:
        period:
          type: string
          example: "Last 3 Months"
          description: "The period over which the spending trend is analyzed."
        overallTrend:
          type: string
          enum: [increasing, decreasing, stable]
          example: "increasing"
          description: "Overall trend of spending (increasing, decreasing, stable)."
        percentageChange:
          type: number
          format: float
          example: 5.2
          description: "Percentage change in spending over the period."
        topCategoriesByChange:
          type: array
          items:
            type: object
            properties:
              category:
                type: string
                example: "Dining & Restaurants"
              percentageChange:
                type: number
                format: float
                example: 15.0
              absoluteChange:
                type: number
                format: float
                example: 120.00
          description: "Categories with the most significant changes in spending."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights and recommendations related to spending."
        forecastNextMonth:
          type: number
          format: float
          example: 2850.00
          description: "AI-projected total spending for the next month."

    BudgetCategory:
      type: object
      required:
        - name
        - allocated
        - spent
        - remaining
      properties:
        name:
          type: string
          example: "Groceries"
          description: "Name of the budget category."
        allocated:
          type: number
          format: float
          example: 500.00
          description: "Amount allocated to this category."
        spent:
          type: number
          format: float
          example: 250.75
          description: "Amount spent in this category so far."
        remaining:
          type: number
          format: float
          example: 249.25
          description: "Remaining amount in this category."

    Budget:
      type: object
      required:
        - id
        - name
        - period
        - startDate
        - endDate
        - totalAmount
        - spentAmount
        - remainingAmount
        - categories
        - status
        - alertThreshold
      properties:
        id:
          type: string
          format: uuid
          example: "budget_monthly_aug"
          description: "Unique identifier for the budget."
        name:
          type: string
          example: "August 2024 Household Budget"
          description: "Name of the budget."
        period:
          type: string
          enum: [weekly, bi_weekly, monthly, quarterly, annually, custom]
          example: "monthly"
          description: "The frequency or period of the budget."
        startDate:
          type: string
          format: date
          example: "2024-08-01"
          description: "Start date of the budget period."
        endDate:
          type: string
          format: date
          example: "2024-08-31"
          description: "End date of the budget period."
        totalAmount:
          type: number
          format: float
          example: 3000.00
          description: "Total amount allocated for the entire budget."
        spentAmount:
          type: number
          format: float
          example: 1200.50
          description: "Total amount spent against this budget so far."
        remainingAmount:
          type: number
          format: float
          example: 1799.50
          description: "Remaining amount in the budget."
        categories:
          type: array
          items:
            $ref: "#/components/schemas/BudgetCategory"
          description: "Breakdown of the budget by categories."
        status:
          type: string
          enum: [active, archived, ended]
          example: "active"
          description: "Current status of the budget."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          example: 80
          description: "Percentage threshold at which an alert is triggered (e.g., 80% spent)."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "AI-driven recommendations related to this budget."

    BudgetCreationRequest:
      type: object
      required:
        - name
        - period
        - startDate
        - endDate
        - totalAmount
      properties:
        name:
          type: string
          example: "September Living Expenses"
          description: "Name of the new budget."
        period:
          type: string
          enum: [weekly, bi_weekly, monthly, quarterly, annually, custom]
          example: "monthly"
          description: "The frequency or period of the budget."
        startDate:
          type: string
          format: date
          example: "2024-09-01"
          description: "Start date of the budget period."
        endDate:
          type: string
          format: date
          example: "2024-09-30"
          description: "End date of the budget period."
        totalAmount:
          type: number
          format: float
          example: 2800.00
          description: "Total amount allocated for the entire budget."
        categories:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: "Rent"
              allocated:
                type: number
                format: float
                example: 1500.00
          description: "Initial breakdown of the budget by categories."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          example: 75
          description: "Percentage threshold at which an alert is triggered."
        aiAutoPopulate:
          type: boolean
          default: false
          example: true
          description: "If true, AI will automatically populate categories and amounts based on historical spending."

    BudgetUpdateRequest:
      type: object
      description: "Fields that can be updated for an existing budget."
      properties:
        name:
          type: string
          example: "August 2024 Revised Household Budget"
          description: "Updated name of the budget."
        totalAmount:
          type: number
          format: float
          example: 3200.00
          description: "Updated total amount for the entire budget."
        startDate:
          type: string
          format: date
          example: "2024-08-01"
          description: "Updated start date of the budget period."
        endDate:
          type: string
          format: date
          example: "2024-08-31"
          description: "Updated end date of the budget period."
        categories:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: "Groceries"
              allocated:
                type: number
                format: float
                example: 550.00
          description: "Updated breakdown of the budget by categories. Existing categories will be updated, new ones added."
        alertThreshold:
          type: integer
          minimum: 0
          maximum: 100
          example: 85
          description: "Updated percentage threshold for alerts."
        status:
          type: string
          enum: [active, archived, ended]
          example: "active"
          description: "Updated status of the budget."

    InvestmentHolding:
      type: object
      required:
        - symbol
        - name
        - quantity
        - averageCost
        - currentPrice
        - marketValue
        - percentageOfPortfolio
      properties:
        symbol:
          type: string
          example: "AAPL"
          description: "Stock ticker or asset symbol."
        name:
          type: string
          example: "Apple Inc."
          description: "Full name of the investment asset."
        quantity:
          type: number
          format: float
          example: 100
          description: "Number of units held."
        averageCost:
          type: number
          format: float
          example: 150.00
          description: "Average cost per unit."
        currentPrice:
          type: number
          format: float
          example: 180.00
          description: "Current market price per unit."
        marketValue:
          type: number
          format: float
          example: 18000.00
          description: "Total market value of the holding."
        percentageOfPortfolio:
          type: number
          format: float
          example: 7.2
          description: "Percentage of the total portfolio value this holding represents."
        esgScore:
          type: number
          format: float
          nullable: true
          minimum: 0
          maximum: 10
          example: 8.5
          description: "Overall ESG (Environmental, Social, Governance) score of the asset (0-10)."

    InvestmentPortfolio:
      type: object
      required:
        - id
        - name
        - type
        - currency
        - totalValue
        - unrealizedGainLoss
        - todayGainLoss
        - lastUpdated
        - riskTolerance
      properties:
        id:
          type: string
          format: uuid
          example: "portfolio_equity_growth"
          description: "Unique identifier for the investment portfolio."
        name:
          type: string
          example: "Aggressive Growth Portfolio"
          description: "Name of the portfolio."
        type:
          type: string
          enum: [equities, bonds, diversified, crypto, retirement, other]
          example: "equities"
          description: "General type or strategy of the portfolio."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "ISO 4217 currency code of the portfolio."
        totalValue:
          type: number
          format: float
          example: 250000.00
          description: "Current total market value of the portfolio."
        unrealizedGainLoss:
          type: number
          format: float
          example: 25000.00
          description: "Total unrealized gain or loss on the portfolio."
        todayGainLoss:
          type: number
          format: float
          example: 500.00
          description: "Daily gain or loss on the portfolio."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T10:00:00Z"
          description: "Timestamp when the portfolio data was last updated."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          example: "aggressive"
          description: "User's stated or AI-assessed risk tolerance for this portfolio."
        aiPerformanceInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "AI-driven insights into portfolio performance and market outlook."
        holdings:
          type: array
          items:
            $ref: "#/components/schemas/InvestmentHolding"
          description: "List of individual assets held in the portfolio."
        aiRebalancingFrequency:
          type: string
          enum: [monthly, quarterly, semi_annually, annually, never]
          nullable: true
          example: "quarterly"
          description: "Frequency at which AI-driven rebalancing is set to occur."

    InvestmentPortfolioCreationRequest:
      type: object
      required:
        - name
        - type
        - currency
        - initialInvestment
        - riskTolerance
      properties:
        name:
          type: string
          example: "My First Growth Portfolio"
          description: "Name for the new investment portfolio."
        type:
          type: string
          enum: [equities, bonds, diversified, crypto, retirement, other]
          example: "diversified"
          description: "General type or strategy of the portfolio."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "ISO 4217 currency code of the portfolio."
        initialInvestment:
          type: number
          format: float
          example: 10000.00
          description: "Initial amount to invest into the portfolio."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          example: "medium"
          description: "Desired risk tolerance for this portfolio."
        aiAutoAllocate:
          type: boolean
          default: false
          example: true
          description: "If true, AI will automatically allocate initial investment based on risk tolerance."
        linkedAccountId:
          type: string
          format: uuid
          nullable: true
          example: "acc_chase_checking_4567"
          description: "Optional: ID of a linked account to fund the initial investment."

    InvestmentPortfolioUpdateRequest:
      type: object
      description: "Fields that can be updated for an investment portfolio."
      properties:
        name:
          type: string
          example: "Revised Growth Portfolio"
          description: "Updated name of the portfolio."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          example: "medium"
          description: "Updated risk tolerance for this portfolio. May trigger rebalancing."
        aiRebalancingFrequency:
          type: string
          enum: [monthly, quarterly, semi_annually, annually, never]
          nullable: true
          example: "quarterly"
          description: "Updated frequency for AI-driven rebalancing."

    RebalanceRequest:
      type: object
      required:
        - targetRiskTolerance
      properties:
        targetRiskTolerance:
          type: string
          enum: [conservative, moderate, aggressive, very_aggressive]
          example: "medium"
          description: "The desired risk tolerance for rebalancing the portfolio."
        dryRun:
          type: boolean
          default: true
          example: true
          description: "If true, only simulate the rebalance without executing trades. Returns proposed trades."
        confirmationRequired:
          type: boolean
          default: true
          example: true
          description: "If true, user confirmation is required before executing actual trades after a dry run."

    RebalanceStatus:
      type: object
      required:
        - rebalanceId
        - portfolioId
        - status
        - statusMessage
      properties:
        rebalanceId:
          type: string
          format: uuid
          example: "rebal_port_growth_123"
          description: "Unique identifier for the rebalancing operation."
        portfolioId:
          type: string
          format: uuid
          example: "portfolio_equity_growth"
          description: "ID of the portfolio being rebalanced."
        status:
          type: string
          enum: [analyzing, pending_confirmation, executing_trades, completed, failed]
          example: "analyzing"
          description: "Current status of the rebalancing operation."
        statusMessage:
          type: string
          example: "AI is analyzing optimal trade strategy to match target risk profile."
          description: "A descriptive message about the current rebalance status."
        proposedTrades:
          type: array
          items:
            type: object
            properties:
              action:
                type: string
                enum: [buy, sell]
              symbol:
                type: string
              quantity:
                type: number
              estimatedPrice:
                type: number
          nullable: true
          description: "List of proposed trades if `dryRun` was true and status is `pending_confirmation`."
        estimatedImpact:
          type: string
          nullable: true
          example: "Projected 5% reduction in portfolio volatility."
          description: "AI-estimated impact of the rebalance on the portfolio."
        confirmationRequired:
          type: boolean
          nullable: true
          example: true
          description: "Indicates if user confirmation is required to proceed with trades."
        confirmationExpiresAt:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T15:00:00Z"
          description: "Timestamp when the rebalance confirmation expires, if `confirmationRequired` is true."

    ESGAssetSearchResult:
      type: object
      required:
        - assetSymbol
        - assetName
        - assetType
        - currentPrice
        - currency
        - overallESGScore
      properties:
        assetSymbol:
          type: string
          example: "TSLA"
          description: "Symbol of the investment asset."
        assetName:
          type: string
          example: "Tesla Inc."
          description: "Full name of the investment asset."
        assetType:
          type: string
          enum: [stock, etf, mutual_fund, bond]
          example: "stock"
          description: "Type of the investment asset."
        currentPrice:
          type: number
          format: float
          example: 250.75
          description: "Current market price of the asset."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "Currency of the asset's price."
        overallESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          example: 9.1
          description: "Overall ESG score (0-10), higher is better."
        environmentalScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          nullable: true
          example: 9.5
          description: "Environmental component of the ESG score."
        socialScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          nullable: true
          example: 8.8
          description: "Social component of the ESG score."
        governanceScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          nullable: true
          example: 9.0
          description: "Governance component of the ESG score."
        esgRatingProvider:
          type: string
          nullable: true
          example: "MSCI"
          description: "Provider of the ESG rating (e.g., MSCI, Sustainalytics)."
        esgControversies:
          type: array
          items:
            type: string
          nullable: true
          description: "List of any significant ESG-related controversies associated with the asset."
        aiESGInsight:
          type: string
          nullable: true
          example: "Tesla's high environmental score is driven by its focus on sustainable transportation, though social scores reflect recent labor concerns."
          description: "AI-generated insight summarizing the ESG profile."

    AIChatMessage:
      type: object
      required:
        - role
        - content
        - timestamp
      properties:
        role:
          type: string
          enum: [user, assistant, tool_call, tool_response]
          example: "user"
          description: "Role of the speaker (user, assistant, or tool interaction)."
        content:
          type: string
          example: "What is my current net worth?"
          description: "The textual content of the message."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-22T18:00:00Z"
          description: "Timestamp of the message."
        functionCall:
          type: object
          properties:
            name:
              type: string
              example: "send_money"
            args:
              type: object
              example:
                recipient: "Alex"
                currency: "USD"
          description: "If role is 'tool_call', details of the tool function called by the AI."
        functionResponse:
          type: object
          properties:
            name:
              type: string
              example: "send_money"
            response:
              type: object
              example:
                status: "success"
                transactionId: "pmt_654321"
          description: "If role is 'tool_response', the output from the tool function."

    AIChatRequest:
      type: object
      properties:
        message:
          type: string
          description: "The user's textual input to the AI Advisor."
          example: "Can you analyze my recent spending patterns and suggest areas for saving, focusing on my dining expenses?"
        sessionId:
          type: string
          nullable: true
          example: "session-quantum-xyz-789-alpha"
          description: "Optional: Session ID to continue a conversation. If omitted, a new session is started."
        functionResponse:
          type: object
          nullable: true
          properties:
            name:
              type: string
              description: "The name of the tool function for which this is a response."
              example: "send_money"
            response:
              type: object
              description: "The JSON output from the execution of the tool function."
              example:
                status: "success"
                transactionId: "pmt_654321"
                amountSent: 55.50
                recipient: "Alex"
          description: "Optional: The output from a tool function that the AI previously requested to be executed."

    AIChatResponse:
      type: object
      required:
        - sessionId
      properties:
        text:
          type: string
          nullable: true
          example: "I've completed a detailed analysis of your spending. It appears your dining expenses account for 35% of your total outflows this month, significantly higher than your target. Would you like me to identify specific areas for reduction or suggest alternative dining options?"
          description: "The AI Advisor's textual response."
        sessionId:
          type: string
          example: "session-quantum-xyz-789-alpha"
          description: "The active conversation session ID."
        proactiveInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "A list of proactive AI insights or recommendations generated by Quantum."
        functionCalls:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                description: "Unique ID for this tool call, used to link with `functionResponse`."
                example: "call_abc123"
              name:
                type: string
                description: "The name of the tool function to call."
                example: "send_money"
              args:
                type: object
                description: "Key-value pairs representing the arguments to pass to the tool function."
                example:
                  recipient: "Alex"
                  currency: "USD"
          nullable: true
          description: "A list of tool functions the AI wants the system to execute."
        requiresUserAction:
          type: boolean
          default: false
          example: false
          description: "Indicates if the AI's response implies that the user needs to take a specific action (e.g., provide more input, confirm a tool call)."

    AITool:
      type: object
      required:
        - name
        - description
        - parameters
        - accessScope
      properties:
        name:
          type: string
          example: "send_money"
          description: "The unique name of the AI tool (function name)."
        description:
          type: string
          example: "Sends money to a specified recipient from the user's primary checking account."
          description: "A description of what the tool does."
        parameters:
          type: object
          description: "OpenAPI schema object defining the input parameters for the tool function."
          properties:
            type:
              type: string
              enum: [object]
              example: "object"
            properties:
              type: object
              additionalProperties:
                type: object
                properties:
                  type:
                    type: string
                  description:
                    type: string
                  enum:
                    type: array
                    items:
                      type: string
            required:
              type: array
              items:
                type: string
        accessScope:
          type: string
          example: "write:payments"
          description: "The OAuth2 scope required to execute this tool."

    PaginatedChatMessages:
      allOf:
        - $ref: "#/components/schemas/PaginatedList"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/AIChatMessage"

    SimulationRequest:
      type: object
      required:
        - prompt
      properties:
        prompt:
          type: string
          example: "What if I invest an additional $1,000 per month into my aggressive growth portfolio for the next 5 years?"
          description: "A natural language prompt describing the 'what-if' scenario."
        parameters:
          type: object
          nullable: true
          description: "Optional structured parameters to guide the simulation (e.g., duration, amount, risk tolerance)."
          example:
            durationYears: 5
            monthlyInvestmentAmount: 1000
            riskTolerance: "aggressive"

    SimulationResponse:
      type: object
      required:
        - simulationId
        - narrativeSummary
        - keyImpacts
      properties:
        simulationId:
          type: string
          format: uuid
          example: "sim_oracle-growth-2024-xyz"
          description: "Unique identifier for the completed simulation."
        narrativeSummary:
          type: string
          example: "If you consistently invest an additional $1,000 per month into your aggressive growth portfolio over the next 5 years, the Quantum Oracle predicts your portfolio could grow by approximately 45-60%, significantly increasing your wealth. However, this comes with elevated risk during market downturns."
          description: "A natural language summary of the simulation's results and key findings."
        keyImpacts:
          type: array
          items:
            type: object
            properties:
              metric:
                type: string
                example: "Projected Portfolio Value"
              value:
                type: string
                example: "$120,000 - $140,000"
              severity:
                type: string
                enum: [low, medium, high]
                example: "high"
          description: "Key quantitative and qualitative impacts identified by the AI."
        recommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "Actionable recommendations derived from the simulation."
        riskAnalysis:
          type: object
          nullable: true
          properties:
            maxDrawdown:
              type: number
              format: float
              example: 0.25
              description: "Maximum potential loss from peak to trough (e.g., 0.25 for 25%)."
            volatilityIndex:
              type: number
              format: float
              example: 0.18
              description: "Measure of market volatility associated with the scenario."
          description: "AI-driven risk assessment of the simulated scenario."
        visualizations:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum: [line_chart, bar_chart, table]
              title:
                type: string
              dataUri:
                type: string
                format: uri
          nullable: true
          description: "Optional: URLs to generated visualization data or images."

    AdvancedSimulationRequest:
      type: object
      required:
        - prompt
        - scenarios
      properties:
        prompt:
          type: string
          example: "Evaluate the long-term impact of a sudden job loss combined with a variable market downturn, analyzing worst-case and best-case recovery scenarios over a decade."
          description: "A natural language prompt describing the complex, multi-variable scenario."
        scenarios:
          type: array
          minItems: 1
          items:
            type: object
            required:
              - name
              - events
              - durationYears
            properties:
              name:
                type: string
                example: "Job Loss & Mild Market Recovery"
                description: "A descriptive name for this specific scenario."
              events:
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      enum: [job_loss, market_downturn, large_purchase, income_increase, medical_emergency]
                    details:
                      type: object
                      description: "Specific parameters for the event (e.g., durationMonths, impactPercentage)."
                description: "A list of discrete or continuous events that define this scenario."
              durationYears:
                type: integer
                minimum: 1
                maximum: 50
                example: 10
                description: "The duration in years over which this scenario is simulated."
              sensitivityAnalysisParams:
                type: array
                items:
                  type: object
                  properties:
                    paramName:
                      type: string
                      example: "marketRecoveryRate"
                      description: "The name of the parameter to vary for sensitivity analysis (e.g., 'interestRate', 'inflationRate', 'marketRecoveryRate')."
                    min:
                      type: number
                      description: "Minimum value for the parameter."
                    max:
                      type: number
                      description: "Maximum value for the parameter."
                    step:
                      type: number
                      description: "Step increment for varying the parameter."
                nullable: true
                description: "Parameters for multi-variable sensitivity analysis within this scenario."
        globalEconomicFactors:
          type: object
          nullable: true
          description: "Optional: Global economic conditions to apply to all scenarios."
          properties:
            inflationRate:
              type: number
              format: float
              example: 0.03
            interestRateBaseline:
              type: number
              format: float
              example: 0.05
        personalAssumptions:
          type: object
          nullable: true
          description: "Optional: Personal financial assumptions to override defaults."
          properties:
            annualSavingsRate:
              type: number
              format: float
              example: 0.15
            riskTolerance:
              type: string
              enum: [conservative, moderate, aggressive]
              example: "aggressive"

    AdvancedSimulationResponse:
      type: object
      required:
        - simulationId
        - overallSummary
        - scenarioResults
      properties:
        simulationId:
          type: string
          format: uuid
          example: "sim_oracle-complex-macro-123"
          description: "Unique identifier for the completed advanced simulation."
        overallSummary:
          type: string
          example: "The advanced simulation reveals that a job loss scenario has a significant initial impact on liquidity, but recovery is highly dependent on market conditions and the duration of unemployment. Proactive savings and diversified investments are key mitigating factors."
          description: "A high-level summary of findings across all scenarios."
        scenarioResults:
          type: array
          items:
            type: object
            required:
              - scenarioName
              - narrativeSummary
            properties:
              scenarioName:
                type: string
                example: "Job Loss & Mild Market Recovery"
                description: "Name of the individual scenario."
              narrativeSummary:
                type: string
                example: "In this scenario, initial liquidity challenges are observed, but a swift market recovery and prudent spending lead to recovery within 3 years."
                description: "Summary of results for this specific scenario."
              finalNetWorthProjected:
                type: number
                format: float
                nullable: true
                example: 1250000
                description: "Projected net worth at the end of the simulation period for this scenario."
              liquidityMetrics:
                type: object
                nullable: true
                properties:
                  minCashBalance:
                    type: number
                    format: float
                    example: -5000
                    description: "Minimum cash balance reached during the scenario."
                  recoveryTimeMonths:
                    type: integer
                    example: 36
                    description: "Time in months to recover to pre-event financial state."
              sensitivityAnalysisGraphs:
                type: array
                items:
                  type: object
                  properties:
                    paramName:
                      type: string
                      example: "marketRecoveryRate"
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          paramValue:
                            type: number
                          outcomeValue:
                            type: number
                nullable: true
                description: "Data for generating sensitivity analysis charts (e.g., how net worth changes as a variable is adjusted)."
              aiInsights:
                type: array
                items:
                  $ref: "#/components/schemas/AIInsight"
                nullable: true
                description: "Specific AI insights for this scenario."
        strategicRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "Overarching strategic recommendations derived from the comparison of scenarios."

    SimulationSummary:
      type: object
      required:
        - simulationId
        - title
        - status
        - creationDate
        - lastUpdated
        - summary
      properties:
        simulationId:
          type: string
          format: uuid
          example: "sim_oracle-growth-2024-xyz"
          description: "Unique identifier for the simulation."
        title:
          type: string
          example: "Investment Growth Scenario"
          description: "A user-friendly title for the simulation."
        status:
          type: string
          enum: [processing, completed, failed]
          example: "completed"
          description: "Current status of the simulation."
        creationDate:
          type: string
          format: date-time
          example: "2024-07-20T10:00:00Z"
          description: "Timestamp when the simulation was initiated."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-20T10:15:00Z"
          description: "Timestamp when the simulation status or results were last updated."
        summary:
          type: string
          example: "Simulated impact of additional monthly investments over 5 years."
          description: "A brief summary of what the simulation evaluated."

    QuantumWeaverState:
      type: object
      required:
        - pitchId
        - stage
        - statusMessage
        - lastUpdated
        - nextSteps
      properties:
        pitchId:
          type: string
          format: uuid
          example: "pitch_qw_synergychain-xyz"
          description: "Unique identifier for the business pitch."
        stage:
          type: string
          enum: [submitted, initial_review, ai_analysis, feedback_required, test_phase, final_review, approved_for_funding, rejected, incubated_graduated]
          example: "initial_review"
          description: "Current stage of the business pitch in the incubation process."
        statusMessage:
          type: string
          example: "Your business plan has been received and is undergoing initial review by Quantum Weaver."
          description: "A human-readable status message."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T20:00:00Z"
          description: "Timestamp of the last status update."
        feedbackSummary:
          type: string
          nullable: true
          example: "Initial analysis indicates a strong market fit, but further detail is required on customer acquisition costs and scaling strategy."
          description: "A summary of AI-generated feedback, if applicable."
        questions:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              question:
                type: string
              category:
                type: string
              isRequired:
                type: boolean
          nullable: true
          description: "List of questions from Quantum Weaver requiring the user's input."
        nextSteps:
          type: string
          example: "Please monitor for AI-generated feedback and potential questions within the next 48 hours."
          description: "Guidance on the next actions for the user."
        estimatedFundingOffer:
          type: number
          format: float
          nullable: true
          example: 5000000
          description: "AI's estimated funding offer, if the pitch progresses."

    QuantumWeaverDetailedState:
      allOf:
        - $ref: "#/components/schemas/QuantumWeaverState"
        - type: object
          properties:
            aiFinancialModel:
              type: object
              nullable: true
              description: "AI's detailed financial model analysis."
              properties:
                revenueBreakdown:
                  type: object
                  additionalProperties:
                    type: string
                  example: {"Year 1": "2.5M", "Year 2": "7.8M", "Year 3": "15M"}
                costStructureAnalysis:
                  type: object
                  additionalProperties:
                    type: string
                  example: {"Fixed Costs": "30%", "Variable Costs": "40%", "R&D": "15%"}
                breakevenPoint:
                  type: string
                  example: "18 months"
                capitalRequirements:
                  type: number
                  format: float
                  example: 4500000
                sensitivityAnalysis:
                  type: array
                  items:
                    type: object
                    properties:
                      scenario: {type: string}
                      projectedIRR: {type: number, format: float}
                      terminalValue: {type: number, format: float}
            aiMarketAnalysis:
              type: object
              nullable: true
              description: "AI's detailed market analysis."
              properties:
                targetMarketSize:
                  type: string
                  example: "$50 Billion (TAM)"
                competitiveAdvantages:
                  type: array
                  items: {type: string}
                growthOpportunities:
                  type: string
                riskFactors:
                  type: string
            aiCoachingPlan:
              type: object
              nullable: true
              description: "AI-generated coaching plan for the entrepreneur."
              properties:
                title: {type: string, example: "Pre-Seed Fundraising Strategy"}
                summary: {type: string}
                steps:
                  type: array
                  items:
                    type: object
                    properties:
                      title: {type: string}
                      description: {type: string}
                      timeline: {type: string}
                      status: {type: string, enum: [pending, in_progress, completed]}
                      resources:
                        type: array
                        items:
                          type: object
                          properties:
                            name: {type: string}
                            url: {type: string, format: uri}
            investorMatchScore:
              type: number
              format: float
              minimum: 0
              maximum: 1
              nullable: true
              example: 0.88
              description: "AI's score for how well the pitch matches potential investors in the network (0-1)."
            aiRiskAssessment:
              type: object
              nullable: true
              description: "AI's assessment of risks associated with the venture."
              properties:
                technicalRisk: {type: string, example: "Medium (complex AI development, quantum compute dependencies)"}
                marketRisk: {type: string, example: "Low (established market, clear pain points, strong value prop)"}
                teamRisk: {type: string, example: "Low (experienced founding team with relevant domain expertise)"}

    QuantumWeaverFeedbackRequest:
      type: object
      properties:
        feedback:
          type: string
          nullable: true
          description: "General textual feedback or additional details for Quantum Weaver."
          example: "Regarding the technical challenges, our team has allocated 3 months for R&D on quantum-resistant cryptography, mitigating the risk. We've also brought in Dr. Elena Petrova, a leading expert in secure multi-party computation."
        answers:
          type: array
          items:
            type: object
            required:
              - questionId
              - answer
            properties:
              questionId:
                type: string
                example: "q_qa-team-001"
                description: "The ID of the question being answered."
              answer:
                type: string
                example: "Our mitigation strategy includes dedicated R&D and new hires with specific expertise."
                description: "The answer to the specific question."

    GenerateVideoRequest:
      type: object
      required:
        - prompt
        - style
        - lengthSeconds
      properties:
        prompt:
          type: string
          example: "A captivating ad featuring a young entrepreneur using 's AI tools to grow their startup. Focus on innovation and ease of use."
          description: "The textual prompt to guide the AI video generation."
        style:
          type: string
          enum: [Cinematic, Explainer, Documentary, Abstract, Minimalist]
          example: "Cinematic"
          description: "Artistic style of the video."
        lengthSeconds:
          type: integer
          minimum: 5
          maximum: 60
          example: 15
          description: "Desired length of the video in seconds."
        aspectRatio:
          type: string
          enum: ["16:9", "9:16", "1:1"]
          default: "16:9"
          example: "16:9"
          description: "Aspect ratio of the video (e.g., 16:9 for widescreen, 9:16 for vertical shorts)."
        brandColors:
          type: array
          items:
            type: string
            pattern: "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"
          nullable: true
          example: ["#0000FF", "#FFD700"]
          description: "Optional: Hex color codes to influence the video's aesthetic."
        keywords:
          type: array
          items:
            type: string
          nullable: true
          example: ["innovation", "fintech", "startup"]
          description: "Optional: Additional keywords to guide the AI's content generation."

    AdvancedGenerateVideoRequest:
      allOf:
        - $ref: "#/components/schemas/GenerateVideoRequest"
        - type: object
          properties:
            voiceoverText:
              type: string
              nullable: true
              example: ": Your business, powered by intelligent finance."
              description: "Optional: Text for an AI-generated voiceover."
            voiceoverStyle:
              type: string
              enum: [male_professional, female_friendly, neutral_calm]
              nullable: true
              example: "male_professional"
              description: "Style/tone for the AI voiceover."
            backgroundMusicGenre:
              type: string
              enum: [corporate, uplifting, ambient, cinematic, none]
              nullable: true
              example: "corporate"
              description: "Genre of background music."
            audienceTarget:
              type: string
              enum: [general, corporate, investor, youth]
              nullable: true
              example: "corporate"
              description: "Target audience for the ad, influencing tone and visuals."
            callToAction:
              type: object
              nullable: true
              properties:
                text:
                  type: string
                  example: "Learn more at DemoBank.com/business"
                url:
                  type: string
                  format: uri
                  example: "https://demobank.com/business"
                displayTimeSeconds:
                  type: integer
                  minimum: 1
                  example: 5
              description: "Call-to-action text and URL to be displayed."
            brandAssets:
              type: array
              items:
                type: string
                format: uri
              nullable: true
              example: ["https://demobank.com/assets/corporate_logo.png"]
              description: "URLs to brand assets (e.g., logos, specific imagery) to be incorporated."

    VideoOperationStatus:
      type: object
      required:
        - operationId
        - status
        - progressPercentage
        - message
      properties:
        operationId:
          type: string
          example: "op-video-gen-12345-abcde"
          description: "The unique identifier for the video generation operation."
        status:
          type: string
          enum: [queued, generating, rendering, done, error]
          example: "rendering"
          description: "Current status of the video generation job."
        progressPercentage:
          type: integer
          minimum: 0
          maximum: 100
          example: 75
          description: "Estimated completion percentage (0-100)."
        message:
          type: string
          example: "Encoding final video with optimized codecs..."
          description: "A descriptive status message."
        errorMessage:
          type: string
          nullable: true
          example: "Failed to process prompt: 'Inappropriate content detected. Please adjust your request.'"
          description: "Error message if the operation failed."
        videoUri:
          type: string
          format: uri
          nullable: true
          example: "https://demobank-cdn.com/generated-videos/final/1a2b3c4d.mp4?sig=eyJ..."
          description: "Temporary, signed URL to the generated video asset (available when status is 'done')."
        previewImageUri:
          type: string
          format: uri
          nullable: true
          example: "https://demobank-cdn.com/generated-videos/preview/1a2b3c4d.png"
          description: "Temporary, signed URL to a preview image/thumbnail of the video."

    CorporateCardControls:
      type: object
      description: "Granular spending controls for a corporate card."
      properties:
        atmWithdrawals:
          type: boolean
          example: true
          description: "If true, ATM cash withdrawals are allowed."
        contactlessPayments:
          type: boolean
          example: true
          description: "If true, contactless payments are allowed."
        onlineTransactions:
          type: boolean
          example: true
          description: "If true, online transactions are allowed."
        internationalTransactions:
          type: boolean
          example: false
          description: "If true, international transactions are allowed."
        monthlyLimit:
          type: number
          format: float
          nullable: true
          example: 2500.00
          description: "Maximum spending limit per month (null for no limit)."
        dailyLimit:
          type: number
          format: float
          nullable: true
          example: 500.00
          description: "Maximum spending limit per day (null for no limit)."
        singleTransactionLimit:
          type: number
          format: float
          nullable: true
          example: 1000.00
          description: "Maximum amount for a single transaction (null for no limit)."
        merchantCategoryRestrictions:
          type: array
          items:
            type: string
          nullable: true
          example: ["Restaurants", "Travel", "Office Supplies"]
          description: "List of allowed merchant categories. If empty, all are allowed unless explicitly denied."
        vendorRestrictions:
          type: array
          items:
            type: string
          nullable: true
          example: ["Amazon", "Uber"]
          description: "List of allowed vendors/merchants by name."

    CorporateCard:
      type: object
      required:
        - id
        - holderName
        - cardNumberMask
        - expirationDate
        - status
        - frozen
        - cardType
        - controls
        - createdDate
        - currency
      properties:
        id:
          type: string
          format: uuid
          example: "corp_card_xyz987654"
          description: "Unique identifier for the corporate card."
        holderName:
          type: string
          example: "Alex Johnson"
          description: "Name of the card holder."
        associatedEmployeeId:
          type: string
          nullable: true
          example: "emp_ajohnson_007"
          description: "Optional: ID of the employee associated with this card."
        cardNumberMask:
          type: string
          example: "4111********1234"
          description: "Masked card number for display purposes."
        expirationDate:
          type: string
          format: date
          example: "2028-12-31"
          description: "Expiration date of the card (YYYY-MM-DD)."
        status:
          type: string
          enum: [Active, Suspended, Deactivated, Pending Activation]
          example: "Active"
          description: "Current status of the card."
        frozen:
          type: boolean
          example: false
          description: "If true, the card is temporarily frozen and cannot be used."
        cardType:
          type: string
          enum: [physical, virtual]
          example: "physical"
          description: "Type of the card (physical or virtual)."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
        spendingPolicyId:
          type: string
          nullable: true
          example: "policy_travel_eu"
          description: "Optional: ID of the overarching spending policy applied to this card."
        createdDate:
          type: string
          format: date-time
          example: "2023-01-15T09:00:00Z"
          description: "Timestamp when the card was created."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "Currency of the card's limits and transactions."

    VirtualCardCreationRequest:
      type: object
      required:
        - holderName
        - purpose
        - controls
        - expirationDate
      properties:
        holderName:
          type: string
          example: "Marketing Campaign Q4"
          description: "Name to appear on the virtual card."
        associatedEmployeeId:
          type: string
          nullable: true
          example: "emp_marketing_01"
          description: "Optional: ID of the employee or department this card is for."
        purpose:
          type: string
          example: "Online advertising for Q4 campaigns"
          description: "Brief description of the virtual card's purpose."
        controls:
          $ref: "#/components/schemas/CorporateCardControls"
          description: "Specific spending controls for this virtual card."
        expirationDate:
          type: string
          format: date
          example: "2025-12-31"
          description: "Expiration date for the virtual card (YYYY-MM-DD)."
        spendingPolicyId:
          type: string
          nullable: true
          example: "policy_marketing_fixed"
          description: "Optional: ID of a spending policy to link with this virtual card."

    FinancialAnomaly:
      type: object
      required:
        - id
        - description
        - severity
        - status
        - entityType
        - entityId
        - timestamp
        - riskScore
        - aiConfidenceScore
        - recommendedAction
      properties:
        id:
          type: string
          format: uuid
          example: "anom_risk-2024-07-21-D1E2F3"
          description: "Unique identifier for the detected anomaly."
        description:
          type: string
          example: "Unusual large transaction detected in an inactive account."
          description: "A brief summary of the anomaly."
        details:
          type: string
          nullable: true
          example: "Transaction of $15,000 to 'International Widgets Inc.' from account 'CHASE CHECKING 4567'. This account has been dormant for 6 months and typical transactions are under $500. High risk score due to dormancy and unusual amount/payee combination."
          description: "Detailed context and reasoning behind the anomaly detection."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "Critical"
          description: "AI-assessed severity of the anomaly."
        status:
          type: string
          enum: [New, Under Review, Escalated, Dismissed, Resolved]
          example: "New"
          description: "Current review status of the anomaly."
        entityType:
          type: string
          enum: [PaymentOrder, Transaction, Counterparty, CorporateCard, User, Invoice]
          example: "Transaction"
          description: "The type of financial entity related to the anomaly."
        entityId:
          type: string
          format: uuid
          example: "txn_quantum-2024-07-21-A7B8C9"
          description: "The ID of the specific entity (e.g., transaction, user, card) the anomaly is linked to."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-21T10:15:30Z"
          description: "Timestamp when the anomaly was detected."
        riskScore:
          type: integer
          minimum: 0
          maximum: 100
          example: 95
          description: "AI-assigned risk score (0-100), higher is more risky."
        aiConfidenceScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          example: 0.98
          description: "AI's confidence in its detection of the anomaly (0-1)."
        recommendedAction:
          type: string
          nullable: true
          example: "Immediately freeze associated corporate card and contact cardholder for verification."
          description: "AI-recommended immediate action to address the anomaly."
        relatedTransactions:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
          description: "List of IDs of other transactions or entities related to this anomaly."
        resolutionNotes:
          type: string
          nullable: true
          description: "Notes recorded during the resolution or dismissal of the anomaly."

    ComplianceAuditRequest:
      type: object
      required:
        - auditScope
        - startDate
        - endDate
        - regulatoryFrameworks
      properties:
        auditScope:
          type: string
          enum: [all_transactions, specific_accounts, specific_cards, all_users]
          example: "all_transactions"
          description: "The scope of the audit (e.g., all transactions, specific accounts)."
        startDate:
          type: string
          format: date
          example: "2024-01-01"
          description: "Start date for the audit period (inclusive)."
        endDate:
          type: string
          format: date
          example: "2024-06-30"
          description: "End date for the audit period (inclusive)."
        regulatoryFrameworks:
          type: array
          items:
            type: string
            enum: [AML, KYC, PCI-DSS, GDPR, CCPA, SOX, OFAC]
          description: "List of regulatory frameworks against which to audit."
        additionalContext:
          type: string
          nullable: true
          description: "Optional: Any additional context or specific areas of concern for the AI."

    ComplianceAuditReport:
      type: object
      required:
        - auditId
        - status
        - auditDate
        - periodCovered
        - overallComplianceScore
        - summary
        - findings
        - recommendedActions
      properties:
        auditId:
          type: string
          format: uuid
          example: "audit_corp_xyz789"
          description: "Unique identifier for the compliance audit."
        status:
          type: string
          enum: [processing, completed, failed]
          example: "completed"
          description: "Current status of the audit."
        auditDate:
          type: string
          format: date-time
          example: "2024-07-22T19:00:00Z"
          description: "Timestamp when the audit report was generated."
        periodCovered:
          type: object
          properties:
            startDate:
              type: string
              format: date
              example: "2024-01-01"
            endDate:
              type: string
              format: date
              example: "2024-06-30"
          description: "The period covered by this audit report."
        overallComplianceScore:
          type: integer
          minimum: 0
          maximum: 100
          example: 92
          description: "Overall compliance score (0-100), higher is better."
        summary:
          type: string
          example: "Overall high compliance across all transaction types. Minor areas for improvement identified in expense reporting related to receipt documentation."
          description: "A high-level summary of the audit findings."
        findings:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum: [finding, observation, recommendation]
                example: "recommendation"
              severity:
                type: string
                enum: [Low, Medium, High, Critical]
                example: "Low"
              description:
                type: string
                example: "Several small transactions lacked complete receipt documentation in the expense management system."
              relatedEntities:
                type: array
                items:
                  type: string
                nullable: true
                description: "IDs of entities related to this finding (e.g., transaction IDs)."
          description: "Detailed findings, observations, and recommendations."
        recommendedActions:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated actionable recommendations to improve compliance."

    SanctionScreeningRequest:
      type: object
      required:
        - name
        - entityType
        - country
      properties:
        name:
          type: string
          example: "John Doe"
          description: "Full name of the individual or organization to screen."
        entityType:
          type: string
          enum: [individual, organization]
          example: "individual"
          description: "The type of entity being screened."
        country:
          type: string
          pattern: '^[A-Z]{2}$'
          example: "US"
          description: "Two-letter ISO country code related to the entity (e.g., country of residence, registration)."
        dateOfBirth:
          type: string
          format: date
          nullable: true
          example: "1970-01-01"
          description: "Date of birth for individuals (YYYY-MM-DD)."
        identificationNumber:
          type: string
          nullable: true
          description: "Optional: Any government-issued identification number (e.g., passport, national ID)."
        address:
          $ref: "#/components/schemas/Address"
          nullable: true
          description: "Optional: Address details for enhanced screening."

    SanctionScreeningResponse:
      type: object
      required:
        - screeningId
        - matchFound
        - matchDetails
        - screeningTimestamp
        - status
      properties:
        screeningId:
          type: string
          format: uuid
          example: "screen_xyz456"
          description: "Unique identifier for this screening operation."
        matchFound:
          type: boolean
          example: false
          description: "True if any potential matches were found on sanction lists."
        matchDetails:
          type: array
          items:
            type: object
            properties:
              listName:
                type: string
                example: "OFAC SDN List"
                description: "Name of the sanction list where a match was found."
              matchedName:
                type: string
                example: "John Doe A.K.A. J. D."
                description: "The name on the sanction list that matched."
              reason:
                type: string
                example: "Possible alias match based on name and DOB."
                description: "Reason for the match (e.g., exact name, alias, partial match)."
              score:
                type: number
                format: float
                minimum: 0
                maximum: 1
                example: 0.85
                description: "Match confidence score (0-1)."
              publicUrl:
                type: string
                format: uri
                nullable: true
                description: "Optional: URL to public record of the sanction list entry."
          description: "Details of any potential or exact matches found."
        screeningTimestamp:
          type: string
          format: date-time
          example: "2024-07-22T19:30:00Z"
          description: "Timestamp when the screening was performed."
        status:
          type: string
          enum: [clear, potential_match, confirmed_match, error]
          example: "clear"
          description: "Overall status of the screening result."
        message:
          type: string
          nullable: true
          description: "An optional message providing more context on the status."

    CryptoWalletConnection:
      type: object
      required:
        - id
        - walletProvider
        - walletAddress
        - blockchainNetwork
        - status
        - lastSynced
        - readAccessGranted
        - writeAccessGranted
      properties:
        id:
          type: string
          format: uuid
          example: "wallet_conn_eth_0xabc123"
          description: "Unique identifier for this wallet connection."
        walletProvider:
          type: string
          example: "MetaMask"
          description: "Name of the wallet provider (e.g., MetaMask, Ledger, Phantom)."
        walletAddress:
          type: string
          example: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
          description: "Public address of the connected cryptocurrency wallet."
        blockchainNetwork:
          type: string
          example: "Ethereum"
          description: "The blockchain network this wallet is primarily connected to (e.g., Ethereum, Solana, Polygon)."
        status:
          type: string
          enum: [connected, disconnected, pending_verification, error]
          example: "connected"
          description: "Current status of the wallet connection."
        lastSynced:
          type: string
          format: date-time
          example: "2024-07-22T13:00:00Z"
          description: "Timestamp when the wallet's data was last synchronized."
        readAccessGranted:
          type: boolean
          example: true
          description: "Indicates if read access (balances, NFTs) is granted."
        writeAccessGranted:
          type: boolean
          example: false
          description: "Indicates if write access (transactions) is granted. Requires higher permission/security."

    ConnectWalletRequest:
      type: object
      required:
        - walletAddress
        - walletProvider
        - blockchainNetwork
        - signedMessage
      properties:
        walletAddress:
          type: string
          example: "0x123abc456def7890..."
          description: "The public address of the cryptocurrency wallet."
        walletProvider:
          type: string
          example: "MetaMask"
          description: "The name of the wallet provider (e.g., MetaMask, Phantom)."
        blockchainNetwork:
          type: string
          example: "Ethereum"
          description: "The blockchain network for this wallet (e.g., Ethereum, Solana)."
        signedMessage:
          type: string
          description: "A message cryptographically signed by the wallet owner to prove ownership/intent."
        requestWriteAccess:
          type: boolean
          default: false
          example: true
          description: "If true, requests write access to initiate transactions from this wallet."

    CryptoAssetBalance:
      type: object
      required:
        - assetSymbol
        - assetName
        - balance
        - usdValue
      properties:
        assetSymbol:
          type: string
          example: "ETH"
          description: "Symbol of the crypto asset (e.g., ETH, BTC, USDC)."
        assetName:
          type: string
          example: "Ethereum"
          description: "Full name of the crypto asset."
        balance:
          type: number
          format: float
          example: 2.5
          description: "Current balance of the asset in the wallet."
        usdValue:
          type: number
          format: float
          example: 7500.00
          description: "Current USD value of the asset balance."
        contractAddress:
          type: string
          nullable: true
          example: "0x..."
          description: "The contract address for ERC-20 tokens or similar."
        network:
          type: string
          nullable: true
          example: "Ethereum"
          description: "The blockchain network the asset resides on (if different from wallet's primary)."

    NFTAsset:
      type: object
      required:
        - id
        - collectionName
        - name
        - imageUrl
        - blockchainNetwork
        - ownerAddress
        - contractAddress
        - tokenId
      properties:
        id:
          type: string
          format: uuid
          example: "nft_bored_ape_yacht_club_1234"
          description: "Unique identifier for the NFT within the system."
        collectionName:
          type: string
          example: "Bored Ape Yacht Club"
          description: "Name of the NFT collection."
        name:
          type: string
          example: "Bored Ape #1234"
          description: "Name of the specific NFT."
        description:
          type: string
          nullable: true
          example: "A unique digital collectible from the Bored Ape Yacht Club series."
          description: "Description of the NFT."
        imageUrl:
          type: string
          format: uri
          example: "https://opensea.io/assets/ethereum/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d/1234"
          description: "URL to the NFT's image."
        blockchainNetwork:
          type: string
          example: "Ethereum"
          description: "Blockchain network on which the NFT exists."
        ownerAddress:
          type: string
          example: "0x25a6f8b7C4dC6f5F3E7A3D7E8C9B0A1B2C3D4E5F"
          description: "Blockchain address of the current owner."
        contractAddress:
          type: string
          example: "0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d"
          description: "Blockchain contract address of the NFT collection."
        tokenId:
          type: string
          example: "1234"
          description: "Unique ID of the token within its contract."
        lastSalePriceUSD:
          type: number
          format: float
          nullable: true
          example: 150000.00
          description: "Last known sale price in USD."
        estimatedValueUSD:
          type: number
          format: float
          nullable: true
          example: 160000.00
          description: "AI-estimated current market value in USD."
        attributes:
          type: array
          items:
            type: object
            properties:
              trait_type:
                type: string
              value:
                type: string
          nullable: true
          description: "Key-value attributes of the NFT (e.g., rarity traits)."

    CryptoTransferRequest:
      type: object
      required:
        - sourceWalletId
        - recipientAddress
        - amount
        - assetSymbol
        - blockchainNetwork
      properties:
        sourceWalletId:
          type: string
          example: "wallet_conn_eth_0xabc123"
          description: "ID of the connected wallet from which to send funds."
        recipientAddress:
          type: string
          example: "0xdef4567890abcdef1234567890abcdef1234567890"
          description: "The recipient's blockchain address."
        amount:
          type: number
          format: float
          example: 0.1
          description: "The amount of cryptocurrency to transfer."
        assetSymbol:
          type: string
          example: "ETH"
          description: "Symbol of the crypto asset to transfer (e.g., ETH, USDC)."
        blockchainNetwork:
          type: string
          example: "Ethereum"
          description: "The blockchain network for the transfer."
        gasPriceGwei:
          type: integer
          nullable: true
          example: 50
          description: "Optional: Gas price in Gwei for Ethereum-based transactions."
        memo:
          type: string
          nullable: true
          example: "Payment for services"
          description: "Optional: A short memo or note for the transaction."

    CryptoTransferStatus:
      type: object
      required:
        - transferId
        - status
      properties:
        transferId:
          type: string
          format: uuid
          example: "crypto_txn_xyz789"
          description: "Unique identifier for this cryptocurrency transfer operation."
        status:
          type: string
          enum: [pending_signature, pending_blockchain_confirmation, completed, failed, cancelled]
          example: "pending_signature"
          description: "Current status of the transfer."
        blockchainTxnHash:
          type: string
          nullable: true
          example: "0xabc123def456..."
          description: "The blockchain transaction hash, if available and confirmed."
        message:
          type: string
          nullable: true
          example: "Please confirm the transaction in your MetaMask wallet."
          description: "A descriptive message about the transfer status."

    InternationalPaymentRequest:
      type: object
      required:
        - sourceAccountId
        - amount
        - sourceCurrency
        - targetCurrency
        - beneficiary
        - purpose
      properties:
        sourceAccountId:
          type: string
          format: uuid
          example: "acc_chase_checking_4567"
          description: "The ID of the user's source account for the payment."
        amount:
          type: number
          format: float
          example: 5000.00
          description: "The amount to send in the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "The ISO 4217 currency code of the source funds."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "EUR"
          description: "The ISO 4217 currency code for the beneficiary's currency."
        beneficiary:
          type: object
          required:
            - name
            - address
            - bankName
          properties:
            name:
              type: string
              example: "Maria Schmidt"
              description: "Full name of the beneficiary."
            address:
              type: string
              example: "Hauptstrasse 1, 10115 Berlin, Germany"
              description: "Full address of the beneficiary."
            bankName:
              type: string
              example: "Deutsche Bank"
              description: "Name of the beneficiary's bank."
            iban:
              type: string
              nullable: true
              example: "DE89370400440532013000"
              description: "IBAN for Eurozone transfers."
            swiftBic:
              type: string
              nullable: true
              example: "DEUTDEFF"
              description: "SWIFT/BIC code for international transfers."
            accountNumber:
              type: string
              nullable: true
              description: "Account number (if IBAN/SWIFT not applicable)."
            routingNumber:
              type: string
              nullable: true
              description: "Routing number (if applicable, e.g., for US transfers)."
          description: "Details of the payment beneficiary."
        purpose:
          type: string
          example: "Vendor payment for Q2 services."
          description: "Purpose of the payment."
        fxRateLock:
          type: boolean
          default: false
          example: true
          description: "If true, attempts to lock the quoted FX rate for a short period."
        fxRateProvider:
          type: string
          enum: [proprietary_ai, market_rate]
          default: "proprietary_ai"
          example: "proprietary_ai"
          description: "Indicates whether to use AI-optimized FX rates or standard market rates."
        reference:
          type: string
          nullable: true
          description: "Optional: Your internal reference for this payment."

    InternationalPaymentStatus:
      type: object
      required:
        - paymentId
        - status
        - sourceAmount
        - sourceCurrency
        - targetAmount
        - targetCurrency
        - fxRateApplied
      properties:
        paymentId:
          type: string
          format: uuid
          example: "int_pmt_xyz7890"
          description: "Unique identifier for the international payment."
        status:
          type: string
          enum: [in_progress, held_for_review, completed, failed, cancelled]
          example: "in_progress"
          description: "Current processing status of the payment."
        sourceAmount:
          type: number
          format: float
          example: 5000.00
          description: "The amount sent in the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "The source currency code."
        targetAmount:
          type: number
          format: float
          example: 4500.00
          description: "The amount received by the beneficiary in the target currency."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "EUR"
          description: "The target currency code."
        fxRateApplied:
          type: number
          format: float
          example: 0.90
          description: "The foreign exchange rate applied (target per source currency)."
        estimatedCompletionTime:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-23T15:00:00Z"
          description: "Estimated time when the payment will be completed."
        trackingUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/payments/track/xyz7890"
          description: "URL to track the payment's progress."
        feesApplied:
          type: number
          format: float
          nullable: true
          example: 15.00
          description: "Total fees applied to the payment."
        message:
          type: string
          nullable: true
          description: "An optional message providing more context on the status (e.g., reason for hold)."

    FxRateResponse:
      type: object
      required:
        - baseCurrency
        - targetCurrency
        - currentRate
      properties:
        baseCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "The base currency code."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "EUR"
          description: "The target currency code."
        currentRate:
          type: object
          properties:
            bid:
              type: number
              format: float
              example: 0.9025
              description: "Current bid rate (price at which a currency dealer will buy the base currency)."
            ask:
              type: number
              format: float
              example: 0.9035
              description: "Current ask rate (price at which a currency dealer will sell the base currency)."
            mid:
              type: number
              format: float
              example: 0.9030
              description: "Mid-market rate (average of bid and ask)."
            timestamp:
              type: string
              format: date-time
              example: "2024-07-22T13:30:00Z"
              description: "Timestamp of the current rate."
          description: "Real-time foreign exchange rates."
        predictiveRates:
          type: array
          items:
            type: object
            properties:
              date:
                type: string
                format: date
                example: "2024-07-29"
                description: "Date for the predicted rate."
              predictedMidRate:
                type: number
                format: float
                example: 0.9050
                description: "AI-predicted mid-market rate."
              confidenceIntervalLower:
                type: number
                format: float
                example: 0.9010
                description: "Lower bound of the AI's confidence interval for the predicted rate."
              confidenceIntervalUpper:
                type: number
                format: float
                example: 0.9090
                description: "Upper bound of the AI's confidence interval for the predicted rate."
              aiModelConfidence:
                type: number
                format: float
                minimum: 0
                maximum: 1
                example: 0.88
                description: "AI model's confidence in the prediction (0-1)."
          nullable: true
          description: "AI-predicted foreign exchange rates for future dates."
        historicalVolatility:
          type: object
          nullable: true
          properties:
            past7Days:
              type: number
              format: float
              example: 0.005
              description: "Historical volatility over the past 7 days."
            past30Days:
              type: number
              format: float
              example: 0.012
              description: "Historical volatility over the past 30 days."

    CurrencyConversionRequest:
      type: object
      required:
        - sourceAccountId
        - sourceAmount
        - sourceCurrency
        - targetCurrency
      properties:
        sourceAccountId:
          type: string
          format: uuid
          example: "acc_chase_checking_4567"
          description: "The ID of the account from which funds will be converted."
        targetAccountId:
          type: string
          format: uuid
          nullable: true
          example: "acc_euro_savings_9876"
          description: "Optional: The ID of the account to deposit the converted funds. If null, funds are held in a wallet/balance."
        sourceAmount:
          type: number
          format: float
          example: 1000.00
          description: "The amount to convert from the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "The ISO 4217 currency code of the source funds."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "EUR"
          description: "The ISO 4217 currency code for the target currency."
        fxRateLock:
          type: boolean
          default: false
          example: true
          description: "If true, attempts to lock the quoted FX rate for a short period."

    CurrencyConversionResponse:
      type: object
      required:
        - conversionId
        - status
        - sourceAmount
        - sourceCurrency
        - targetAmount
        - fxRateApplied
        - conversionTimestamp
      properties:
        conversionId:
          type: string
          format: uuid
          example: "fx_conv_abc123"
          description: "Unique identifier for the currency conversion."
        status:
          type: string
          enum: [completed, pending, failed]
          example: "completed"
          description: "Status of the currency conversion."
        sourceAmount:
          type: number
          format: float
          example: 1000.00
          description: "The amount converted from the source currency."
        sourceCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "The source currency code."
        targetAmount:
          type: number
          format: float
          example: 920.50
          description: "The amount converted into the target currency."
        targetCurrency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "EUR"
          description: "The target currency code."
        fxRateApplied:
          type: number
          format: float
          example: 0.9205
          description: "The foreign exchange rate applied (target per source currency)."
        feesApplied:
          type: number
          format: float
          nullable: true
          example: 5.00
          description: "Any fees applied to the conversion."
        conversionTimestamp:
          type: string
          format: date-time
          example: "2024-07-22T13:45:00Z"
          description: "Timestamp when the conversion was completed."
        transactionId:
          type: string
          format: uuid
          nullable: true
          example: "txn_fx_conv_abc123-20240722"
          description: "The ID of the internal transaction representing this conversion."

    CarbonFootprintReport:
      type: object
      required:
        - reportId
        - period
        - totalCarbonFootprintKgCO2e
        - breakdownByCategory
        - aiInsights
      properties:
        reportId:
          type: string
          format: uuid
          example: "cf_report_2024-Q2"
          description: "Unique identifier for the carbon footprint report."
        period:
          type: string
          example: "April - June 2024"
          description: "The period covered by the report."
        totalCarbonFootprintKgCO2e:
          type: number
          format: float
          example: 1250.7
          description: "Total estimated carbon footprint in kilograms of CO2 equivalent."
        breakdownByCategory:
          type: array
          items:
            type: object
            properties:
              category:
                type: string
                example: "Transportation"
              carbonFootprintKgCO2e:
                type: number
                format: float
                example: 450.2
              percentage:
                type: number
                format: float
                example: 36.0
          description: "Breakdown of carbon footprint by spending categories."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven insights and recommendations for reducing carbon footprint."
        offsetRecommendations:
          type: array
          items:
            type: object
            properties:
              project:
                type: string
                example: "Amazon Reforestation Project"
              costPerTonUSD:
                type: number
                format: float
                example: 25.00
              offsetAmountKgCO2e:
                type: number
                format: float
                example: 1250.7
              totalCostUSD:
                type: number
                format: float
                example: 31.27
          nullable: true
          description: "Recommendations for purchasing carbon offsets."

    InvestmentESGImpact:
      type: object
      required:
        - portfolioId
        - overallESGScore
        - benchmarkESGScore
        - breakdownByESGFactors
        - topESGHoldings
        - lowestESGHoldings
        - aiRecommendations
      properties:
        portfolioId:
          type: string
          format: uuid
          example: "portfolio_equity_growth"
          description: "ID of the investment portfolio analyzed."
        overallESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          example: 7.8
          description: "Overall ESG score of the entire portfolio (0-10)."
        benchmarkESGScore:
          type: number
          format: float
          minimum: 0
          maximum: 10
          example: 6.5
          description: "Average ESG score of a relevant market benchmark for comparison."
        breakdownByESGFactors:
          type: object
          properties:
            environmentalScore:
              type: number
              format: float
              minimum: 0
              maximum: 10
              example: 7.0
            socialScore:
              type: number
              format: float
              minimum: 0
              maximum: 10
              example: 8.5
            governanceScore:
              type: number
              format: float
              minimum: 0
              maximum: 10
              example: 8.0
          description: "Breakdown of the portfolio's ESG score by individual factors."
        topESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol:
                type: string
              assetName:
                type: string
              esgScore:
                type: number
                format: float
          description: "Top holdings in the portfolio by ESG score."
        lowestESGHoldings:
          type: array
          items:
            type: object
            properties:
              assetSymbol:
                type: string
              assetName:
                type: string
              esgScore:
                type: number
                format: float
          description: "Lowest holdings in the portfolio by ESG score."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-driven recommendations to improve the portfolio's ESG impact."

    CarbonOffsetPurchaseRequest:
      type: object
      required:
        - amountKgCO2e
        - paymentAccountId
        - offsetProject
      properties:
        amountKgCO2e:
          type: number
          format: float
          minimum: 1
          example: 500.0
          description: "The amount of carbon dioxide equivalent to offset in kilograms."
        paymentAccountId:
          type: string
          format: uuid
          example: "acc_chase_checking_4567"
          description: "The ID of the user's account to use for payment."
        offsetProject:
          type: string
          nullable: true
          example: "Verified Carbon Standard Project X"
          description: "Optional: The specific carbon offset project to support."

    CarbonOffsetPurchaseResponse:
      type: object
      required:
        - purchaseId
        - amountOffsetKgCO2e
        - totalCostUSD
        - purchaseDate
      properties:
        purchaseId:
          type: string
          format: uuid
          example: "co_purchase_xyz123"
          description: "Unique identifier for the carbon offset purchase."
        amountOffsetKgCO2e:
          type: number
          format: float
          example: 500.0
          description: "The amount of carbon dioxide equivalent offset by this purchase."
        totalCostUSD:
          type: number
          format: float
          example: 12.50
          description: "Total cost of the carbon offset purchase in USD."
        projectSupported:
          type: string
          nullable: true
          example: "Verified Carbon Standard Project X"
          description: "The carbon offset project supported."
        transactionId:
          type: string
          format: uuid
          nullable: true
          example: "txn_offset_12345"
          description: "The ID of the internal financial transaction for this purchase."
        purchaseDate:
          type: string
          format: date-time
          example: "2024-07-22T14:00:00Z"
          description: "Timestamp of the purchase."
        certificateUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/certificates/co_purchase_xyz123.pdf"
          description: "URL to the official carbon offset certificate."

    LoanApplicationRequest:
      type: object
      required:
        - loanAmount
        - loanPurpose
        - repaymentTermMonths
      properties:
        loanAmount:
          type: number
          format: float
          minimum: 1
          example: 10000.00
          description: "The desired loan amount."
        loanPurpose:
          type: string
          enum: [home_improvement, debt_consolidation, medical_expense, education, auto_purchase, other]
          example: "home_improvement"
          description: "The purpose of the loan."
        repaymentTermMonths:
          type: integer
          minimum: 1
          example: 36
          description: "The desired repayment term in months."
        additionalNotes:
          type: string
          nullable: true
          example: "Funds needed to replace a broken HVAC system."
          description: "Optional notes or details for the application."
        coApplicant:
          type: object
          properties:
            name:
              type: string
              example: "Jane Doe"
            email:
              type: string
              format: email
              example: "jane.doe@example.com"
            income:
              type: number
              format: float
              example: 75000.00
          nullable: true
          description: "Optional: Details of a co-applicant for the loan."

    LoanOffer:
      type: object
      required:
        - offerId
        - offerType
        - amount
        - interestRate
        - expirationDate
        - isPreApproved
      properties:
        offerId:
          type: string
          format: uuid
          example: "offer_pers_loan_001"
          description: "Unique identifier for the loan offer."
        offerType:
          type: string
          enum: [personal_loan, auto_loan, mortgage, credit_line, microloan]
          example: "personal_loan"
          description: "Type of loan being offered."
        amount:
          type: number
          format: float
          example: 10000.00
          description: "The offered loan amount."
        interestRate:
          type: number
          format: float
          example: 6.5
          description: "Annual interest rate offered (as a percentage)."
        repaymentTermMonths:
          type: integer
          nullable: true
          example: 36
          description: "Repayment term in months (if applicable)."
        monthlyPayment:
          type: number
          format: float
          nullable: true
          example: 306.45
          description: "Estimated monthly payment (if applicable)."
        originationFee:
          type: number
          format: float
          nullable: true
          example: 150.00
          description: "Any origination fees for the loan."
        totalRepayable:
          type: number
          format: float
          nullable: true
          example: 11032.20
          description: "Total amount repayable over the loan term."
        expirationDate:
          type: string
          format: date
          example: "2024-08-31"
          description: "Date the offer expires."
        isPreApproved:
          type: boolean
          example: false
          description: "Indicates if this is a pre-approved offer."
        aiPersonalizationScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          nullable: true
          example: 0.90
          description: "AI's score for how well this offer is personalized to the user (0-1)."
        termsAndConditionsUrl:
          type: string
          format: uri
          nullable: true
          description: "URL to the full terms and conditions of the loan offer."

    AIUnderwritingResult:
      type: object
      required:
        - decision
        - reason
        - aiConfidence
      properties:
        decision:
          type: string
          enum: [approved, declined, referred_to_human]
          example: "approved"
          description: "The AI's underwriting decision."
        reason:
          type: string
          example: "Strong credit score and consistent income history."
          description: "Reasoning for the AI's decision."
        recommendedInterestRate:
          type: number
          format: float
          nullable: true
          example: 6.5
          description: "The interest rate recommended by the AI."
        maxApprovedAmount:
          type: number
          format: float
          nullable: true
          example: 12000.00
          description: "The maximum amount the AI is willing to approve."
        aiConfidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          example: 0.95
          description: "AI's confidence in its underwriting decision (0-1)."

    LoanApplicationStatus:
      type: object
      required:
        - applicationId
        - status
        - loanAmountRequested
        - loanPurpose
        - applicationDate
        - nextSteps
      properties:
        applicationId:
          type: string
          format: uuid
          example: "loan_app_creditflow-123"
          description: "Unique identifier for the loan application."
        status:
          type: string
          enum: [submitted, underwriting, approved, declined, pending_acceptance, funded, cancelled]
          example: "underwriting"
          description: "Current status of the loan application."
        loanAmountRequested:
          type: number
          format: float
          example: 10000.00
          description: "The amount originally requested in the application."
        loanPurpose:
          type: string
          enum: [home_improvement, debt_consolidation, medical_expense, education, auto_purchase, other]
          example: "home_improvement"
          description: "The purpose of the loan."
        applicationDate:
          type: string
          format: date-time
          example: "2024-07-22T15:00:00Z"
          description: "Timestamp when the application was submitted."
        aiUnderwritingResult:
          $ref: "#/components/schemas/AIUnderwritingResult"
          nullable: true
          description: "The outcome of the AI underwriting process."
        offerDetails:
          $ref: "#/components/schemas/LoanOffer"
          nullable: true
          description: "Details of the loan offer, if approved."
        nextSteps:
          type: string
          example: "Your application is currently under review by our AI. You will receive an update within minutes."
          description: "Guidance on the next actions for the user."

    WebhookSubscription:
      type: object
      required:
        - id
        - callbackUrl
        - events
        - status
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          example: "whsub_devtool_finance_events"
          description: "Unique identifier for the webhook subscription."
        callbackUrl:
          type: string
          format: uri
          example: "https://my-app.com/webhooks/demobank-events"
          description: "The URL where webhook events will be sent."
        events:
          type: array
          items:
            type: string
          example: ["transaction.created", "account.updated", "user.login_failed"]
          description: "List of event types subscribed to."
        status:
          type: string
          enum: [active, paused, suspended]
          example: "active"
          description: "Current status of the webhook subscription."
        secret:
          type: string
          nullable: true
          description: "The shared secret used to sign webhook payloads, for verification. Only returned on creation."
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T10:00:00Z"
          description: "Timestamp when the subscription was created."
        lastTriggered:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T17:00:00Z"
          description: "Timestamp of the last successful webhook delivery."
        failureCount:
          type: integer
          example: 0
          description: "Number of consecutive failed delivery attempts."

    WebhookSubscriptionCreationRequest:
      type: object
      required:
        - callbackUrl
        - events
      properties:
        callbackUrl:
          type: string
          format: uri
          example: "https://my-analytics-app.com/webhooks/transactions"
          description: "The URL to which webhook events will be sent."
        events:
          type: array
          items:
            type: string
          example: ["transaction.created", "transaction.updated"]
          description: "List of event types to subscribe to."
        secret:
          type: string
          nullable: true
          description: "Optional: A custom shared secret for verifying webhook payloads. If omitted, one will be generated."

    WebhookSubscriptionUpdateRequest:
      type: object
      properties:
        callbackUrl:
          type: string
          format: uri
          example: "https://my-new-app.com/webhooks/demobank-events"
          description: "Updated URL where webhook events will be sent."
        events:
          type: array
          items:
            type: string
          example: ["transaction.created", "user.login_failed"]
          description: "Updated list of event types subscribed to."
        status:
          type: string
          enum: [active, paused, suspended]
          example: "paused"
          description: "Updated status of the webhook subscription."

    ApiKey:
      type: object
      required:
        - id
        - prefix
        - status
        - createdAt
        - scopes
      properties:
        id:
          type: string
          format: uuid
          example: "api_key_dev_app_01"
          description: "Unique identifier for the API key."
        prefix:
          type: string
          example: "db_pk_test_"
          description: "The non-secret prefix of the API key, used for identification."
        status:
          type: string
          enum: [active, revoked, expired]
          example: "active"
          description: "Current status of the API key."
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T10:00:00Z"
          description: "Timestamp when the API key was created."
        expiresAt:
          type: string
          format: date-time
          nullable: true
          example: "2025-01-01T10:00:00Z"
          description: "Timestamp when the API key will expire, if set."
        scopes:
          type: array
          items:
            type: string
          example: ["read:accounts", "write:payments"]
          description: "List of permissions granted to this API key."
        lastUsed:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T17:15:00Z"
          description: "Timestamp of the last time this API key was used."

    ApiKeyCreationRequest:
      type: object
      required:
        - name
        - scopes
      properties:
        name:
          type: string
          example: "My Analytics Service Key"
          description: "A descriptive name for the API key."
        scopes:
          type: array
          items:
            type: string
          example: ["read:accounts", "read:transactions"]
          description: "List of permissions to grant to this API key."
        expiresInDays:
          type: integer
          minimum: 1
          nullable: true
          example: 90
          description: "Optional: Number of days until the API key expires. If omitted, it will not expire."

    KYCDocumentSubmission:
      type: object
      required:
        - documentType
        - documentNumber
        - issueDate
        - expirationDate
        - countryOfIssue
      properties:
        documentType:
          type: string
          enum: [drivers_license, passport, national_id, utility_bill, bank_statement, other]
          example: "drivers_license"
          description: "The type of KYC document being submitted."
        documentFrontImage:
          type: string
          format: byte
          nullable: true
          description: "Base64 encoded image of the front of the document. Use 'application/json' with base64 string, or 'multipart/form-data' for direct file upload."
        documentBackImage:
          type: string
          format: byte
          nullable: true
          description: "Base64 encoded image of the back of the document (if applicable)."
        documentNumber:
          type: string
          example: "ABC12345"
          description: "The identification number on the document."
        issueDate:
          type: string
          format: date
          example: "2020-01-01"
          description: "The issue date of the document (YYYY-MM-DD)."
        expirationDate:
          type: string
          format: date
          example: "2030-01-01"
          description: "The expiration date of the document (YYYY-MM-DD)."
        countryOfIssue:
          type: string
          pattern: '^[A-Z]{2}$'
          example: "US"
          description: "The two-letter ISO country code where the document was issued."
        additionalDocuments:
          type: array
          items:
            type: string
            format: byte
          nullable: true
          description: "Array of additional documents (e.g., utility bills) as base64 encoded images."

    KYCStatus:
      type: object
      required:
        - userId
        - overallStatus
        - lastSubmissionDate
        - requiredActions
      properties:
        userId:
          type: string
          format: uuid
          example: "user-quantum-visionary-001"
          description: "The ID of the user whose KYC status is being retrieved."
        overallStatus:
          type: string
          enum: [not_submitted, in_review, verified, rejected, requires_more_info]
          example: "in_review"
          description: "Overall status of the KYC verification process."
        lastSubmissionDate:
          type: string
          format: date-time
          nullable: true
          example: "2024-07-22T18:00:00Z"
          description: "Timestamp of the last KYC document submission."
        rejectionReason:
          type: string
          nullable: true
          example: "Document image unclear."
          description: "Reason for rejection if status is 'rejected'."
        requiredActions:
          type: array
          items:
            type: string
          example: ["Resubmit clearer ID image"]
          description: "List of actions required from the user if status is 'requires_more_info'."
        verifiedTier:
          type: string
          nullable: true
          enum: [bronze, silver, gold, platinum]
          example: "gold"
          description: "The KYC verification tier achieved (e.g., for different service levels)."

    CashFlowForecast:
      type: object
      required:
        - forecastId
        - period
        - currency
        - overallStatus
        - projectedBalances
        - inflowForecast
        - outflowForecast
        - liquidityRiskScore
        - aiRecommendations
      properties:
        forecastId:
          type: string
          format: uuid
          example: "cf_forecast_corp_Q3_2024"
          description: "Unique identifier for the cash flow forecast report."
        period:
          type: string
          example: "Q3 2024 (July - September)"
          description: "The period covered by the forecast."
        currency:
          type: string
          pattern: '^[A-Z]{3}$'
          example: "USD"
          description: "The currency of the forecast."
        overallStatus:
          type: string
          enum: [positive_outlook, negative_outlook, stable, uncertain]
          example: "positive_outlook"
          description: "Overall assessment of the projected cash flow."
        projectedBalances:
          type: array
          items:
            type: object
            properties:
              date:
                type: string
                format: date
                example: "2024-07-31"
              projectedCash:
                type: number
                format: float
                example: 1500000.00
              scenario:
                type: string
                enum: [most_likely, best_case, worst_case]
                example: "most_likely"
          description: "Projected cash balances at key dates, potentially across different scenarios."
        inflowForecast:
          type: object
          properties:
            totalProjected:
              type: number
              format: float
              example: 3000000.00
            bySource:
              type: array
              items:
                type: object
                properties:
                  source:
                    type: string
                    example: "Client Payments"
                  amount:
                    type: number
                    format: float
                    example: 2500000.00
          description: "Forecast of cash inflows by source."
        outflowForecast:
          type: object
          properties:
            totalProjected:
              type: number
              format: float
              example: 2000000.00
            byCategory:
              type: array
              items:
                type: object
                properties:
                  category:
                    type: string
                    example: "Payroll"
                  amount:
                    type: number
                    format: float
                    example: 1000000.00
          description: "Forecast of cash outflows by category."
        liquidityRiskScore:
          type: integer
          minimum: 0
          maximum: 100
          example: 15
          description: "AI-assessed risk score for liquidity (0-100, lower is better)."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated recommendations for treasury optimization."

    LiquidityPositions:
      type: object
      required:
        - snapshotTime
        - totalLiquidAssets
        - currencyBreakdown
        - accountTypeBreakdown
        - shortTermInvestments
        - aiLiquidityAssessment
        - aiRecommendations
      properties:
        snapshotTime:
          type: string
          format: date-time
          example: "2024-07-22T18:30:00Z"
          description: "Timestamp of the liquidity snapshot."
        totalLiquidAssets:
          type: number
          format: float
          example: 5200000.00
          description: "Total value of all liquid assets across the organization."
        currencyBreakdown:
          type: array
          items:
            type: object
            properties:
              currency:
                type: string
                pattern: '^[A-Z]{3}$'
                example: "USD"
              amount:
                type: number
                format: float
                example: 4000000.00
              percentage:
                type: number
                format: float
                example: 76.9
          description: "Breakdown of liquid assets by currency."
        accountTypeBreakdown:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: "Checking"
              amount:
                type: number
                format: float
                example: 3500000.00
          description: "Breakdown of liquid assets by account type."
        shortTermInvestments:
          type: object
          properties:
            totalValue:
              type: number
              format: float
              example: 1200000.00
            maturingNext30Days:
              type: number
              format: float
              example: 300000.00
          description: "Details on short-term investments contributing to liquidity."
        aiLiquidityAssessment:
          type: object
          properties:
            status:
              type: string
              enum: [optimal, sufficient, tight, critical]
              example: "optimal"
            message:
              type: string
              example: "Current liquidity is optimal and sufficient for all short-term obligations and planned expenditures. High flexibility for strategic investments."
          description: "AI's overall assessment of liquidity."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          description: "AI-generated recommendations for liquidity management."

    FraudRuleCriteria:
      type: object
      description: "Criteria that define when a fraud rule should trigger."
      properties:
        transactionAmountMin:
          type: number
          format: float
          nullable: true
          example: 5000
          description: "Minimum transaction amount to consider."
        accountInactivityDays:
          type: integer
          nullable: true
          example: 90
          description: "Number of days an account must be inactive for the rule to apply."
        transactionType:
          type: string
          enum: [debit, credit]
          nullable: true
          example: "debit"
          description: "Specific transaction type (e.g., debit, credit)."
        countryOfOrigin:
          type: array
          items:
            type: string
          nullable: true
          example: ["US", "CA"]
          description: "List of ISO 2-letter country codes for transaction origin."
        geographicDistanceKm:
          type: integer
          nullable: true
          example: 5000
          description: "Minimum geographic distance (in km) from recent activity for anomaly."
        lastLoginDays:
          type: integer
          nullable: true
          example: 7
          description: "Number of days since last user login for anomaly detection."
        noTravelNotification:
          type: boolean
          nullable: true
          example: true
          description: "If true, rule applies only if no prior travel notification was made."
        paymentCountMin:
          type: integer
          nullable: true
          example: 3
          description: "Minimum number of payments in a timeframe."
        timeframeHours:
          type: integer
          nullable: true
          example: 24
          description: "Timeframe in hours for payment count or other event aggregations."
        recipientNew:
          type: boolean
          nullable: true
          example: true
          description: "If true, recipient must be a new payee."
        recipientCountryRiskLevel:
          type: array
          items:
            type: string
            enum: [Low, Medium, High, Very High]
          nullable: true
          description: "List of risk levels for recipient countries."

    FraudRuleAction:
      type: object
      description: "Action to take when a fraud rule is triggered."
      required:
        - type
        - details
      properties:
        type:
          type: string
          enum: [block, alert, auto_review, manual_review, request_mfa]
          example: "block"
          description: "Type of action to perform."
        details:
          type: string
          example: "Block transaction and send critical alert to fraud team."
          description: "Details or instructions for the action."
        targetTeam:
          type: string
          nullable: true
          example: "Fraud Prevention Team"
          description: "The team or department to notify for alerts/reviews."

    FraudRule:
      type: object
      required:
        - id
        - name
        - description
        - status
        - severity
        - criteria
        - action
        - createdBy
        - createdAt
        - lastUpdated
      properties:
        id:
          type: string
          format: uuid
          example: "fraud_rule_high_value_inactive"
          description: "Unique identifier for the fraud detection rule."
        name:
          type: string
          example: "High Value Transaction from Inactive Account"
          description: "Name of the fraud rule."
        description:
          type: string
          example: "Flags transactions over a certain threshold from accounts that have been inactive for a specified period."
          description: "Detailed description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          example: "active"
          description: "Current status of the rule."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "High"
          description: "Severity level when this rule is triggered."
        criteria:
          $ref: "#/components/schemas/FraudRuleCriteria"
        action:
          $ref: "#/components/schemas/FraudRuleAction"
        createdBy:
          type: string
          example: "system:ai-risk-engine"
          description: "Identifier of who created the rule (e.g., user ID, 'system:ai-risk-engine')."
        createdAt:
          type: string
          format: date-time
          example: "2024-05-01T10:00:00Z"
          description: "Timestamp when the rule was created."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-20T11:30:00Z"
          description: "Timestamp when the rule was last updated."

    FraudRuleCreationRequest:
      type: object
      required:
        - name
        - description
        - status
        - severity
        - criteria
        - action
      properties:
        name:
          type: string
          example: "Suspicious International Payment Pattern"
          description: "Name of the new fraud rule."
        description:
          type: string
          example: "Detects multiple international payments to new beneficiaries in high-risk countries within a short timeframe."
          description: "Detailed description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          example: "active"
          description: "Initial status of the rule."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "Critical"
          description: "Severity level when this rule is triggered."
        criteria:
          $ref: "#/components/schemas/FraudRuleCriteria"
        action:
          $ref: "#/components/schemas/FraudRuleAction"

    FraudRuleUpdateRequest:
      type: object
      description: "Fields that can be updated for an existing fraud detection rule."
      properties:
        name:
          type: string
          example: "Revised High Value Transaction Rule"
          description: "Updated name of the fraud rule."
        description:
          type: string
          example: "Revised logic for flagging high value transactions from dormant accounts."
          description: "Updated description of what the rule detects."
        status:
          type: string
          enum: [active, inactive, draft]
          example: "inactive"
          description: "Updated status of the rule."
        severity:
          type: string
          enum: [Low, Medium, High, Critical]
          example: "High"
          description: "Updated severity level."
        criteria:
          $ref: "#/components/schemas/FraudRuleCriteria"
          description: "Updated criteria for the rule."
        action:
          $ref: "#/components/schemas/FraudRuleAction"
          description: "Updated action to take when the rule is triggered."

    FinancialGoal:
      type: object
      required:
        - id
        - name
        - type
        - targetAmount
        - currentAmount
        - targetDate
        - progressPercentage
        - status
        - lastUpdated
      properties:
        id:
          type: string
          format: uuid
          example: "goal_retirement_2050"
          description: "Unique identifier for the financial goal."
        name:
          type: string
          example: "Retirement Fund by 2050"
          description: "Name of the financial goal."
        type:
          type: string
          enum: [retirement, home_purchase, education, large_purchase, debt_reduction, other]
          example: "retirement"
          description: "Type of financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          example: 1000000.00
          description: "The target monetary amount for the goal."
        currentAmount:
          type: number
          format: float
          minimum: 0
          example: 350000.00
          description: "The current amount saved or invested towards the goal."
        targetDate:
          type: string
          format: date
          example: "2050-12-31"
          description: "The target completion date for the goal."
        progressPercentage:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 35.0
          description: "Percentage completion of the goal."
        status:
          type: string
          enum: [on_track, behind_schedule, ahead_of_schedule, completed, paused, cancelled]
          example: "on_track"
          description: "Current status of the goal's progress."
        contributingAccounts:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
          description: "List of account IDs contributing to this goal."
        lastUpdated:
          type: string
          format: date-time
          example: "2024-07-22T19:00:00Z"
          description: "Timestamp when the goal's status or progress was last updated."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive]
          nullable: true
          example: "medium"
          description: "Recommended or chosen risk tolerance for investments related to this goal."
        aiStrategicPlan:
          type: object
          properties:
            planId:
              type: string
              format: uuid
              example: "plan_retirement_2050"
            summary:
              type: string
              example: "The AI projects you are on track to reach your retirement goal, but recommends increasing annual contributions by 5% to account for potential market volatility."
            steps:
              type: array
              items:
                type: object
                properties:
                  title:
                    type: string
                  description:
                    type: string
                  status:
                    type: string
                    enum: [pending, in_progress, completed]
          nullable: true
          description: "AI-generated strategic plan for achieving the goal."
        aiInsights:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "AI-driven insights and recommendations related to this goal."

    GoalCreationRequest:
      type: object
      required:
        - name
        - type
        - targetAmount
        - targetDate
      properties:
        name:
          type: string
          example: "Dream Vacation Fund"
          description: "Name of the new financial goal."
        type:
          type: string
          enum: [retirement, home_purchase, education, large_purchase, debt_reduction, other]
          example: "large_purchase"
          description: "Type of financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          example: 15000.00
          description: "The target monetary amount for the goal."
        targetDate:
          type: string
          format: date
          example: "2026-06-30"
          description: "The target completion date for the goal."
        initialContribution:
          type: number
          format: float
          minimum: 0
          default: 0
          example: 1000.00
          description: "Optional: Initial amount to contribute to the goal."
        contributingAccounts:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
          description: "Optional: List of account IDs initially contributing to this goal."
        generateAIPlan:
          type: boolean
          default: false
          example: true
          description: "If true, AI will automatically generate a strategic plan for the goal."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive]
          nullable: true
          example: "medium"
          description: "Desired risk tolerance for investments related to this goal."

    GoalUpdateRequest:
      type: object
      description: "Fields that can be updated for an existing financial goal."
      properties:
        name:
          type: string
          example: "Revised Retirement Fund Goal"
          description: "Updated name of the financial goal."
        targetAmount:
          type: number
          format: float
          minimum: 0
          example: 1200000.00
          description: "The updated target monetary amount for the goal."
        targetDate:
          type: string
          format: date
          example: "2029-12-31"
          description: "The updated target completion date for the goal."
        contributingAccounts:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
          description: "Updated list of account IDs contributing to this goal."
        status:
          type: string
          enum: [on_track, behind_schedule, ahead_of_schedule, completed, paused, cancelled]
          example: "paused"
          description: "Updated status of the goal's progress."
        generateAIPlan:
          type: boolean
          default: false
          example: true
          description: "If true, AI will recalculate and update the strategic plan for the goal."
        riskTolerance:
          type: string
          enum: [conservative, moderate, aggressive]
          nullable: true
          example: "conservative"
          description: "Updated risk tolerance for investments related to this goal."

    Notification:
      type: object
      required:
        - id
        - type
        - title
        - message
        - severity
        - timestamp
        - read
      properties:
        id:
          type: string
          format: uuid
          example: "notif_security_alert_001"
          description: "Unique identifier for the notification."
        type:
          type: string
          enum: [security, financial_insight, marketing, system_update, transaction]
          example: "security"
          description: "Type of notification."
        title:
          type: string
          example: "Suspicious Login Detected"
          description: "Concise title for the notification."
        message:
          type: string
          example: "A login attempt was made from an unrecognized device/location. Please review your recent activity."
          description: "Full message content of the notification."
        severity:
          type: string
          enum: [low, medium, high, critical]
          example: "critical"
          description: "Severity of the notification (AI-assessed)."
        timestamp:
          type: string
          format: date-time
          example: "2024-07-22T20:00:00Z"
          description: "Timestamp when the notification was generated."
        read:
          type: boolean
          default: false
          example: false
          description: "Indicates if the user has read the notification."
        actionableLink:
          type: string
          format: uri
          nullable: true
          example: "/users/me/security-log"
          description: "Optional deep link for the user to take action related to the notification."
        aiInsightId:
          type: string
          format: uuid
          nullable: true
          example: "insight-dining-overspend-002"
          description: "If applicable, the ID of the AIInsight that generated this notification."

    NotificationSettings:
      type: object
      required:
        - channelPreferences
        - eventPreferences
        - quietHours
      properties:
        channelPreferences:
          type: object
          properties:
            email:
              type: boolean
              example: true
              description: "Receive notifications via email."
            push:
              type: boolean
              example: true
              description: "Receive notifications via push notifications."
            sms:
              type: boolean
              example: false
              description: "Receive notifications via SMS."
            inApp:
              type: boolean
              example: true
              description: "Receive notifications within the application."
          description: "Preferences for notification delivery channels."
        eventPreferences:
          type: object
          properties:
            transactionAlerts:
              type: boolean
              example: true
              description: "Receive alerts for transactions (e.g., large spend, recurring charges)."
            budgetAlerts:
              type: boolean
              example: true
              description: "Receive alerts for budget progress (e.g., nearing limit, over budget)."
            securityAlerts:
              type: boolean
              example: true
              description: "Receive critical security alerts (e.g., suspicious login)."
            aiInsights:
              type: boolean
              example: true
              description: "Receive proactive AI-driven financial insights."
            promotionalOffers:
              type: boolean
              example: false
              description: "Receive promotional offers and marketing communications."
          description: "Preferences for different types of events."
        quietHours:
          type: object
          properties:
            enabled:
              type: boolean
              example: false
              description: "If true, notifications are suppressed during specified quiet hours."
            startTime:
              type: string
              format: time
              example: "23:00"
              description: "Start time for quiet hours (HH:MM format)."
            endTime:
              type: string
              format: time
              example: "07:00"
              description: "End time for quiet hours (HH:MM format)."
          description: "Settings for notification quiet hours."

    NotificationSettingsUpdateRequest:
      type: object
      description: "Fields that can be updated for user notification settings."
      properties:
        channelPreferences:
          type: object
          properties:
            email:
              type: boolean
              example: true
            push:
              type: boolean
              example: true
            sms:
              type: boolean
              example: true
            inApp:
              type: boolean
              example: true
          description: "Updated preferences for notification delivery channels. Only provided fields are updated."
        eventPreferences:
          type: object
          properties:
            transactionAlerts:
              type: boolean
              example: true
            budgetAlerts:
              type: boolean
              example: true
            securityAlerts:
              type: boolean
              example: true
            aiInsights:
              type: boolean
              example: true
            promotionalOffers:
              type: boolean
              example: false
          description: "Updated preferences for different types of events. Only provided fields are updated."
        quietHours:
          type: object
          properties:
            enabled:
              type: boolean
              example: true
            startTime:
              type: string
              format: time
              example: "22:00"
            endTime:
              type: string
              format: time
              example: "08:00"
          description: "Updated settings for notification quiet hours. Only provided fields are updated."

    MarketplaceProduct:
      type: object
      required:
        - id
        - name
        - provider
        - category
        - description
        - price
        - rating
        - imageUrl
        - aiPersonalizationScore
      properties:
        id:
          type: string
          format: uuid
          example: "prod_home_insurance_quantum"
          description: "Unique identifier for the marketplace product."
        name:
          type: string
          example: "Quantum Home Protector Insurance"
          description: "Name of the product/service."
        provider:
          type: string
          example: "Quantum Insurance Co."
          description: "Provider or vendor of the product/service."
        category:
          type: string
          enum: [loans, insurance, credit_cards, investments, budgeting_tools, smart_home, travel, education, health]
          example: "insurance"
          description: "Category of the product/service."
        description:
          type: string
          example: "AI-powered home insurance with dynamic pricing and risk assessment. Highly personalized for your property."
          description: "Detailed description of the product/service."
        price:
          type: string
          example: "Starting at $50/month"
          description: "Pricing information (can be a range or fixed text)."
        rating:
          type: number
          format: float
          minimum: 0
          maximum: 5
          example: 4.8
          description: "Average user rating for the product (0-5)."
        imageUrl:
          type: string
          format: uri
          nullable: true
          example: "https://demobank.com/images/home_insurance.png"
          description: "URL to an image representing the product."
        aiPersonalizationScore:
          type: number
          format: float
          minimum: 0
          maximum: 1
          example: 0.95
          description: "AI's score for how well this product is personalized to the user (0-1)."
        aiRecommendationReason:
          type: string
          nullable: true
          example: "Based on your property value and location, this product offers superior coverage and savings compared to market average."
          description: "AI-generated explanation for recommending this product."
        offerDetails:
          type: object
          nullable: true
          properties:
            type:
              type: string
              enum: [discount, special_rate, free_trial]
            value:
              type: string
              example: "10% off first year premiums for users."
            code:
              type: string
              nullable: true
              description: "Optional redemption code."
          description: "Details of any special offers associated with the product."
        productUrl:
          type: string
          format: uri
          nullable: true
          example: "https://quantuminsurance.com/home-protector"
          description: "Direct URL to the product on the provider's website."

    ProductImpactSimulation:
      type: object
      required:
        - productId
        - simulationId
        - narrativeSummary
        - keyImpacts
      properties:
        productId:
          type: string
          format: uuid
          example: "prod_personal_loan_001"
          description: "The ID of the marketplace product being simulated."
        simulationId:
          type: string
          format: uuid
          example: "sim_prod_loan_123"
          description: "Unique identifier for the simulation performed."
        narrativeSummary:
          type: string
          example: "Taking a $20,000 personal loan for 48 months at an interest rate of 7.5% would result in a monthly payment of approximately $483. This will increase your monthly expenses but consolidate existing higher-interest debts, leading to projected savings over the long term."
          description: "A natural language summary of the simulation's results for this product."
        keyImpacts:
          type: array
          items:
            type: object
            properties:
              metric:
                type: string
                example: "Monthly Cash Flow Impact"
              value:
                type: string
                example: "-$483.00"
              severity:
                type: string
                enum: [low, medium, high]
          description: "Key financial impacts identified by the AI (e.g., on cash flow, debt-to-income)."
        aiRecommendations:
          type: array
          items:
            $ref: "#/components/schemas/AIInsight"
          nullable: true
          description: "Actionable recommendations or advice related to the product and its impact."
        projectedAmortizationSchedule:
          type: array
          items:
            type: object
            properties:
              month:
                type: integer
              payment:
                type: number
                format: float
              interest:
                type: number
                format: float
              principal:
                type: number
                format: float
              remainingBalance:
                type: number
                format: float
          nullable: true
          description: "Projected amortization schedule for loan products."

    StatementDownloadInfo:
      type: object
      required:
        - statementId
        - accountId
        - period
        - downloadUrls
      properties:
        statementId:
          type: string
          example: "stmt_acc123_202407"
          description: "Unique identifier for the statement."
        accountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The account ID the statement belongs to."
        period:
          type: string
          example: "July 2024"
          description: "The period covered by the statement."
        downloadUrls:
          type: object
          properties:
            pdf:
              type: string
              format: uri
              example: "https://demobank.com/statements/acc123_202407.pdf?sig=..."
              description: "Signed URL to download the statement in PDF format."
            csv:
              type: string
              format: uri
              example: "https://demobank.com/statements/acc123_202407.csv?sig=..."
              description: "Signed URL to download the statement in CSV format."
          description: "Map of available download URLs for different formats."

    OverdraftSettings:
      type: object
      required:
        - accountId
        - enabled
        - feePreference
      properties:
        accountId:
          type: string
          example: "acc_chase_checking_4567"
          description: "The account ID these overdraft settings apply to."
        enabled:
          type: boolean
          example: true
          description: "If true, overdraft protection is enabled."
        protectionLimit:
          type: number
          format: float
          nullable: true
          example: 500.00
          description: "The maximum amount that can be covered by overdraft protection."
        linkToSavings:
          type: boolean
          nullable: true
          example: true
          description: "If true, attempts to draw funds from a linked savings account."
        linkedSavingsAccountId:
          type: string
          nullable: true
          example: "acc_chase_savings_1234"
          description: "The ID of the linked savings account, if `linkToSavings` is true."
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me_first]
          example: "always_pay"
          description: "User's preference for how overdraft fees are handled or if transactions should be declined."

    OverdraftSettingsUpdateRequest:
      type: object
      description: "Fields for updating overdraft protection settings."
      properties:
        enabled:
          type: boolean
          example: false
          description: "Enable or disable overdraft protection."
        protectionLimit:
          type: number
          format: float
          nullable: true
          example: 750.00
          description: "New maximum amount for overdraft protection. Set to null to remove limit."
        linkToSavings:
          type: boolean
          nullable: true
          example: false
          description: "Enable or disable linking to a savings account for overdraft coverage."
        linkedSavingsAccountId:
          type: string
          nullable: true
          example: "acc_new_savings_5678"
          description: "New ID of the linked savings account, if `linkToSavings` is true. Set to null to unlink."
        feePreference:
          type: string
          enum: [always_pay, decline_if_over_limit, ask_me_first]
          example: "decline_if_over_limit"
          description: "New preference for how overdraft fees are handled."

    LinkAccountRequest:
      type: object
      required:
        - institutionName
        - countryCode
      properties:
        institutionName:
          type: string
          example: "Bank of America"
          description: "Name of the financial institution to link."
        countryCode:
          type: string
          pattern: '^[A-Z]{2}$'
          example: "US"
          description: "Two-letter ISO country code of the institution."
        providerIdentifier:
          type: string
          nullable: true
          description: "Optional: Specific identifier for a third-party linking provider (e.g., 'plaid', 'finicity')."
        redirectUri:
          type: string
          format: uri
          nullable: true
          description: "Optional: URI to redirect the user after completing the external authentication flow."

    LinkAccountResponse:
      type: object
      required:
        - linkSessionId
        - authUri
        - status
      properties:
        linkSessionId:
          type: string
          format: uuid
          example: "link_session_xyz789"
          description: "Unique session ID for the account linking process."
        authUri:
          type: string
          format: uri
          example: "https://auth.plaid.com/oauth/initiate?client_id=...&redirect_uri=..."
          description: "The URI to redirect the user to complete authentication with the external institution."
        status:
          type: string
          enum: [pending_user_action, completed, failed]
          example: "pending_user_action"
          description: "Current status of the linking process."
        message:
          type: string
          nullable: true
          example: "Please redirect user to the provided URI to complete authentication."
          description: "A descriptive message regarding the next steps." 
---
