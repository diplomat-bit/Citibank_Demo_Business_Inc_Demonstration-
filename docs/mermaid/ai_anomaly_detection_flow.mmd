graph TD
    subgraph "Financial Data Stream Ingestion"
        A[Transaction Stream Data]
        B[Account Activity Stream]
        C[Security Event Stream]
        D[Corporate Card Activity]
    end

    A --> E[Data Preprocessing Normalization]
    B --> E
    C --> E
    D --> E

    subgraph "AI Anomaly Detection System"
        E --> F[AI Anomaly Detection Engine]
        F -- AI Model Inference --> G[Anomaly Identification Logic]
        G -- Detects Anomalies --> H[Generate FinancialAnomaly Record]
        H -- Enrich with AI Explanation --> H
    end

    H -- Store New Anomaly StatusNew --> I[Anomaly Persistence Store]
    I --> J[Anomaly Notification Service]

    subgraph "Anomaly Review and Resolution Workflow"
        J -- Send Alert --> K[Security Analyst Portal]
        K -- View Anomaly Details --> L[Anomaly Management Dashboard]
        L -- Request AI Context --> M[AI Assistant QueryInput]
        M -- Provides Insights --> N[AI Assistant ResponseDetails]
        N --> L

        L -- Analyst Decision --> O{Anomaly Action Required}
        O -- Resolve Anomaly --> P[Execute ResolveAnomaly Mutation]
        O -- Dismiss Anomaly --> Q[Execute DismissAnomaly Mutation]
        O -- Trigger Manual Investigation --> R[Initiate Manual Investigation Process]
        O -- Automated Action Suggestion --> S[Trigger AutomatedActionableItem]

        P --> T[Update Anomaly StatusResolved]
        Q --> U[Update Anomaly StatusDismissed FalsePositive]
        R --> L
        S --> V[System Performs Action Automation]
    end

    T --> W[Generate AuditLog EntryResolution]
    U --> X[Generate AuditLog EntryDismissal]
    V --> Y[Generate AuditLog EntryAutomatedAction]

    W --> Z[Centralized Audit Log]
    X --> Z
    Y --> Z
    I -- All Anomaly Changes --> Z

    style H fill:#f9f,stroke:#333,stroke-width:2px
    style K fill:#bbf,stroke:#333,stroke-width:2px
    style M fill:#ccf,stroke:#333,stroke-width:2px
    style S fill:#cfc,stroke:#333,stroke-width:2px

    note right of Z
        This diagram illustrates the end-to-end process of
        AI driven financial anomaly detection, analysis,
        and resolution within the Demo Bank application.
        Node labels avoid parentheses as per rubric.
        Key entities referenced: FinancialAnomaly, AIInsight,
        Transaction, User, AuditLogEntry, ActionableItem.
    end